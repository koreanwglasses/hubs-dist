{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/systems/userinput/paths.js","webpack:///./src/utils/configs.js","webpack:///./src/utils/name-generation.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/three-utils.js","webpack:///./src/assets/stylesheets/media-browser.scss?0be5","webpack:///./src/utils/media-url-utils.js","webpack:///./src/utils/async-utils.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/loaders/HubsBasisTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/history.js","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/react-components/if-feature.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/assets/stylesheets/entry.scss?b35b","webpack:///./src/assets/stylesheets/settings-menu.scss?dfca","webpack:///./src/assets/stylesheets/ui-root.scss?bfe5","webpack:///./src/assets/stylesheets/room-info-dialog.scss?711f","webpack:///./src/assets/stylesheets/presence-log.scss?bad0","webpack:///./src/utils/focus-utils.js","webpack:///./src/assets/stylesheets/preferences-screen.scss?19f0","webpack:///./src/object-types.js","webpack:///./src/assets/stylesheets/2d-hud.scss?803e","webpack:///./src/assets/stylesheets/invite-dialog.scss?d073","webpack:///./src/utils/avatar-utils.js","webpack:///./src/systems/camera-system.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/app-logo.png","webpack:///./src/assets/images/company-logo.png","webpack:///./src/assets/images/editor-logo.png","webpack:///./src/utils/permissions-utils.js","webpack:///./src/assets/stylesheets/client-info-dialog.scss?2a21","webpack:///./src/telemetry.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/assets/stylesheets/presence-list.scss?0256","webpack:///./src/assets/stylesheets/message-entry.scss?0102","webpack:///./src/assets/models/DuckyMesh.glb","webpack:///./src/utils/fullscreen.js","webpack:///./src/utils/next-tick.js","webpack:///./src/assets/stylesheets/room-settings-dialog.scss?5fe3","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/assets/stylesheets/profile.scss?02af","webpack:///./src/assets/stylesheets/tweet-dialog.scss?1649","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/assets/stylesheets/sign-in-dialog.scss?f596","webpack:///./src/utils/theme.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/components/virtual-gamepad-controls.css?9949","webpack:///./src/assets/stylesheets/tip.scss?ea93","webpack:///./src/constants.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/react-components/state-link.js","webpack:///./src/assets/stylesheets/create-object-dialog.scss?63e4","webpack:///./src/assets/stylesheets/link-dialog.scss?7296","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/utils/component-utils.js","webpack:///./src/utils/detect-touchscreen.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/utils/scene-url-utils.js","webpack:///./src/assets/waternormals.jpg","webpack:///./src/assets/stylesheets/preload-overlay.scss?4ec6","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/loaders/basis_transcoder.wasm","webpack:///./src/loaders/basis_transcoder.worker.js","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/App.js","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/assets/stylesheets/change-scene-dialog.scss?0c1a","webpack:///./src/assets/stylesheets/oauth-dialog.scss?c704","webpack:///./src/webxr-bypass-hacks.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/react-components/unless-feature.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/easing.js","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/utils/logging.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/utils/webgl.js","webpack:///./src/assets/models/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/sfx/emoji.mp3","webpack:///./src/assets/stylesheets/avatar-preview.scss?c714","webpack:///./src/systems/scene-preview-camera-system.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/assets/stylesheets/chat-command-help.scss?592c","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/assets/images/send_message.svgi","webpack:///./src/assets/models/LoadingEnvironment.glb","webpack:///./src/assets/stylesheets/promote-client-dialog.scss?a2eb","webpack:///./src/assets/stylesheets/close-room-dialog.scss?83fa","webpack:///./src/assets/stylesheets/help-dialog.scss?21ba","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/components/simple-water.js","webpack:///./src/components/particle-emitter.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/assets/stylesheets/loader.scss?288f","webpack:///./src/assets/images/giphy_logo.png","webpack:///./src/assets/images/emojis/emoji_0.png","webpack:///./src/assets/images/emojis/emoji_1.png","webpack:///./src/assets/images/emojis/emoji_2.png","webpack:///./src/assets/images/emojis/emoji_3.png","webpack:///./src/assets/images/emojis/emoji_4.png","webpack:///./src/assets/images/emojis/emoji_5.png","webpack:///./src/assets/images/emojis/emoji_6.png","webpack:///./src/assets/models/emojis/emoji_0.glb","webpack:///./src/assets/models/emojis/emoji_1.glb","webpack:///./src/assets/models/emojis/emoji_2.glb","webpack:///./src/assets/models/emojis/emoji_3.glb","webpack:///./src/assets/models/emojis/emoji_4.glb","webpack:///./src/assets/models/emojis/emoji_5.glb","webpack:///./src/assets/models/emojis/emoji_6.glb","webpack:///./src/assets/images/media-error.gif","webpack:///./src/assets/images/audio.png","webpack:///./src/assets/camera_tool.glb","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/add-owner.png","webpack:///./src/assets/images/remove-owner.png","webpack:///./src/assets/images/mobile_screen_entry.svgi","webpack:///./src/assets/images/desktop_screen_entry.svgi","webpack:///./src/assets/images/generic_vr_entry.svgi","webpack:///./src/assets/images/gearvr_entry.svgi","webpack:///./src/assets/images/daydream_entry.svgi","webpack:///./src/assets/stylesheets/avatar-url-dialog.scss?3a38","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/assets/stylesheets/feedback-dialog.scss?48e3","webpack:///./src/assets/stylesheets/leave-room-dialog.scss?9cfa","webpack:///./src/assets/images/spawn_message.svgi","webpack:///./src/assets/images/discord.svgi","webpack:///./src/assets/images/hmd-icon.svgi","webpack:///./src/assets/stylesheets/avatar-editor.scss?b806","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/assets/images/spawn.svgi","webpack:///./src/assets/images/share_screen_active.svgi","webpack:///./src/assets/images/share_screen.svgi","webpack:///./src/assets/images/share_camera_active.svgi","webpack:///./src/assets/images/share_camera.svgi","webpack:///./src/assets/images/pen.svgi","webpack:///./src/assets/images/pen_active.svgi","webpack:///./src/assets/images/camera.svgi","webpack:///./src/assets/images/camera_active.svgi","webpack:///./src/assets/images/mic-0.svgi","webpack:///./src/assets/images/mic-1.svgi","webpack:///./src/assets/images/mic-2.svgi","webpack:///./src/assets/images/mic-3.svgi","webpack:///./src/assets/images/mic-4.svgi","webpack:///./src/assets/images/mic-5.svgi","webpack:///./src/assets/images/mic-6.svgi","webpack:///./src/assets/images/mic-7.svgi","webpack:///./src/assets/images/mic-off-0.svgi","webpack:///./src/assets/images/mic-off-1.svgi","webpack:///./src/assets/images/mic-off-2.svgi","webpack:///./src/assets/images/mic-off-3.svgi","webpack:///./src/assets/images/mic-off-4.svgi","webpack:///./src/assets/images/mic-off-5.svgi","webpack:///./src/assets/images/mic-off-6.svgi","webpack:///./src/assets/images/mic-off-7.svgi","webpack:///./src/assets/stylesheets/spectating-label.scss?4b63","webpack:///./src/systems/render-manager/unlit-batch.vert","webpack:///./src/systems/render-manager/unlit-batch.frag","webpack:///./src/assets/images/spritesheets/sprite-system-action-spritesheet.png","webpack:///./src/assets/images/spritesheets/sprite-system-notice-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/utils/debug-log.js","webpack:///./src/assets/stylesheets/hub.scss?ad84","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/scale-in-screen-space.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/fader.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/visibility-on-content-types.js","webpack:///./src/components/hide-when-pinned-and-forbidden.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/set-active-camera.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/components/billboard.js","webpack:///./src/components/periodic-full-syncs.js","webpack:///./src/components/set-max-resolution.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/auto-pixel-ratio.js","webpack:///./src/systems/listed-media.js","webpack:///./src/systems/linked-media.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/owned-object-cleanup-timeout.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/emoji.js","webpack:///./src/components/emoji-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/utils/mirror-utils.js","webpack:///./src/components/media-views.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/mirror-media-button.js","webpack:///./src/components/close-mirrored-media-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/refresh-media-button.js","webpack:///./src/components/tweet-media-button.js","webpack:///./src/components/remix-avatar-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/scale-button.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/cylinder-texture.js","webpack:///./src/components/tags.js","webpack:///./src/components/hubs-text.js","webpack:///./src/components/inspect-button.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/state-route.js","webpack:///./src/react-components/promote-client-dialog.js","webpack:///./src/react-components/client-info-dialog.js","webpack:///./src/react-components/loader.js","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/svgi.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/react-components/change-scene-dialog.js","webpack:///./src/react-components/avatar-url-dialog.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/react-components/in-app-browser-dialog.js","webpack:///./src/react-components/room-settings-dialog.js","webpack:///./src/react-components/close-room-dialog.js","webpack:///./src/systems/tips.js","webpack:///./src/react-components/tip.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webassembly-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/feedback-dialog.js","webpack:///./src/react-components/help-dialog.js","webpack:///./src/react-components/leave-room-dialog.js","webpack:///./src/utils/media-sorting.js","webpack:///./src/react-components/object-info-dialog.js","webpack:///./src/react-components/oauth-dialog.js","webpack:///./src/react-components/tweet-dialog.js","webpack:///./src/react-components/lobby-chat-box.js","webpack:///./src/react-components/entry-start-panel.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/in-world-chat-box.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/react-components/mic-level-widget.js","webpack:///./src/react-components/number-range-selector.js","webpack:///./src/react-components/preference-list-item.js","webpack:///./src/react-components/preferences-screen.js","webpack:///./src/react-components/output-level-widget.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/video-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/object-list.js","webpack:///./src/react-components/settings-menu.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/spectating-label.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/idle-detector.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/cursor-toggling-system.js","webpack:///./src/systems/physics-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/drawing-menu-system.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/render-manager/hubs-batch-raw-uniform-group.js","webpack:///./src/systems/render-manager-system.js","webpack:///./src/systems/interaction-sfx-system.js","webpack:///./src/utils/theme-sprites.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/waypoint-system.js","webpack:///./src/utils/mat4-pool.js","webpack:///./src/utils/get-current-player-height.js","webpack:///./src/systems/character-controller-system.js","webpack:///./src/systems/cursor-pose-tracking.js","webpack:///./src/systems/scale-in-screen-space.js","webpack:///./src/systems/audio-settings-system.js","webpack:///./src/systems/enter-vr-button-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/components/tools/pen-laser.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/components/body-helper.js","webpack:///./src/components/shape-helper.js","webpack:///./src/network-schemas.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/utils/threejs-allocation-patches.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","5","exports","module","l","e","Promise","resolve","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","oe","err","console","error","jsonpArray","window","oldJsonpFunction","slice","paths","actions","log","toggleScreenShare","snapRotateLeft","snapRotateRight","angularVelocity","logDebugFrame","logInteractionState","debugUserInput","describeCurrentMasks","cameraDelta","lobbyCameraDelta","characterAcceleration","dCharSpeed","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFly","toggleUI","waypointDeltaDistance","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","cursor","right","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","wake","left","pen","remove","rightHand","matrix","switchDrawMode","startTeleport","stopTeleport","thumb","index","middleRingPinky","leftHand","camera","exitMirror","startInspecting","stopInspecting","inspectZoom","inspectPanY","resetInspectView","nextCameraMode","spawnEmoji0","spawnEmoji1","spawnEmoji2","spawnEmoji3","spawnEmoji4","spawnEmoji5","spawnEmoji6","haptics","actuators","device","mouse","coords","movementXY","buttonLeft","buttonRight","buttonMiddle","wheel","smartMouse","cursorPose","shouldMoveCamera","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","delta","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","anything","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","map","Map","k","path","this","toLowerCase","set","gamepad","gamepadIndex","button","buttonIndex","pressed","touched","axis","axisIndex","xbox","v","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","side","axes","wmrController","wmr","_objectSpread","grip","menu","joystick","vive","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3__","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3___default","configs","isAdmin","forEach","x","el","document","querySelector","getAttribute","process","__webpack_public_path__","pdfjs","GlobalWorkerOptions","workerSrc","AVAILABLE_INTEGRATIONS","APP_CONFIG","theme","colorVars","style","createElement","innerHTML","join","head","prepend","features","feature","featureName","localDevImages","image","imageName","cssUrl","url","images","link","linkName","defaultValue","links","setIsAdmin","_isAdmin","adjectives","nouns","generateHubName","randItem","Math","floor","random","charAt","toUpperCase","hasReticulumServer","RETICULUM_SERVER","isLocalClient","location","host","resolverLink","directReticulumHostAndPort","reticulumMeta","invalidatedReticulumMetaThisSession","getReticulumFetchUrl","absolute","port","href","getReticulumMeta","_getReticulumMeta","arguments","version","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x5","phxHostOverride","URLSearchParams","search","qs","RETICULUM_SOCKET_SERVER","URL","protocol","getDirectReticulumFetchUrl","warn","invalidateReticulumMeta","_invalidateReticulumMeta","connectToReticulum","_connectToReticulum","debug","params","socketClass","Socket","getNewSocketUrl","_ref3","refreshDirectReticulumHostAndPort","RETICULUM_SOCKET_PROTOCOL","socketUrl","socketSettings","logger","kind","msg","socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_createAndRedirectToNewHub","sceneId","createUrl","hub","scene_id","Store","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","getPresenceEntryForSession","presences","sessionId","presence","entries","find","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","receive","status","discordBridgesForPresences","channels","values","discordBridges","Array","b","__webpack_exports__","getLastWorldPosition","getLastWorldQuaternion","disposeNode","setMatrixWorld","cloneObject3D","findNode","interpolateAffine","squareDistanceBetween","affixToWorldUp","calculateCameraTransformForWaypoint","calculateViewingDistance","rotateInPlaceAroundWorldUp","childMatch","tempVector3","THREE","Vector3","Quaternion","src","target","updateMatrices","setFromMatrixPosition","matrixWorld","decompose","disposeMaterial","mtrl","dispose","lightMap","bumpMap","normalMap","specularMap","envMap","node","Mesh","geometry","material","materialArray","MeshFaceMaterial","MultiMaterial","materials","IDENTITY","Matrix4","identity","object3D","matrixIsModified","applyMatrix","copy","parent","getInverse","multiply","position","quaternion","scale","childrenNeedMatrixWorldUpdate","cloneAnimationClip","sourceAnimationClip","cloneUUIDLookup","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","uuid","objectName","objectIndex","propertyName","propertyIndex","PropertyBinding","parseTrackName","undefined","clonedUUID","clonedKeyframeTrack","clone","cloneKeyframeTrack","AnimationClip","duration","source","preserveUUIDs","cloneLookup","parallelTraverse","a","children","sourceNode","clonedNode","traverse","animations","animationClip","isMesh","boundsTree","isSkinnedMesh","sourceBones","skeleton","bones","sourceBone","has","Error","bindMatrix","root","pred","nodes","concat","mat4","end","start","interpolated","startMat4","endMat4","progress","outMat4","setFromRotationMatrix","extractRotation","slerp","lerpVectors","setFromMatrixColumn","setFromMatrixScale","compose","posA","posB","objA","objB","distanceToSquared","inRotationMat4","inForward","outForward","outSide","worldUp","inMat4Copy","inMat4","multiplyScalar","sub","projectOnVector","normalize","crossVectors","makeBasis","setPosition","upAffixedCameraTransform","upAffixedWaypointTransform","detachFromWorldUp","cameraTransform","waypointTransform","fov","aspect","box","center","vrMode","halfYExtents","max","abs","y","min","halfXExtents","halfVertFOV","degToRad","halfHorFOV","atan","tan","length1","length2","length3","z","startRotation","endRotation","theta","makeRotationY","childInverse","newParentMatrix","child","multiplyMatrices","media-browser","mediaBrowser","facets","facet","pager","header-center","headerCenter","header-left","headerLeft","engine-attribution","engineAttribution","engine-attribution-contents","engineAttributionContents","favorites-header","favoritesHeader","search-clear","searchClear","search-icon","searchIcon","header","no-search","noSearch","nav","nav-right-pad","navRightPad","nav-source","navSource","nav-source-selected","navSourceSelected","nav-scroll-arrow","navScrollArrow","tiles","tile","info","attribution","creator","publisher","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","favorite","tile-actions","tileActions","create-tile","createTile","create-avatar-tile","createAvatarTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-right","headerRight","create-button","createButton","create-link","createLink","empty-string","emptyString","media-browser-inline","mediaBrowserInline","nonCorsProxyDomains","NON_CORS_PROXY_DOMAINS","split","CORS_PROXY_SERVER","hostname","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","basis","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","scaledThumbnailUrlFor","width","height","extension","pathParts","extensionCandidate","pop","thumbnailUrl","THUMBNAIL_SERVER","urlHostname","isNonCorsProxyDomain","domain","endsWith","proxiedUrlFor","startsWith","getAbsoluteHref","baseUrl","relativeUrl","getAbsoluteUrl","getCustomGLTFParserURLResolver","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","substring","dataUrlRegex","guessContentType","matches","exec","originIsHubsServer","isHubsServer","origin","hubsSceneRegex","hubsAvatarRegex","_wrapRegExp","id","hubsRoomRegex","isLocalHubsUrl","isHubsSceneUrl","isLocalHubsSceneUrl","isHubsAvatarUrl","_ref4","isLocalHubsAvatarUrl","_ref5","_x6","isHubsRoomUrl","_ref6","_x7","idForAvatarUrl","match","groups","waitForEvent","waitForDOMContentLoaded","eventName","eventObj","addEventListener","once","readyState","HubsTextureLoader","constructor","manager","DefaultLoadingManager","load","onLoad","onProgress","texture","Texture","loadTextureAsync","catch","_this","imageLoader","createImageBitmap","ImageBitmapLoader","flipY","ImageLoader","setCrossOrigin","crossOrigin","setPath","cacheKey","resolveURL","loader","reject","loadAsync","Cache","needsUpdate","onUpdate","close","BasisTextureLoader","Loader","transcoderPath","transcoderBinary","transcoderPending","workerLimit","workerPool","workerNextTaskID","workerConfig","format","astcSupported","etcSupported","dxtSupported","pvrtcSupported","returnBuffer","assign","setTranscoderPath","setWorkerLimit","detectSupport","renderer","config","extensions","BASIS_FORMAT","cTFASTC_4x4","cTFBC3","cTFPVRTC1_4_RGBA","cTFETC1","FileLoader","ranDetect","AFRAME","scenes","setResponseType","buffer","_createTexture","worker","taskID","texturePending","_getWorker","_worker","_callbacks","_taskCosts","byteLength","_taskLoad","postMessage","type","message","mipmaps","hasAlpha","CompressedTexture","RGBA_ASTC_4x4_Format","cTFBC1","DXT_FORMAT_MAP","UnsignedByteType","RGB_ETC1_Format","cTFPVRTC1_4_RGB","RGB_PVRTC_4BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","minFilter","LinearFilter","LinearMipmapLinearFilter","magFilter","generateMipmaps","finally","_initTranscoder","binaryLoader","binaryContent","transcoderWasmFile","BasisWorker","onmessage","sort","terminate","cTFETC2","cTFBC4","cTFBC5","cTFBC7_M6_OPAQUE_ONLY","cTFBC7_M5","cTFATC_RGB","cTFATC_RGBA_INTERPOLATED_ALPHA","cTFRGBA32","cTFRGB565","cTFBGR565","cTFRGBA4444","DXT_FORMAT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","linkify","Linkify","tlds","mediaAPIEndpoint","isMobile","utils","isMobileVR","resolveUrlCache","getDefaultResolveQuality","is360","useLowerQuality","resolveUrl","media_utils_asyncToGenerator","quality","bustCache","resultPromise","Content-Type","media","response","ok","statusText","upload","file","desiredContentType","formData","FormData","append","getDirectMediaAPIEndpoint","coerceToUrl","urlOrText","indexOf","addMedia","template","contentOrigin","contentSubtype","fitToBox","animate","mediaOptions","networked","parentEl","linkedEl","scene","entity","setAttribute","templateBody","importNode","content","firstElementChild","cloneNode","elAttrs","attributes","attrIdx","appendChild","needsToBeUploaded","File","els","querySelectorAll","components","getLatestMediaVersionOfSrc","fileIsOwned","matrixNeedsUpdate","orientation","reader","FileReader","onload","view","DataView","getUint16","offset","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","srcUrl","searchParams","meta","access_token","fileId","file_id","uploadPromotionTokens","promotionToken","promotion_token","MediaStream","NAF","clientId","detail","objectType","objectTypeForOriginAndContentType","contentType","emit","cloneMedia","sourceEl","ObjectContentOrigins","injectCustomShaderChunks","obj","vertexRegex","fragRegex","shaderUniforms","batchManagerSystem","systems","mapMaterials","hubs_InjectedCustomShaderChunks","validMaterials","includes","classList","contains","batchingEnabled","meshToEl","newMaterial","onBeforeCompile","shader","vertexShader","uniforms","hubs_IsFrozen","hubs_EnableSweepingEffect","hubs_SweepParams","hubs_InteractorOnePos","hubs_InteractorTwoPos","hubs_HighlightInteractorOne","hubs_HighlightInteractorTwo","hubs_Time","vlines","vindex","findIndex","line","unshift","flines","fragmentShader","findex","mediaHighlightFrag","getPromotionTokenForFile","mediaPos","addAndArrangeMedia","snapCount","mirrorOrientation","distance","pos","rotation","rotateY","PI","idx","cos","sin","localToWorld","visible","handler","dur","from","to","easing","eventType","textureLoader","createImageTexture","_createImageTexture","filter","Image","canvas","ctx","getContext","drawImage","CanvasTexture","encoding","sRGBEncoding","anisotropy","basisTextureLoader","HubsBasisTextureLoader","createBasisTexture","addMeshScaleAnimation","mesh","initialScale","onComplete","step","lastValue","anim","animatables","Number","MIN_VALUE","elasticity","loop","round","targets","complete","anime","closeExistingMediaMirror","mirrorTarget","firstChild","removeChild","lang","messages","_configs__WEBPACK_IMPORTED_MODULE_0__","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_1__","navigatorLang","navigator","languages","language","userLanguage","localeData","_messages","en","translations","configTranslations","messageKey","_match","subkey","reduce","acc","entry","pushOrUpdateHistory","history","newPathname","newSearch","newLength","__historyLength","__duplicate","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","withSlug","SOUND_HOVER_OR_GRAB","SOUND_THAW","SOUND_PEN_STOP_DRAW","SOUND_PEN_UNDO_DRAW","SOUND_PEN_CHANGE_COLOR","SOUND_TOGGLE_MIC","SOUND_TELEPORT_START","SOUND_TELEPORT_END","SOUND_WAYPOINT_START","SOUND_WAYPOINT_END","SOUND_SNAP_ROTATE","SOUND_SPAWN_PEN","SOUND_PEN_START_DRAW","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","SOUND_ENTER_SCENE","SOUND_QUACK","SOUND_SPECIAL_QUACK","SOUND_CHAT_MESSAGE","SOUND_FREEZE","SOUND_PIN","SOUND_MEDIA_LOADING","SOUND_MEDIA_LOADED","SOUND_CAMERA_TOOL_COUNTDOWN","SOUND_PREFERENCE_MENU_SELECT","SOUND_SPAWN_EMOJI","SoundEffectsSystem","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","_assets_sfx_emoji_mp3__WEBPACK_IMPORTED_MODULE_15__","_assets_sfx_emoji_mp3__WEBPACK_IMPORTED_MODULE_15___default","_utils_three_utils__WEBPACK_IMPORTED_MODULE_16__","soundEnum","SOUND_PREFERENCE_MENU_HOVER","pendingAudioSourceNodes","pendingPositionalAudios","positionalAudiosStationary","positionalAudiosFollowingObject3Ds","audioContext","AudioContext","audioListener","AudioListener","add","evt","cameraEl","getObject3D","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","URL_SPAWN_EMOJI","loading","audioBufferPromise","arrayBuffer","decodeAudioData","sounds","sound","audioBuffer","enqueueSound","createBufferSource","destination","enqueuePositionalSound","positionalAudio","preferences","audioOutputMode","PositionalAudio","Audio","setBuffer","playPositionalSoundAt","matrixWorldNeedsUpdate","playPositionalSoundFollowing","playSoundOneShot","playSoundLooped","playSoundLoopedWithGain","gain","createGain","stopSoundNode","stop","stopPositionalAudio","inPositionalAudio","pendingIndex","isPlaying","tick","pendingPositionalAudio","play","positionalAudioAndObject3D","qsTruthy","qsGet","param","val","IfFeature","_utils_configs__WEBPACK_IMPORTED_MODULE_0__","props","DialogContainer","Component","super","_defineProperty","closable","currentTarget","onClose","onKeyDown","onContainerClicked","componentDidMount","componentWillUnmount","removeEventListener","render","react__WEBPACK_IMPORTED_MODULE_0___default","className","classNames","noOverlay","onClick","wide","allowOverflow","additionalClass","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_4__","icon","faTimes","title","PropTypes","isRequired","func","bool","string","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","Consumer","cloneElement","onMouseEnter","playSound","propTypes","entry-button-secondary","entryButtonSecondary","entry-panel","entryPanel","button-container","buttonContainer","secondary-action-button","secondaryActionButton","entry-button","entryButton","action-button","actionButton","collapse-button","collapseButton","favorite-button","favoriteButton","back","lobby-label","lobbyLabel","label","rename-button","renameButton","wide-button","wideButton","screen-sharing","screenSharing","checkbox","entry-dialog","entryDialog","favorited","bolded","subtitle","room-subtitle","roomSubtitle","lobby","profile-icon","profileIcon","button-subtitle","buttonSubtitle","audio-loader","audioLoader","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","secondary","secondary-button","secondaryButton","bottom-links-main","bottomLinksMain","bottom-links","bottomLinks","close-button","closeButton","settings-menu-drop","settingsMenuDrop","attach-point","attachPoint","contents","rows","row","row-no-margin","rowNoMargin","row-header","rowHeader","list-item","listItem","list-item-link","listItemLink","settings-menu-overlay-wrap","settingsMenuOverlayWrap","settings-menu-overlay","settingsMenuOverlay","settings-row","settingsRow","secondary-link-item","secondaryLinkItem","ui","ui-dialog","uiDialog","ui-interactive","uiInteractive","object-list","objectList","presence-info","presenceInfo","corner-button","cornerButton","nag-corner-button","nagCornerButton","choose-scene-button","chooseSceneButton","leave-button","leaveButton","interstitial","invite-tip","inviteTip","streaming-tip","streamingTip","streaming-tip-attach-point","streamingTipAttachPoint","streaming-tip-close","streamingTipClose","streaming-tip-message","streamingTipMessage","ui-dialog-box-contents","uiDialogBoxContents","backgrounded","in-room-favorite-button","inRoomFavoriteButton","help-button","helpButton","occupant-count","occupantCount","presence-info-selected","presenceInfoSelected","camera-mode-exit-button","cameraModeExitButton","corner-button-selected","cornerButtonSelected","invite-tip-attach-point","inviteTipAttachPoint","avatar-editor","avatarEditor","room-info","roomInfo","scene-screenshot","sceneScreenshot","scene-details","sceneDetails","scene-main","sceneMain","scene-name","sceneName","scene-creator","sceneCreator","scene-attributions","sceneAttributions","attribution-name","attributionName","attribution-author","attributionAuthor","description","hub-title","hubTitle","presence-log","presenceLog","presence-log-entry","presenceLogEntry","message-body","messageBody","message-body-multi","messageBodyMulti","message-body-mono","messageBodyMono","message-wrap","messageWrap","message-wrap-multi","messageWrapMulti","message-source","messageSource","message-source-link","messageSourceLink","icon-button","iconButton","spawn-message","spawnMessage","share","mediaBody","expired","presence-log-entry-with-button","presenceLogEntryWithButton","presence-log-in-room","presenceLogInRoom","presence-log-spawn","presenceLogSpawn","presence-log-entry-one-line","presenceLogEntryOneLine","presence-log-emoji","presenceLogEmoji","emoji","handleTextFieldFocus","handleTextFieldBlur","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","detect","require","browser","isExitingFullscreenDueToFocus","screenfull","isFullscreen","exit","focus","select","showFullScreenIfWasFullScreen","max-resolution-preference-item","maxResolutionPreferenceItem","number-with-range","numberWithRange","number-in-number-with-range","numberInNumberWithRange","preference-list-item","preferenceListItem","dropdown","content-container","contentContainer","panel-margin","panelMargin","dropdownArrow","preference-list-non-checkbox","preferenceListNonCheckbox","part","checkbox-margin","checkboxMargin","preferences-panel","preferencesPanel","scrolling-content","scrollingContent","section-bar","sectionBar","section-title","sectionTitle","row-name","rowName","reset-to-default-button","resetToDefaultButton","prev-option-scale","prevOptionScale","next-option-scale","nextOptionScale","prev-option-hovered-scale","prevOptionHoveredScale","next-option-hovered-scale","nextOptionHoveredScale","range-slider","rangeSlider","ObjectTypes","FILE","CLIPBOARD","SPAWNER","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","prefix","suffix","panel","tip-cancel-text","tipCancelText","top-tip","topTip","container","top","column","bottom","hide","attach_video_share_mode","attachVideoShareMode","attach_video_share_failed","attachVideoShareFailed","attach_pen_mode","attachPenMode","attach_mute_mode","attachMuteMode","attach_freeze_mode","attachFreezeMode","top-tip-no-hud","topTipNoHud","tip-cancel","tipCancel","video-share-extra-options","videoShareExtraOptions","up","iconButtonIcon","spawn","small","large","disabled","video-share","videoShare","invite-container","inviteContainer","dialog","link-button","linkButton","enter-vr-button","enterVrButton","invite-button","inviteButton","enter-button","enterButton","invite-mini-button","inviteMiniButton","embed-text","embedText","invite-container-inverted","inviteContainerInverted","subscribe","embed-tip-wrap","embedTipWrap","embed-tip","embedTip","modal","invite-button-lowered","inviteButtonLowered","hide-small-screens","hideSmallScreens","link-code","linkCode","code-duration","codeDuration","invite-container-below-hud","inviteContainerBelowHud","code","keep-open","keepOpen","digit","digit_2","digit2","digit_3","digit3","code-loading-panel","codeLoadingPanel","hub-link-link","hubLinkLink","buttons","embed","embed-tip-attach-point","embedTipAttachPoint","AVATARS_API","AVATAR_TYPES","SKINNABLE","getAvatarType","avatarId","resp","avatars","fetchAvatar","_fetchAvatar","fetchSkinnableAvatar","avatar_id","gltf_url","avatar","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","files","thumbnail","MAT_NAME","ensureAvatarMaterial","materialForMesh","primitives","primitive","meshes","remixAvatar","_remixAvatar","parentId","parent_avatar_listing_id","customFOV","enableThirdPersonMode","getInspectable","inspectable","parentNode","q","orbit","owq","owp","cwq","cwp","rwq","UP","RIGHT","Object3D","dhQ","dvQ","rig","dh","dv","dz","dt","panY","getWorldQuaternion","setFromAxisAngle","applyQuaternion","premultiply","dPos","subVectors","zoom","addVectors","moveRigSoCameraLooksAtObject","oForw","distanceMod","getBox","getCenter","sceneEl","is","dist","CAMERA_MODE_FIRST_PERSON","CAMERA_MODE_THIRD_PERSON_NEAR","CAMERA_MODE_THIRD_PERSON_FAR","CAMERA_MODE_INSPECT","CAMERA_MODE_SCENE_PREVIEW","NEXT_MODES","[object Object]","CAMERA_LAYER_INSPECT","CAMERA_LAYER_BATCH_INSPECT","ensureLightsAreSeenByCamera","isLight","layers","enable","enableInspectLayer","batch","batchManager","batchForMesh","disableInspectLayer","disable","FALLOFF","CameraSystem","translation","uiRoot","entered","getElementById","quat","viewingCamera","viewingRig","avatarRig","characterController","fly","avatarPOV","enteredScene","avatarPOVRotator","viewingCameraRotator","userinput","interaction","hoverEl","rightRemote","hovered","leftRemote","inspect","temporarilyDisableRegularExit","uninspect","nextMode","headShouldBeVisible","playerHead","makeTranslation","horizontalDelta","verticalDelta","inspected","enableLights","localStorage","getItem","snapshot","audioTransform","audioListenerTargetTransform","bg","BoxGeometry","MeshBasicMaterial","color","BackSide","vr","setPoseTarget","getCamera","mask","mask0","cameras","mask1","hideEverythingButThisObject","audio","getAudio","showEverythingAsNormal","forEachMaterial","fn","isArray","names","chooseRandom","arr","fetchRandomDefaultAvatarId","_fetchRandomDefaultAvatarId","defaultAvatars","ducky","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","pattern","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","muteMicOnEntry","enableOnScreenJoystickLeft","enableOnScreenJoystickRight","onlyShowNametagsInFreeze","allowMultipleHubsInstances","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","snapRotationDegrees","materialQualitySetting","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","disableAutoPixelRatio","enableMonitoring","confirmedDiscordRooms","items","confirmedBroadcastedRooms","onLoadActions","action","args","$ref","EventTarget","jwtDecode","exp","Date","now","store_asyncToGenerator","_shouldResetAvatarOnInit","resetToRandomDefaultAvatar","setItem","dispatchEvent","CustomEvent","oauthFlowCredentials","Cookies","getJSON","_signOutOnExpiredAuthToken","credentialsAccountId","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","validate","showHoverEffect","isFrozen","isPinned","pinnable","pinned","isSpawner","isEmojiSpawner","canMove","hubChannel","can","networkedTemplate","isCamera","isPen","isEmoji","holdableButton","indexForComponent","component","schema","fullComponent","componentName","schemaComponent","authorizeOrSanitizeMessage","applyPersistentSync","nonAuthorizedSchemas","sanitizeMessageData","schemaDict","schemas","nonAuthorizedComponents","nonAuthorizedComponent","toString","initializeNonAuthorizedSchemas","nonAuthorizedIndices","authorizeEntityManipulation","entityMetadata","sender","senderPermissions","isCreator","pin_objects","spawn_and_move_media","spawn_camera","spawn_drawing","spawn_emoji","getPendingOrExistingEntityMetadata","networkId","pendingData","connection","adapter","getPendingDataForNetworkId","pinnableComponent","entities","getEntity","authorizeOrSanitizeMessageData","persistentSyncs","stashPersistentSync","entityData","currentData","currentComponents","dataType","from_session_id","emptyObject","isFirstSync","persistent","presenceState","permissions","sanitizedAny","stashedAny","PHOENIX_RELIABLE_NAF","onData","navigation-button","navigationButton","primary-action-buttons","primaryActionButtons","cancel","title-and-close","titleAndClose","object-display-string","objectDisplayString","cancel-text","cancelText","client-info-dialog","clientInfoDialog","community-identifier","communityIdentifier","client-info","clientInfo","client-profile-image","clientProfileImage","client-details","clientDetails","client-main","clientMain","action-button-sections","actionButtonSections","action-button-placeholder","actionButtonPlaceholder","left-action-buttons","leftActionButtons","right-action-buttons","rightActionButtons","button-icon","buttonIcon","primary-action-button","primaryActionButton","registerTelemetry","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","_utils_configs__WEBPACK_IMPORTED_MODULE_1__","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","computeObjectAABB","getScaleCoefficient","bounds","Box3","makeEmpty","boundingBox","computeBoundingBox","union","applyMatrix4","Euler","boxRoot","worldSpace","updateMatrixWorld","isEmpty","worldToLocal","dX","dY","dZ","client-link","clientLink","presence-list","presenceList","sign-in","signIn","self","moderator-badge","moderatorBadge","message-entry-input","messageEntryInput","message-entry","messageEntry","message-entry-disabled","messageEntryDisabled","message-entry-button","messageEntryButton","message-entry-spawn","messageEntrySpawn","message-entry-button-in-room","messageEntryButtonInRoom","message-entry-upload","messageEntryUpload","message-entry-in-room","messageEntryInRoom","message-entry-input-in-room","messageEntryInputInRoom","message-entry-input-no-spawn","messageEntryInputNoSpawn","message-entry-on-mobile","messageEntryOnMobile","hasEnteredFullScreenThisSession","shouldShowFullScreen","isIOS","enabled","willRequireUserGesture","showFullScreenIfAvailable","_showFullScreenIfAvailable","request","_showFullScreenIfWasFullScreen","nextTick","setTimeout","description-field","descriptionField","name-field","nameField","next-button","nextButton","continue-button","continueButton","room-settings-form","roomSettingsForm","select-container","selectContainer","permission","member-cap-container","memberCapContainer","permissions-group","permissionsGroup","permission-disabled","permissionDisabled","raycast","acceleratedRaycast","gltfCache","cache","count","retain","cacheItem","release","delete","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","componentData","multiple","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","entityComponents","order","setFromQuaternion","matrixAutoUpdate","setObject3D","generateUUID","morphTargetInfluences","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","promise","prop","_x9","attachTemplate","templateRoot","targetEls","getHubsComponentsExtension","extras","loadGLTF","_loadGLTF","preferredTechnique","jsonPreprocessor","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","setBasisTextureLoader","parser","createParser","oldHeightfieldNode","heightfield","light","range","decay","runMigration","MOZ_alt_materials","altMaterialIndex","DefaultMatrixAutoUpdate","isMeshStandardMaterial","MobileStandardMaterial","fromStandardMaterial","keys","revokeObjectURL","loadModel","_x8","_loadModel","useCache","resolveAsset","assetEl","default","inflate","init","loadTemplates","applySrc","model","removeObject","object3DMap","templateEl","lastSrc","inflatedEl","disposeLastInflatedEl","addObject","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","inflateComponents","rewires","environmentMapComponent","applyEnvironmentMap","f","removeAttribute","profile-entry","profileEntry","form-submit","formSubmit","choose-avatar","chooseAvatar","form-field-text","formFieldText","logo","form","display-name","preview","edit-avatar","editAvatar","tweet-button","tweetButton","tweet","editor","editor-inner","editorInner","emoji-button","emojiButton","counter","posted","tweet-loader","tweetLoader","dialog-background","dialogBackground","findAncestorWithComponent","Blob","createObjectURL","putImageData","toDataURL","img","disposeImageBitmap","imageBitmap","HTMLImageElement","email-field","emailField","sign-in-form","signInForm","sign-in-complete","signInComplete","terms","applyThemeToTextButton","getThemeColor","_async_utils__WEBPACK_IMPORTED_MODULE_0__","DEFAULT_COLORS","action-color","action-label-color","action-color-disabled","action-color-highlight","action-text-color","action-subtitle-color","notice-background-color","notice-text-color","favorited-color","highlighted","actionColor","actionHoverColor","VERTEX_SHADER","FRAGMENT_SHADER","ShaderMaterial","parameters","UniformsUtils","UniformsLib","fog","uvTransform","Matrix3","diffuse","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","lights","transparent","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","emissiveIntensity","refreshUniforms","uvScaleMap","updateMatrix","touchZone","mockJoystickContainer","mockJoystick","inner","tip-root","tipRoot","tip-link","tipLink","tip","split-tip","splitTip","split-tip-icon","splitTipIcon","spawn_menu-icon","spawnMenuIcon","object_rotate_button-icon","objectRotateButtonIcon","object_scale_button-icon","objectScaleButtonIcon","object_recenter_button-icon","objectRecenterButtonIcon","tour-tip-root","tourTipRoot","COLLISION_LAYERS","ALL","NONE","INTERACTABLES","ENVIRONMENT","AVATAR","HANDS","DEFAULT_INTERACTABLE","UNOWNED_INTERACTABLE","DEFAULT_SPAWNER","nextItemId","outstanding","handlers","transfer","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","videos","youtube","gifs","sketchfab","poly","twitch","favorites","availableIntegrations","SOURCES","apiSource","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","singular","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","goBack","query","keepSource","keepNav","keepSelectAction","_stashedParams","_stashedSource","_sourceNavigate","selectAction","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","StateLink","handleClick","defaultPrevented","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","stateKey","stateValue","stateDetail","innerRef","ref","small-button","smallButton","input-border","inputBorder","left-side-of-input","leftSideOfInput","add-media-form","addMediaForm","cancel-icon","cancelIcon","upload-icon","uploadIcon","hide-file-input","hideFileInput","imageHeader","disableiOSZoom","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","userAgent","lastTouchAtMs","ev","getTime","isDoubleTouch","registerComponentInstance","componentRegistry","deregisterComponentInstance","getCurrentStreamer","playerInfos","playerInfo","playerSessionId","streaming","hackyMobileSafariTest","hackyMobileSafariTestValue","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","UA","detectTouchScreen","SignInDialog","stopPropagation","onSignIn","authStarted","react_intl__WEBPACK_IMPORTED_MODULE_2__","authComplete","styles","onContinue","continueText","onSubmit","required","placeholder","onFocus","onBlur","onChange","setState","_if_feature__WEBPACK_IMPORTED_MODULE_4__","rel","_dialog_container__WEBPACK_IMPORTED_MODULE_6__","_extends","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","_utils_permissions_utils__WEBPACK_IMPORTED_MODULE_1__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","geometryRadius","sweepParams","isTouchscreen","time","showEffect","toggling","cursorTogglingSystem","interactorOne","interactorTwo","ready","held","options","leftToggledOff","rightToggledOff","toArray","worldY","elements","ms1","ms2","ms3","scaledRadius","sqrt","uniform","getReader","read","readChunk","done","isValidSceneUrl","_isValidSceneUrl","trim","_isValidGLB","isValidGLB","allowDisplayOfSceneLink","account_id","allow_promotion","allow_remixing","load-button","loadButton","treatment","screenshot","hub-name","hubName","main-panel","mainPanel","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","environmentMap","updateEnvironmentMap","App","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","depth","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","forceWebVR","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","blob","ORBIT_ANGLE","DEG2RAD","DEFAULT_MARGIN","fitBoxInFrustum","margin","applyEuler","lookAt","AvatarPreview","Scene","PerspectiveCamera","clientWidth","clientHeight","controls","OrbitControls","enablePan","DirectionalLight","HemisphereLight","loadId","avatarGltfUrl","loadCurrentAvatarGltfUrl","clock","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","setAnimationLoop","getDelta","mixer","resize","parentElement","offsetWidth","offsetHeight","setSize","updateProjectionMatrix","resetCamera","setFromObject","domElement","imageBitmaps","oldProps","applyMaps","technique","previewMesh","idleAnimation","AnimationMixer","clipAction","setLoop","LoopRepeat","Infinity","idleAnimationAction","getImage","originalMaps","all","bm","toBlob","_this2","newLoadId","loadPreviewAvatar","onGltfLoaded","setAvatar","newProps","mapName","applyMap","applyMapToPreview","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","srcSet","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","injectIntl","withRef","spoke-launch","spokeLaunch","change-scene-button","changeSceneButton","spoke-create","spokeCreate","oauth-discord-button","oauthDiscordButton","oauth-twitter-button","oauthTwitterButton","oauth-button","oauthButton","oauth-type-name","oauthTypeName","oauth-icon","oauthIcon","privacy-notice","privacyNotice","oauth-buttons","oauthButtons","twitter-message","twitterMessage","xr","requestDevice","getVRDisplays","MIN_VOLUME_THRESHOLD","calculateVolume","analyser","levels","getByteTimeDomainData","sum","amplitude","tempScaleFromPosition","tempScaleToPosition","getAudioFeedbackScale","fromObject","toObject","minScale","maxScale","volume","distanceTo","updateVolume","newRawVolume","newPerceivedVolume","mapLinear","E","prevVolume","getAnalyser","ikRootEl","analyserEl","loudest","_updateAnalysis","_runScheduledWork","schedule","createAnalyser","fftSize","Uint8Array","soundSource","unschedule","avatarIsQuiet","lastSeenVolume","registerSystem","mediaStream","stream","createMediaStreamSource","connectAnalyser","setScalar","minValue","maxValue","skinnedmesh","morphNumber","morphTargetDictionary","easeOutQuadratic","SPRITE_NAMES","MIC","MIC_HOVER","MIC_OFF","MIC_OFF_HOVER","micLevelForVolume","clamp","ceil","active","tooltip","tooltipText","activeTooltipText","prevSpriteName","hovering","onHover","onHoverOut","pause","textEl","audioAnalyser","spriteName","UnlessFeature","AuthChannel","signOut","_signedIn","signedIn","verifyAuthentication","authTopic","authToken","authPayload","leave","handleAuthCredentials","startAuthentication","_this3","_this4","addAnimationComponents","modelEl","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","isDebug","logFilter","maskEmail","emailParts","emailIdentity","emailDomain","RoomInfoDialog","hasDescription","hubDescription","hasScene","showSceneLink","toAttributionDiv","author","attributions","_dialog_container_js__WEBPACK_IMPORTED_MODULE_3__","Fragment","screenshot_url","sceneButtons","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","onCopyAvatar","parent_scene_id","onCopyScene","isImage","isAvatar","imageAspect","innerWidth","imageWidth","imageHeight","imageSrc","isHub","getTileDimensions","thumbnailElement","muted","autoPlay","playsInline","publisherName","formatMessage","intl","handleEntryClicked","_state_link__WEBPACK_IMPORTED_MODULE_20__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faPencilAlt","onShowSimilar","faSearch","handleCopyAvatar","faClone","handleCopyScene","project_id","handleEntryInfoClicked","faInfo","faStar","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","faUsers","member_count","hasNext","hasPrevious","page","isVariableWidth","createTileWidth","createTileHeight","_if_feature__WEBPACK_IMPORTED_MODULE_17__","faPlus","entryToTile","handlePager","previousPage","faAngleLeft","nextPage","faAngleRight","array","number","patchWebGLRenderingContext","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","Float32Array","size","dataTexture","DataTexture","RGBAFormat","FloatType","PlaneBufferGeometry","Camera","getError","checkFloatTextureSupport","ScenePreviewCameraSystem","_camera_system_js__WEBPACK_IMPORTED_MODULE_0__","_utils_three_utils__WEBPACK_IMPORTED_MODULE_1__","register","unregister","isGhost","hubsSystems","cameraSystem","tick2","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","charCodeAt","arrayBufferToString","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","atob","decrypt","LINK_ACTION_TIMEOUT","LinkChannel","onFinished","finished","getLetter","readyToSend","leftChannel","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","_generateKeys","generateKeys","numOccupants","session_id","_decryptObject","decryptObject","command-help","commandHelp","command","cancel-button","cancelButton","confirm-button","confirmButton","help-dialog","helpDialog","docs-link","docsLink","tour-button","tourButton","zeroPos","zeroQuat","oneScale","bindingSetters","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldPosition","getWorldScale","handleMatrixModification","cachedMatrixWorld","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","equals","includeInvisible","forceChildrenWorldUpdate","q1","m1","isVector3","inverse","animation","colorHelperFrom","Color","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","eventNames","removeEventListeners","getRawProperty","splitDot","setRawProperty","targetValue","g","isRawProperty","autoplay","delay","dir","parseInt","startEvents","pauseEvents","resumeEvents","eventDetail","attrName","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","oldData","direction","createAndStartAnimation","cancelDelayedStart","paused","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","clearTimeout","intensity","AmbientLight","registerLight","rendererSystem","prevData","applyColorCorrection","removeObject3D","initialForce","maxForce","physicsSystem","physics","hasBody","CANNON","Vec3","force","addComponent","removeComponent","beforeStep","isMine","currentScale","angle","applyForce","generateAndAddHeightfield","shape","mass","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","onQualityChanged","updateComponentState","castShadow","shadowMapResolution","shadowBias","shadowRadius","PointLight","shadow","bias","radius","prevWidth","prevHeight","mapSize","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","modifyGravityOnRelease","releaseGravity","reduceAngularFloat","gravitySpeedLimit","onGrab","onRelease","bodyHelper","isHeld","wasHeld","_makeStaticWhenAtRest","linearThreshold","linearSleepingThreshold","angularThreshold","angularSleepingThreshold","isAtRest","bodyInitialized","getLinearVelocity","getAngularVelocity","hasBeenHereBefore","gravity","setLocked","locked","angularDamping","linearDamping","collisionFilterMask","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","colliders","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","collidingLastFrame","setFromCenterAndSize","isColliding","containsPoint","onPauseStateChange","videoComponent","onVideoLoaded","video","togglePlaying","origDispatch","firstObject","Pathfinding","pathfinder","removeNavMeshData","loadMesh","zone","Geometry","fromBufferGeometry","setZoneData","createZone","zones","eventSource","events","eventListeners","_handleEvent","frustumBox","inverseLightMatrixWorld","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","expandByPoint","near","far","resizeShadowCameraFrustum","Layers","reflection","inWorldHud","exclusive","layer","oldValue","newValue","clip","activeClipIndex","mixerEl","currentActions","updateClip","clipName","clips","destroy","loadingObjectEnvMap","loadingObject","loadingObjectSrc","forceMeshBatching","forceImageBatching","disableBatching","playSoundEffect","moveTheParentNotTheMesh","showLoader","clearLoadingTimeout","onMediaLoaded","handleLinkedElRemoved","refresh","animating","getNetworkedEntity","networkedEl","updateScale","originalMeshMatrix","desiredObjectMatrix","scaleCoefficient","removeShape","loaderMixer","sfx","soundEffectsSystem","loadingSoundEffect","loadedSoundEffect","useFancyLoader","currentEnivronmentMap","loadingClip","loadingScaleClip","VectorKeyframeTrack","SHAPE","BOX","showLoaderTimeout","updateHoverableVisuals","boundingSphere","Sphere","hoverableVisuals","injectedCustomShaderChunks","getBoundingSphere","physicsShape","shouldUpdateScale","finish","minHalfExtent","registerLinkage","takeOwnership","forceLocalRefresh","srcChanged","canonicalUrl","canonicalAudioUrl","accessibleUrl","isLocalModelAsset","projection","origin_audio","expected_content_type","fetchContentType","raw","isHLS","linkedVideoTexture","linkedAudioSource","linkedMediaElementAudioSource","linkedMediaVideo","videoTexture","audioSource","mediaElementAudioSource","qsTime","startTime","hash","audioSrc","dirs","HULL","mayChangeScene","maxIndex","onNext","onPrev","onSnap","getHoverMenu","hoverMenu","prevButton","snapButton","pageLabel","pinnableElement","newIndex","quackPercentage","specialQuackPercentage","_handleGrabStart","rand","lerp","newRot","positionOnly","scenePreviewCameraSystem","startPoint","targetPoint","targetRotDelta","targetRotation","setFromEuler","performance","backwards","ranOnePass","streamerCamera","streamer","getStreamerCamera","translateZ","fromRot","toRot","isBotMode","CubeCamera","BoxBufferGeometry","PMREMGenerator","skybox_PMREMGenerator","PMREMCubeUVPacker","Sky","skyScene","cubeCamera","sky","_geometry","_inclination","_azimuth","_distance","updateSunPosition","turbidity","rayleigh","luminance","mieCoefficient","mieDirectionalG","inclination","azimuth","phi","sunPosition","generateEnvironmentMap","vrEnabled","pmremGenerator","renderTarget","pmremCubeUVPacker","cubeLods","CubeUVRenderTarget","recursive","skyIndex","requestAnimationFrame","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","spawnPoint","spawnScale","NaN","spawnCooldown","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","handleMediaLoaded","spawnedMediaScale","spawnedEntity","boxSize","divideScalar","hand","willAnimateFromCursor","spawning","activateCooldown","resetDynamicBody","sx","sy","sz","MobileWater","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","mirrorShader","ShaderChunk","TextureLoader","wrapS","wrapT","RepeatWrapping","Water","speed","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","water","mirrorCamera","setStyle","simple_water_Mesh","MeshStandardMaterial","MeshPhongMaterial","Vector2","Octave","alternate","SimpleWater","resolution","lowQuality","rotateX","waterUniforms","ripplesSpeed","ripplesScale","materialClass","specular","receiveShadow","dynamic","octaves","simplex","SimplexNoise","tideHeight","tideScale","tideSpeed","waveHeight","waveScale","waveSpeed","positionAttribute","octave","noise","setY","computeVertexNormals","vec2Equals","waterNormalsUrl","defaultSrcUrl","defaultSrcImage","startColor","middleColor","endColor","startOpacity","middleOpacity","endOpacity","colorCurve","sizeCurve","startSize","endSize","sizeRandomness","ageRandomness","lifetime","lifetimeRandomness","particleCount","startVelocity","endVelocity","velocityCurve","particleEmitter","ParticleEmitter","updateParticles","setTexture","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","registerRootSceneComponent","mediaInflator","isControlled","hasVolume","templateName","owner","videoPaused","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","isHandCollisionTarget","TYPE","STATIC","collisionFilterGroup","euler","fit","FIT","MANUAL","halfExtents","w","canBeSpawnPoint","canBeOccupied","canBeClicked","willDisableMotion","willDisableTeleporting","willMaintainWorldUp","_componentName","found","attachTemplateToLocal","mediaLoaderAttributes","pageIndex","loop-animation","enterComponentMapping","leaveComponentMapping","targetEntity","HEIGHTFIELD","heightfieldDistance","heightfieldData","MESH","audioSettingsSystem","updateAudioSettings","loading-text","loadingText","avatar-url-dialog","avatarUrlDialog","form-frame","formFrame","leave-room","leaveRoom","_qs_truthy__WEBPACK_IMPORTED_MODULE_0__","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollTop","scrollHeight","origConsoleInfo","origConsoleLog","origConsoleError","origConsoleWarn","objs","childNodes","firstObj","stack","toISOString","textContent","shouldScroll","onunhandledrejection","reason","onerror","resume","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","EPSILON","positionX","positionY","positionZ","setOrientation","baseScale","addedScale","didRegister","scaleInScreenSpaceSystem","unmutedBoneName","mutedBoneName","onPos","offPos","onStateToggled","unmutedBone","getObjectByName","mutedBone","modelLoaded","updateMuteState","lastVisible","fadeOut","beginTransition","fadeIn","_resolveFinish","mat","hoverImage","activeImage","activeHoverImage","disabledImage","updateButtonState","sprite","textHoverColor","textColor","backgroundHoverColor","backgroundColor","noop","dependencies","block","mute","kick","updateVisibility","canOrWillIfCreator","contentTypes","mediaLoader","mediaImage","mediaVideo","mediaPdf","currentContentType","matchesType","targetContentType","matchesSubtype","whenPinned","_updateUI","_updateUIOnStateChange","targetEl","pinnedAndForbidden","left_hand_pose","right_hand_pose","_fireEventsAndAnimate","pinStateChanged","didFireThisFrame","transformObjectSystem","transforming","wasTransforming","activateBody","track","selector","myCamera","getMyCamera","isVisible","shouldBeVisible","onStateChange","newOwner","transform","oneof","stateadded","stateremoved","withPermission","needsPermission","updatePermissions","hasPermission","onPermissionsUpdated","requireOwnership","targetPos","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","isHovered","hoveredEl","_hoveredFrames","_applyMaskedTargetRotation","started","reset","_updateMatrixAutoUpdate","dim","onFrozenStateChange","applyHoverState","menuPromise","hoverContainer","allowed","frustumCulled","currentActiveCamera","activeCameraEl","setActiveCamera","cursorPoseTrackingSystem","playhead","poseIndex","overflow","poses","timestamp","_updateBillboard","_updateIsInView","isInView","frustum","Frustum","frustumMatrix","boxTemp","expandBox","isInViewOfCamera","screenCamera","projectionMatrix","matrixWorldInverse","setFromMatrix","intersectsBox","playerCamera","cameraTools","ifMyCameraRenderingViewfinder","cameraTool","lastSync","syncAll","onStoreChanged","maxCanvasSize","registry","queues","frameIndex","queue","invert","inVRMode","class","permissionName","fetchPermissions","onTimeout","onEnterVR","isOculusBrowser","enteredVR","lastTimeoutCheck","exitTimeout","deltas","secondsSinceMeasurementStart","secondsSinceSceneVisible","maxPixelRatio","pixelRatioToTimesDecreased","disabledByPref","onPreferenceChange","visibilityState","medianFps","currentPixelRatio","getPixelRatio","shouldDecrease","shouldIncrease","newPixelRatio","toFixed","timesDecreased","system","addLinkageHandler","syncLinkage","elA","elB","_handlingLinkage","waitForMediaLoader","handlerA","handlerB","deregisterLinkage","syncedVideoAttributes","syncTolerance","updatePlaybackState","_syncCounterRegistration","timestamps","deregister","ttl","POSITIVE_INFINITY","setBodyKinematic","didThisOnce","clear","_destroyOldest","oldestEl","minTs","MAX_VALUE","ts","_destroy","teleporters","queryCollisionEntities","penSpawner","drawingToPen","drawingEl","createDrawing","createDrawingPromise","handNetworkedDrawingInit","drawing","destroyDrawing","networkedDrawing","getDrawingPromise","getDrawing","returnDrawing","bindAllEvents","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","enableMicrophone","removeState","addState","mic","cameraBtn","inviteBtn","background","updateButtonStates","onMicClick","onSpawnClick","onPenClick","onCameraClick","onInviteClick","emitDecayTime","emitFadeTime","emitEndTime","particleEmitterConfig","emojiHud","emojiUrls","lastLinearVelocity","lastAngularVelocity","particleConfig","originalParticleCount","initialized","linearVelocity","linearAcceleration","angularAcceleration","EMOJIS","emoji_0","emoji_1","emoji_2","emoji_3","emoji_4","emoji_5","emoji_6","particles","emoji_particle_0","emoji_particle_1","emoji_particle_2","emoji_particle_3","emoji_particle_4","emoji_particle_5","emoji_particle_6","setOffsetVector","totalNumEmojis","spacing","offsetVector","sign","spawnerScale","spawnedScale","hudAngle","minHudAngle","maxHudAngle","hudDistance","spawnerPlatformWidth","spawnerPlatformSpacing","cameraWorldPosition","_onFrozen","_onThaw","spawnerEntities","spawnEvents","lastSpawnTime","spawnerEntity","requireHoverOnNonMobile","cameraObject3D","cylinder","_updateOffset","targetWorldPos","cameraForward","projectedCameraForward","angledCameraForward","defaultRight","transformDirection","projectOnPlane","DefaultUp","dot","angleTo","angleOffset","applyAxisAngle","HIDDEN_JOYSTICK_STYLE","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","leftMock","leftMockSmall","rightMock","rightMockSmall","enableLeft","enableRight","createLeftStick","createRightStick","inVr","moving","rotating","displacement","lookDy","lookDx","newEnableLeft","newEnableRight","leftStick","leftTouchZone","rightStick","rightTouchZone","nipplejs","fadeTime","off","preferenceScreenIsVisible","radian","enqueueRelativeMotion","enqueueInPlaceRotationAroundWorldUp","display","leftController","rightController","HAND_ROTATIONS","makeRotationFromEuler","leftEye","rightEye","neck","chest","rotationSpeed","alwaysUpdate","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hasConvergedHips","lastCameraTransform","forceIkUpdate","negate","hasNewCameraTransform","_hadFirstTick","epsilon","u","updateHand","_hasFirstTick","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","setAlwaysHidden","cameraWorld","POSES","poseForFingers","subpath","previous","current","handleLeftVisuals","handleRightVisuals","hadLeftVisualLastFrame","hadRightVisualLastFrame","interactingElement","hideVisual","selfDestruct","updateOffset","QUARTER_CIRCLE","rotateOnAxis","ensureAvatarNodes","some","originalRoot","scale-audio-feedback","avatarSrc","avatarType","identityName","isOwner","isRecording","applyProperties","updateDisplayName","applyDisplayName","handleModelError","isLocalPlayerInfo","networkedEntity","getCreator","playerPresence","updateDisplayNameFromPresenceMeta","presenceMeta","recording","roles","infoShouldBeHidden","nametagEl","identityNameEl","recordingBadgeEl","modBadgeEl","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","NETWORK_POSES","animatePose","networkField","getNetworkedAvatar","networkedAvatar","prev","curr","setHandPose","TWOPI","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","hoverableChildren","pitch","RAD2DEG","yawDif","deltaAngle","forceHudVisible","hudLocked","hudOutOfView","frozen","wasInspecting","withinDistance","withoutPermission","visibleIfOwned","camWorldPos","objWorldPos","cam","hoverableSearch","hoverable","shouldNotBeVisible","isWithinDistance","isTransforming","toggle","onExpand","onCollapse","stats","threeStats","aframeStats","plugins","rStats","css","fps","caption","below","batchdraws","batchinstances","batchatlassize","createStats","statsEl","statsHeaderEl","statsTitleEl","collapseEl","insertBefore","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","vrStatsEnabled","initVRStats","lastUpdate","vrPanel","whiteSpace","baseline","depthTest","toggleVRStats","frame","stepDuration","batches","instanceCount","atlas","arrayDepth","calls","triangles","show","getCurrentMirroredMedia","mirrorEl","refreshButton","localRefreshButton","ONCE_TRUE","TYPE_IMG_PNG","parseGIF","GIFWorker","isFirefoxReality","audioIconTexture","audioIcon","VOLUME_LABELS","GIFTexture","frames","delays","disposals","_ctx","isVideoTexture","NearestFilter","frameStartTime","clearRect","rawImageData","delayTimes","loadCnt","createVideoOrAudioEl","preload","scaleToAspectRatio","ratio","disposeTexture","HTMLVideoElement","hls","stopLoad","detachMedia","textureCache","videoHeight","videoWidth","inflightTextures","errorImage","errorImageSrc","errorTexture","errorCacheItem","timeFmt","h","tickRate","updateHoverMenu","tryUpdateVideoPlaybackState","ensureOwned","isMineOrLocal","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","distanceBasedAttenuation","videoMutedAt","localSnapCount","isSnapping","videoIsLive","onSnapImageLoaded","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","timeLabel","volumeLabel","updateVolumeLabel","getNetworkOwner","currentTime","media_views_asyncToGenerator","_ignorePauseStateChanges","_playbackStateChangeTimeout","setupAudio","disconnect","setPositionalAudioProperties","foo","setNodeSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","audioSourceEl","cleanUp","createVideoTextureAudioSourceEl","_refreshMediaMirror","refreshMediaMirror","createMediaElementSource","updateLiveState","currentLevel","videoWasLive","details","live","HLS","Events","LEVEL_LOADED","LEVEL_SWITCHED","SphereBufferGeometry","DoubleSide","_audioSyncInterval","clearInterval","videoEl","audioEl","isReady","VideoTexture","streamClientId","getMediaStream","srcObject","getVideoTracks","isSupported","setupHls","xhrSetup","xhr","buildAbsoluteURL","loadSource","attachMedia","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","setupInterval","setInterval","isNoLongerSrc","canPlayType","poll","mayModifyPlayHead","positionA","positionB","volumeModRight","volumeModLeft","currentSrcIsRetained","_this5","inflightKey","createGIFTexture","uvs","uv","isCompressedTexture","canvasContext","_this6","_this7","renderTask","loadingSrc","getDocument","numPages","getPage","viewport","getViewport","pw","ph","currentPageTextureIsRetained","SMALL_STEP","BIG_STEP","networkedAudioSource","numBars","pinchDelta","rotatePitchAndYaw","opq","oq","pq","yq","initialUpDot","initialForwardDotUp","newUpDot","newForwardDotUp","scenePreviewNode","pendingXRotation","HALF_PI","THREE_HALF_PI","forward","zero","halfExtent","_updateBox","_setupTarget","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","pointOnBoxFaceToCamera","boxCenter","tempParentWorldScale","boxFaceNormal","forceNewExtents","targetSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","targetCameraDot","halfExtentStr","cameraAngleDotBoxNormal","squareDistance","targetScale","finalScale","tipSelector","labelSelector","tipEl","labelEl","onHovered","onUnhovered","wasPinned","_discordBridges","canPin","mirror_media_button_asyncToGenerator","close_mirrored_media_button_asyncToGenerator","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","player-left-controller","right-cursor","left-cursor","videoCodec","codec","MediaRecorder","isTypeSupported","videoMimeType","hasWebGL2","allowVideo","CAPTURE_WIDTH","CAPTURE_HEIGHT","CAPTURE_DURATIONS","snapCanvas","pixels","imageData","createImageData","bitmap","captureDuration","captureAudio","showCameraViewfinder","WebGLRenderTarget","stencil","viewfinderInViewThisFrame","updateUI","screen","selfieScreen","labelActionBackground","labelBackground","durationLabel","recordIcon","recordAlphaIcon","snapMenu","recordButton","nextDurationButton","prevDurationButton","snapClicked","cancelSnapping","changeDuration","stopButton","stopRecording","captureAudioButton","captureAudioIcon","updateRenderTargetNextTick","updateViewfinder","newIdx","trackTarget","isPhoto","snapCountdown","countdownInterval","camera_tool_asyncToGenerator","takeSnapshotNextTick","beginRecording","hasDuration","isRecordingUnbound","videoRecorder","showActionLabelBackground","videoContext","videoCanvas","videoImageData","videoPixels","captureStream","attachBlankAudio","oscillator","createOscillator","createMediaStreamDestination","setValueAtTime","addTrack","getAudioTracks","selfAudio","getInput","mimeType","chunks","recordingStartTime","ondataavailable","videoCountdown","videoCountdownInterval","_free","onstop","recordingDuration","playerIsBehindCamera","MAX_DURATION_TO_LIMIT_LOOPS","heldLeftHand","heldRightHand","heldRightRemote","heldThisFrame","grabPath","isHolding","updateSnapMenuOrientation","isHoldingTrigger","isHoldingSnapshotTrigger","snapTriggerTimeout","releaseInterval","tock","playerHud","hudEl","playerHudWasVisible","spriteSystem","bubbleSystem","invaders","tmpVRFlag","tmpOnAfterRender","onAfterRender","videoRenderTarget","setRenderTarget","srcX0","srcY0","srcX1","srcY1","dest","dstX0","dstY0","dstX1","dstY1","gl","srcFramebuffer","__webglFramebuffer","destFramebuffer","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","blitFramebuffer","COLOR_BUFFER_BIT","LINEAR","readRenderTargetPixels","snapPixels","RENDER_WIDTH","pixelsToPNG","heldLeftRemote","grabberId","grabberPaths","playerWorld","playerToCamera","cameraForwardPoint","cameraForwardWorld","_isIn2DInterstitial","_exitAction","getUserGesture","handleExitTo2DInterstitial","_handleExitTo2DInterstitial","isLower","exitAction","nonFullscreen","exitVR","vrNotice","exit2DInterstitialAndEnterVR","_exit2DInterstitialAndEnterVR","enterVR","isIn2DInterstitial","onlyOpenLink","open_media_button_asyncToGenerator","exitImmersive","refresh_media_button_asyncToGenerator","isNonLiveVideo","onVideoIsLiveUpdate","SHORTLINK_DOMAIN","twitter","remix_avatar_button_asyncToGenerator","copying","AMMO_BODY_ATTRIBUTES","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","v2","q2","eps","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","startQ","dxStore","dxApplied","dyAll","dyStore","dyApplied","raycasters","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","plane","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","PI_AROUND_Y","pInv","startPlaneCasting","raycaster","sign2","dxAll","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","intersection","modify","FORWARD","TWO_PI","calculatePlaneMatrix","planeMatrix","planeUp","planeForward","planeRight","planePosition","camPosition","planeForLeftCursor","planeForRightCursor","isScaling","planeRotation","initialIntersectionPoint","intersectionPoint","initialObjectScale","desiredObjectScale","deltaScale","objectMatrix","dragVector","currentObjectScale","objectToScale","objectPosition","objectToCam","startScaling","didGetObjectReferences","leftEventer","leftCursorController","leftRaycaster","rightCursorController","rightRaycaster","raycastOnPlane","initialDistanceToObject","transformSelectedObjectSystem","endScaling","dotFactor","scaleFactor","RayCurve","numPoints","BufferGeometry","vertices","addAttribute","BufferAttribute","setDynamic","drawMode","TriangleStripDrawMode","parabolicCurve","p0","v0","out","setDirection","cross","setWidth","setPoint","checkLineIntersection","referenceNormal","landingMaxAngle","hitPoint","intersects","intersectObjects","collisionNormal","angleNormals","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","collisionEntities","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","teleportEntity","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","stopPlayingTeleportSound","teleportingSound","isTeleportingDisabled","timeTeleporting","teleportTo","playerScale","collidedIndex","timeSegment","percentToDraw","segmentT","hitEntityOpacity","easeOutIn","dRadii","outerScale","easeIn","outerTorus","torus","radiusTubular","segmentsRadial","segmentsTubular","segmentsHeight","openEnded","isTagged","tag","isHoldable","offersHandConstraint","offersRemoteConstraint","togglesHoveredActionSet","singleActionButton","isHoverMenuChild","isStatic","didUpdateOnce","constraintsSystem","MAX_ANISOTROPY","computeWidth","wrapPixels","wrapCount","widthFactor","FONTS","roboto","font","ch","chars","yoffset","digitsum","digits","xadvance","computeFontWidthFactor","loadTexture","align","oneOf","anchor","letterSpacing","lineHeight","tabSize","xOffset","zOffset","shaderData","getShaderData","shaderObject","shaders","Shader","createTextGeometry","updateFont","currentFont","updateGeometry","updateLayout","parseSide","pages","layout","geometryComponent","textScale","descender","TypeError","ascender","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","isFinite","common","initializedInTick","sets","VR_DEVICE_AVAILABILITY","yes","no","maybe","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","getAvailableVREntryTypes","_getAvailableVREntryTypes","ua","isSamsungBrowser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","generic","cardboard","gearvr","isMaybeGearVRCompatibleDevice","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","canShare","opts","tweetLink","StateRoute","_this$props","routeProps","_objectWithoutProperties","react_default","es_Route","PromoteClientDialog","dialog_container","promote_client_dialog_extends","index_es","onConfirm","ClientInfoDialog","client_info_dialog_defineProperty","avatarThumbnailUrl","performConditionalSignIn","client_info_dialog_asyncToGenerator","addOwner","getPresenceEntry","showNonHistoriedDialog","removeOwner","unhide","mayKick","mayMute","targetIsOwner","targetIsCreator","targetIsSignedIn","signed_in","mayAddOwner","mayRemoveOwner","isHidden","client_info_dialog_extends","add_owner_default","remove_owner_default","loader_defineProperty","loadingNum","loadedNum","doneWithInitialLoad","loadingTimeout","tryFinishLoading","environmentSceneLoaded","onLoaded","onObjectLoading","onObjectLoaded","nomore","loaderStyles","usual","locale","unless_feature","AutoExitWarning","secondsRemaining","wrap_with_audio","onCancel","InlineSVG","filteredProps","svgi_extends","dangerouslySetInnerHTML","__html","InlineSVGButton","EntryButton","autoFocus","cx","iconSrc","prefixMessageId","mediumMessageId","isInHMD","TwoDEntryButton","entryButtonProps","entry_buttons_objectSpread","MobileScreenEntryImg","DesktopScreenEntryImg","GenericEntryButton","GenericVREntryImg","DaydreamEntryButton","DaydreamEntryImg","ProfileEntryPanel","profile_entry_panel_defineProperty","getStateFromProfile","hasChangedNowOrPreviously","profile_entry_panel_asyncToGenerator","storeUpdated","nameInput","setAvatarFromMediaResult","refetchAvatar","componentDidUpdate","_prevProps","prevState","react_fontawesome_index_es","saveStateAndFinish","htmlFor","displayNameOverride","spellCheck","inp","avatar_preview","state_link","hideDelete","returnToProfile","sourceNavigateWithNoNav","if_feature","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","MediaBrowser","media_browser_defineProperty","showNav","selectNextResult","clearStashedQueryOnClose","getStoreAndHistoryState","selectEntry","inputRef","getUrlSource","suggestions","forceNow","_sendQueryTimeout","filterQueryNavigate","lucky_query","handleQueryUpdated","handleFacetClicked","similar_to","similar_name","onMediaSearchResultEntrySelected","sourceNavigate","pushExitMediaBrowserHistory","isSceneApiType","isAvatarApiType","clearStashedQuery","pageNavigate","browserDiv","sourceChanged","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","showCustomMediaDialog","activeFilter","darkened","blur","faLink","faCloudUploadAlt","handleSourceClicked","selected","media_tiles","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","instructions","desktopTips","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","CreateObjectDialog","create_object_dialog_defineProperty","fileName","attributionImage","validity","fileInput","onCreate","other","create_object_dialog_objectWithoutProperties","uploadButton","faPaperclip","filenameLabel","urlInput","onUrlChange","create_object_dialog_extends","onCreateClicked","onFileChange","ChangeSceneDialog","change_scene_dialog_defineProperty","submitting","setCustomValidity","urlValidationPromise","change_scene_dialog_asyncToGenerator","checkValidity","reportValidity","changeSceneForm","AvatarUrlDialog","avatar_url_dialog_defineProperty","onChangeClicked","InviteDialog","invite_dialog_defineProperty","copyButtonActive","shareButtonActive","entryCode","embedUrl","entryCodeString","num","pad","shortLinkText","shortLink","isModal","readOnly","copyClicked","allowShare","shareClicked","showEmbedTip","hasPush","onSubscribeChanged","checked","isSubscribed","InviteTeamDialog","invite_team_dialog_defineProperty","inviteButtonText","requestSupport","invite_team_dialog_extends","inviteClicked","LinkDialog","LinkDialogHeader","InAppBrowserDialog","in_app_browser_dialog_defineProperty","copyLinkButtonText","onCopyClicked","copyLinkClicked","detectedOS","in_app_browser_dialog_extends","RoomSettingsDialog","room_settings_dialog_defineProperty","initialSettings","renderCheckbox","member_permission","member_permissions","room_settings_dialog_objectSpread","showRoomAccessSettings","maxRoomSize","room_settings_dialog_extends","autoComplete","room_size","onRoomAccessSettingsChange","newMemberPermissions","CloseRoomDialog","close_room_dialog_extends","LOCAL_CLOSE_TIPS","KEEP_ACTIVE_AFTER_GLOBAL_CLOSE","localStorageCache","finishedScopes","tipPlatform","platformTips","desktop","mobile","standalone","isTipFinished","markTipFinished","storeData","handleTipClose","fullTip","scope","tips","resetTips","VALIDATORS","look","activeSets","rightCursorHoldingPen","leftCursorHoldingPen","locomotion","accel","turning","spawn_menu","mediaCounter","freeze_gesture","rightCursorHoldingInteractable","leftCursorHoldingInteractable","rightCursorHoveringOnInteractable","leftCursorHoveringOnInteractable","menu_hover","invite","rightCursorHoldingCamera","leftCursorHoldingCamera","object_grab","object_rotate_button","object_scale_button","object_recenter_button","object_pin","object_zoom","object_scale","pen_color","pen_size","pen_mode","freeze_mode","video_share_mode","mute_mode","feedback","activeTips","_finishedScopes","_performStep","_userinput","_mediaCounter","prevTop","prevBottom","chosenTip","finishCount","Tip","tipRegion","broadcastTarget","rootStyles","tipBody","WebRTCScreenshareUnsupportedDialog","webrtc_screenshare_unsupported_dialog_extends","flexDirection","alignItems","fontSize","WebAssemblyUnsupportedDialog","webassembly_unsupported_dialog_extends","WebVRRecommendDialog","webvr_recommend_dialog_extends","FeedbackDialog","feedback_dialog_extends","frameBorder","marginHeight","marginWidth","HelpDialog","help_dialog_extends","LeaveRoomDialog","leave_room_dialog_extends","messageType","destinationUrl","SORT_ORDER_VIDEO","SORT_ORDER_AUDIO","SORT_ORDER_IMAGE","SORT_ORDER_PDF","SORT_ORDER_MODEL","SORT_ORDER_UNIDENTIFIED","mediaSortOrder","mediaSort","el1","el2","ObjectInfoDialog","object_info_dialog_defineProperty","mediaEntities","targetMatrix","enqueueWaypointTravelTo","snapToNavMesh","willMaintainInitialOrientation","updateMediaEntities","navigateNext","navigatePrev","navigate","pin","unpin","onPinChanged","toggleLights","targetIndex","onNavigated","_isRemoving","exitAfterRemove","object_info_dialog_extends","entryStyles","faChevronLeft","enqueueWaypointTravel","faChevronRight","OAuthDialog","renderSignInDisclaimer","renderTweetDisclaimer","oauthInfo","oauth_dialog_extends","emojiPlugin","createEmojiPlugin","hashtagPlugin","createHashtagPlugin","linkifyPlugin","createLinkifyPlugin","counterPlugin","createCounterPlugin","addEmoji","editorState","contentState","getCurrentContent","entityKey","createEntity","emojiUnicode","getLastCreatedEntityKey","currentSelectionState","getSelection","emojiAddedContent","emojiEndPos","blockSize","afterRemovalContentState","Modifier","removeRange","targetSelection","getSelectionAfter","insertText","getAnchorOffset","blockKey","getAnchorKey","getBlockForKey","getLength","newEditorState","EditorState","forceSelection","TweetDialog","createEditorStateWithText","editorRef","sendTweet","media_stored_file_url","getPlainText","posting","renderPostedDialog","tweet_dialog_extends","renderTweetDialog","EmojiSuggestions","EmojiSelect","CharCounter","draft_js_plugins_editor_lib_default","emojiSuggestions","limit","LobbyChatBox","lobby_chat_box_defineProperty","pendingMessage","onSendMessage","textRows","pendingMessageTextareaHeight","pendingMessageFieldHeight","discordSnippet","occupantSnippet","messageEntryPlaceholder","sendMessage","messageEntrySubmit","sendMessageIcon","EntryStartPanel","entering","onEnteringCanceled","ChatCommandHelp","commands","commandHelpOnTop","onTop","matchingPrefix","defaultStylesByTagName","noStyleTags","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","warmSerializeElement","navigateToClientInfo","currentParams","PresenceList","presence_list_defineProperty","faVideo","hmd","hmdIcon","faMobileAlt","discord","discordIcon","faDesktop","getPresenceIcon","isBot","isEntering","messageId","badge","renderExpandedList","domForPresence","onSignOut","expanded","messageCanvas","emojiRegex","CHAT_MESSAGE_TEXTURE_SIZE","messageBodyDom","fromSessionId","includeFromLink","multiLine","wrapStyle","mono","messageBodyClasses","includeClientLink","onFromClick","words","outWords","word","wordWrap","cleanedBody","Linkify_default","toEmojis","renderChatMessage","allowEmojiRender","isOneLine","entryDom","ReactDOM","xhtml","nodeType","Node","ELEMENT_NODE","cssTexts","cssText","ii","cssPropName","outerHTML","serializeElement","unmountComponentAtNode","meshEntity","blobUrl","meshMaterial","spawnChatMessage","_spawnChatMessage","ChatMessage","maySpawn","InWorldChatBox","in_world_chat_box_defineProperty","chat_command_help_ChatCommandHelp","accept","onObjectCreated","enableSpawning","faCamera","spawnMessageIcon","defaultEditors","useEditorWhitelist","editorWhitelist","avatar_editor_asyncToGenerator","AvatarEditor","avatar_editor_defineProperty","baseAvatarResults","editorLinks","previewGltfUrl","creatorAttribution","inputFiles","base_gltf_url","gltfs","randomAvatarResult","base","KHR_binary_glTF","bin","getWrappedInstance","filesToUpload","uploading","fileUploads","avatar_editor_objectSpread","createOrUpdateAvatar","onSave","getPreviewUrl","baseSid","avatarResult","propName","sid","dropdown_arrow_default","dropdown_arrow_2x_default","paddingBottom","ext","editors","uploadAvatar","textField","textarea","selectListingGrid","mapField","avatar_editor_extends","handleGltfLoaded","confirmDelete","deleteAvatar","has_listings","MicLevelWidget","mic_level_widget_defineProperty","startAnalyser","stopAnalyser","micUpdateInterval","micLevelMovingAverage","MovingAverage","average","movingAverage","micClip","muteOnEntry","viewBox","fill","xmlns","cy","fillOpacity","hasAudioTrack","mic_level_default","mic_level_2x_default","mic_denied_default","mic_denied_2x_default","NumberRangeSelector","number_range_selector_defineProperty","isDragging","myRoot","createRef","stopDragging","drag","clientX","offsetLeft","currentValue","onMouseDown","PREFERENCE_LIST_ITEM_TYPE","CHECK_BOX","SELECT","NUMBER_WITH_RANGE","MAX_RESOLUTION","MaxResolutionPreferenceItem","tabIndex","PreferenceListItem","preference_list_item_defineProperty","selectHovered","forceUpdate","UNSAFE_componentWillMount","renderControls","storedPref","prefType","storeKey","defaultBool","preference_list_item_MaxResolutionPreferenceItem","defaultString","preference_list_item_extends","onMouseLeave","number_range_selector_NumberRangeSelector","defaultNumber","isCheckbox","faUndo","addLocaleData","PreferencesScreen","preference_list_item_PreferenceListItem","general","advanced","OutputLevelWidget","output_level_widget_defineProperty","tonePlaying","playTestTone","toneClip","webmTone","mp3Tone","oggTone","wavTone","testToneTimeout","iconClass","speaker_level_default","speaker_level_2x_default","PhotoMessage","landingPageUrl","onShareClicked","VideoMessage","ImageMessage","spawnImage","PresenceLog","presence_log_defineProperty","entryClasses","presenceLogChat","oldName","newName","inRoom","presenceClasses","domForEntry","THUMBNAIL_TITLE","DISPLAY_IMAGE","faMusic","faImage","faNewspaper","faQuestion","faCube","ObjectList","object_list_defineProperty","inspecting","domForEntity","onInspectObject","onMouseOut","onMouseOver","resourceName","httpIndex","lessHost","hostSplit","substr","getDisplayString","faCubes","SettingsMenu","settings_menu_defineProperty","unexpand","showAsOverlay","onMouseUp","acanvas","renderExpandedMenu","rowClasses","hideExtranousItems","showRoomSettings","showCloseRoom","showRoomInfo","hubScene","showRoomSection","showStreamerMode","onCloseOverlay","faUserAlt","faCog","showPreferencesScreen","faDoorClosed","faInfoCircle","toggleStreamerMode","bottomLink","faBars","isStreaming","PreloadOverlay","onLoadClicked","MIC_ICONS","Mic0","Mic1","Mic2","Mic3","Mic4","Mic5","Mic6","Mic7","MicOff0","MicOff1","MicOff2","MicOff3","MicOff4","MicOff5","MicOff6","MicOff7","TopHUD","_2d_hud_defineProperty","showVideoShareOptions","lastActiveMediaSource","micLevel","cameraDisabled","penDisabled","mediaDisabled","getDisplayMedia","videoShareMediaSource","onEndShareVideo","onShareVideo","onShareVideoNotCapable","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","capitalize","iconForType","ShareScreenIconActive","ShareCameraIconActive","ShareScreenIcon","ShareCameraIcon","handleVideoShareClicked","videoSharingButtons","buildVideoSharingButtons","tipDivForType","cancelFunc","watching","onWatchEnded","showVideoShareFailed","hideVideoShareFailedTip","activeTip","micIcon","unselectable","uiStyles","onToggleMute","sourceNavigateToDefaultSource","SpawnIcon","onSpawnPen","isCursorHoldingPen","PenIconActive","PenIcon","onSpawnCamera","hasActiveCamera","CameraIconActive","CameraIcon","showStreamingTip","hideStreamingTip","react_components_2d_hud","SpectatingLabel","avatarEditorDebug","HMD_MIC_REGEXES","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","enumerateDevices","isMobilePhoneOrVR","AUTO_EXIT_TIMER_SECONDS","UIRoot","ui_root_defineProperty","enterInVR","showShareDialog","broadcastTipDismissed","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","showPrefs","waitingOnAudio","audioTrack","audioTrackClone","micDevices","autoExitTimerStartedAt","autoExitTimerInterval","autoExitMessage","secondsRemainingBeforeAutoExit","exited","objectInfo","objectSrc","isObjectListExpanded","isPresenceListExpanded","startAutoExitTimer","disableAutoExitOnIdle","endAutoExitTimer","signInMessageId","authChannel","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","ui_root_asyncToGenerator","subscriptions","isFavorited","initialIsFavorited","sceneLoaded","mediaSource","updateSubscribedState","forcedVREntryType","enterDaydream","enter2D","secondsSinceStart","checkForAutoExit","onConcurrentLoad","onIdleDetected","onActivityDetected","exitScene","grantedMicLabels","setMediaStreamToDefault","beginOrSkipAudioSetup","performDirectEntryFlow","availableVREntryTypes","_ref7","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","ideal","_ref9","getUserMedia","recreateAudioStream","_ref10","setLocalMediaStream","mediaStreamForMicAnalysis","fetchMicDevices","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","entry_step","onAudioReadyButton","hasHmdMicrophone","selectedMicLabel","enterScene","linkChannel","generateCode","updateScene","ui_root_objectSpread","DialogClass","closeDialog","beginStreaming","endStreaming","_ref16","broadcastedRoomConfirmed","onInterstitialPromptClicked","roomUnavailableReason","platformUnsupportedReason","exitSubtitleId","sendEnteringCancelledEvent","promptForNameAndAvatarBeforeEntry","hubIsBound","toggleFavorited","entryFavoriteButton","lobby_chat_box","entryDisallowed","attemptLink","sendEnteringEvent","handleForceEntry","entry_start_panel_EntryStartPanel","faArrowLeft","granted","onMicGrantButton","mic_granted_default","mic_granted_2x_default","subtitleId","mic_level_widget_MicLevelWidget","output_level_widget_OutputLevelWidget","selectedMicDeviceId","micDeviceChanged","mic_small_default","mic_small_2x_default","shouldShowHmdMicWarning","warning_icon_default","warning_icon_2x_default","overlay","showInAppBrowserDialog","in_app_browser_dialog_InAppBrowserDialog","showWebAssemblyDialog","webassembly_unsupported_dialog_WebAssemblyUnsupportedDialog","exitEventHandler","prevProps","showSignInDialog","showContextualSignInDialog","willCompileAndUploadMaterials","compileAndUploadMaterials","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","onShareVideoFailed","playerRig","ui-root","in-modal-or-overlay","isInModalOrOverlay","isExited","showPreload","isLoading","serviceWorker","showOAuthDialog","showInterstitialPrompt","oauth_dialog_OAuthDialog","onCloseOAuthDialog","renderExitedPane","react_components_loader","onLoadingFinished","preferences_screen_PreferencesScreen","renderInterstitialPrompt","renderBotMode","enteredOrWatching","enteredOrWatchingOrPreload","inEntryFlow","isWaitingForAutoExit","auto_exit_warning","state_route","renderDevicePanel","renderMicPanel","renderAudioSetupPanel","renderEntryStartPanel","dialogBoxContentsClassNames","showSettingsAsOverlay","presenceLogEntries","switchToInspectingObject","showMediaBrowser","hasTopTip","clientInfoClientId","getClientInfoClientId","showClientInfo","showObjectInfo","hasEmbedPresence","hasDiscordBridges","showBroadcastTip","showInviteTip","showChooseSceneButton","streamerName","Provider","preload_overlay_PreloadOverlay","onPreloadLoadClicked","profile_entry_panel","ui_root_extends","avatar_editor_AvatarEditor","onAvatarSaved","react_components_media_browser","renderDialog","updateHub","closeHub","createObject","changeScene","setAvatarUrl","client_info_dialog_ClientInfoDialog","object_info_dialog_ObjectInfoDialog","presence_log_PresenceLog","tip_Tip","confirmBroadcastedRoom","in_world_chat_box","inviteStyles","toggleShareDialog","onMiniInviteClicked","invite_dialog_InviteDialog","entry_code","initialIsSubscribed","link_dialog_LinkDialog","object_list_ObjectList","expand","presence_list_PresenceList","settings_menu_SettingsMenu","spectating_label_SpectatingLabel","topHud","toggleMute","shareVideo","endShareVideo","showWebRTCScreenshareUnsupportedDialog","isSupportAvailable","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","VALID_PERMISSIONS","HubChannel","hub_channel_defineProperty","Presence","_permissions","postgrest_role","nextRefresh","hub_channel_asyncToGenerator","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","initialOccupants","entryEvent","hub_channel_objectSpread","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEntered","msSinceLastEntered","getDate","isSameDay","object_type","update_hub","close_hub","subscription","allow","creatorAssignmentTokenEntry","_getCreatorAssignmentToken","perms_token","setPermissionsFromToken","auth_token","oauth_url","gltfNode","fileAccessToken","gltf_node","file_access_token","permsToken","_blockedSessionIds","unblock","completeSync","Set","canEnterRoom","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","endRecording","exceedsDensityThreshold","subtree","boundingData","isHighDensity","leftResult","rightResult","traverseMeshesAndAddShapes","shapePrefix","shapes","meshRoot","group","__proto__","roots","_roots","isGeometryHighDensity","navMesh","groupEnd","MessageDispatch","entryManager","addToPresenceLog","remountUI","message_dispatch_defineProperty","commandParts","dispatchCommand","activeElement","scales","curScale","captureSystem","enableFly","setDebug","debugEnabled","rename","available","forceEnableTouchscreen","SceneEntryManager","scene_entry_manager_defineProperty","whenSceneLoaded","_entered","scene_entry_manager_asyncToGenerator","session","verbose","waypointSystem","_setupPlayerRig","_setupBlocking","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","_runBot","sendEnteredEvent","hasLoaded","localMediaStream","getTracks","_setPlayerInfoFromProfile","avatarScale","_lastFetchedAvatarId","kickedClientId","_unpinElement","removeEntity","removeEntitiesOfClient","storedPromotionToken","gltfComponents","equalArray","every","mediaSrc","mediaVersion","mediaContentSubtype","pinnedEntityToGltf","_signInAndPinOrUnpinElement","_pinElement","_disableSignInOnPinAction","spawnMediaInfrontOfPlayer","or","handlePinEvent","currentVideoShareEntity","sendObjectSpawnedEvent","_forceExitFrom2DInterstitial","forceExitFrom2DInterstitial","contentEditable","clipboardData","getData","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","isDisplayMedia","newStream","frameRate","removeTrack","delaySpawn","audioInput","dataInput","crossorigin","onchange","getRecording","mozCaptureStream","INIT_TIMEOUT_MS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","outputArray","Subscriptions","subscriptions_defineProperty","registration","vapidPublicKey","_isSubscribed","subscriptions_asyncToGenerator","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","WireframeGeometry","LineSegments","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","invading","meshName","targetMesh","useMaterial","invadingOpacity","findInvaderMesh","alwaysHidden","radiusSquared","applyInvasionToMesh","updateBoneVisibility","IDLE_TIMEOUT_MS","CHARACTER_ACCELERATION_PATH","BASIC_ACTIVITY_PATHS","resetTimeout","idleTimeout","lastInputCheck","onIdleTimeout","basicActivity","activityPath","cameraEls","cameraUpdateCount","ticks","updateMyCamera","playerModelEl","updatePlayerHead","headEl","myCameraTool","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","MouseDevice","queueEvent","passive","deltaX","deltaY","deltaMode","middle","clientY","innerHeight","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","mouseDownMiddleThisFrame","write","didStopProcessingEarly","setVector2","setValueType","ArrayBackedSet","initialItems","oncontextmenu","KeyboardDevice","seenKeys","HudDevice","XboxControllerDevice","buttonMap","buttonId","axisMap","axisId","getGamepads","connected","xboxPaths","hapticActuators","Pose","fromOriginAndDirection","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","fromArray","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","TRIGGER","OculusGoControllerDevice","sittingToStandingMatrix","rayObject","rayMatrixWorld","setPose","setMatrix4","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","gamepads","WindowsMixedRealityControllerDevice","CircularBuffer","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","findHandCollisionTargetForHand","handCollisions","getCollisions","bodyData","bodyUuidToData","notRemoteHoverTargets","remoteHoverTargets","findRemoteHoverTarget","isUI","updateCursorIntersection","leftRemoteHoverTarget","rightRemoteHoverTarget","getRightRemoteHoverTarget","getLeftRemoteHoverTarget","dropPath","hoverFn","previousState","tickInteractor","lostOwnership","calculateCursorPose","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","cursorController","rawIntersections","cursorTargettingSystem","remoteHoverTarget","isInteractable","isStaticControlledMedia","isStaticMedia","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findByJob","findByTouch","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","TAP_PATHS","x1","y1","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","framesUntilGrab","framesUntilUnassign","second","first","cameraMover","move","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","xforms","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","copyVec2IfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","any","touch_axis_scroll","snap_to","touching","diff_vec2","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","inspectZoomSpeed","keyboardMouseUserBindings","global","xform","priority","rightCursorHoldingUI","rightCursorHoveringOnVideo","inputFocused","rightCursorHoveringOnUI","touchCamDelta","touchscreenUserBindings","rightCursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","rightGripRisingGrab","leftGripRisingGrab","lowerButtons","upperButtons","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","leftHandHoveringOnNothing","leftCursorHoveringOnUI","leftCursorHoveringOnVideo","rightCursorHoveringOnNothing","leftCursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","leftCursorHoldingUI","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","rightCursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","rightHandHoveringOnNothing","wakeLeft","wakeRight","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lJoyYDeadzoned","lTouch","lTouchScaled","lTouchXScaled","lTouchY","lTouchYScaled","lDpadNorth1","lDpadSouth1","lDpadEast1","lDpadWest1","lDpadCenter1","lDpadNorth2","lDpadSouth2","lDpadEast2","lDpadWest2","lDpadCenter2","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","touchCharacterAcceleration","lCharacterAcceleration","leftBoost","leftUndoDrawing","rButton","rAxis","rPose","rTouch","rJoy","rJoyYDeadzoned","rDpadNorth1","rDpadSouth1","rDpadEast1","rDpadWest1","rDpadCenter1","rDpadNorth2","rDpadSouth2","rDpadEast2","rDpadWest2","rDpadCenter2","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","rightCursorDrop1","rightCursorDrop2","leftCursorDrop1","leftCursorDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","rightUndoDrawing","ensureFrozenViaDpad","ensureFrozenViaKeyboard","ensureFrozenViaButtons","thawViaDpad","thawViaKeyboard","thawViaButtons","freezeButtons","inspectButtons","rSnapRight1","rSnapLeft1","rSnapRight2","rSnapLeft2","keyboardSnapRight","keyboardSnapLeft","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","rightHandTeleporting","leftHandTeleporting","leftCursorHoveringOnPen","leftCursorHoveringOnCamera","viveWandUserBindings","indexUserBindings","viveFocusPlusUserBindings","viveCosmosUserBindings","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","rightCursorHoldingNothing","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadX","touchpadXForPen","touchpadY","touchpadYForPen","triggerRising","triggerFalling","dpadCenterStrip","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","satisfiedBy","notEmpty","isSubpath","canMask","masker","masked","maskerKey","maskerPath","maskedKey","maskedPath","isActive","toggleSet","pendingSetChanges","generation","generations","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","addExtraMappings","activeDevice","deleteExtraMappings","updateBindingsForVRMode","gamepadConnected","gamepadDevice","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","leftHandHoveringOnVideo","rightHandHoveringOnVideo","leftCursorHoldingNothing","resolveActionSets","activeSetsChanged","il","elem","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","PATHS_TO_SHOW","DELIMITER","replacer","userinputFrameStatus","pathsOutput","strings","maskers","logBindings","MEDIA_SEARCH_PATHS","CursorTargettingSystem","setDirty","dirty","observer","MutationObserver","observe","childList","populateEntities","shouldEnableRemote","remote","teleporting","woke","vrRemotePenIntersection","CursorTogglingSystem","domContentLoadedButComponentsMayNotHave","gotComponentReferences","rightHandTeleporter","leftHandTeleporter","gazeTeleporter","inspectingInVR","shouldEnableLeftRemote","shouldEnableRightRemote","MESSAGE_TYPES","CONSTANTS","BUFFER_CONFIG","WORLD_CONFIG","debugDrawMode","AmmoDebugConstants","DrawWireframe","PhysicsSystem","physics_system_defineProperty","debugRequested","enableDebug","disableDebug","objectMatricesFloatArray","bodyUuids","DYNAMIC","BODY_DATA_SIZE","MATRIX_OFFSET","LINEAR_VELOCITY_OFFSET","ANGULAR_VELOCITY_OFFSET","collisions","COLLISIONS_OFFSET","collidingIndex","objectMatricesIntArray","indexToUuid","ammoWorker","TRANSFER_DATA","Atomics","debugIndex","debugGeometry","setDrawRange","AmmoWorker","workerHelpers","WorkerHelpers","bodyHelpers","shapeHelpers","nextBodyUuid","nextShapeUuid","ArrayBuffer","MAX_BODIES","Int32Array","INIT","worldConfig","wasmUrl","ammoWasmUrl","BASE_ASSETS_PATH","READY","alive","init2","shapeHelper","BODY_READY","SHAPES_READY","bodyUuid","shapesUuid","SharedArrayBuffer","debugMesh","debugSharedArrayBuffer","DefaultBufferSize","Uint32Array","debugVertices","debugColors","debugMaterial","LineBasicMaterial","VertexColors","renderOrder","addBody","updateBody","removeBody","addShapes","removeShapes","addConstraint","constraintId","targetUuid","removeConstraint","registerBodyHelper","registerShapeHelper","ACTIVATION_STATE","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","prevLeftRemote","constraintPairs","constraintTag","entityId","heldEntityId","activationState","ACTIVE_TAG","DISABLE_DEACTIVATION","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","existsAndHeldInEither","holderA","holderB","TwoPointStretchingSystem","stretching","stretched","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","hovered2","HoldableButtonSystem","prevHeld","heldLeft","prevHeldLeft","hasButtonComponent","BUTTON_COMPONENT_NAMES","getHoverableButton","dispatch","HOVERED","UNHOVERED","HoverButtonSystem","button2","DrawingMenuSystem","drawing_menu_system_defineProperty","cameraWorldPos","drawingMenus","getMenuScale","remotes","undoDraw","serializeDrawing","lastIntersection","hideMenus","cursorControllers","getHovered","showMenu","handleButtons","scaleMenus","registerDrawingMenu","networkedDrawingEl","menuEl","undoButton","deleteButton","serializeButton","unregisterDrawingMenu","getSpecificHoverMenu","findHoverMenu","HoverMenuSystem","prevHoverMenu","hoverMenu2","prevHoverMenu2","SuperSpawnerSystem","maybeSpawn","superSpawner","isPermitted","performSpawn","copyState","STRENGTH","DROP","PICKUP","BUTTON_PRESSED","HOVER","STRETCH_BASE","STRETCH_DISTANCE","TELEPORTING","TELEPORTED","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","interactLeft","interactRight","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","leftRemoteStrength","buttonLeftStrength","buttonRightStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","tempVec3","tempVec4","INSTANCE_DATA_BYTE_LENGTH","DEFAULT_COLOR","HIDE_MATRIX","makeScale","sizeofInstances","inspectLayer","HubsBatchRawUniformGroup","BatchRawUniformGroup","maxInstances","hubs_sweepParams","hubs_interactorOnePos","hubs_isFrozen","hubs_interactorTwoPos","hubs_time","instanceId","setInstanceTransform","setInstanceColor","hideDueToPinning","highlightInteractorOne","highlightInteractorTwo","MAX_INSTANCES","UBO_BYTE_LENGTH","BatchManagerSystem","WeakMap","WebGL2RenderingContext","getParameter","MAX_UNIFORM_BLOCK_SIZE","ubo","BatchManager","unlit","unlitBatchVert","unlitBatchFrag","rootObject","batchedCount","addMesh","removeMesh","InteractionSfxSystem","colorShift","ColorShiftWorker","getThemeColorShifter","getImageData","ImageData","multiviewVertPrefix","nonmultiviewVertPrefix","multiviewFragPrefix","nonmultiviewFragPrefix","didRegisterWithSystem","didFailToRegister","registered","updateUVs","normalizedFrame","memo","spritesheet","missingSprites","ret","getSheetType","spritesheetAction","SHEET_TYPES","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","getHoverableVisuals","comp","createGeometry","maxSprites","mvCols","InterleavedBuffer","InterleavedBufferAttribute","indices","setIndex","ZEROS","SpriteSystem","sheetType","slots","indexWithSprite","notice","spriteWithIndex","multiview","vert","frag","domReady","spritesheetPng","spritesheetActionPng","spritesheetNoticePng","spritesheetTexture","RawShaderMaterial","u_spritesheet","RENDER_ORDER","HUD_ICONS","uniformsNeedUpdate","aEnableSweepingEffect","aSweepParams","enableSweepingEffectValue","setXY","spritesheetNotice","aUvs","aVertices","setXYZ","calculateIconTransform","backward","camToWaypoint","v1","waypoint","extractBasis","isOccupiableSpawnPoint","waypointData","isUnoccupiableSpawnPoint","loadTemplateAndAddToScene","templateId","loadTemplatesForWaypointData","templateIds","templatesToLoadForWaypointData","isOccupiedByMe","waypointComponent","isOccupied","unoccupyWaypoint","unoccupyWaypoints","waypointComponents","WaypointSystem","helperMat4","waypointForTemplateEl","elementsFromTemplatesFor","eventHandlers","lostOwnershipOfWaypoint","waypointPreviewAvatar","releaseAnyOccupiedWaypoints","currentWaypoint","teleportToWaypoint","iconEl","shouldLandWhenPossible","tryTeleportToOccupiableWaypoint","previouslyOccupiedWaypoints","tryToOccupy","didOccupy","wp","setupEventHandlersFor","onUnhover","onInteract","setupEventHandlers","waypointId","elementsFromTemplates","li","unregisterComponent","ri","getUnoccupiableSpawnPoint","candidates","mightNeedRespawn","ownershipLostTime","connectedClients","shouldTryToOccupy","isMineOrTakeOwnership","occupyWaypoint","tryToOccupyAnyOf","waypoints","candidate","currentMoveToSpawn","nextMoveToSpawn","waitOneTick","nextMoveToSpawnResolve","moveToUnoccupiableSpawnPoint","resolvedWaypointOrNull","currentMoveToSpawnResolve","waypointComponentOrNull","tickTemplateEl","elementFromTemplate","mat4Pool","getCurrentPlayerHeight","world","NAV_ZONE","qsAllowWaypointLerp","calculateDisplacementToDesiredPOV","translationCoordinateSpace","translated","localTranslation","povMat4","allowVerticalMovement","localDisplacement","displacementToDesiredPOV","SNAP_ROTATION_RADIAN","BASE_SPEED","CharacterControllerSystem","character_controller_system_defineProperty","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","isMotionDisabled","navMeshExists","findPositionOnNavMesh","inPosition","outPosition","initialOrientation","finalPosition","finalPOV","shouldUnoccupyWaypointsOnceMoving","snapRotatedPOV","newPOV","startPOVPosition","desiredPOVPosition","navMeshSnappedPOVPosition","interpolatedWaypoint","startTranslation","waypointPosition","activeWaypoint","waypointComponentData","waypointTravelTime","isInstant","waypointTravelStartTime","animationIsOver","travelByWaypoint","wasFlying","messageDispatch","didStopFlying","navNode","dXZ","zCharacterAcceleration","relativeMotion","lerpC","nextRelativeMotion","triedToMove","lengthSq","shouldRecomputeNavGroupAndNavNode","shouldResnapToNavMesh","squareDistNavMeshCorrection","findPOVPositionAboveNavMesh","startingFeetPosition","desiredFeetPosition","outPOVPosition","shouldRecomputeGroupAndNode","navGroup","inTransform","motion","getClosestNode","outPos","getGroup","clampStep","CursorPoseTrackingSystem","pairs","MIN_DISTANCE","ScaleInScreenSpaceSystem","scale_in_screen_space_defineProperty","parentScale","updateMediaAudioSettings","mediaDistanceModel","mediaRolloffFactor","mediaRefDistance","mediaMaxDistance","mediaConeInnerAngle","mediaConeOuterAngle","mediaConeOuterGain","updateAvatarAudioSettings","avatarDistanceModel","avatarRolloffFactor","avatarRefDistance","avatarMaxDistance","AudioSettingsSystem","audio_settings_system_defineProperty","defaultSettings","mediaVolume","audioSettings","mediaAudioSources","avatarAudioSources","onSceneReset","registerMediaAudioSource","unregisterMediaAudioSource","registerAvatarAudioSource","unregisterAvatarAudioSource","mediaAudioSource","avatarAudioSource","onSoundSourceSet","positional","setupSound","monitoringEnabled","getVolume","setVolume","EnterVRButtonSystem","wasGhost","enableButton","enterVREl","disableButton","DOMContentDidLoad","interactionSfxSystem","superSpawnerSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","hapticFeedbackSystem","drawingMenuSystem","enterVRButtonSystem","didInteractLeftThisFrame","didInteractRightThisFrame","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","_tryAddingAudioTrack","addScalar","clampScalar","HIGHLIGHT","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","firstHitOnly","lineGeometry","Line","cameraPos","isGrabbing","intersectionIsValid","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","almostEquals","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","penVisible","penTipPosition","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","penTip","penLaserAttributesUpdated","penLaserAttributes","laserVisible","laserInHand","laserOrigin","remoteLaserOrigin","laserTarget","_handleInput","_getIntersection","_updatePenTip","_updateLaser","_setPenVisible","_doDraw","_startDraw","_endDraw","penScaleMod","_changeRadius","_changeColor","_undoDraw","worldQuaternion","laserStartPosition","laserEndPosition","camerWorldPosition","lastIntersectedObject","getLastPoint","_getNormal","draw","directionToCamera","startDraw","endDraw","mod","InterpolationBuffer","tipMaterial","lineCurve","LineCurve3","TubeBufferGeometry","laser","laserTip","originBuffer","MODE_LERP","targetBuffer","originBufferPosition","targetBufferPosition","getPosition","laserTipVisible","SharedBufferGeometry","primitiveMode","maxBufferSize","geometries","addBuffer","restartPrimitive","addVertex","prevIdx","componentSize","diff","undo","normals","colors","addColor","addNormal","computeBoundingSpheres","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","exporter","GLTFExporter","convertToTriangles","networked-drawing-buffer","parseChunks","includeCustomExtensions","asset","generator","createGLBBlob","NEGATIVE_INFINITY","temp","drawRange","attribute","getX","getY","getZ","originalGeometry","originalPositions","originalColors","originalNormals","positions","i2","i3","deserializeDrawing","setHex","copyArray","broadcastDataGuaranteed","didWork","pointCount","_draw","_updateBuffer","drawTime","datum","idxLength","parts","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","down","segmentIndex","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","_getDeserializeButton","networkedDrawingBuffer","finishDrawing","ACTIVATION_STATES","ISLAND_SLEEPING","WANTS_DEACTIVATION","DISABLE_SIMULATION","angularFactor","KINEMATIC","emitCollisionEvents","disableCollision","scaleAutoUpdate","CYLINDER","SPHERE","CAPSULE","CONE","HACD","VHACD","maxHalfExtent","sphereRadius","cylinderAxis","bodyEl","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","requiresNetworkUpdate","BUILD_VERSION","HUD_BACKGROUND","isEmbed","firstSyncSource","syncSource","isTelemetryDisabled","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createMemoryHistory","createBrowserHistory","basename","qsVREntryType","userinputSets","Router","Route","react_components_ui_root","hub_objectSpread","hub_isBotMode","hub_store","hub_mediaSearchStore","mountUI","updateEnvironmentForHub","sceneUrl","isLegacyBundle","sceneErrorHandler","environmentScene","model_url","loadingEnvironment","defaultSpaceTopic","topics","glbAsset","assets","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","environmentEl","fader","updateUIForHub","enterSceneWhenLoaded","hub_asyncToGenerator","initProfile","WebAssembly","defaultRoomId","setRegistration","setRegistrationFailed","initialBatchImage","texImage2D","compressedTexImage2D","patchThreeAllocations","predicate","onFailure","actionError","_x10","_x11","sceneInfo","isInOAuth","exitOAuth","serializableDetail","getTwitterOAuthURL","_x12","handleEarlyVRMode","getVRDisplay","chatFocusTarget","RTCDataChannelEvent","buildNumber","reload","hasVREntryDevice","onFirstEnvironmentLoad","runBotMode","previewCamera","reorder","setupLobbyCamera","isReloading","retDeployReconnectInterval","retPhxChannel","setVapidPublicKey","vapid_public_key","_x13","pushSubscriptionEndpoint","getCurrentEndpoint","oauthFlowPermsToken","createHubChannelParams","push_subscription_endpoint","migrateToNewReticulumServer","deployNotification","ret_version","ret_pool","tryReconnect","_ref11","oldSocket","setSocket","teardown","_x14","_ref12","_x15","hubPhxChannel","isInitialJoin","presenceSync","setPhoenixChannel","_ref13","session_token","vrHudPresenceCount","sendProfileUpdate","__hadInitialSync","isSelf","currentMeta","_ref14","setClientId","setJoinToken","_x17","setHubChannel","setSubscribed","web_push","hub_requires_oauth","allowNAFTraffic","hubs","embedTokenEntry","onMediaSearchCancelled","objectsScene","objectsUrl","objectsEl","connectToScene","room","serverURL","newHostPollInterval","setReconnectionListeners","currentServerURL","serverUrl","newServerURL","getHost","sendViaPhoenix","reliable","isOpen","connectionState","nafrPayload","naf","reliableTransport","unreliableTransport","loadEnvironmentAndConnect","connectionErrorTimeout","connectError","isFull","handleHubChannelJoined","_x16","oauth_info","handleIncomingNAF","unparsedData","incomingMessage","userInfo","getAuthor","_createInWorldLogMessage","createInWorldLogMessage","stale_fields","titleParts","oldSlug","slug","entry_mode"],"mappings":"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EAAQc,WAAWS,SAAW,SAGhCvB,EAAQc,WAAa,CACnBS,SAAU,IAQdvB,EAAQwB,QAAUC,IAchB,MAAM3M,EAAQkL,EAAQc,WAAWS,SAASE,GAC1C,GAAqB,kBAAV3M,GAAuC,iBAAhB2M,EAAgC,CAEhE,MADyC,iBAAhBA,GAAkCxB,GAChCnL,EAE3B,OAAOA,GAIX,IAAI4M,EAAiB,GASrB1B,EAAQ2B,MAAQ,CAACC,EAAWC,KAC1B,MAAMC,EACH9B,EAAQc,YAAcd,EAAQc,WAAWiB,QAAU/B,EAAQc,WAAWiB,OAAOH,IAC9EF,EAAeE,GACjB,OAAOE,GAAOD,SAAgBC,KAASA,GAGzC9B,EAAQgC,KAAO,CAACC,EAAUC,IAChBlC,EAAQc,YAAcd,EAAQc,WAAWqB,OAASnC,EAAQc,WAAWqB,MAAMF,IAAcC,EAGnGlC,EAAQoC,WAAaC,IACnBpC,EAAUoC,GAEZrC,EAAQC,QAAU,IAAMA,EAETD,mDClHf,MAAMsC,EAAa,CACjB,OACA,WACA,aACA,YACA,eACA,WACA,SACA,YACA,WACA,cACA,QACA,UACA,UACA,OACA,SACA,UACA,WACA,SACA,WACA,aACA,WACA,SACA,UACA,UACA,OACA,QACA,QACA,UACA,OACA,YACA,WACA,SACA,WACA,OACA,WACA,WACA,SACA,QACA,YACA,MACA,WACA,SACA,UACA,QACA,WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,EAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YAC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AQtxC,EAASR,UAClBQ,EAASR,SAASjQ,IAAI8hD,GAEtBA,EAAGrxC,EAASR,UAhBvBja,EAAAY,EAAAkX,EAAA,sBAAA+zC,IAAA7rD,EAAAY,EAAAkX,EAAA,sBAAAyhB,oPCGA,MAAMyyB,EAAQ,CACZ,gBACA,cACA,oBACA,cACA,YACA,cACA,aACA,aACA,aACA,gBACA,gBACA,gBACA,gBACA,YACA,eACA,mBACA,mBACA,iBACA,gBACA,kBACA,eACA,eACA,mBACA,iBACA,WACA,cACA,gBACA,UACA,WACA,gBACA,cACA,YACA,WACA,YACA,YACA,mBACA,iBACA,aACA,aACA,YACA,cACA,eACA,cACA,cACA,UACA,WACA,eACA,eACA,YACA,mBACA,gBACA,oBACA,kBACA,YACA,cACA,kBACA,aACA,cACA,eACA,cACA,cACA,cACA,iBACA,kBACA,cACA,WACA,WACA,cACA,OACA,mBACA,cACA,mBACA,cACA,iBACA,aACA,cACA,cACA,gBACA,qBACA,iBACA,eACA,gBACA,eACA,SACA,YACA,iBAGF,SAASC,EAAaC,GACpB,OAAOA,EAAIh9C,KAAKC,MAAMD,KAAKE,SAAW88C,EAAIrtD,SAOrC,SAAestD,IAAtB,OAAAC,EAAA5sD,MAAA4K,KAAAkG,uCAAO,YACL,MACM+7C,SAAwB/4C,YADA,+DACoD2C,QAClF,OAA8B,IAA1Bo2C,EAAextD,OAGV,IAAIyS,IAAIg7C,IAAO58C,SAASS,MAAMA,KAGhC87C,EADWI,EAAeriD,IAAI45C,GAAUA,EAAOt5B,kgCCvGxD,MAAMiiC,EAAkB,gBAClBC,EAAwBprD,SACxBqrD,EAA6B,qCAC7BC,EAAY,IAAIC,YAMTC,EAAS,CACpBtiC,GAAI,aAEJuiC,YAAa,CACXt2C,QAAS,CACP+Z,KAAM,SACNw8B,sBAAsB,EACtBC,WAAY,CACVC,YAAa,CAAE18B,KAAM,SAAU28B,QAAS,yBACxC7J,SAAU,CAAE9yB,KAAM,UAElB48B,iBAAkB,CAAE58B,KAAM,YAI9Bzc,YAAa,CACXyc,KAAM,SACNw8B,sBAAsB,EACtBC,WAAY,CAC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b,cAAc,EAAM1nC,CAACgsB,KAAO6hF,kBAAmBnrJ,KAAKq/B,MAAM+rH,SAC5FF,EAAStrJ,IACRrJ,IACiC,KAA9ByJ,KAAKq/B,MAAMgsH,gBACV90J,EAAEimB,MAAM,KAAK,GAAGoC,WAAW5e,KAAKq/B,MAAMgsH,eAAe7uI,MAAM,KAAK,MAChEu0H,GAAAr+H,EAAApP,cAAA,OAAK88B,UAAWkpC,KAAOzzC,MAAOr+B,IAAKjB,GACjCw6I,GAAAr+H,EAAApP,cAAA,OAAK88B,UAAWkpC,KAAO2b,SAAvB,IAAkC1uF,GAClCw6I,GAAAr+H,EAAApP,cAAA,WACEytI,GAAAr+H,EAAApP,cAAC8tI,GAAA,EAAD,CAAkBlxH,eAAgB3pB,EAAEimB,MAAM,KAAK,2HArC5CyuI,eACA,CACjBI,eAAgBtqH,KAAUI,OAC1BiqH,MAAOrqH,KAAUG,uGCPrB,MAAMoqH,GAAyB,GAGzBC,GAAc,CAClBC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAKHC,GAAW,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA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","file":"assets/js/hub-01a96976b2dc72aa810f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t5: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/js/\" + ({}[chunkId]||chunkId) + \"-\" + {}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1282,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.debugUserInput = {};\npaths.actions.debugUserInput.describeCurrentMasks = \"/actions/debugUserInput/describeCurrentMasks\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.dCharSpeed = \"/actions/dCharSpeed\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFly = \"/actions/toggleFly\";\npaths.actions.toggleUI = \"/actions/toggleUI\";\npaths.actions.waypointDeltaDistance = \"/actions/waypointDeltaDistance\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.right = {};\npaths.actions.cursor.right.pose = \"/actions/cursor/right/Pose\";\npaths.actions.cursor.right.hideLine = \"/actions/cursor/right/HideLine\";\npaths.actions.cursor.right.grab = \"/actions/cursor/right/Grab\";\npaths.actions.cursor.right.drop = \"/actions/cursor/right/Drop\";\npaths.actions.cursor.right.modDelta = \"/actions/cursor/right/ModDelta\";\npaths.actions.cursor.right.startDrawing = \"/actions/cursor/right/StartDrawing\";\npaths.actions.cursor.right.stopDrawing = \"/actions/cursor/right/StopDrawing\";\npaths.actions.cursor.right.undoDrawing = \"/actions/cursor/right/UndoDrawing\";\npaths.actions.cursor.right.penNextColor = \"/actions/cursor/right/PenNextColor\";\npaths.actions.cursor.right.penPrevColor = \"/actions/cursor/right/PenPrevColor\";\npaths.actions.cursor.right.scalePenTip = \"/actions/cursor/right/ScalePenTip\";\npaths.actions.cursor.right.scaleGrabbedGrabbable = \"/actions/cursor/right/ScaleGrabbedGrabbable\";\npaths.actions.cursor.right.mediaVolumeMod = \"/actions/cursor/right//mediaVolumeMod\";\npaths.actions.cursor.right.takeSnapshot = \"/actions/cursor/right/TakeSnapshot\";\npaths.actions.cursor.right.wake = \"/actions/cursor/right/wake\";\npaths.actions.cursor.left = {};\npaths.actions.cursor.left.pose = \"/actions/cursor/left/Pose\";\npaths.actions.cursor.left.hideLine = \"/actions/cursor/left/HideLine\";\npaths.actions.cursor.left.grab = \"/actions/cursor/left/Grab\";\npaths.actions.cursor.left.drop = \"/actions/cursor/left/Drop\";\npaths.actions.cursor.left.modDelta = \"/actions/cursor/left/ModDelta\";\npaths.actions.cursor.left.startDrawing = \"/actions/cursor/left/StartDrawing\";\npaths.actions.cursor.left.stopDrawing = \"/actions/cursor/left/StopDrawing\";\npaths.actions.cursor.left.undoDrawing = \"/actions/cursor/left/UndoDrawing\";\npaths.actions.cursor.left.penNextColor = \"/actions/cursor/left/PenNextColor\";\npaths.actions.cursor.left.penPrevColor = \"/actions/cursor/left/PenPrevColor\";\npaths.actions.cursor.left.scalePenTip = \"/actions/cursor/left/ScalePenTip\";\npaths.actions.cursor.left.scaleGrabbedGrabbable = \"/actions/cursor/left/ScaleGrabbedGrabbable\";\npaths.actions.cursor.left.mediaVolumeMod = \"/actions/cursor/left//mediaVolumeMod\";\npaths.actions.cursor.left.takeSnapshot = \"/actions/cursor/left/TakeSnapshot\";\npaths.actions.cursor.left.wake = \"/actions/cursor/left/wake\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.actions.startInspecting = \"/actions/startInspecting\";\npaths.actions.stopInspecting = \"/actions/stopInspecting\";\npaths.actions.inspectZoom = \"/actions/inspectZoom\";\npaths.actions.inspectPanY = \"/actions/inspectPanY\";\npaths.actions.resetInspectView = \"/actions/resetInspectView\";\npaths.actions.nextCameraMode = \"/actions/nextCameraMode\";\npaths.actions.spawnEmoji0 = \"/actions/spawnEmoji0\";\npaths.actions.spawnEmoji1 = \"/actions/spawnEmoji1\";\npaths.actions.spawnEmoji2 = \"/actions/spawnEmoji2\";\npaths.actions.spawnEmoji3 = \"/actions/spawnEmoji3\";\npaths.actions.spawnEmoji4 = \"/actions/spawnEmoji4\";\npaths.actions.spawnEmoji5 = \"/actions/spawnEmoji5\";\npaths.actions.spawnEmoji6 = \"/actions/spawnEmoji6\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.buttonMiddle = \"/device/mouse/buttonMiddle\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.smartMouse.shouldMoveCamera = \"/device/smartMouse/shouldMoveCamera\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.touchscreen.anything = \"/device/touchscreen/anything\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k === \" \" ? \"space\" : k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import appLogo from \"../assets/images/app-logo.png\";\nimport companyLogo from \"../assets/images/company-logo.png\";\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\nimport pdfjs from \"pdfjs-dist\";\n\n// Read configs from global variable if available, otherwise use the process.env injected from build.\nconst configs = {};\nlet isAdmin = false;\n\n[\n  \"RETICULUM_SERVER\",\n  \"THUMBNAIL_SERVER\",\n  \"CORS_PROXY_SERVER\",\n  \"NON_CORS_PROXY_DOMAINS\",\n  \"SENTRY_DSN\",\n  \"GA_TRACKING_ID\",\n  \"SHORTLINK_DOMAIN\",\n  \"BASE_ASSETS_PATH\"\n].forEach(x => {\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\n\n  if (x === \"BASE_ASSETS_PATH\" && configs[x]) {\n    // eslint-disable-next-line no-undef\n    __webpack_public_path__ = configs[x];\n\n    // Using external CDN to reduce build size\n    pdfjs.GlobalWorkerOptions.workerSrc = `${configs[x]}../assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js`;\n  }\n});\n\n// Also include configs that reticulum injects as a script in the page head.\n\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\n\nif (process.env.APP_CONFIG) {\n  window.APP_CONFIG = process.env.APP_CONFIG;\n}\n\nif (window.APP_CONFIG) {\n  configs.APP_CONFIG = window.APP_CONFIG;\n  const { theme } = configs.APP_CONFIG;\n  if (theme) {\n    const colorVars = [];\n    for (const key in theme) {\n      if (!theme.hasOwnProperty(key)) continue;\n      colorVars.push(`--${key}: ${theme[key]};`);\n    }\n    const style = document.createElement(\"style\");\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\n    document.head.prepend(style);\n  }\n\n  if (!configs.APP_CONFIG.features) {\n    configs.APP_CONFIG.features = {};\n  }\n} else {\n  configs.APP_CONFIG = {\n    features: {}\n  };\n}\n\nconst appConfigSchema = process.env.APP_CONFIG_SCHEMA;\n\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\n\nconfigs.feature = featureName => {\n  if (isLocalDevelopment && !process.env.USE_FEATURE_CONFIG) {\n    // This code will be removed in production\n    if (appConfigSchema && appConfigSchema.features && appConfigSchema.features[featureName]) {\n      const valueType = appConfigSchema.features[featureName].type;\n\n      if (valueType === \"boolean\") {\n        return true;\n      } else {\n        return undefined;\n      }\n    }\n  }\n\n  const value = configs.APP_CONFIG.features[featureName];\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\n    return forceEnableSpoke || value;\n  } else {\n    return value;\n  }\n};\n\nlet localDevImages = {};\nif (isLocalDevelopment) {\n  localDevImages = {\n    logo: appLogo,\n    company_logo: companyLogo,\n    editor_logo: sceneEditorLogo\n  };\n}\n\nconfigs.image = (imageName, cssUrl) => {\n  const url =\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\n    localDevImages[imageName];\n  return url && cssUrl ? `url(${url})` : url;\n};\n\nconfigs.link = (linkName, defaultValue) => {\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\n};\n\nconfigs.setIsAdmin = _isAdmin => {\n  isAdmin = _isAdmin;\n};\nconfigs.isAdmin = () => isAdmin;\n\nexport default configs;\n","const adjectives = [\n  \"able\",\n  \"absolute\",\n  \"acceptable\",\n  \"acclaimed\",\n  \"accomplished\",\n  \"accurate\",\n  \"aching\",\n  \"acrobatic\",\n  \"adorable\",\n  \"adventurous\",\n  \"basic\",\n  \"belated\",\n  \"beloved\",\n  \"calm\",\n  \"candid\",\n  \"capital\",\n  \"carefree\",\n  \"caring\",\n  \"cautious\",\n  \"celebrated\",\n  \"charming\",\n  \"daring\",\n  \"darling\",\n  \"dearest\",\n  \"each\",\n  \"eager\",\n  \"early\",\n  \"earnest\",\n  \"easy\",\n  \"easygoing\",\n  \"ecstatic\",\n  \"edible\",\n  \"fabulous\",\n  \"fair\",\n  \"faithful\",\n  \"familiar\",\n  \"famous\",\n  \"fancy\",\n  \"fantastic\",\n  \"far\",\n  \"generous\",\n  \"gentle\",\n  \"genuine\",\n  \"giant\",\n  \"handmade\",\n  \"handsome\",\n  \"handy\",\n  \"happy\",\n  \"icy\",\n  \"ideal\",\n  \"identical\",\n  \"keen\",\n  \"lasting\",\n  \"lavish\",\n  \"magnificent\",\n  \"majestic\",\n  \"mammoth\",\n  \"marvelous\",\n  \"natural\",\n  \"obedient\",\n  \"palatable\",\n  \"parched\",\n  \"passionate\",\n  \"pastel\",\n  \"peaceful\",\n  \"perfect\",\n  \"perfumed\",\n  \"quaint\",\n  \"qualified\",\n  \"radiant\",\n  \"rapid\",\n  \"rare\",\n  \"safe\",\n  \"sandy\",\n  \"satisfied\",\n  \"scaly\",\n  \"scarce\",\n  \"scared\",\n  \"scary\",\n  \"scented\",\n  \"scientific\",\n  \"secret\",\n  \"sentimental\",\n  \"talkative\",\n  \"tangible\",\n  \"tart\",\n  \"tasty\",\n  \"tattered\",\n  \"teeming\",\n  \"ultimate\",\n  \"uncommon\",\n  \"unconscious\",\n  \"understated\",\n  \"warm\",\n  \"active\",\n  \"adept\",\n  \"admirable\",\n  \"admired\",\n  \"adorable\",\n  \"adored\",\n  \"advanced\",\n  \"affectionate\",\n  \"beneficial\",\n  \"best\",\n  \"better\",\n  \"big\",\n  \"cheerful\",\n  \"cheery\",\n  \"chief\",\n  \"chilly\",\n  \"classic\",\n  \"clean\",\n  \"clear\",\n  \"clever\",\n  \"decent\",\n  \"decisive\",\n  \"deep\",\n  \"defiant\",\n  \"definitive\",\n  \"delectable\",\n  \"delicious\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elegant\",\n  \"elementary\",\n  \"elliptical\",\n  \"fast\",\n  \"favorable\",\n  \"favorite\",\n  \"fearless\",\n  \"gifted\",\n  \"glamorous\",\n  \"gleaming\",\n  \"glittering\",\n  \"harmonious\",\n  \"imaginative\",\n  \"immense\",\n  \"jealous\",\n  \"kind\",\n  \"leafy\",\n  \"legal\",\n  \"mature\",\n  \"mean\",\n  \"nautical\",\n  \"neat\",\n  \"necessary\",\n  \"needy\",\n  \"oddball\",\n  \"offbeat\",\n  \"periodic\",\n  \"perky\",\n  \"personal\",\n  \"pertinent\",\n  \"petty\",\n  \"quarterly\",\n  \"ready\",\n  \"real\",\n  \"realistic\",\n  \"reasonable\",\n  \"regal\",\n  \"serene\",\n  \"shabby\",\n  \"sharp\",\n  \"shiny\",\n  \"showy\",\n  \"shy\",\n  \"silky\",\n  \"tempting\",\n  \"tense\",\n  \"terrific\",\n  \"testy\",\n  \"thankful\",\n  \"uniform\",\n  \"unique\",\n  \"vast\",\n  \"weary\",\n  \"wee\",\n  \"welcome\",\n  \"agile\",\n  \"alarmed\",\n  \"alert\",\n  \"alive\",\n  \"bleak\",\n  \"blissful\",\n  \"blushing\",\n  \"coarse\",\n  \"colorful\",\n  \"colossal\",\n  \"comfortable\",\n  \"compassionate\",\n  \"complete\",\n  \"delightful\",\n  \"dense\",\n  \"dependable\",\n  \"dependent\",\n  \"descriptive\",\n  \"detailed\",\n  \"determined\",\n  \"devoted\",\n  \"different\",\n  \"eminent\",\n  \"emotional\",\n  \"enchanted\",\n  \"enchanting\",\n  \"energetic\",\n  \"enormous\",\n  \"fine\",\n  \"finished\",\n  \"firm\",\n  \"firsthand\",\n  \"fixed\",\n  \"flashy\",\n  \"flawless\",\n  \"glorious\",\n  \"glossy\",\n  \"golden\",\n  \"good\",\n  \"gorgeous\",\n  \"graceful\",\n  \"healthy\",\n  \"heartfelt\",\n  \"hearty\",\n  \"helpful\",\n  \"impartial\",\n  \"impressive\",\n  \"jolly\",\n  \"jovial\",\n  \"lighthearted\",\n  \"likable\",\n  \"lined\",\n  \"mellow\",\n  \"melodic\",\n  \"memorable\",\n  \"mild\",\n  \"new\",\n  \"opulent\",\n  \"playful\",\n  \"pleasant\",\n  \"pleasing\",\n  \"plump\",\n  \"plush\",\n  \"polished\",\n  \"polite\",\n  \"reliable\",\n  \"relieved\",\n  \"remarkable\",\n  \"remote\",\n  \"respectful\",\n  \"responsible\",\n  \"simple\",\n  \"simplistic\",\n  \"sizzling\",\n  \"sleepy\",\n  \"slight\",\n  \"slim\",\n  \"smart\",\n  \"smooth\",\n  \"snappy\",\n  \"snoopy\",\n  \"thirsty\",\n  \"this\",\n  \"thorough\",\n  \"those\",\n  \"thoughtful\",\n  \"united\",\n  \"vibrant\",\n  \"vicious\",\n  \"wellmade\",\n  \"whimsical\",\n  \"whirlwind\",\n  \"zesty\",\n  \"amazing\",\n  \"ambitious\",\n  \"ample\",\n  \"amused\",\n  \"amusing\",\n  \"ancient\",\n  \"angelic\",\n  \"antique\",\n  \"bold\",\n  \"bossy\",\n  \"both\",\n  \"bouncy\",\n  \"bountiful\",\n  \"complex\",\n  \"conscious\",\n  \"considerate\",\n  \"constant\",\n  \"content\",\n  \"conventional\",\n  \"cooked\",\n  \"cool\",\n  \"cooperative\",\n  \"diligent\",\n  \"dimwitted\",\n  \"direct\",\n  \"discrete\",\n  \"envious\",\n  \"essential\",\n  \"ethical\",\n  \"euphoric\",\n  \"flippant\",\n  \"fluffy\",\n  \"flustered\",\n  \"focused\",\n  \"fond\",\n  \"gracious\",\n  \"grand\",\n  \"grandiose\",\n  \"granular\",\n  \"grateful\",\n  \"grave\",\n  \"great\",\n  \"hidden\",\n  \"high\",\n  \"hilarious\",\n  \"homely\",\n  \"incomparable\",\n  \"incredible\",\n  \"infamous\",\n  \"joyful\",\n  \"lively\",\n  \"loathsome\",\n  \"lonely\",\n  \"long\",\n  \"mindless\",\n  \"miniature\",\n  \"minor\",\n  \"misty\",\n  \"next\",\n  \"nice\",\n  \"nifty\",\n  \"nimble\",\n  \"orderly\",\n  \"organic\",\n  \"ornate\",\n  \"popular\",\n  \"posh\",\n  \"positive\",\n  \"potable\",\n  \"powerful\",\n  \"powerless\",\n  \"precious\",\n  \"present\",\n  \"prestigious\",\n  \"quick\",\n  \"rewarding\",\n  \"rich\",\n  \"right\",\n  \"sociable\",\n  \"soft\",\n  \"solid\",\n  \"some\",\n  \"sophisticated\",\n  \"soulful\",\n  \"sparkling\",\n  \"spectacular\",\n  \"speedy\",\n  \"spicy\",\n  \"spiffy\",\n  \"spirited\",\n  \"spiteful\",\n  \"splendid\",\n  \"spotless\",\n  \"spry\",\n  \"thrifty\",\n  \"tidy\",\n  \"tight\",\n  \"timely\",\n  \"tinted\",\n  \"unruly\",\n  \"untimely\",\n  \"violet\",\n  \"wicked\",\n  \"wide\",\n  \"wild\",\n  \"willing\",\n  \"winding\",\n  \"windy\",\n  \"zigzag\",\n  \"apprehensive\",\n  \"appropriate\",\n  \"artistic\",\n  \"assured\",\n  \"astonishing\",\n  \"bright\",\n  \"brilliant\",\n  \"bronze\",\n  \"coordinated\",\n  \"courageous\",\n  \"courteous\",\n  \"crafty\",\n  \"crazy\",\n  \"creamy\",\n  \"creative\",\n  \"crisp\",\n  \"distant\",\n  \"distinct\",\n  \"downright\",\n  \"evergreen\",\n  \"everlasting\",\n  \"every\",\n  \"evil\",\n  \"excellent\",\n  \"excitable\",\n  \"exemplary\",\n  \"exhausted\",\n  \"forthright\",\n  \"fortunate\",\n  \"fragrant\",\n  \"frank\",\n  \"free\",\n  \"frequent\",\n  \"fresh\",\n  \"friendly\",\n  \"frightened\",\n  \"frigid\",\n  \"gripping\",\n  \"grounded\",\n  \"honest\",\n  \"honorable\",\n  \"honored\",\n  \"hopeful\",\n  \"hospitable\",\n  \"hot\",\n  \"huge\",\n  \"infatuated\",\n  \"infinite\",\n  \"informal\",\n  \"insistent\",\n  \"instructive\",\n  \"juicy\",\n  \"jumbo\",\n  \"knowing\",\n  \"knowledgeable\",\n  \"longterm\",\n  \"loud\",\n  \"lovable\",\n  \"loving\",\n  \"modern\",\n  \"modest\",\n  \"monumental\",\n  \"normal\",\n  \"notable\",\n  \"outgoing\",\n  \"precious\",\n  \"pretty\",\n  \"prickly\",\n  \"primary\",\n  \"pristine\",\n  \"private\",\n  \"prize\",\n  \"productive\",\n  \"profitable\",\n  \"quiet\",\n  \"quintessential\",\n  \"roasted\",\n  \"robust\",\n  \"square\",\n  \"squiggly\",\n  \"stable\",\n  \"staid\",\n  \"starry\",\n  \"steel\",\n  \"stimulating\",\n  \"striking\",\n  \"striped\",\n  \"strong\",\n  \"studious\",\n  \"stunning\",\n  \"tough\",\n  \"trained\",\n  \"treasured\",\n  \"tremendous\",\n  \"triangular\",\n  \"tricky\",\n  \"unused\",\n  \"unusual\",\n  \"upbeat\",\n  \"virtual\",\n  \"witty\",\n  \"wonderful\",\n  \"wooden\",\n  \"worldly\",\n  \"youthful\",\n  \"attached\",\n  \"attentive\",\n  \"attractive\",\n  \"austere\",\n  \"authentic\",\n  \"automatic\",\n  \"aware\",\n  \"awesome\",\n  \"bubbly\",\n  \"bustling\",\n  \"busy\",\n  \"buttery\",\n  \"cuddly\",\n  \"cultured\",\n  \"curly\",\n  \"curvy\",\n  \"cute\",\n  \"cylindrical\",\n  \"downright\",\n  \"dramatic\",\n  \"excited\",\n  \"exciting\",\n  \"exotic\",\n  \"experienced\",\n  \"expert\",\n  \"frosty\",\n  \"fruitful\",\n  \"full\",\n  \"fumbling\",\n  \"funny\",\n  \"fussy\",\n  \"growing\",\n  \"grown\",\n  \"gummy\",\n  \"humble\",\n  \"humongous\",\n  \"hungry\",\n  \"intelligent\",\n  \"interesting\",\n  \"known\",\n  \"kooky\",\n  \"loyal\",\n  \"lucky\",\n  \"luminous\",\n  \"lustrous\",\n  \"luxurious\",\n  \"multicolored\",\n  \"mysterious\",\n  \"noteworthy\",\n  \"numb\",\n  \"nutritious\",\n  \"outstanding\",\n  \"overjoyed\",\n  \"proper\",\n  \"proud\",\n  \"prudent\",\n  \"punctual\",\n  \"puny\",\n  \"pure\",\n  \"puzzled\",\n  \"puzzling\",\n  \"quirky\",\n  \"stupendous\",\n  \"sturdy\",\n  \"stylish\",\n  \"subdued\",\n  \"subtle\",\n  \"sunny\",\n  \"super\",\n  \"superb\",\n  \"supportive\",\n  \"surprised\",\n  \"sweet\",\n  \"swift\",\n  \"sympathetic\",\n  \"trivial\",\n  \"trusting\",\n  \"trustworthy\",\n  \"trusty\",\n  \"truthful\",\n  \"twin\",\n  \"usable\",\n  \"used\",\n  \"useful\",\n  \"utilized\",\n  \"vital\",\n  \"vivid\",\n  \"worried\",\n  \"worthwhile\",\n  \"worthy\",\n  \"writhing\",\n  \"wry\",\n  \"yummy\",\n  \"chocolate\",\n  \"crimson\",\n  \"cyan\",\n  \"fuchsia\",\n  \"gold\",\n  \"honeydew\",\n  \"lime\",\n  \"linen\",\n  \"magenta\",\n  \"olive\",\n  \"peru\",\n  \"salmon\",\n  \"seashell\",\n  \"sienna\",\n  \"snow\",\n  \"thistle\",\n  \"tomato\",\n  \"transparent\",\n  \"turquoise\",\n  \"violet\"\n];\n\nconst nouns = [\n  \"space\",\n  \"land\",\n  \"world\",\n  \"universe\",\n  \"plane\",\n  \"room\",\n  \"nation\",\n  \"plaza\",\n  \"gathering\",\n  \"meetup\",\n  \"get together\",\n  \"conclave\",\n  \"party\",\n  \"domain\",\n  \"dominion\",\n  \"realm\",\n  \"square\",\n  \"commons\",\n  \"park\",\n  \"cosmos\",\n  \"sphere\",\n  \"terrain\",\n  \"spot\",\n  \"zone\",\n  \"area\",\n  \"tract\",\n  \"turf\",\n  \"place\",\n  \"territory\",\n  \"volume\",\n  \"camp\",\n  \"picnic\",\n  \"outing\",\n  \"vacation\",\n  \"adventure\",\n  \"exploration\",\n  \"outing\",\n  \"walkabout\",\n  \"safari\",\n  \"venture\",\n  \"roundtable\",\n  \"barbecue\",\n  \"celebration\",\n  \"festivity\",\n  \"gala\",\n  \"shindig\",\n  \"social\",\n  \"convention\",\n  \"assembly\",\n  \"congregation\",\n  \"rendezvous\",\n  \"huddle\",\n  \"meet\",\n  \"soiree\"\n];\n\nexport function generateHubName() {\n  const randItem = set => {\n    const s = set[Math.floor(Math.random() * set.length)];\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport configs from \"../utils/configs\";\n\nimport Store from \"../storage/store\";\n\nexport function hasReticulumServer() {\n  return !!configs.RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\n}\n\nconst resolverLink = document.createElement(\"a\");\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\n  if (host || hasReticulumServer()) {\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nlet directReticulumHostAndPort;\n\nasync function refreshDirectReticulumHostAndPort() {\n  const qs = new URLSearchParams(location.search);\n  let host = qs.get(\"phx_host\");\n  const reticulumMeta = await getReticulumMeta();\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n  const port =\n    qs.get(\"phx_port\") ||\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\n  directReticulumHostAndPort = { host, port };\n}\n\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\n  if (!directReticulumHostAndPort) {\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\n    return getReticulumFetchUrl(path, absolute);\n  }\n\n  const { host, port } = directReticulumHostAndPort;\n  return getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    await refreshDirectReticulumHostAndPort();\n    const { host, port } = directReticulumHostAndPort;\n    const protocol =\n      qs.get(\"phx_protocol\") ||\n      configs.RETICULUM_SOCKET_PROTOCOL ||\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nconst IDENTITY = new THREE.Matrix4().identity();\nexport function setMatrixWorld(object3D, m) {\n  if (!object3D.matrixIsModified) {\n    object3D.applyMatrix(IDENTITY); // hack around our matrix optimizations\n  }\n  object3D.matrixWorld.copy(m);\n  if (object3D.parent) {\n    object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  } else {\n    object3D.matrix.copy(object3D.matrixWorld);\n  }\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n  object3D.childrenNeedMatrixWorldUpdate = true;\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Supports the following PropertyBinding path formats:\n// uuid.propertyName\n// uuid.propertyName[propertyIndex]\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\n// Does not support property bindings that use object3D names or parent nodes\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\n  const { nodeName: uuid, objectName, objectIndex, propertyName, propertyIndex } = THREE.PropertyBinding.parseTrackName(\n    sourceKeyframeTrack.name\n  );\n\n  let path = \"\";\n\n  if (uuid !== undefined) {\n    const clonedUUID = cloneUUIDLookup.get(uuid);\n\n    if (clonedUUID === undefined) {\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\n    }\n\n    path += clonedUUID;\n  }\n\n  if (objectName !== undefined) {\n    path += \".\" + objectName;\n  }\n\n  if (objectIndex !== undefined) {\n    path += \"[\" + objectIndex + \"]\";\n  }\n\n  if (propertyName !== undefined) {\n    path += \".\" + propertyName;\n  }\n\n  if (propertyIndex !== undefined) {\n    path += \"[\" + propertyIndex + \"]\";\n  }\n\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\n  clonedKeyframeTrack.name = path;\n\n  return clonedKeyframeTrack;\n}\n\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\n  );\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\n}\n\nexport function cloneObject3D(source, preserveUUIDs) {\n  const cloneLookup = new Map();\n  const cloneUUIDLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (preserveUUIDs) {\n      clonedNode.uuid = sourceNode.uuid;\n    }\n\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (!clonedNode) {\n      return;\n    }\n\n    if (sourceNode.animations) {\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\n      );\n    }\n\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n\n    if (!sourceNode.isSkinnedMesh) return;\n\n    const sourceBones = sourceNode.skeleton.bones;\n\n    clonedNode.skeleton = sourceNode.skeleton.clone();\n\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\n  });\n\n  return clone;\n}\n\nexport function findNode(root, pred) {\n  let nodes = [root];\n  while (nodes.length) {\n    const node = nodes.shift();\n    if (pred(node)) return node;\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n  return null;\n}\n\nexport const interpolateAffine = (function() {\n  const mat4 = new THREE.Matrix4();\n  const end = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const start = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const interpolated = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  return function(startMat4, endMat4, progress, outMat4) {\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\n    THREE.Quaternion.slerp(start.quaternion, end.quaternion, interpolated.quaternion, progress);\n    interpolated.position.lerpVectors(\n      start.position.setFromMatrixColumn(startMat4, 3),\n      end.position.setFromMatrixColumn(endMat4, 3),\n      progress\n    );\n    interpolated.scale.lerpVectors(\n      start.scale.setFromMatrixScale(startMat4),\n      end.scale.setFromMatrixScale(endMat4),\n      progress\n    );\n    return outMat4.compose(\n      interpolated.position,\n      interpolated.quaternion,\n      interpolated.scale\n    );\n  };\n})();\n\nexport const squareDistanceBetween = (function() {\n  const posA = new THREE.Vector3();\n  const posB = new THREE.Vector3();\n  return function(objA, objB) {\n    objA.updateMatrices();\n    objB.updateMatrices();\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\n    return posA.distanceToSquared(posB);\n  };\n})();\n\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\n}\nexport function almostEqual(a, b, epsilon = 0.01) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport const affixToWorldUp = (function() {\n  const inRotationMat4 = new THREE.Matrix4();\n  const inForward = new THREE.Vector3();\n  const outForward = new THREE.Vector3();\n  const outSide = new THREE.Vector3();\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\n  const v = new THREE.Vector3();\n  const inMat4Copy = new THREE.Matrix4();\n  return function affixToWorldUp(inMat4, outMat4) {\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\n    outForward\n      .copy(inForward)\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\n      .normalize();\n    outSide.crossVectors(outForward, worldUp);\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\n    return outMat4;\n  };\n})();\n\nexport const calculateCameraTransformForWaypoint = (function() {\n  const upAffixedCameraTransform = new THREE.Matrix4();\n  const upAffixedWaypointTransform = new THREE.Matrix4();\n  const detachFromWorldUp = new THREE.Matrix4();\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\n    detachFromWorldUp.getInverse(upAffixedCameraTransform).multiply(cameraTransform);\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\n  };\n})();\n\nexport const calculateViewingDistance = (function() {\n  return function calculateViewingDistance(fov, aspect, object, box, center, vrMode) {\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\n    const halfVertFOV = THREE.Math.degToRad(fov / 2);\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\n    const margin = 1.05;\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\n    const length = vrMode ? Math.max(0.25, length3) : length3;\n    return length || 1.25;\n  };\n})();\n\nexport const rotateInPlaceAroundWorldUp = (function() {\n  const inMat4Copy = new THREE.Matrix4();\n  const startRotation = new THREE.Matrix4();\n  const endRotation = new THREE.Matrix4();\n  const v = new THREE.Vector3();\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\n    inMat4Copy.copy(inMat4);\n    return outMat4\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\n      .scale(v.setFromMatrixScale(inMat4Copy))\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\n  };\n})();\n\nexport const childMatch = (function() {\n  const childInverse = new THREE.Matrix4();\n  const newParentMatrix = new THREE.Matrix4();\n  // transform the parent such that its child matches the target\n  return function childMatch(parent, child, target) {\n    child.updateMatrices();\n    childInverse.getInverse(child.matrix);\n    newParentMatrix.multiplyMatrices(target, childInverse);\n    setMatrixWorld(parent, newParentMatrix);\n  };\n})();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__y0Hsu\",\"mediaBrowser\":\"media-browser__media-browser__y0Hsu\",\"facets\":\"media-browser__facets__1Yz65\",\"facet\":\"media-browser__facet__2uP6U\",\"body\":\"media-browser__body__j6Tv2\",\"pager\":\"media-browser__pager__RKx5O\",\"header-center\":\"media-browser__header-center__2D9CW\",\"headerCenter\":\"media-browser__header-center__2D9CW\",\"search\":\"media-browser__search__3gQ84\",\"header-left\":\"media-browser__header-left__1ObQh\",\"headerLeft\":\"media-browser__header-left__1ObQh\",\"engine-attribution\":\"media-browser__engine-attribution__2P2aD\",\"engineAttribution\":\"media-browser__engine-attribution__2P2aD\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__gCdfr\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__gCdfr\",\"favorites-header\":\"media-browser__favorites-header__1XzZx\",\"favoritesHeader\":\"media-browser__favorites-header__1XzZx\",\"search-clear\":\"media-browser__search-clear__2GkP3\",\"searchClear\":\"media-browser__search-clear__2GkP3\",\"search-icon\":\"media-browser__search-icon__g1Sj9\",\"searchIcon\":\"media-browser__search-icon__g1Sj9\",\"box\":\"media-browser__box__1KHYi\",\"header\":\"media-browser__header__zqZ09\",\"no-search\":\"media-browser__no-search__3N90H\",\"noSearch\":\"media-browser__no-search__3N90H\",\"nav\":\"media-browser__nav__9J5If\",\"nav-right-pad\":\"media-browser__nav-right-pad__1qH0B\",\"navRightPad\":\"media-browser__nav-right-pad__1qH0B\",\"nav-source\":\"media-browser__nav-source__o6NI6\",\"navSource\":\"media-browser__nav-source__o6NI6\",\"nav-source-selected\":\"media-browser__nav-source-selected__2osjH\",\"navSourceSelected\":\"media-browser__nav-source-selected__2osjH\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"tiles\":\"media-browser__tiles__1BYEY\",\"tile\":\"media-browser__tile__2lzHU\",\"info\":\"media-browser__info__2c8Zs\",\"name\":\"media-browser__name__RFiE4\",\"attribution\":\"media-browser__attribution__3glgj\",\"creator\":\"media-browser__creator__3LDPh\",\"publisher\":\"media-browser__publisher__mTzsX\",\"last-joined\":\"media-browser__last-joined__2DVWf\",\"lastJoined\":\"media-browser__last-joined__2DVWf\",\"tile-link\":\"media-browser__tile-link__IXyUO\",\"tileLink\":\"media-browser__tile-link__IXyUO\",\"tile-content\":\"media-browser__tile-content__1QYSP\",\"tileContent\":\"media-browser__tile-content__1QYSP\",\"avatar-tile\":\"media-browser__avatar-tile__qNo2r\",\"avatarTile\":\"media-browser__avatar-tile__qNo2r\",\"favorite\":\"media-browser__favorite__1vVd0\",\"tile-actions\":\"media-browser__tile-actions__1QXbx\",\"tileActions\":\"media-browser__tile-actions__1QXbx\",\"presence\":\"media-browser__presence__2l7SM\",\"create-tile\":\"media-browser__create-tile__RL9vr\",\"createTile\":\"media-browser__create-tile__RL9vr\",\"create-avatar-tile\":\"media-browser__create-avatar-tile__2dxlP\",\"createAvatarTile\":\"media-browser__create-avatar-tile__2dxlP\",\"tiles-variable\":\"media-browser__tiles-variable__1ZNxg\",\"tilesVariable\":\"media-browser__tiles-variable__1ZNxg\",\"page-number\":\"media-browser__page-number__OTpSH\",\"pageNumber\":\"media-browser__page-number__OTpSH\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__ytlSN\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__ytlSN\",\"header-right\":\"media-browser__header-right__3k3JZ\",\"headerRight\":\"media-browser__header-right__3k3JZ\",\"create-button\":\"media-browser__create-button__30hMV\",\"createButton\":\"media-browser__create-button__30hMV\",\"create-link\":\"media-browser__create-link__28Bpj\",\"createLink\":\"media-browser__create-link__28Bpj\",\"empty-string\":\"media-browser__empty-string__3r0tc\",\"emptyString\":\"media-browser__empty-string__3r0tc\",\"media-browser-inline\":\"media-browser__media-browser-inline__3AgWD\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3AgWD\"};","import { hasReticulumServer } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (configs.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER);\n}\nnonCorsProxyDomains.push(document.location.hostname);\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\",\n  basis: \"image/basis\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  let extension = \"\";\n  try {\n    const pathParts = new URL(url).pathname.split(\".\");\n\n    if (pathParts.length > 1) {\n      const extensionCandidate = pathParts.pop();\n      if (commonKnownContentTypes[extensionCandidate]) {\n        extension = `.${extensionCandidate}`;\n      }\n    }\n  } catch (e) {\n    extension = \".png\";\n  }\n\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}${extension}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (hasReticulumServer()) {\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return thumbnailUrl;\n  }\n\n  return thumbnailUrl;\n};\n\nexport const isNonCorsProxyDomain = hostname => {\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\n};\n\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\n  return new URL(relativeUrl, baseUrl);\n}\n\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\n}\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (configs.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (!url) return;\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.exec(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nconst originIsHubsServer = new Map();\nasync function isHubsServer(url) {\n  if (!url) return false;\n  if (!url.startsWith(\"http\")) {\n    url = \"https://\" + url;\n  }\n  const { origin } = new URL(url);\n\n  if (originIsHubsServer.has(origin)) {\n    return originIsHubsServer.get(origin);\n  }\n\n  let isHubsServer;\n  try {\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\n  } catch (e) {\n    isHubsServer = false;\n  }\n  originIsHubsServer.set(origin, isHubsServer);\n  return isHubsServer;\n}\n\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/([a-zA-Z0-9]{7})\\/?\\S*/;\n\nexport const isLocalHubsUrl = async url =>\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\n\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsRoomUrl = async url =>\n  (await isHubsServer(url)) && !(await isHubsAvatarUrl(url)) && !(await isHubsSceneUrl(url)) && hubsRoomRegex.test(url);\n\nexport const isHubsDestinationUrl = async url =>\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\n\nexport const idForAvatarUrl = url => {\n  const match = url.match(hubsAvatarRegex);\n  if (match) {\n    return match.groups.id;\n  }\n  return null;\n};\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n","function loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    texture.image = await loadAsync(imageLoader, src, onProgress);\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","/* eslint-disable */\n\nimport transcoderWasmFile from \"./basis_transcoder.wasm\";\nimport BasisWorker from \"./basis_transcoder.worker.js\";\n\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n * @author Austin Eng / https://github.com/austinEng\n * @author Shrek Shao / https://github.com/shrekshao\n */\n\n/**\n * Loader for Basis Universal GPU Texture Codec.\n *\n * Basis Universal is a \"supercompressed\" GPU texture and texture video\n * compression system that outputs a highly compressed intermediate file format\n * (.basis) that can be quickly transcoded to a wide variety of GPU texture\n * compression formats.\n *\n * This loader parallelizes the transcoding process across a configurable number\n * of web workers, before transferring the transcoded compressed texture back\n * to the main thread.\n */\n\nTHREE.BasisTextureLoader = function(manager) {\n  THREE.Loader.call(this, manager);\n\n  this.transcoderPath = \"\";\n  this.transcoderBinary = null;\n  this.transcoderPending = null;\n\n  this.workerLimit = 4;\n  this.workerPool = [];\n  this.workerNextTaskID = 1;\n  this.workerConfig = {\n    format: null,\n    astcSupported: false,\n    etcSupported: false,\n    dxtSupported: false,\n    pvrtcSupported: false,\n    returnBuffer: false\n  };\n};\n\nTHREE.BasisTextureLoader.prototype = Object.assign(Object.create(THREE.Loader.prototype), {\n  constructor: THREE.BasisTextureLoader,\n\n  setTranscoderPath: function(path) {\n    this.transcoderPath = path;\n\n    return this;\n  },\n\n  setWorkerLimit: function(workerLimit) {\n    this.workerLimit = workerLimit;\n\n    return this;\n  },\n\n  detectSupport: function(renderer) {\n    var config = this.workerConfig;\n\n    config.astcSupported = !!renderer.extensions.get(\"WEBGL_compressed_texture_astc\");\n    config.etcSupported = !!renderer.extensions.get(\"WEBGL_compressed_texture_etc1\");\n    config.dxtSupported = !!renderer.extensions.get(\"WEBGL_compressed_texture_s3tc\");\n    config.pvrtcSupported =\n      !!renderer.extensions.get(\"WEBGL_compressed_texture_pvrtc\") ||\n      !!renderer.extensions.get(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\n\n    if (config.astcSupported) {\n      config.format = THREE.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4;\n    } else if (config.dxtSupported) {\n      config.format = THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3;\n    } else if (config.pvrtcSupported) {\n      config.format = THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA;\n    } else if (config.etcSupported) {\n      config.format = THREE.BasisTextureLoader.BASIS_FORMAT.cTFETC1;\n    } else {\n      throw new Error(\"THREE.BasisTextureLoader: No suitable compressed texture format found.\");\n    }\n\n    return this;\n  },\n\n  load: function(url, onLoad, onProgress, onError) {\n    var loader = new THREE.FileLoader(this.manager);\n\n    if (!this.ranDetect) {\n      this.detectSupport(AFRAME.scenes[0].renderer);\n      this.ranDetect = true;\n    }\n\n    loader.setResponseType(\"arraybuffer\");\n\n    loader.load(\n      url,\n      buffer => {\n        this._createTexture(buffer)\n          .then(onLoad)\n          .catch(onError);\n      },\n      onProgress,\n      onError\n    );\n  },\n\n  /**\n   * @param  {ArrayBuffer} buffer\n   * @return {Promise<THREE.CompressedTexture>}\n   */\n  _createTexture: function(buffer) {\n    var worker;\n    var taskID;\n\n    var texturePending = this._getWorker()\n      .then(_worker => {\n        worker = _worker;\n        taskID = this.workerNextTaskID++;\n\n        return new Promise((resolve, reject) => {\n          worker._callbacks[taskID] = { resolve, reject };\n          worker._taskCosts[taskID] = buffer.byteLength;\n          worker._taskLoad += worker._taskCosts[taskID];\n\n          worker.postMessage({ type: \"transcode\", id: taskID, buffer }, [buffer]);\n        });\n      })\n      .then(message => {\n        var config = this.workerConfig;\n\n        var { width, height, mipmaps, format, hasAlpha, buffer } = message;\n\n        var texture;\n\n        switch (format) {\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4:\n            texture = new THREE.CompressedTexture(mipmaps, width, height, THREE.RGBA_ASTC_4x4_Format);\n            break;\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC1:\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3:\n            texture = new THREE.CompressedTexture(\n              mipmaps,\n              width,\n              height,\n              THREE.BasisTextureLoader.DXT_FORMAT_MAP[config.format],\n              THREE.UnsignedByteType\n            );\n            break;\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFETC1:\n            texture = new THREE.CompressedTexture(mipmaps, width, height, THREE.RGB_ETC1_Format);\n            break;\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB:\n            texture = new THREE.CompressedTexture(mipmaps, width, height, THREE.RGB_PVRTC_4BPPV1_Format);\n            break;\n          case THREE.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA:\n            texture = new THREE.CompressedTexture(mipmaps, width, height, THREE.RGBA_PVRTC_4BPPV1_Format);\n            break;\n          default:\n            throw new Error(\"THREE.BasisTextureLoader: No supported format available.\");\n        }\n\n        texture.minFilter = mipmaps.length === 1 ? THREE.LinearFilter : THREE.LinearMipmapLinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        texture.generateMipmaps = false;\n        texture.needsUpdate = true;\n\n        texture.image.hasAlpha = hasAlpha;\n        if (this.workerConfig.returnBuffer) {\n          texture.image.data = buffer;\n        }\n\n        return texture;\n      });\n\n    texturePending.finally(() => {\n      if (worker && taskID) {\n        worker._taskLoad -= worker._taskCosts[taskID];\n        delete worker._callbacks[taskID];\n        delete worker._taskCosts[taskID];\n      }\n    });\n\n    return texturePending;\n  },\n\n  _initTranscoder: function() {\n    if (!this.transcoderBinary) {\n      // Load transcoder WASM binary.\n      var binaryLoader = new THREE.FileLoader(this.manager);\n      binaryLoader.setPath(this.transcoderPath);\n      binaryLoader.setResponseType(\"arraybuffer\");\n      var binaryContent = new Promise((resolve, reject) => {\n        binaryLoader.load(transcoderWasmFile, resolve, undefined, reject);\n      });\n\n      this.transcoderPending = binaryContent.then(binaryContent => {\n        this.transcoderBinary = binaryContent;\n      });\n    }\n\n    return this.transcoderPending;\n  },\n\n  _getWorker: function() {\n    return this._initTranscoder().then(() => {\n      if (this.workerPool.length < this.workerLimit) {\n        var worker = new BasisWorker();\n\n        worker._callbacks = {};\n        worker._taskCosts = {};\n        worker._taskLoad = 0;\n\n        worker.postMessage({\n          type: \"init\",\n          config: this.workerConfig,\n          transcoderBinary: this.transcoderBinary\n        });\n\n        worker.onmessage = function(e) {\n          var message = e.data;\n\n          switch (message.type) {\n            case \"transcode\":\n              worker._callbacks[message.id].resolve(message);\n              break;\n\n            case \"error\":\n              worker._callbacks[message.id].reject(message);\n              break;\n\n            default:\n              console.error('THREE.BasisTextureLoader: Unexpected message, \"' + message.type + '\"');\n          }\n        };\n\n        this.workerPool.push(worker);\n      } else {\n        this.workerPool.sort(function(a, b) {\n          return a._taskLoad > b._taskLoad ? -1 : 1;\n        });\n      }\n\n      return this.workerPool[this.workerPool.length - 1];\n    });\n  },\n\n  dispose: function() {\n    for (var i = 0; i < this.workerPool.length; i++) {\n      this.workerPool[i].terminate();\n    }\n\n    this.workerPool.length = 0;\n\n    return this;\n  }\n});\n\n/* CONSTANTS */\n\nTHREE.BasisTextureLoader.BASIS_FORMAT = {\n  cTFETC1: 0,\n  cTFETC2: 1,\n  cTFBC1: 2,\n  cTFBC3: 3,\n  cTFBC4: 4,\n  cTFBC5: 5,\n  cTFBC7_M6_OPAQUE_ONLY: 6,\n  cTFBC7_M5: 7,\n  cTFPVRTC1_4_RGB: 8,\n  cTFPVRTC1_4_RGBA: 9,\n  cTFASTC_4x4: 10,\n  cTFATC_RGB: 11,\n  cTFATC_RGBA_INTERPOLATED_ALPHA: 12,\n  cTFRGBA32: 13,\n  cTFRGB565: 14,\n  cTFBGR565: 15,\n  cTFRGBA4444: 16\n};\n\n// DXT formats, from:\n// http://www.khronos.org/registry/webgl/extensions/WEBGL_compressed_texture_s3tc/\nTHREE.BasisTextureLoader.DXT_FORMAT = {\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3\n};\nTHREE.BasisTextureLoader.DXT_FORMAT_MAP = {};\nTHREE.BasisTextureLoader.DXT_FORMAT_MAP[THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC1] =\n  THREE.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT;\nTHREE.BasisTextureLoader.DXT_FORMAT_MAP[THREE.BasisTextureLoader.BASIS_FORMAT.cTFBC3] =\n  THREE.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\nexport default THREE.BasisTextureLoader;\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl, getDirectReticulumFetchUrl } from \"./phoenix-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\nimport { proxiedUrlFor, guessContentType } from \"../utils/media-url-utils\";\nimport Linkify from \"linkify-it\";\nimport tlds from \"tlds\";\n\nimport anime from \"animejs\";\n\nconst linkify = Linkify();\nlinkify.tlds(tlds);\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\nconst getDirectMediaAPIEndpoint = () => getDirectReticulumFetchUrl(\"/api/v1/media\");\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobile();\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const getDefaultResolveQuality = (is360 = false) => {\n  const useLowerQuality = isMobile || isMobileVR;\n  return !is360 ? (useLowerQuality ? \"low\" : \"high\") : useLowerQuality ? \"low_360\" : \"high_360\";\n};\n\nexport const resolveUrl = async (url, quality = null, version = 1, bustCache) => {\n  const key = `${url}_${version}`;\n  if (!bustCache && resolveUrlCache.has(key)) return resolveUrlCache.get(key);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, quality: quality || getDefaultResolveQuality() }, version })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(key, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  // To eliminate the extra hop and avoid proxy timeouts, upload files directly\n  // to a reticulum host.\n  return fetch(getDirectMediaAPIEndpoint(), {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nfunction getLatestMediaVersionOfSrc(src) {\n  const els = document.querySelectorAll(\"[media-loader]\");\n  let version = 1;\n\n  for (const el of els) {\n    const loader = el.components[\"media-loader\"];\n\n    if (loader.data && loader.data.src === src) {\n      version = Math.max(version, loader.data.version);\n    }\n  }\n\n  return version;\n}\n\nexport function coerceToUrl(urlOrText) {\n  if (!linkify.test(urlOrText)) return urlOrText;\n\n  // See: https://github.com/Soapbox/linkifyjs/blob/master/src/linkify.js#L52\n  return urlOrText.indexOf(\"://\") >= 0 ? urlOrText : `https://${urlOrText}`;\n}\n\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  fitToBox = false,\n  animate = true,\n  mediaOptions = {},\n  networked = true,\n  parentEl = null,\n  linkedEl = null\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n\n  if (networked) {\n    entity.setAttribute(\"networked\", { template: template });\n  } else {\n    const templateBody = document\n      .importNode(document.body.querySelector(template).content, true)\n      .firstElementChild.cloneNode(true);\n    const elAttrs = templateBody.attributes;\n\n    // Merge root element attributes with this entity\n    for (let attrIdx = 0; attrIdx < elAttrs.length; attrIdx++) {\n      entity.setAttribute(elAttrs[attrIdx].name, elAttrs[attrIdx].value);\n    }\n\n    // Append all child elements\n    while (templateBody.firstElementChild) {\n      entity.appendChild(templateBody.firstElementChild);\n    }\n  }\n\n  const needsToBeUploaded = src instanceof File;\n\n  // If we're re-pasting an existing src in the scene, we should use the latest version\n  // seen across any other entities. Otherwise, start with version 1.\n  const version = getLatestMediaVersionOfSrc(src);\n\n  entity.setAttribute(\"media-loader\", {\n    fitToBox,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? coerceToUrl(src) || src : \"\",\n    version,\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded,\n    linkedEl,\n    mediaOptions\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  (parentEl || scene).appendChild(entity);\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : src.type || guessContentType(src.name);\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(proxiedUrlFor(response.origin));\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport const cloneMedia = (sourceEl, template, src = null, networked = true, link = false, parentEl = null) => {\n  if (!src) {\n    ({ src } = sourceEl.components[\"media-loader\"].data);\n  }\n\n  const { contentSubtype, fitToBox, mediaOptions } = sourceEl.components[\"media-loader\"].data;\n\n  return addMedia(\n    src,\n    template,\n    ObjectContentOrigins.URL,\n    contentSubtype,\n    true,\n    fitToBox,\n    false,\n    mediaOptions,\n    networked,\n    parentEl,\n    link ? sourceEl : null\n  );\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (material.hubs_InjectedCustomShaderChunks) return material;\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      if (batchManagerSystem.batchingEnabled) {\n        batchManagerSystem.meshToEl.set(object, obj.el);\n      }\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n        `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      newMaterial.hubs_InjectedCustomShaderChunks = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false, distance = 0.75) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * distance,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * distance,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url, filter) {\n  let texture;\n\n  if (filter) {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    const load = new Promise(res => image.addEventListener(\"load\", res, { once: true }));\n    image.src = url;\n    await load;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0);\n    await filter(ctx, image.width, image.height);\n\n    texture = new THREE.CanvasTexture(canvas);\n  } else {\n    texture = new THREE.Texture();\n\n    try {\n      await textureLoader.loadTextureAsync(texture, url);\n    } catch (e) {\n      throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n    }\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n\nimport HubsBasisTextureLoader from \"../loaders/HubsBasisTextureLoader\";\nexport const basisTextureLoader = new HubsBasisTextureLoader();\n\nexport function createBasisTexture(url) {\n  return new Promise((resolve, reject) => {\n    basisTextureLoader.load(\n      url,\n      function(texture) {\n        texture.encoding = THREE.sRGBEncoding;\n        texture.onUpdate = function() {\n          // Delete texture data once it has been uploaded to the GPU\n          texture.mipmaps.length = 0;\n        };\n        // texture.anisotropy = 4;\n        resolve(texture);\n      },\n      undefined,\n      function(error) {\n        console.error(error);\n        reject(new Error(`'${url}' could not be fetched (Error: ${error}`));\n      }\n    );\n  });\n}\n\nexport function addMeshScaleAnimation(mesh, initialScale, onComplete) {\n  const step = (function() {\n    const lastValue = {};\n    return function(anim) {\n      const value = anim.animatables[0].target;\n\n      value.x = Math.max(Number.MIN_VALUE, value.x);\n      value.y = Math.max(Number.MIN_VALUE, value.y);\n      value.z = Math.max(Number.MIN_VALUE, value.z);\n\n      // For animation timeline.\n      if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n        return;\n      }\n\n      lastValue.x = value.x;\n      lastValue.y = value.y;\n      lastValue.z = value.z;\n\n      mesh.scale.set(value.x, value.y, value.z);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })();\n\n  const config = {\n    duration: 400,\n    easing: \"easeOutElastic\",\n    elasticity: 400,\n    loop: 0,\n    round: false,\n    x: mesh.scale.x,\n    y: mesh.scale.y,\n    z: mesh.scale.z,\n    targets: [initialScale],\n    update: anim => step(anim),\n    complete: anim => {\n      step(anim);\n      if (onComplete) onComplete();\n    }\n  };\n\n  mesh.scale.copy(initialScale);\n  mesh.matrixNeedsUpdate = true;\n\n  return anime(config);\n}\n\nexport function closeExistingMediaMirror() {\n  const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n  // Remove old mirror target media element\n  if (mirrorTarget.firstChild) {\n    mirrorTarget.firstChild.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    return new Promise(res => {\n      mirrorTarget.firstChild.addEventListener(\"animationcomplete\", () => {\n        mirrorTarget.removeChild(mirrorTarget.firstChild);\n        mirrorTarget.parentEl.object3D.visible = false;\n        res();\n      });\n    });\n  }\n}\n","import configs from \"./configs\";\nimport localeData from \"../assets/translations.data.json\";\n\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\n\nconst _messages = localeData[lang] || localeData.en;\n\nif (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[lang]) {\n  const configTranslations = configs.APP_CONFIG.translations[lang];\n  for (const messageKey in configTranslations) {\n    if (!configTranslations.hasOwnProperty(messageKey)) continue;\n    if (!configTranslations[messageKey]) continue;\n    _messages[messageKey] = configTranslations[messageKey];\n  }\n}\n\nexport const messages = Object.entries(_messages)\n  .map(([key, message]) => [\n    key,\n    // Replace nested message keys (e.g. %app-name%) with their messages.\n    message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _messages[subkey])\n  ])\n  .reduce((acc, entry) => {\n    acc[entry[0]] = entry[1];\n    return acc;\n  }, {});\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\nimport URL_SPAWN_EMOJI from \"../assets/sfx/emoji.mp3\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_WAYPOINT_START = soundEnum++;\nexport const SOUND_WAYPOINT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_HOVER = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_SELECT = soundEnum++;\nexport const SOUND_SPAWN_EMOJI = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor(scene) {\n    this.pendingAudioSourceNodes = [];\n    this.pendingPositionalAudios = [];\n    this.positionalAudiosStationary = [];\n    this.positionalAudiosFollowingObject3Ds = [];\n\n    this.audioContext = THREE.AudioContext.getContext();\n    this.scene = scene;\n    this.scene.audioListener = this.scene.audioListener || new THREE.AudioListener();\n    if (this.scene.camera) {\n      this.scene.camera.add(this.scene.audioListener);\n    }\n    this.scene.addEventListener(\"camera-set-active\", evt => {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(this.scene.audioListener);\n    });\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_START, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_END, URL_TICK],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED],\n      [SOUND_PREFERENCE_MENU_HOVER, URL_FREEZE],\n      [SOUND_PREFERENCE_MENU_SELECT, URL_TICK],\n      [SOUND_SPAWN_EMOJI, URL_SPAWN_EMOJI]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingAudioSourceNodes.push(source);\n    return source;\n  }\n\n  enqueuePositionalSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const audioOutputMode = window.APP.store.state.preferences.audioOutputMode === \"audio\" ? \"audio\" : \"panner\";\n    const positionalAudio =\n      audioOutputMode === \"panner\"\n        ? new THREE.PositionalAudio(this.scene.audioListener)\n        : new THREE.Audio(this.scene.audioListener);\n    positionalAudio.setBuffer(audioBuffer);\n    positionalAudio.loop = loop;\n    this.pendingPositionalAudios.push(positionalAudio);\n    return positionalAudio;\n  }\n\n  playPositionalSoundAt(sound, position, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    positionalAudio.position.copy(position);\n    positionalAudio.matrixWorldNeedsUpdate = true;\n    this.positionalAudiosStationary.push(positionalAudio);\n  }\n\n  playPositionalSoundFollowing(sound, object3D, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    this.positionalAudiosFollowingObject3Ds.push({ positionalAudio, object3D });\n    return positionalAudio;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingAudioSourceNodes.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingAudioSourceNodes.indexOf(node);\n    if (index !== -1) {\n      this.pendingAudioSourceNodes.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  stopPositionalAudio(inPositionalAudio) {\n    const pendingIndex = this.pendingPositionalAudios.indexOf(inPositionalAudio);\n    if (pendingIndex !== -1) {\n      this.pendingPositionalAudios.splice(pendingIndex, 1);\n    } else {\n      if (inPositionalAudio.isPlaying) {\n        inPositionalAudio.stop();\n      }\n      if (inPositionalAudio.parent) {\n        inPositionalAudio.parent.remove(inPositionalAudio);\n      }\n    }\n    this.positionalAudiosStationary = this.positionalAudiosStationary.filter(\n      positionalAudio => positionalAudio !== inPositionalAudio\n    );\n    this.positionalAudiosFollowingObject3Ds = this.positionalAudiosFollowingObject3Ds.filter(\n      ({ positionalAudio }) => positionalAudio !== inPositionalAudio\n    );\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingAudioSourceNodes.length; i++) {\n      this.pendingAudioSourceNodes[i].start();\n    }\n    this.pendingAudioSourceNodes.length = 0;\n\n    for (let i = 0; i < this.pendingPositionalAudios.length; i++) {\n      const pendingPositionalAudio = this.pendingPositionalAudios[i];\n      this.scene.object3D.add(pendingPositionalAudio);\n      pendingPositionalAudio.play();\n    }\n    this.pendingPositionalAudios.length = 0;\n\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      if (!positionalAudio.isPlaying) {\n        this.stopPositionalAudio(positionalAudio);\n      }\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      const object3D = positionalAudioAndObject3D.object3D;\n      if (!positionalAudio.isPlaying || !object3D.parent) {\n        this.stopPositionalAudio(positionalAudio);\n      } else {\n        object3D.updateMatrices();\n        setMatrixWorld(positionalAudio, object3D.matrixWorld);\n      }\n    }\n  }\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n\nexport function qsGet(param) {\n  return qs.get(param);\n}\n","import configs from \"../utils/configs\";\n\nexport default function IfFeature(props) {\n  return (configs.feature(props.name) && props.children) || null;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    noOverlay: PropTypes.bool,\n    className: PropTypes.string,\n    allowOverflow: PropTypes.bool,\n    additionalClass: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className={classNames(\n          \"dialog-overlay\",\n          this.props.noOverlay ? \"dialog-overlay__no-pointer-events\" : \"\",\n          this.props.className\n        )}\n      >\n        <div\n          className={classNames(\n            \"dialog\",\n            this.props.noOverlay ? \"dialog__no-pointer-events\" : \"dialog__dark-background\",\n            this.props.noOverlay ? \"dialog__align-end\" : \"\"\n          )}\n          onClick={this.onContainerClicked}\n        >\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div\n              className={classNames(\n                \"dialog__box__contents\",\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\n                this.props.additionalClass\n              )}\n            >\n              {this.props.closable &&\n                this.props.onClose &&\n                !this.props.noOverlay && (\n                  <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                    <i>\n                      <FontAwesomeIcon icon={faTimes} />\n                    </i>\n                  </button>\n                )}\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"entry-button-secondary\":\"entry__entry-button-secondary__1Fr_E\",\"entryButtonSecondary\":\"entry__entry-button-secondary__1Fr_E\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"secondary-action-button\":\"entry__secondary-action-button__3FCMj\",\"secondaryActionButton\":\"entry__secondary-action-button__3FCMj\",\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"collapse-button\":\"entry__collapse-button__3_PLp\",\"collapseButton\":\"entry__collapse-button__3_PLp\",\"favorite-button\":\"entry__favorite-button__2CVuk\",\"favoriteButton\":\"entry__favorite-button__2CVuk\",\"back\":\"entry__back__J4Sgl\",\"lobby-label\":\"entry__lobby-label__2Nj9w\",\"lobbyLabel\":\"entry__lobby-label__2Nj9w\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"rename-button\":\"entry__rename-button__KFW9R\",\"renameButton\":\"entry__rename-button__KFW9R\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"favorited\":\"entry__favorited__2IHpj\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"room-subtitle\":\"entry__room-subtitle__7MSMo\",\"roomSubtitle\":\"entry__room-subtitle__7MSMo\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"button-subtitle\":\"entry__button-subtitle__3zrEo\",\"buttonSubtitle\":\"entry__button-subtitle__3zrEo\",\"audio-loader\":\"entry__audio-loader__1YCJd\",\"audioLoader\":\"entry__audio-loader__1YCJd\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"secondary-button\":\"settings-menu__secondary-button__2Q5_g\",\"secondaryButton\":\"settings-menu__secondary-button__2Q5_g\",\"bottom-links-main\":\"settings-menu__bottom-links-main__Vtlje\",\"bottomLinksMain\":\"settings-menu__bottom-links-main__Vtlje\",\"bottom-links\":\"settings-menu__bottom-links__b1tDE\",\"bottomLinks\":\"settings-menu__bottom-links__b1tDE\",\"close-button\":\"settings-menu__close-button__M0EhC\",\"closeButton\":\"settings-menu__close-button__M0EhC\",\"settings-menu-drop\":\"settings-menu__settings-menu-drop__Od2Sa\",\"settingsMenuDrop\":\"settings-menu__settings-menu-drop__Od2Sa\",\"attach-point\":\"settings-menu__attach-point__2gV3g\",\"attachPoint\":\"settings-menu__attach-point__2gV3g\",\"contents\":\"settings-menu__contents__3GQlW\",\"rows\":\"settings-menu__rows__2OtlS\",\"row\":\"settings-menu__row__3w7fz\",\"row-no-margin\":\"settings-menu__row-no-margin__3rYbX\",\"rowNoMargin\":\"settings-menu__row-no-margin__3rYbX\",\"row-header\":\"settings-menu__row-header__2oCqk\",\"rowHeader\":\"settings-menu__row-header__2oCqk\",\"list-item\":\"settings-menu__list-item__1__z6\",\"listItem\":\"settings-menu__list-item__1__z6\",\"list-item-link\":\"settings-menu__list-item-link__2ovr3\",\"listItemLink\":\"settings-menu__list-item-link__2ovr3\",\"settings-menu-overlay-wrap\":\"settings-menu__settings-menu-overlay-wrap__3T7VX\",\"settingsMenuOverlayWrap\":\"settings-menu__settings-menu-overlay-wrap__3T7VX\",\"settings-menu-overlay\":\"settings-menu__settings-menu-overlay__3kU9n\",\"settingsMenuOverlay\":\"settings-menu__settings-menu-overlay__3kU9n\",\"settings-row\":\"settings-menu__settings-row__1sDDk\",\"settingsRow\":\"settings-menu__settings-row__1sDDk\",\"icon\":\"settings-menu__icon__3KMMz\",\"secondary-link-item\":\"settings-menu__secondary-link-item__1y7xz\",\"secondaryLinkItem\":\"settings-menu__secondary-link-item__1y7xz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ui\":\"ui-root__ui__33CMU\",\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"object-list\":\"ui-root__object-list__34wMm\",\"objectList\":\"ui-root__object-list__34wMm\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"corner-button\":\"ui-root__corner-button__2rfQ5\",\"cornerButton\":\"ui-root__corner-button__2rfQ5\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"choose-scene-button\":\"ui-root__choose-scene-button__3VNdD\",\"chooseSceneButton\":\"ui-root__choose-scene-button__3VNdD\",\"leave-button\":\"ui-root__leave-button__29u2_\",\"leaveButton\":\"ui-root__leave-button__29u2_\",\"interstitial\":\"ui-root__interstitial__1cotl\",\"invite-tip\":\"ui-root__invite-tip__20NJ6\",\"inviteTip\":\"ui-root__invite-tip__20NJ6\",\"streaming-tip\":\"ui-root__streaming-tip__17WYl\",\"streamingTip\":\"ui-root__streaming-tip__17WYl\",\"streaming-tip-attach-point\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streamingTipAttachPoint\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streaming-tip-close\":\"ui-root__streaming-tip-close__1OHPc\",\"streamingTipClose\":\"ui-root__streaming-tip-close__1OHPc\",\"streaming-tip-message\":\"ui-root__streaming-tip-message__2XOUD\",\"streamingTipMessage\":\"ui-root__streaming-tip-message__2XOUD\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"in-room-favorite-button\":\"ui-root__in-room-favorite-button__2I0Kj\",\"inRoomFavoriteButton\":\"ui-root__in-room-favorite-button__2I0Kj\",\"help-button\":\"ui-root__help-button__1cq2F\",\"helpButton\":\"ui-root__help-button__1cq2F\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"camera-mode-exit-button\":\"ui-root__camera-mode-exit-button__2mpbz\",\"cameraModeExitButton\":\"ui-root__camera-mode-exit-button__2mpbz\",\"corner-button-selected\":\"ui-root__corner-button-selected__qRY5R\",\"cornerButtonSelected\":\"ui-root__corner-button-selected__qRY5R\",\"invite-tip-attach-point\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"inviteTipAttachPoint\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__3-3CO\",\"room-info\":\"room-info-dialog__room-info__3XkbS\",\"roomInfo\":\"room-info-dialog__room-info__3XkbS\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"scene-details\":\"room-info-dialog__scene-details__2pYml\",\"sceneDetails\":\"room-info-dialog__scene-details__2pYml\",\"scene-main\":\"room-info-dialog__scene-main__2mhXj\",\"sceneMain\":\"room-info-dialog__scene-main__2mhXj\",\"scene-name\":\"room-info-dialog__scene-name__1bqGh\",\"sceneName\":\"room-info-dialog__scene-name__1bqGh\",\"scene-creator\":\"room-info-dialog__scene-creator__3_za4\",\"sceneCreator\":\"room-info-dialog__scene-creator__3_za4\",\"scene-attributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"attribution\":\"room-info-dialog__attribution__I9_V-\",\"attribution-name\":\"room-info-dialog__attribution-name__3JTpI\",\"attributionName\":\"room-info-dialog__attribution-name__3JTpI\",\"attribution-author\":\"room-info-dialog__attribution-author__BouZB\",\"attributionAuthor\":\"room-info-dialog__attribution-author__BouZB\",\"description\":\"room-info-dialog__description__2jXMQ\",\"subtitle\":\"room-info-dialog__subtitle__1pamf\",\"hub-title\":\"room-info-dialog__hub-title__2rQtj\",\"hubTitle\":\"room-info-dialog__hub-title__2rQtj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"max-resolution-preference-item\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"maxResolutionPreferenceItem\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"number-with-range\":\"preferences-screen__number-with-range__35LSW\",\"numberWithRange\":\"preferences-screen__number-with-range__35LSW\",\"number-in-number-with-range\":\"preferences-screen__number-in-number-with-range__2KQrK\",\"numberInNumberWithRange\":\"preferences-screen__number-in-number-with-range__2KQrK\",\"preference-list-item\":\"preferences-screen__preference-list-item__29ZAe\",\"preferenceListItem\":\"preferences-screen__preference-list-item__29ZAe\",\"dropdown\":\"preferences-screen__dropdown__Yvmf_\",\"content-container\":\"preferences-screen__content-container__3VLFw\",\"contentContainer\":\"preferences-screen__content-container__3VLFw\",\"panel-margin\":\"preferences-screen__panel-margin__Srca-\",\"panelMargin\":\"preferences-screen__panel-margin__Srca-\",\"close-button\":\"preferences-screen__close-button__2zMLp\",\"closeButton\":\"preferences-screen__close-button__2zMLp\",\"dropdownArrow\":\"preferences-screen__dropdownArrow__2TIdk\",\"preference-list-non-checkbox\":\"preferences-screen__preference-list-non-checkbox__MR159\",\"preferenceListNonCheckbox\":\"preferences-screen__preference-list-non-checkbox__MR159\",\"part\":\"preferences-screen__part__2Ranp\",\"checkbox-margin\":\"preferences-screen__checkbox-margin__1PeGJ\",\"checkboxMargin\":\"preferences-screen__checkbox-margin__1PeGJ\",\"left\":\"preferences-screen__left__3gJX_\",\"right\":\"preferences-screen__right__3_kjy\",\"preferences-panel\":\"preferences-screen__preferences-panel__1WQqG\",\"preferencesPanel\":\"preferences-screen__preferences-panel__1WQqG\",\"scrolling-content\":\"preferences-screen__scrolling-content__3eE_K\",\"scrollingContent\":\"preferences-screen__scrolling-content__3eE_K\",\"section-bar\":\"preferences-screen__section-bar__3i097\",\"sectionBar\":\"preferences-screen__section-bar__3i097\",\"section-title\":\"preferences-screen__section-title__1JGHh\",\"sectionTitle\":\"preferences-screen__section-title__1JGHh\",\"checkbox\":\"preferences-screen__checkbox__1t8BH\",\"row\":\"preferences-screen__row__24y1Q\",\"row-name\":\"preferences-screen__row-name__EAAaz\",\"rowName\":\"preferences-screen__row-name__EAAaz\",\"reset-to-default-button\":\"preferences-screen__reset-to-default-button__1WpmV\",\"resetToDefaultButton\":\"preferences-screen__reset-to-default-button__1WpmV\",\"prev-option-scale\":\"preferences-screen__prev-option-scale__1UBJy\",\"prevOptionScale\":\"preferences-screen__prev-option-scale__1UBJy\",\"next-option-scale\":\"preferences-screen__next-option-scale__1WFTK\",\"nextOptionScale\":\"preferences-screen__next-option-scale__1WFTK\",\"prev-option-hovered-scale\":\"preferences-screen__prev-option-hovered-scale__3qfSH\",\"prevOptionHoveredScale\":\"preferences-screen__prev-option-hovered-scale__3qfSH\",\"next-option-hovered-scale\":\"preferences-screen__next-option-hovered-scale__3VyMZ\",\"nextOptionHoveredScale\":\"preferences-screen__next-option-hovered-scale__3VyMZ\",\"range-slider\":\"preferences-screen__range-slider__2JBPc\",\"rangeSlider\":\"preferences-screen__range-slider__2JBPc\"};","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"_2d-hud__panel__2oM_T\",\"tip-cancel-text\":\"_2d-hud__tip-cancel-text__12KQ2\",\"tipCancelText\":\"_2d-hud__tip-cancel-text__12KQ2\",\"top-tip\":\"_2d-hud__top-tip__E5uti\",\"topTip\":\"_2d-hud__top-tip__E5uti\",\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"attach_video_share_mode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attachVideoShareMode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attach_video_share_failed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attachVideoShareFailed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attach_pen_mode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attachPenMode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attach_mute_mode\":\"_2d-hud__attach_mute_mode__153iB\",\"attachMuteMode\":\"_2d-hud__attach_mute_mode__153iB\",\"attach_freeze_mode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"attachFreezeMode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"top-tip-no-hud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"topTipNoHud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"tip-cancel\":\"_2d-hud__tip-cancel__JaFV-\",\"tipCancel\":\"_2d-hud__tip-cancel__JaFV-\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"iconButtonIcon\":\"_2d-hud__iconButtonIcon__3uFYG\",\"spawn\":\"_2d-hud__spawn__1FoBz\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"disabled\":\"_2d-hud__disabled__3ylbZ\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invite-container\":\"invite-dialog__invite-container__1c0Jw\",\"inviteContainer\":\"invite-dialog__invite-container__1c0Jw\",\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"enter-vr-button\":\"invite-dialog__enter-vr-button__3y1BF\",\"enterVrButton\":\"invite-dialog__enter-vr-button__3y1BF\",\"invite-button\":\"invite-dialog__invite-button__3cjFw\",\"inviteButton\":\"invite-dialog__invite-button__3cjFw\",\"enter-button\":\"invite-dialog__enter-button__2Z5EY\",\"enterButton\":\"invite-dialog__enter-button__2Z5EY\",\"invite-mini-button\":\"invite-dialog__invite-mini-button__2zWJj\",\"inviteMiniButton\":\"invite-dialog__invite-mini-button__2zWJj\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"embed-text\":\"invite-dialog__embed-text__3-Boo\",\"embedText\":\"invite-dialog__embed-text__3-Boo\",\"invite-container-inverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"inviteContainerInverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"subscribe\":\"invite-dialog__subscribe__qlJL4\",\"embed-tip-wrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embedTipWrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embed-tip\":\"invite-dialog__embed-tip__12p0o\",\"embedTip\":\"invite-dialog__embed-tip__12p0o\",\"modal\":\"invite-dialog__modal__1hbVP\",\"invite-button-lowered\":\"invite-dialog__invite-button-lowered__3lM4N\",\"inviteButtonLowered\":\"invite-dialog__invite-button-lowered__3lM4N\",\"hide-small-screens\":\"invite-dialog__hide-small-screens__3UCeH\",\"hideSmallScreens\":\"invite-dialog__hide-small-screens__3UCeH\",\"link-code\":\"invite-dialog__link-code__k-Fcd\",\"linkCode\":\"invite-dialog__link-code__k-Fcd\",\"code-duration\":\"invite-dialog__code-duration__2E3JG\",\"codeDuration\":\"invite-dialog__code-duration__2E3JG\",\"invite-container-below-hud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"inviteContainerBelowHud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\",\"embed\":\"invite-dialog__embed__2zy_A\",\"close\":\"invite-dialog__close__3PAxl\",\"embed-tip-attach-point\":\"invite-dialog__embed-tip-attach-point__2UAZp\",\"embedTipAttachPoint\":\"invite-dialog__embed-tip-attach-point__2UAZp\"};","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport const AVATAR_TYPES = {\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nexport function getAvatarType(avatarId) {\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n\n// Currently the way we do material overrides is with a special named material.\n// We want to migrate eventually to having a GLTF extension that specifies what\n// materials can be overridden, but in the meantime we want to be able to support\n// arbitrary models with some sort of functionality. This provides a fallback\nexport const MAT_NAME = \"Bot_PBS\";\nexport function ensureAvatarMaterial(gltf) {\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\n\n  function materialForMesh(mesh) {\n    if (!mesh.primitives) return;\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\n    return primitive && gltf.materials[primitive.material];\n  }\n\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\n  while (nodes.length) {\n    const node = gltf.nodes[nodes.shift()];\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\n    if (material) {\n      material.name = MAT_NAME;\n      break;\n    }\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n\n  return gltf;\n}\n\nexport async function remixAvatar(parentId, name) {\n  const avatar = {\n    parent_avatar_listing_id: parentId,\n    name: name,\n    files: {}\n  };\n\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { childMatch, setMatrixWorld, calculateViewingDistance } from \"../utils/three-utils\";\nimport { paths } from \"./userinput/paths\";\nimport { getBox } from \"../utils/auto-box-collider\";\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { qsGet } from \"../utils/qs_truthy\";\nconst customFOV = qsGet(\"fov\");\nconst enableThirdPersonMode = qsTruthy(\"thirdPerson\");\n\nexport function getInspectable(child) {\n  let el = child;\n  while (el) {\n    if (el.components && el.components.tags && el.components.tags.data.inspectable) return el;\n    el = el.parentNode;\n  }\n  return null;\n}\n\nconst decompose = (function() {\n  const scale = new THREE.Vector3();\n  return function decompose(m, p, q) {\n    m.decompose(p, q, scale); //ignore scale, like we're dealing with a motor\n  };\n})();\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst orbit = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const rwq = new THREE.Quaternion();\n  const UP = new THREE.Vector3();\n  const RIGHT = new THREE.Vector3();\n  const target = new THREE.Object3D();\n  const dhQ = new THREE.Quaternion();\n  const dvQ = new THREE.Quaternion();\n  return function orbit(object, rig, camera, dh, dv, dz, dt, panY) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n    object.updateMatrices();\n    decompose(object.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(rwq);\n\n    dhQ.setFromAxisAngle(UP.set(0, 1, 0).applyQuaternion(owq), 0.1 * dh * dt);\n    target.quaternion.copy(cwq).premultiply(dhQ);\n    const dPos = new THREE.Vector3().subVectors(cwp, owp);\n    const zoom = 1 - dz * dt;\n    const newLength = dPos.length() * zoom;\n    // TODO: These limits should be calculated based on the calculated view distance.\n    if (newLength > 0.1 && newLength < 100) {\n      dPos.multiplyScalar(zoom);\n    }\n\n    dvQ.setFromAxisAngle(RIGHT.set(1, 0, 0).applyQuaternion(target.quaternion), 0.1 * dv * dt);\n    target.quaternion.premultiply(dvQ);\n    target.position.addVectors(owp, dPos.applyQuaternion(dhQ).applyQuaternion(dvQ)).add(\n      UP.set(0, 1, 0)\n        .multiplyScalar(panY * newLength)\n        .applyQuaternion(target.quaternion)\n    );\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nconst moveRigSoCameraLooksAtObject = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const oForw = new THREE.Vector3();\n  const center = new THREE.Vector3();\n  const target = new THREE.Object3D();\n  return function moveRigSoCameraLooksAtObject(rig, camera, object, distanceMod) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n\n    object.updateMatrices();\n    decompose(object.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(cwq);\n\n    const box = getBox(object.el, object.el.getObject3D(\"mesh\") || object, true);\n    box.getCenter(center);\n    const vrMode = object.el.sceneEl.is(\"vr-mode\");\n    const dist =\n      calculateViewingDistance(\n        object.el.sceneEl.camera.fov,\n        object.el.sceneEl.camera.aspect,\n        object,\n        box,\n        center,\n        vrMode\n      ) * distanceMod;\n    target.position.addVectors(\n      owp,\n      oForw\n        .set(0, 0, 1)\n        .multiplyScalar(dist)\n        .applyQuaternion(owq)\n    );\n    target.quaternion.copy(owq);\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nexport const CAMERA_MODE_FIRST_PERSON = 0;\nexport const CAMERA_MODE_THIRD_PERSON_NEAR = 1;\nexport const CAMERA_MODE_THIRD_PERSON_FAR = 2;\nexport const CAMERA_MODE_INSPECT = 3;\nexport const CAMERA_MODE_SCENE_PREVIEW = 4;\n\nconst NEXT_MODES = {\n  [CAMERA_MODE_FIRST_PERSON]: CAMERA_MODE_THIRD_PERSON_NEAR,\n  [CAMERA_MODE_THIRD_PERSON_NEAR]: CAMERA_MODE_THIRD_PERSON_FAR,\n  [CAMERA_MODE_THIRD_PERSON_FAR]: CAMERA_MODE_FIRST_PERSON\n};\n\nconst CAMERA_LAYER_INSPECT = 4;\n// This layer is never actually rendered by a camera but lets the batching system know it should be rendered if inspecting\nexport const CAMERA_LAYER_BATCH_INSPECT = 5;\n\nconst ensureLightsAreSeenByCamera = function(o) {\n  if (o.isLight) {\n    o.layers.enable(CAMERA_LAYER_INSPECT);\n  }\n};\nconst enableInspectLayer = function(o) {\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchingEnabled && batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.enable(CAMERA_LAYER_INSPECT);\n    o.layers.enable(CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.enable(CAMERA_LAYER_INSPECT);\n  }\n};\nconst disableInspectLayer = function(o) {\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchingEnabled && batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.disable(CAMERA_LAYER_INSPECT);\n    o.layers.disable(CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.disable(CAMERA_LAYER_INSPECT);\n  }\n};\n\nfunction getAudio(o) {\n  let audio;\n  o.traverse(c => {\n    if (!audio && c.type === \"Audio\") {\n      audio = c;\n    }\n  });\n  return audio;\n}\n\nconst FALLOFF = 0.9;\nexport class CameraSystem {\n  constructor(scene) {\n    this.enableLights = localStorage.getItem(\"show-background-while-inspecting\") === \"true\";\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.mode = CAMERA_MODE_SCENE_PREVIEW;\n    this.snapshot = { audioTransform: new THREE.Matrix4(), matrixWorld: new THREE.Matrix4() };\n    this.audioListenerTargetTransform = new THREE.Matrix4();\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n      this.viewingCamera = document.getElementById(\"viewing-camera\");\n      this.viewingRig = document.getElementById(\"viewing-rig\");\n\n      const bg = new THREE.Mesh(\n        new THREE.BoxGeometry(100, 100, 100),\n        new THREE.MeshBasicMaterial({ color: 0x020202, side: THREE.BackSide })\n      );\n      bg.layers.set(CAMERA_LAYER_INSPECT);\n      this.viewingRig.object3D.add(bg);\n      if (customFOV) {\n        if (this.viewingCamera.components.camera) {\n          this.viewingCamera.setAttribute(\"camera\", { fov: customFOV });\n        } else {\n          scene.addEventListener(\"camera-set-active\", () => {\n            this.viewingCamera.setAttribute(\"camera\", { fov: customFOV });\n          });\n        }\n      }\n    });\n  }\n\n  nextMode() {\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      this.uninspect();\n      return;\n    }\n\n    if (!enableThirdPersonMode) return;\n    if (this.mode === CAMERA_MODE_SCENE_PREVIEW) return;\n\n    this.mode = NEXT_MODES[this.mode] || 0;\n    if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n      AFRAME.scenes[0].renderer.vr.setPoseTarget(this.avatarPOV.object3D);\n    } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n      AFRAME.scenes[0].renderer.vr.setPoseTarget(this.viewingCamera.object3D);\n    }\n  }\n\n  inspect(o, distanceMod, temporarilyDisableRegularExit) {\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.temporarilyDisableRegularExit = temporarilyDisableRegularExit; // TODO: Do this at the action set layer\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      return;\n    }\n    const scene = AFRAME.scenes[0];\n    scene.object3D.traverse(ensureLightsAreSeenByCamera);\n    scene.classList.add(\"hand-cursor\");\n    scene.classList.remove(\"no-cursor\");\n    this.snapshot.mode = this.mode;\n    this.mode = CAMERA_MODE_INSPECT;\n    this.inspected = o;\n\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    this.snapshot.mask = camera.layers.mask;\n    if (vrMode) {\n      this.snapshot.mask0 = camera.cameras[0].layers.mask;\n      this.snapshot.mask1 = camera.cameras[1].layers.mask;\n    }\n    if (!this.enableLights) {\n      this.hideEverythingButThisObject(o);\n    }\n\n    this.viewingCamera.object3D.updateMatrices();\n    this.snapshot.matrixWorld.copy(this.viewingRig.object3D.matrixWorld);\n\n    moveRigSoCameraLooksAtObject(\n      this.viewingRig.object3D,\n      this.viewingCamera.object3D,\n      this.inspected,\n      distanceMod || 1\n    );\n\n    this.snapshot.audio = getAudio(o);\n    if (this.snapshot.audio) {\n      this.snapshot.audio.updateMatrices();\n      this.snapshot.audioTransform.copy(this.snapshot.audio.matrixWorld);\n      scene.audioListener.updateMatrices();\n      this.audioListenerTargetTransform.makeTranslation(0, 0, 1).premultiply(scene.audioListener.matrixWorld);\n      setMatrixWorld(this.snapshot.audio, this.audioListenerTargetTransform);\n    }\n  }\n\n  uninspect() {\n    this.temporarilyDisableRegularExit = false;\n    if (this.mode !== CAMERA_MODE_INSPECT) return;\n    const scene = AFRAME.scenes[0];\n    if (scene.is(\"entered\")) {\n      scene.classList.remove(\"hand-cursor\");\n      scene.classList.add(\"no-cursor\");\n    }\n    this.showEverythingAsNormal();\n    this.inspected = null;\n    if (this.snapshot.audio) {\n      setMatrixWorld(this.snapshot.audio, this.snapshot.audioTransform);\n      this.snapshot.audio = null;\n    }\n\n    this.mode = this.snapshot.mode;\n    if (this.snapshot.mode === CAMERA_MODE_SCENE_PREVIEW) {\n      setMatrixWorld(this.viewingRig.object3D, this.snapshot.matrixWorld);\n    }\n    this.snapshot.mode = null;\n    this.tick(AFRAME.scenes[0]);\n  }\n\n  hideEverythingButThisObject(o) {\n    o.traverse(enableInspectLayer);\n\n    const scene = AFRAME.scenes[0];\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    camera.layers.set(CAMERA_LAYER_INSPECT);\n    if (vrMode) {\n      camera.cameras[0].layers.set(CAMERA_LAYER_INSPECT);\n      camera.cameras[1].layers.set(CAMERA_LAYER_INSPECT);\n    }\n  }\n\n  showEverythingAsNormal() {\n    if (this.inspected) {\n      this.inspected.traverse(disableInspectLayer);\n    }\n    const scene = AFRAME.scenes[0];\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    camera.layers.mask = this.snapshot.mask;\n    if (vrMode) {\n      camera.cameras[0].layers.mask = this.snapshot.mask0;\n      camera.cameras[1].layers.mask = this.snapshot.mask1;\n    }\n  }\n\n  tick = (function() {\n    const translation = new THREE.Matrix4();\n    let uiRoot;\n    return function tick(scene, dt) {\n      const entered = scene.is(\"entered\");\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      if (isGhost && this.mode !== CAMERA_MODE_FIRST_PERSON && this.mode !== CAMERA_MODE_INSPECT) {\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n        const position = new THREE.Vector3();\n        const quat = new THREE.Quaternion();\n        const scale = new THREE.Vector3();\n        this.viewingCamera.object3D.updateMatrices();\n        this.viewingRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.decompose(position, quat, scale);\n        position.setFromMatrixPosition(this.viewingCamera.object3D.matrixWorld);\n        position.y = position.y - 1.6;\n        setMatrixWorld(\n          this.avatarRig.object3D,\n          new THREE.Matrix4().compose(\n            position,\n            quat,\n            scale\n          )\n        );\n        scene.systems[\"hubs-systems\"].characterController.fly = true;\n        this.avatarPOV.object3D.updateMatrices();\n        setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.object3D.matrixWorld);\n      }\n      if (!this.enteredScene && entered) {\n        this.enteredScene = true;\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n      }\n      this.avatarPOVRotator = this.avatarPOVRotator || this.avatarPOV.components[\"pitch-yaw-rotator\"];\n      this.viewingCameraRotator = this.viewingCameraRotator || this.viewingCamera.components[\"pitch-yaw-rotator\"];\n      this.avatarPOVRotator.on = true;\n      this.viewingCameraRotator.on = true;\n\n      this.userinput = this.userinput || scene.systems.userinput;\n      this.interaction = this.interaction || scene.systems.interaction;\n\n      if (this.userinput.get(paths.actions.startInspecting) && this.mode !== CAMERA_MODE_INSPECT) {\n        const hoverEl = this.interaction.state.rightRemote.hovered || this.interaction.state.leftRemote.hovered;\n\n        if (hoverEl) {\n          const inspectable = getInspectable(hoverEl);\n\n          if (inspectable) {\n            this.inspect(inspectable.object3D);\n          }\n        }\n      } else if (\n        !this.temporarilyDisableRegularExit &&\n        this.mode === CAMERA_MODE_INSPECT &&\n        this.userinput.get(paths.actions.stopInspecting)\n      ) {\n        scene.emit(\"uninspect\");\n        this.uninspect();\n      }\n\n      if (this.userinput.get(paths.actions.nextCameraMode)) {\n        this.nextMode();\n      }\n\n      const headShouldBeVisible = this.mode !== CAMERA_MODE_FIRST_PERSON;\n      this.playerHead = this.playerHead || document.getElementById(\"avatar-head\");\n      if (this.playerHead && headShouldBeVisible !== this.playerHead.object3D.visible) {\n        this.playerHead.object3D.visible = headShouldBeVisible;\n\n        // Skip a frame so we don't see our own avatar, etc.\n        return;\n      }\n\n      if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n        this.viewingCameraRotator.on = false;\n        this.avatarRig.object3D.updateMatrices();\n        setMatrixWorld(this.viewingRig.object3D, this.avatarRig.object3D.matrixWorld);\n        if (scene.is(\"vr-mode\")) {\n          this.viewingCamera.object3D.updateMatrices();\n          setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.object3D.matrixWorld);\n        } else {\n          this.avatarPOV.object3D.updateMatrices();\n          setMatrixWorld(this.viewingCamera.object3D, this.avatarPOV.object3D.matrixWorld);\n        }\n      } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n        if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR) {\n          translation.makeTranslation(0, 1, 3);\n        } else {\n          translation.makeTranslation(0, 2, 8);\n        }\n        this.avatarRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld).multiply(translation);\n        setMatrixWorld(this.viewingRig.object3D, this.viewingRig.object3D.matrixWorld);\n        this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.object3D.quaternion);\n        this.avatarPOV.object3D.matrixNeedsUpdate = true;\n      } else if (this.mode === CAMERA_MODE_INSPECT) {\n        this.avatarPOVRotator.on = false;\n        this.viewingCameraRotator.on = false;\n        const cameraDelta = this.userinput.get(\n          scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta\n        );\n\n        if (cameraDelta) {\n          // TODO: Move device specific tinkering to action sets\n          const horizontalDelta = (AFRAME.utils.device.isMobile() ? -0.6 : 1) * cameraDelta[0] || 0;\n          const verticalDelta = (AFRAME.utils.device.isMobile() ? -1.2 : 1) * cameraDelta[1] || 0;\n          this.horizontalDelta = (this.horizontalDelta + horizontalDelta) / 2;\n          this.verticalDelta = (this.verticalDelta + verticalDelta) / 2;\n        } else if (Math.abs(this.verticalDelta) > 0.0001 || Math.abs(this.horizontalDelta) > 0.0001) {\n          this.verticalDelta = FALLOFF * this.verticalDelta;\n          this.horizontalDelta = FALLOFF * this.horizontalDelta;\n        }\n\n        const inspectZoom = this.userinput.get(paths.actions.inspectZoom) * 0.001;\n        if (inspectZoom) {\n          this.inspectZoom = inspectZoom + (5 * this.inspectZoom) / 6;\n        } else if (Math.abs(this.inspectZoom) > 0.0001) {\n          this.inspectZoom = FALLOFF * this.inspectZoom;\n        }\n        const panY = this.userinput.get(paths.actions.inspectPanY) || 0;\n        if (this.userinput.get(paths.actions.resetInspectView)) {\n          moveRigSoCameraLooksAtObject(this.viewingRig.object3D, this.viewingCamera.object3D, this.inspected, 1);\n        }\n\n        if (\n          Math.abs(this.verticalDelta) > 0.001 ||\n          Math.abs(this.horizontalDelta) > 0.001 ||\n          Math.abs(this.inspectZoom) > 0.001 ||\n          Math.abs(panY) > 0.0001\n        ) {\n          orbit(\n            this.inspected,\n            this.viewingRig.object3D,\n            this.viewingCamera.object3D,\n            this.horizontalDelta,\n            this.verticalDelta,\n            this.inspectZoom,\n            dt,\n            panY\n          );\n        }\n      }\n\n      if (scene.audioListener && this.avatarPOV) {\n        if (this.mode === CAMERA_MODE_INSPECT && scene.audioListener.parent !== this.avatarPOV.object3D) {\n          this.avatarPOV.object3D.add(scene.audioListener);\n        } else if (\n          (this.mode === CAMERA_MODE_FIRST_PERSON ||\n            this.mode === CAMERA_MODE_THIRD_PERSON_NEAR ||\n            this.mode === CAMERA_MODE_THIRD_PERSON_FAR) &&\n          scene.audioListener.parent !== this.viewingCamera.object3D\n        ) {\n          this.viewingCamera.object3D.add(scene.audioListener);\n        }\n      }\n    };\n  })();\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport ducky from \"../assets/models/DuckyMesh.glb\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction chooseRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport async function fetchRandomDefaultAvatarId() {\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries;\n  if (defaultAvatars.length === 0) {\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\n    // when running against a fresh reticulum server, e.g. a local ret instance.\n    return new URL(ducky, location.href).href;\n  }\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\n  return chooseRandom(avatarIds);\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9 -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    preferences: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        muteMicOnEntry: { type: \"bool\" },\n        audioOutputMode: { type: \"string\" },\n        enableOnScreenJoystickLeft: { type: \"bool\" },\n        enableOnScreenJoystickRight: { type: \"bool\" },\n        onlyShowNametagsInFreeze: { type: \"bool\" },\n        allowMultipleHubsInstances: { type: \"bool\" },\n        maxResolutionWidth: { type: \"number\" },\n        maxResolutionHeight: { type: \"number\" },\n        globalVoiceVolume: { type: \"number\" },\n        globalMediaVolume: { type: \"number\" },\n        snapRotationDegrees: { type: \"number\" },\n        materialQualitySetting: { type: \"string\" },\n        disableMovement: { type: \"bool\" },\n        disableBackwardsMovement: { type: \"bool\" },\n        disableStrafing: { type: \"bool\" },\n        disableTeleporter: { type: \"bool\" },\n        disableAutoPixelRatio: { type: \"bool\" },\n        enableMonitoring: { type: \"bool\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: [],\n      preferences: {}\n    });\n\n    this._shouldResetAvatarOnInit = false;\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this._shouldResetAvatarOnInit = true;\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n\n    this._signOutOnExpiredAuthToken();\n  }\n\n  _signOutOnExpiredAuthToken = () => {\n    if (!this.state.credentials.token) return;\n\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\n    if (expiry <= Date.now()) {\n      this.update({ credentials: { token: null, email: null } });\n    }\n  };\n\n  initProfile = async () => {\n    if (this._shouldResetAvatarOnInit) {\n      await this.resetToRandomDefaultAvatar();\n    } else {\n      this.update({\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\n      });\n    }\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomDefaultAvatar = async () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/app-logo-157c06cff6c80227eb577f35c79e58b6.png\";","module.exports = __webpack_public_path__ + \"assets/images/company-logo-8f6f7c3b303004256295b45c2eee5117.png\";","module.exports = __webpack_public_path__ + \"assets/images/editor-logo-6f885a1543496ebc23a21b7fea82b255.png\";","// Brief overview of client authorization can be found in the wiki:\n// https://github.com/mozilla/hubs/wiki/Hubs-authorization\nexport function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const isEmojiSpawner = isSpawner && el.components[\"super-spawner\"].data.template === \"#interactable-emoji\";\n  const isEmoji = !!el.components.emoji;\n  const canMove =\n    (isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n    (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isCamera = networkedTemplate === \"#interactable-camera\";\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  const spawnerTemplate =\n    entity && entity.components[\"super-spawner\"] && entity.components[\"super-spawner\"].data.template;\n  const isEmojiSpawner = spawnerTemplate === \"#interactable-emoji\";\n  const isEmoji = !!entity.components.emoji;\n  const isHoldableButton = entity.components.tags && entity.components.tags.data.holdableButton;\n  return (\n    isHoldableButton ||\n    ((isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n      (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n      (!isCamera || window.APP.hubChannel.can(\"spawn_camera\")) &&\n      (!isPen || window.APP.hubChannel.can(\"spawn_drawing\")))\n  );\n}\n\nfunction indexForComponent(component, schema) {\n  const fullComponent = typeof component === \"string\";\n  const componentName = fullComponent ? component : component.component;\n\n  if (fullComponent) {\n    return schema.components.findIndex(schemaComponent => schemaComponent === componentName);\n  } else {\n    return schema.components.findIndex(\n      schemaComponent => schemaComponent.component === componentName && schemaComponent.property === component.property\n    );\n  }\n}\n\nlet nonAuthorizedSchemas = null;\nfunction initializeNonAuthorizedSchemas() {\n  /*\n  Takes the NAF schemas defined in network-schemas.js and produces a data structure of template name to non-authorized\n  component indices:\n  {\n    \"#interactable-media\": [\"4\", \"5\", \"6\"]\n  }\n  */\n  nonAuthorizedSchemas = {};\n  const { schemaDict } = NAF.schemas;\n  for (const template in schemaDict) {\n    if (!schemaDict.hasOwnProperty(template)) continue;\n    const schema = schemaDict[template];\n    nonAuthorizedSchemas[template] = (schema.nonAuthorizedComponents || [])\n      .map(nonAuthorizedComponent => indexForComponent(nonAuthorizedComponent, schema))\n      .map(index => index.toString());\n  }\n}\n\nfunction sanitizeMessageData(template, data) {\n  if (nonAuthorizedSchemas === null) {\n    initializeNonAuthorizedSchemas();\n  }\n  const nonAuthorizedIndices = nonAuthorizedSchemas[template];\n  for (const index in data.components) {\n    if (!data.components.hasOwnProperty(index)) continue;\n    if (!nonAuthorizedIndices.includes(index)) {\n      data.components[index] = null;\n    }\n  }\n  return data;\n}\n\nfunction authorizeEntityManipulation(entityMetadata, sender, senderPermissions) {\n  const { template, creator, isPinned } = entityMetadata;\n  const isCreator = sender === creator;\n\n  if (template.endsWith(\"-waypoint-avatar\")) {\n    return true;\n  } else if (template.endsWith(\"-avatar\")) {\n    return isCreator;\n  } else if (template.endsWith(\"-media\")) {\n    return (!isPinned || senderPermissions.pin_objects) && (isCreator || senderPermissions.spawn_and_move_media);\n  } else if (template.endsWith(\"-camera\")) {\n    return isCreator || senderPermissions.spawn_camera;\n  } else if (template.endsWith(\"-pen\") || template.endsWith(\"-drawing\")) {\n    return isCreator || senderPermissions.spawn_drawing;\n  } else if (template.endsWith(\"-emoji\")) {\n    return isCreator || senderPermissions.spawn_emoji;\n  } else {\n    return false;\n  }\n}\n\nfunction getPendingOrExistingEntityMetadata(networkId) {\n  const pendingData = NAF.connection.adapter.getPendingDataForNetworkId(networkId);\n\n  if (pendingData) {\n    const { template, creator } = pendingData;\n    const schema = NAF.schemas.schemaDict[template];\n    const pinnableComponent = pendingData.components[indexForComponent(\"pinnable\", schema)];\n    const isPinned = pinnableComponent && pinnableComponent.pinned;\n    return { template, creator, isPinned };\n  }\n\n  const entity = NAF.entities.getEntity(networkId);\n  if (!entity) return null;\n\n  const { template, creator } = entity.components.networked.data;\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  return { template, creator, isPinned };\n}\n\nfunction authorizeOrSanitizeMessageData(data, sender, senderPermissions) {\n  const entityMetadata = getPendingOrExistingEntityMetadata(data.networkId);\n  if (!entityMetadata) return false;\n\n  if (authorizeEntityManipulation(entityMetadata, sender, senderPermissions)) {\n    return true;\n  } else {\n    const { template } = entityMetadata;\n    sanitizeMessageData(template, data);\n    return true;\n  }\n}\n\n// If we receive a sync from a persistent object that we don't have an entity for yet, it must be a scene-owned object\n// (since we guarantee that pinned objects are loaded before connecting NAF).\n// Since we need to get metadata (the template id in particular) from the entity, we must stash these messages until\n// the scene has loaded.\n// Components which require this data must call applyPersistentSync after they are initialized\nconst persistentSyncs = {};\nfunction stashPersistentSync(message, entityData) {\n  if (!persistentSyncs[entityData.networkId]) {\n    persistentSyncs[entityData.networkId] = {\n      dataType: \"u\",\n      data: entityData,\n      clientId: message.clientId,\n      from_session_id: message.from_session_id\n    };\n  } else {\n    const currentData = persistentSyncs[entityData.networkId].data;\n    const currentComponents = currentData.components;\n    Object.assign(currentData, entityData);\n    currentData.components = Object.assign(currentComponents, entityData.components);\n  }\n}\n\nconst emptyObject = {};\nexport function authorizeOrSanitizeMessage(message) {\n  const { dataType, from_session_id } = message;\n\n  if (dataType === \"u\" && message.data.isFirstSync && !message.data.persistent) {\n    // The server has already authorized first sync messages that result in an instantiation.\n    return message;\n  }\n\n  const presenceState = window.APP.hubChannel.presence.state[from_session_id];\n\n  if (!presenceState) {\n    // We've received a manipulation message from a user that we don't have presence state for yet.\n    // Since we can't make a judgement about their permissions, we'll have to ignore the message.\n    return emptyObject;\n  }\n\n  const senderPermissions = presenceState.metas[0].permissions;\n\n  if (dataType === \"um\") {\n    let sanitizedAny = false;\n    let stashedAny = false;\n    for (const index in message.data.d) {\n      if (!message.data.d.hasOwnProperty(index)) continue;\n      const entityData = message.data.d[index];\n      if (entityData.persistent && !NAF.entities.getEntity(entityData.networkId)) {\n        stashPersistentSync(message, entityData);\n        message.data.d[index] = null;\n        stashedAny = true;\n      } else {\n        const authorizedOrSanitized = authorizeOrSanitizeMessageData(entityData, from_session_id, senderPermissions);\n        if (!authorizedOrSanitized) {\n          message.data.d[index] = null;\n          sanitizedAny = true;\n        }\n      }\n    }\n\n    if (sanitizedAny || stashedAny) {\n      message.data.d = message.data.d.filter(x => x != null);\n    }\n\n    return message;\n  } else if (dataType === \"u\") {\n    if (message.data.persistent && !NAF.entities.getEntity(message.data.networkId)) {\n      persistentSyncs[message.data.networkId] = message;\n      return emptyObject;\n    } else {\n      const authorizedOrSanitized = authorizeOrSanitizeMessageData(message.data, from_session_id, senderPermissions);\n      if (authorizedOrSanitized) {\n        return message;\n      } else {\n        return emptyObject;\n      }\n    }\n  } else if (dataType === \"r\") {\n    const entityMetadata = getPendingOrExistingEntityMetadata(message.data.networkId);\n    if (!entityMetadata) return emptyObject;\n    if (authorizeEntityManipulation(entityMetadata, from_session_id, senderPermissions)) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else {\n    // Fall through for other data types. Namely, \"drawing-<networkId>\" messages at the moment.\n    return message;\n  }\n}\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nexport function applyPersistentSync(networkId) {\n  if (!persistentSyncs[networkId]) return;\n  NAF.connection.adapter.onData(authorizeOrSanitizeMessage(persistentSyncs[networkId]), PHOENIX_RELIABLE_NAF);\n  delete persistentSyncs[networkId];\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation-button\":\"client-info-dialog__navigation-button__2WZHM\",\"navigationButton\":\"client-info-dialog__navigation-button__2WZHM\",\"primary-action-buttons\":\"client-info-dialog__primary-action-buttons__3xJ_N\",\"primaryActionButtons\":\"client-info-dialog__primary-action-buttons__3xJ_N\",\"cancel\":\"client-info-dialog__cancel__2BguV\",\"collapse-button\":\"client-info-dialog__collapse-button__1tTD7\",\"collapseButton\":\"client-info-dialog__collapse-button__1tTD7\",\"title-and-close\":\"client-info-dialog__title-and-close__1GbuZ\",\"titleAndClose\":\"client-info-dialog__title-and-close__1GbuZ\",\"object-display-string\":\"client-info-dialog__object-display-string__2wcOD\",\"objectDisplayString\":\"client-info-dialog__object-display-string__2wcOD\",\"cancel-text\":\"client-info-dialog__cancel-text__2mi_O\",\"cancelText\":\"client-info-dialog__cancel-text__2mi_O\",\"client-info-dialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"clientInfoDialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"title\":\"client-info-dialog__title__3FGPe\",\"community-identifier\":\"client-info-dialog__community-identifier__g3lbP\",\"communityIdentifier\":\"client-info-dialog__community-identifier__g3lbP\",\"client-info\":\"client-info-dialog__client-info__1MUSa\",\"clientInfo\":\"client-info-dialog__client-info__1MUSa\",\"client-profile-image\":\"client-info-dialog__client-profile-image__zt1EA\",\"clientProfileImage\":\"client-info-dialog__client-profile-image__zt1EA\",\"client-details\":\"client-info-dialog__client-details__1F5zy\",\"clientDetails\":\"client-info-dialog__client-details__1F5zy\",\"client-main\":\"client-info-dialog__client-main__2BC1s\",\"clientMain\":\"client-info-dialog__client-main__2BC1s\",\"action-button-sections\":\"client-info-dialog__action-button-sections__amVnt\",\"actionButtonSections\":\"client-info-dialog__action-button-sections__amVnt\",\"action-button-placeholder\":\"client-info-dialog__action-button-placeholder__3MCZ3\",\"actionButtonPlaceholder\":\"client-info-dialog__action-button-placeholder__3MCZ3\",\"left-action-buttons\":\"client-info-dialog__left-action-buttons__Vul8Q\",\"leftActionButtons\":\"client-info-dialog__left-action-buttons__Vul8Q\",\"right-action-buttons\":\"client-info-dialog__right-action-buttons__231Az\",\"rightActionButtons\":\"client-info-dialog__right-action-buttons__231Az\",\"button-icon\":\"client-info-dialog__button-icon__1vKfx\",\"buttonIcon\":\"client-info-dialog__button-icon__1vKfx\",\"primary-action-button\":\"client-info-dialog__primary-action-button__NecRf\",\"primaryActionButton\":\"client-info-dialog__primary-action-button__NecRf\"};","import Raven from \"raven-js\";\nimport configs from \"./utils/configs\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = configs.SENTRY_DSN;\n  const gaTrackingId = configs.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nexport const computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      node.updateMatrices();\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot, worldSpace) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    if (!worldSpace) {\n      entity.object3D.worldToLocal(box.min);\n      entity.object3D.worldToLocal(box.max);\n    }\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"client-link\":\"presence-list__client-link__3tkyz\",\"clientLink\":\"presence-list__client-link__3tkyz\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"row-no-margin\":\"presence-list__row-no-margin__2FoEq\",\"rowNoMargin\":\"presence-list__row-no-margin__2FoEq\",\"row-header\":\"presence-list__row-header__3kl1w\",\"rowHeader\":\"presence-list__row-header__3kl1w\",\"list-item\":\"presence-list__list-item__2YARP\",\"listItem\":\"presence-list__list-item__2YARP\",\"list-item-link\":\"presence-list__list-item-link__2DLC2\",\"listItemLink\":\"presence-list__list-item-link__2DLC2\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\",\"icon\":\"presence-list__icon__1t8iB\",\"self\":\"presence-list__self__1g-bw\",\"moderator-badge\":\"presence-list__moderator-badge__2njku\",\"moderatorBadge\":\"presence-list__moderator-badge__2njku\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message-entry-input\":\"message-entry__message-entry-input__2AtQE\",\"messageEntryInput\":\"message-entry__message-entry-input__2AtQE\",\"message-entry\":\"message-entry__message-entry__x7lQX\",\"messageEntry\":\"message-entry__message-entry__x7lQX\",\"message-entry-disabled\":\"message-entry__message-entry-disabled__25LSI\",\"messageEntryDisabled\":\"message-entry__message-entry-disabled__25LSI\",\"message-entry-button\":\"message-entry__message-entry-button__3xJhH\",\"messageEntryButton\":\"message-entry__message-entry-button__3xJhH\",\"message-entry-spawn\":\"message-entry__message-entry-spawn__1_AF5\",\"messageEntrySpawn\":\"message-entry__message-entry-spawn__1_AF5\",\"message-entry-button-in-room\":\"message-entry__message-entry-button-in-room__2yMTR\",\"messageEntryButtonInRoom\":\"message-entry__message-entry-button-in-room__2yMTR\",\"message-entry-upload\":\"message-entry__message-entry-upload__3F0sX\",\"messageEntryUpload\":\"message-entry__message-entry-upload__3F0sX\",\"message-entry-in-room\":\"message-entry__message-entry-in-room__1aN5s\",\"messageEntryInRoom\":\"message-entry__message-entry-in-room__1aN5s\",\"message-entry-input-in-room\":\"message-entry__message-entry-input-in-room__30ReF\",\"messageEntryInputInRoom\":\"message-entry__message-entry-input-in-room__30ReF\",\"message-entry-input-no-spawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"messageEntryInputNoSpawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"message-entry-on-mobile\":\"message-entry__message-entry-on-mobile__2pSYF\",\"messageEntryOnMobile\":\"message-entry__message-entry-on-mobile__2pSYF\"};","module.exports = __webpack_public_path__ + \"assets/models/DuckyMesh-04f978955fb12d48f7ff8c59a05de439.glb\";","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function willRequireUserGesture() {\n  return !screenfull.isFullscreen && shouldShowFullScreen();\n}\n\nexport async function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    hasEnteredFullScreenThisSession = true;\n    await screenfull.request();\n  }\n}\n\nexport async function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    await screenfull.request();\n  }\n}\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description-field\":\"room-settings-dialog__description-field__36sKF\",\"descriptionField\":\"room-settings-dialog__description-field__36sKF\",\"name-field\":\"room-settings-dialog__name-field___yGhb\",\"nameField\":\"room-settings-dialog__name-field___yGhb\",\"next-button\":\"room-settings-dialog__next-button__2F9Jd\",\"nextButton\":\"room-settings-dialog__next-button__2F9Jd\",\"continue-button\":\"room-settings-dialog__continue-button__2Ltsg\",\"continueButton\":\"room-settings-dialog__continue-button__2Ltsg\",\"room-settings-form\":\"room-settings-dialog__room-settings-form__yNism\",\"roomSettingsForm\":\"room-settings-dialog__room-settings-form__yNism\",\"select-container\":\"room-settings-dialog__select-container__SGcNH\",\"selectContainer\":\"room-settings-dialog__select-container__SGcNH\",\"permission\":\"room-settings-dialog__permission__3W-cW\",\"subtitle\":\"room-settings-dialog__subtitle__2ddy2\",\"member-cap-container\":\"room-settings-dialog__member-cap-container__3IJG5\",\"memberCapContainer\":\"room-settings-dialog__member-cap-container__3IJG5\",\"permissions\":\"room-settings-dialog__permissions__1sHPN\",\"permissions-group\":\"room-settings-dialog__permissions-group__1oRYA\",\"permissionsGroup\":\"room-settings-dialog__permissions-group__1oRYA\",\"permission-disabled\":\"room-settings-dialog__permission-disabled__3NH-j\",\"permissionDisabled\":\"room-settings-dialog__permission-disabled__3NH-j\"};","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader, basisTextureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode, cloneObject3D } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.scene.animations,\n    scene: cloneObject3D(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that templates can be attached to the correct AFrame entity.\n  el.object3D.name = node.name;\n\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.uuid = node.uuid;\n  node.uuid = THREE.Math.generateUUID();\n\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  if (node.morphTargetInfluences) {\n    node.parent.morphTargetInfluences = node.morphTargetInfluences;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\n  let isFirstInflation = true;\n  const objectInflations = [];\n\n  inflatedEntity.object3D.traverse(async object3D => {\n    const objectInflation = {};\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\n    objectInflations.push(objectInflation);\n\n    if (!isFirstInflation) {\n      await objectInflations.shift().promise;\n    }\n    isFirstInflation = false;\n\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n\n    objectInflation.resolve();\n  });\n\n  await objectInflations.shift().promise;\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getHubsComponentsExtension(node) {\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\n    return node.extensions.MOZ_hubs_components;\n  } else if (node.extensions && node.extensions.HUBS_components) {\n    return node.extensions.HUBS_components;\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\n    return node.extras.gltfExtensions.MOZ_hubs_components;\n  }\n}\n\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\n// Make sure to update the wiki and Spoke when bumping a version\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      const components = getHubsComponentsExtension(node);\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      } else if (\n        oldHeightfieldNode.extras &&\n        oldHeightfieldNode.extras.gltfExtensions &&\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\n      ) {\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\n      }\n    }\n  }\n\n  if (version < 4) {\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\n    if (json.nodes) {\n      for (const node of json.nodes) {\n        const components = getHubsComponentsExtension(node);\n\n        if (!components) {\n          continue;\n        }\n\n        const light = components[\"spot-light\"] || components[\"point-light\"];\n\n        if (light && light.range === 0) {\n          light.decay = 0;\n        }\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n  gltfLoader.setBasisTextureLoader(basisTextureLoader);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  gltf.scene.animations = gltf.animations;\n\n  return gltf;\n}\n\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\n  const preferredTechnique =\n    window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n  if (useCache) {\n    if (gltfCache.has(src)) {\n      gltfCache.retain(src);\n      return cloneGltf(gltfCache.get(src).gltf);\n    } else {\n      if (inflightGltfs.has(src)) {\n        const gltf = await inflightGltfs.get(src);\n        gltfCache.retain(src);\n        return cloneGltf(gltf);\n      } else {\n        const promise = loadGLTF(src, contentType, preferredTechnique, null, jsonPreprocessor);\n        inflightGltfs.set(src, promise);\n        const gltf = await promise;\n        inflightGltfs.delete(src);\n        gltfCache.set(src, gltf);\n        return cloneGltf(gltf);\n      }\n    }\n  } else {\n    return loadGLTF(src, contentType, preferredTechnique, null, jsonPreprocessor);\n  }\n}\n\nfunction resolveAsset(src) {\n  // If the src attribute is a selector, get the url from the asset item.\n  if (src && src.charAt(0) === \"#\") {\n    const assetEl = document.getElementById(src.substring(1));\n    if (assetEl) {\n      return assetEl.getAttribute(\"src\");\n    }\n  }\n  return src;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    const src = resolveAsset(this.data.src);\n    if (src) {\n      gltfCache.release(src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(this.model.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        object3DToSet.visible = false;\n\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      if (lastSrc) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      object3DToSet.visible = true;\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"choose-avatar\":\"profile__choose-avatar__2EV0F\",\"chooseAvatar\":\"profile__choose-avatar__2EV0F\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"close\":\"profile__close__2Uitz\",\"logo\":\"profile__logo__1JZAd\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\",\"preview\":\"profile__preview__3QjLq\",\"edit-avatar\":\"profile__edit-avatar__3386A\",\"editAvatar\":\"profile__edit-avatar__3386A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"tweet-dialog__buttons__1gYv2\",\"tweet-button\":\"tweet-dialog__tweet-button__3XvNj\",\"tweetButton\":\"tweet-dialog__tweet-button__3XvNj\",\"tweet\":\"tweet-dialog__tweet__25N6e\",\"editor\":\"tweet-dialog__editor__3xJV-\",\"editor-inner\":\"tweet-dialog__editor-inner__1Zhzc\",\"editorInner\":\"tweet-dialog__editor-inner__1Zhzc\",\"emoji-button\":\"tweet-dialog__emoji-button__2L9tR\",\"emojiButton\":\"tweet-dialog__emoji-button__2L9tR\",\"counter\":\"tweet-dialog__counter__2OZyX\",\"media\":\"tweet-dialog__media__IeN9e\",\"posted\":\"tweet-dialog__posted__2t8RC\",\"tweet-loader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"tweetLoader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"dialog-background\":\"tweet-dialog__dialog-background__2vvyQ\",\"dialogBackground\":\"tweet-dialog__dialog-background__2vvyQ\"};","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","import { waitForDOMContentLoaded } from \"./async-utils\";\nimport \"./configs\";\n\n// Node these should be synchronized with the top of shared.scss\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\n\nconst DEFAULT_COLORS = {\n  \"action-color\": DEFAULT_ACTION_COLOR,\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-text-color\": \"#FFFFFF\",\n  \"action-subtitle-color\": \"#F0F0F0\",\n  \"notice-background-color\": \"#2F80ED\",\n  \"notice-text-color\": \"#FFFFFF\",\n  \"favorited-color\": \"#FFC000\"\n};\n\nfunction getThemeColor(name) {\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[name])\n    return window.APP_CONFIG.theme[name];\n\n  return DEFAULT_COLORS[name];\n}\n\nwaitForDOMContentLoaded().then(() => {\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[\"dark-theme\"]) {\n    document.body.classList.add(\"dark-theme\");\n  } else {\n    document.body.classList.add(\"light-theme\");\n  }\n\n  const actionColor = getThemeColor(\"action-color\");\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\n\n  if (document.querySelector(\"#rounded-text-button\")) {\n    // NOTE, using the object-based {} setAttribute variant in a-frame\n    // seems to not work in Firefox here -- the entities with the mixins are not\n    // updated.\n    document\n      .querySelector(\"#rounded-text-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-text-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n\n    document\n      .querySelector(\"#rounded-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n  }\n});\n\nfunction applyThemeToTextButton(el, highlighted) {\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundColor\",\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\n  );\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundHoverColor\",\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\n  );\n}\n\nexport { applyThemeToTextButton, getThemeColor };\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        ...THREE.UniformsUtils.clone(THREE.UniformsLib.fog),\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors,\n      name: material.name\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveIntensity = material.emissiveIntensity;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    // TODO this actually needs to get called whenever any of these material properties change\n    mobileMaterial.refreshUniforms();\n\n    return mobileMaterial;\n  }\n\n  refreshUniforms() {\n    this.uniforms.opacity.value = this.opacity;\n\n    if (this.color) {\n      this.uniforms.diffuse.value.copy(this.color);\n    }\n\n    if (this.emissive) {\n      this.uniforms.emissive.value.copy(this.emissive).multiplyScalar(this.emissiveIntensity);\n    }\n\n    if (this.map) {\n      this.uniforms.map.value = this.map;\n    }\n\n    if (this.aoMap) {\n      this.uniforms.aoMap.value = this.aoMap;\n      this.uniforms.aoMapIntensity.value = this.aoMapIntensity;\n    }\n\n    const uvScaleMap = this.map || this.emissiveMap;\n    if (uvScaleMap && uvScaleMap.matrixAutoUpdate === true) {\n      uvScaleMap.updateMatrix();\n      this.uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tip-root\":\"tip__tip-root__1s7D1\",\"tipRoot\":\"tip__tip-root__1s7D1\",\"tip-link\":\"tip__tip-link__3m4Iq\",\"tipLink\":\"tip__tip-link__3m4Iq\",\"tip-cancel\":\"tip__tip-cancel__1xPNP\",\"tipCancel\":\"tip__tip-cancel__1xPNP\",\"tip\":\"tip__tip__32KOl\",\"split-tip\":\"tip__split-tip__1xSCE\",\"splitTip\":\"tip__split-tip__1xSCE\",\"split-tip-icon\":\"tip__split-tip-icon__1ZXw0\",\"splitTipIcon\":\"tip__split-tip-icon__1ZXw0\",\"spawn_menu-icon\":\"tip__spawn_menu-icon__2en_9\",\"spawnMenuIcon\":\"tip__spawn_menu-icon__2en_9\",\"object_rotate_button-icon\":\"tip__object_rotate_button-icon__2tgeV\",\"objectRotateButtonIcon\":\"tip__object_rotate_button-icon__2tgeV\",\"object_scale_button-icon\":\"tip__object_scale_button-icon__pxKrw\",\"objectScaleButtonIcon\":\"tip__object_scale_button-icon__pxKrw\",\"object_recenter_button-icon\":\"tip__object_recenter_button-icon__38tNR\",\"objectRecenterButtonIcon\":\"tip__object_recenter_button-icon__38tNR\",\"tour-tip-root\":\"tip__tour-tip-root__1PxCu\",\"tourTipRoot\":\"tip__tour-tip-root__1PxCu\"};","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer, args = {}) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\n    return promise;\n  };\n}\n","import { EventTarget } from \"event-target-shim\";\nimport configs from \"../utils/configs\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated, hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nconst desiredSources = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"avatars\", \"gifs\", \"images\"];\nconst availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\nconst availableSources = desiredSources.filter(source => {\n  const apiSource = URL_SOURCE_TO_TO_API_SOURCE[source];\n  return !availableIntegrations.hasOwnProperty(apiSource) || availableIntegrations[apiSource];\n});\nexport const SOURCES = availableSources;\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\", \"similar_to\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav, keepSelectAction) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    if (!keepSelectAction) {\n      searchParams.delete(\"selectAction\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = (source, selectAction) => {\n    this._sourceNavigate(source, true, false, selectAction);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams, selectAction) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (selectAction) {\n      searchParams.set(\"selectAction\", selectAction);\n    }\n\n    if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\n */\nclass StateLink extends React.Component {\n  static propTypes = {\n    history: PropTypes.object,\n    innerRef: PropTypes.object,\n    replace: PropTypes.bool,\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    stateDetail: PropTypes.object,\n    target: PropTypes.string,\n    title: PropTypes.string,\n    onClick: PropTypes.func,\n    children: PropTypes.node,\n    className: PropTypes.string\n  };\n\n  async handleClick(event, history) {\n    if (this.props.onClick) this.props.onClick(event);\n\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault();\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\n    }\n  }\n\n  render() {\n    const { innerRef, target, className, title, children } = this.props;\n    return (\n      <a\n        target={target}\n        className={className}\n        title={title}\n        onClick={event => this.handleClick(event, this.props.history)}\n        href=\"#\"\n        ref={innerRef}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nexport default StateLink;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nfunction detectTouchScreen() {\n  let hasTouchScreen = false;\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0;\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\n  } else {\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches;\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true; // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      const UA = navigator.userAgent;\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n    }\n  }\n  return hasTouchScreen;\n}\n\nlet hackyMobileSafariTestValue = null;\n\n// HACK for https://github.com/mozilla/hubs/issues/1813\n// Touchscreen controls depend on iPad and iPhone detection,\n// which recently regressed. For UA matching \"Macintosh\", enable\n// touchscreen controls if there exists a touchscreen.\n// We cannot always enable touchscreen controls when a touchscreen\n// is present until we fix conflicts between simultaneous mouse\n// and touchscreen interactions.\nexport function hackyMobileSafariTest() {\n  if (hackyMobileSafariTestValue === null) {\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\n  }\n\n  return hackyMobileSafariTestValue;\n  // e.g. Match\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\n  // but not\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string,\n    closable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          {(configs.feature(\"show_terms\") || configs.feature(\"show_privacy\")) && (\n            <p className={styles.terms}>\n              By proceeding, you agree to the{\" \"}\n              <IfFeature name=\"show_terms\">\n                <a\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                >\n                  terms of use\n                </a>{\" \"}\n              </IfFeature>\n              {configs.feature(\"show_terms\") && configs.feature(\"show_privacy\") && \"and \"}\n              <IfFeature name=\"show_privacy\">\n                <a\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                >\n                  privacy notice\n                </a>\n              </IfFeature>.\n            </p>\n          )}\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.geometryRadius = 0;\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        if (batchManagerSystem.batchingEnabled) {\n          batchManagerSystem.meshToEl.delete(object);\n        }\n      });\n    });\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n    const toggling = this.el.sceneEl.systems[\"hubs-systems\"].cursorTogglingSystem;\n\n    let interactorOne, interactorTwo;\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    if (interaction.state.leftHand.hovered === this.el && !interaction.state.leftHand.held) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (\n      interaction.state.leftRemote.hovered === this.el &&\n      !interaction.state.leftRemote.held &&\n      !toggling.leftToggledOff\n    ) {\n      interactorOne = interaction.options.leftRemote.entity.object3D;\n    }\n    if (\n      interaction.state.rightRemote.hovered === this.el &&\n      !interaction.state.rightRemote.held &&\n      !toggling.rightToggledOff\n    ) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el && !interaction.state.rightHand.held) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const ms1 = this.el.object3D.matrixWorld.elements[4];\n      const ms2 = this.el.object3D.matrixWorld.elements[5];\n      const ms3 = this.el.object3D.matrixWorld.elements[6];\n      const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n      const scaledRadius = worldScale * this.geometryRadius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","import { isLocalHubsSceneUrl, proxiedUrlFor } from \"../utils/media-url-utils\";\n\nexport async function isValidGLB(url) {\n  return fetch(url).then(async r => {\n    const reader = r.body.getReader();\n    let header = \"\";\n    function readChunk({ done, value }) {\n      header += String.fromCharCode.apply(null, value.slice(0, 4));\n      if (!done && header.length < 4) {\n        return reader.read().then(readChunk);\n      } else {\n        reader.cancel();\n      }\n    }\n    await reader.read().then(readChunk);\n    return header.startsWith(\"glTF\");\n  });\n}\n\nexport async function isValidSceneUrl(url) {\n  if (url.trim() === \"\") return false;\n  if (!url.startsWith(\"http\")) return false;\n  if (await isLocalHubsSceneUrl(url)) {\n    return true;\n  } else {\n    return isValidGLB(proxiedUrlFor(url));\n  }\n}\n\n// To assist with content control, we avoid displaying scene links to users who are not the scene\n// creator, unless the scene is remixable or promotable.\nexport function allowDisplayOfSceneLink(scene, store) {\n  return (\n    (store.credentialsAccountId && scene.account_id === store.credentialsAccountId) ||\n    scene.allow_promotion ||\n    scene.allow_remixing\n  );\n}\n","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load-button\":\"preload-overlay__load-button__ba1d4\",\"loadButton\":\"preload-overlay__load-button__ba1d4\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n  float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/wasm/basis_transcoder-47fe610404bbcccd872b6ced44635d10.wasm\";","module.exports = function() {\n  return require(\"!!/mnt/c/Users/fchoi/Documents/git/hubs/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\\\"undefined\\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\\\"object\\\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&e&&\\\"string\\\"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\\\"a\\\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\\\"/\\\",r(r.s=1)}([function(t,e){var r,n,o=t.exports={};function i(){throw new Error(\\\"setTimeout has not been defined\\\")}function a(){throw new Error(\\\"clearTimeout has not been defined\\\")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r=\\\"function\\\"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n=\\\"function\\\"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=u(p);l=!0;for(var e=c.length;e;){for(s=c,c=[];++f<e;)s&&s[f].run();f=-1,e=c.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new h(t,e)),1!==c.length||l||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title=\\\"browser\\\",o.browser=!0,o.env={},o.argv=[],o.version=\\\"\\\",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error(\\\"process.binding is not supported\\\")},o.cwd=function(){return\\\"/\\\"},o.chdir=function(t){throw new Error(\\\"process.chdir is not supported\\\")},o.umask=function(){return 0}},function(t,e,r){(function(e,n){var o,i,a,u,s=(o=\\\"undefined\\\"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var i,a=void 0!==(t=t||{})?t:{},u={};for(i in a)a.hasOwnProperty(i)&&(u[i]=a[i]);var s,c,l=[],f=!1,p=!1;f=\\\"object\\\"==typeof window,p=\\\"function\\\"==typeof importScripts,s=\\\"object\\\"==typeof e&&\\\"object\\\"==typeof e.versions&&\\\"string\\\"==typeof e.versions.node&&!f&&!p,c=!f&&!s&&!p;var d,h,y,v,m=\\\"\\\";s?(m=n+\\\"/\\\",d=function(t,e){var n;return y||(y=r(2)),v||(v=r(3)),t=v.normalize(t),n=y.readFileSync(t),e?n:n.toString()},h=function(t){var e=d(t,!0);return e.buffer||(e=new Uint8Array(e)),P(e.buffer),e},e.argv.length>1&&e.argv[1].replace(/\\\\\\\\/g,\\\"/\\\"),l=e.argv.slice(2),e.on(\\\"uncaughtException\\\",function(t){if(!(t instanceof function(t){this.name=\\\"ExitStatus\\\",this.message=\\\"Program terminated with exit(\\\"+t+\\\")\\\",this.status=t}))throw t}),e.on(\\\"unhandledRejection\\\",xe),a.inspect=function(){return\\\"[Emscripten Module object]\\\"}):c?(\\\"undefined\\\"!=typeof read&&(d=function(t){return read(t)}),h=function(t){var e;return\\\"function\\\"==typeof readbuffer?new Uint8Array(readbuffer(t)):(P(\\\"object\\\"==typeof(e=read(t,\\\"binary\\\"))),e)},\\\"undefined\\\"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),\\\"undefined\\\"!=typeof print&&(\\\"undefined\\\"==typeof console&&(console={}),console.log=print,console.warn=console.error=\\\"undefined\\\"!=typeof printErr?printErr:print)):(f||p)&&(p?m=self.location.href:document.currentScript&&(m=document.currentScript.src),o&&(m=o),m=0!==m.indexOf(\\\"blob:\\\")?m.substr(0,m.lastIndexOf(\\\"/\\\")+1):\\\"\\\",d=function(t){var e=new XMLHttpRequest;return e.open(\\\"GET\\\",t,!1),e.send(null),e.responseText},p&&(h=function(t){var e=new XMLHttpRequest;return e.open(\\\"GET\\\",t,!1),e.responseType=\\\"arraybuffer\\\",e.send(null),new Uint8Array(e.response)}));var g=a.print||console.log.bind(console),b=a.printErr||console.warn.bind(console);for(i in u)u.hasOwnProperty(i)&&(a[i]=u[i]);u=null,a.arguments&&(l=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var w,T,C={\\\"f64-rem\\\":function(t,e){return t%e},debugger:function(){}};new Array(0),a.wasmBinary&&(w=a.wasmBinary),a.noExitRuntime&&a.noExitRuntime,\\\"object\\\"!=typeof WebAssembly&&b(\\\"no native wasm support detected\\\");var $=!1;function P(t,e){t||xe(\\\"Assertion failed: \\\"+e)}var _,A,E,F,S,O,j,W,k,x=\\\"undefined\\\"!=typeof TextDecoder?new TextDecoder(\\\"utf8\\\"):void 0;function I(t,e,r){for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.subarray&&x)return x.decode(t.subarray(e,o));for(var i=\\\"\\\";e<o;){var a=t[e++];if(128&a){var u=63&t[e++];if(192!=(224&a)){var s=63&t[e++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|u)}else i+=String.fromCharCode(a)}return i}function R(t,e){return t?I(E,t,e):\\\"\\\"}function D(t,e){return t%e>0&&(t+=e-t%e),t}function U(t){_=t,a.HEAP8=A=new Int8Array(t),a.HEAP16=F=new Int16Array(t),a.HEAP32=O=new Int32Array(t),a.HEAPU8=E=new Uint8Array(t),a.HEAPU16=S=new Uint16Array(t),a.HEAPU32=j=new Uint32Array(t),a.HEAPF32=W=new Float32Array(t),a.HEAPF64=k=new Float64Array(t)}\\\"undefined\\\"!=typeof TextDecoder&&new TextDecoder(\\\"utf-16le\\\");var B=a.TOTAL_MEMORY||16777216;function M(t){for(;t.length>0;){var e=t.shift();if(\\\"function\\\"!=typeof e){var r=e.func;\\\"number\\\"==typeof r?void 0===e.arg?a.dynCall_v(r):a.dynCall_vi(r,e.arg):r(void 0===e.arg?null:e.arg)}else e()}}(T=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:B/65536}))&&(_=T.buffer),B=_.byteLength,U(_),O[59864]=5482368;var L=[],N=[],H=[],z=[],V=0,q=null,G=null;a.preloadedImages={},a.preloadedAudios={};var Z=\\\"data:application/octet-stream;base64,\\\";function X(t){return String.prototype.startsWith?t.startsWith(Z):0===t.indexOf(Z)}var J,Y=\\\"basis_transcoder.wasm\\\";function K(){try{if(w)return new Uint8Array(w);if(h)return h(Y);throw\\\"both async and sync fetching of the wasm failed\\\"}catch(t){xe(t)}}function Q(t){var e={env:t,wasi_unstable:t,global:{NaN:NaN,Infinity:1/0},\\\"global.Math\\\":Math,asm2wasm:C};function r(t,e){var r=t.exports;a.asm=r,function(t){if(V--,a.monitorRunDependencies&&a.monitorRunDependencies(V),0==V&&(null!==q&&(clearInterval(q),q=null),G)){var e=G;G=null,e()}}()}function n(t){r(t.instance)}function o(t){return(w||!f&&!p||\\\"function\\\"!=typeof fetch?new Promise(function(t,e){t(K())}):fetch(Y,{credentials:\\\"same-origin\\\"}).then(function(t){if(!t.ok)throw\\\"failed to load wasm binary file at '\\\"+Y+\\\"'\\\";return t.arrayBuffer()}).catch(function(){return K()})).then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(t){b(\\\"failed to asynchronously prepare wasm: \\\"+t),xe(t)})}if(V++,a.monitorRunDependencies&&a.monitorRunDependencies(V),a.instantiateWasm)try{return a.instantiateWasm(e,r)}catch(t){return b(\\\"Module.instantiateWasm callback failed with error: \\\"+t),!1}return function(){if(w||\\\"function\\\"!=typeof WebAssembly.instantiateStreaming||X(Y)||\\\"function\\\"!=typeof fetch)return o(n);fetch(Y,{credentials:\\\"same-origin\\\"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(n,function(t){b(\\\"wasm streaming compile failed: \\\"+t),b(\\\"falling back to ArrayBuffer instantiation\\\"),o(n)})})}(),{}}X(Y)||(J=Y,Y=a.locateFile?a.locateFile(J,m):m+J),a.asm=function(t,e,r){return e.memory=T,e.table=new WebAssembly.Table({initial:342,maximum:342,element:\\\"anyfunc\\\"}),e.__memory_base=1024,e.__table_base=0,Q(e)},N.push({func:function(){We()}});var tt={},et={buffers:[null,[],[]],printChar:function(t,e){var r=et.buffers[t];0===e||10===e?((1===t?g:b)(I(r,0)),r.length=0):r.push(e)},varargs:0,get:function(t){return et.varargs+=4,O[et.varargs-4>>2]},getStr:function(){return R(et.get())},get64:function(){var t=et.get();return et.get(),t},getZero:function(){et.get()}};function rt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(\\\"Unknown type size: \\\"+t)}}var nt=void 0;function ot(t){for(var e=\\\"\\\",r=t;E[r];)e+=nt[E[r++]];return e}var it={},at={},ut={},st=48,ct=57;function lt(t){if(void 0===t)return\\\"_unknown\\\";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,\\\"$\\\")).charCodeAt(0);return e>=st&&e<=ct?\\\"_\\\"+t:t}function ft(t,e){return t=lt(t),new Function(\\\"body\\\",\\\"return function \\\"+t+'() {\\\\n    \\\"use strict\\\";    return body.apply(this, arguments);\\\\n};\\\\n')(e)}function pt(t,e){var r=ft(e,function(t){this.name=e,this.message=t;var r=new Error(t).stack;void 0!==r&&(this.stack=this.toString()+\\\"\\\\n\\\"+r.replace(/^Error(:[^\\\\n]*)?\\\\n/,\\\"\\\"))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+\\\": \\\"+this.message},r}var dt=void 0;function ht(t){throw new dt(t)}var yt=void 0;function vt(t){throw new yt(t)}function mt(t,e,r){function n(e){var n=r(e);n.length!==t.length&&vt(\\\"Mismatched type converter count\\\");for(var o=0;o<t.length;++o)gt(t[o],n[o])}t.forEach(function(t){ut[t]=e});var o=new Array(e.length),i=[],a=0;e.forEach(function(t,e){at.hasOwnProperty(t)?o[e]=at[t]:(i.push(t),it.hasOwnProperty(t)||(it[t]=[]),it[t].push(function(){o[e]=at[t],++a===i.length&&n(o)}))}),0===i.length&&n(o)}function gt(t,e,r){if(r=r||{},!(\\\"argPackAdvance\\\"in e))throw new TypeError(\\\"registerType registeredInstance requires argPackAdvance\\\");var n=e.name;if(t||ht('type \\\"'+n+'\\\" must have a positive integer typeid pointer'),at.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;ht(\\\"Cannot register type '\\\"+n+\\\"' twice\\\")}if(at[t]=e,delete ut[t],it.hasOwnProperty(t)){var o=it[t];delete it[t],o.forEach(function(t){t()})}}function bt(t){if(!(this instanceof Wt))return!1;if(!(t instanceof Wt))return!1;for(var e=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=t.$$.ptrType.registeredClass,o=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return e===n&&r===o}function wt(t){ht(t.$$.ptrType.registeredClass.name+\\\" instance already deleted\\\")}var Tt=!1;function Ct(t){}function $t(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function Pt(t){return\\\"undefined\\\"==typeof FinalizationGroup?(Pt=function(t){return t},t):(Tt=new FinalizationGroup(function(t){for(var e=t.next();!e.done;e=t.next()){var r=e.value;r.ptr?$t(r):console.warn(\\\"object already deleted: \\\"+r.ptr)}}),Ct=function(t){Tt.unregister(t.$$)},(Pt=function(t){return Tt.register(t,t.$$,t.$$),t})(t))}function _t(){if(this.$$.ptr||wt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=Pt(Object.create(Object.getPrototypeOf(this),{$$:{value:(t=this.$$,{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType})}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function At(){this.$$.ptr||wt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht(\\\"Object already scheduled for deletion\\\"),Ct(this),$t(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Et(){return!this.$$.ptr}var Ft=void 0,St=[];function Ot(){for(;St.length;){var t=St.pop();t.$$.deleteScheduled=!1,t.delete()}}function jt(){return this.$$.ptr||wt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ht(\\\"Object already scheduled for deletion\\\"),St.push(this),1===St.length&&Ft&&Ft(Ot),this.$$.deleteScheduled=!0,this}function Wt(){}var kt={};function xt(t,e,r){if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||ht(\\\"Function '\\\"+r+\\\"' called with an invalid number of arguments (\\\"+arguments.length+\\\") - expects one of (\\\"+t[e].overloadTable+\\\")!\\\"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}}function It(t,e,r){a.hasOwnProperty(t)?((void 0===r||void 0!==a[t].overloadTable&&void 0!==a[t].overloadTable[r])&&ht(\\\"Cannot register public name '\\\"+t+\\\"' twice\\\"),xt(a,t,t),a.hasOwnProperty(r)&&ht(\\\"Cannot register multiple overloads of a function with the same number of arguments (\\\"+r+\\\")!\\\"),a[t].overloadTable[r]=e):(a[t]=e,void 0!==r&&(a[t].numArguments=r))}function Rt(t,e,r,n,o,i,a,u){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=u,this.pureVirtualFunctions=[]}function Dt(t,e,r){for(;e!==r;)e.upcast||ht(\\\"Expected null or instance of \\\"+r.name+\\\", got an instance of \\\"+e.name),t=e.upcast(t),e=e.baseClass;return t}function Ut(t,e){if(null===e)return this.isReference&&ht(\\\"null is not a valid \\\"+this.name),0;e.$$||ht('Cannot pass \\\"'+he(e)+'\\\" as a '+this.name),e.$$.ptr||ht(\\\"Cannot pass deleted object as a pointer of type \\\"+this.name);var r=e.$$.ptrType.registeredClass;return Dt(e.$$.ptr,r,this.registeredClass)}function Bt(t,e){var r;if(null===e)return this.isReference&&ht(\\\"null is not a valid \\\"+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;e.$$||ht('Cannot pass \\\"'+he(e)+'\\\" as a '+this.name),e.$$.ptr||ht(\\\"Cannot pass deleted object as a pointer of type \\\"+this.name),!this.isConst&&e.$$.ptrType.isConst&&ht(\\\"Cannot convert argument of type \\\"+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+\\\" to parameter type \\\"+this.name);var n=e.$$.ptrType.registeredClass;if(r=Dt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&ht(\\\"Passing raw pointer to smart pointer is illegal\\\"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:ht(\\\"Cannot convert argument of type \\\"+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+\\\" to parameter type \\\"+this.name);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var o=e.clone();r=this.rawShare(r,de(function(){o.delete()})),null!==t&&t.push(this.rawDestructor,r)}break;default:ht(\\\"Unsupporting sharing policy\\\")}return r}function Mt(t,e){if(null===e)return this.isReference&&ht(\\\"null is not a valid \\\"+this.name),0;e.$$||ht('Cannot pass \\\"'+he(e)+'\\\" as a '+this.name),e.$$.ptr||ht(\\\"Cannot pass deleted object as a pointer of type \\\"+this.name),e.$$.ptrType.isConst&&ht(\\\"Cannot convert argument of type \\\"+e.$$.ptrType.name+\\\" to parameter type \\\"+this.name);var r=e.$$.ptrType.registeredClass;return Dt(e.$$.ptr,r,this.registeredClass)}function Lt(t){return this.fromWireType(j[t>>2])}function Nt(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Ht(t){this.rawDestructor&&this.rawDestructor(t)}function zt(t){null!==t&&t.delete()}function Vt(){return Object.keys(Zt).length}function qt(){var t=[];for(var e in Zt)Zt.hasOwnProperty(e)&&t.push(Zt[e]);return t}function Gt(t){Ft=t,St.length&&Ft&&Ft(Ot)}var Zt={};function Xt(t,e){return e=function(t,e){for(void 0===e&&ht(\\\"ptr should not be undefined\\\");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),Zt[e]}function Jt(t,e){return e.ptrType&&e.ptr||vt(\\\"makeClassHandle requires ptr and ptrType\\\"),!!e.smartPtrType!=!!e.smartPtr&&vt(\\\"Both smartPtrType and smartPtr must be specified\\\"),e.count={value:1},Pt(Object.create(t,{$$:{value:e}}))}function Yt(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=Xt(this.registeredClass,e);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function o(){return this.isSmartPointer?Jt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Jt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var i,a=this.registeredClass.getActualType(e),u=kt[a];if(!u)return o.call(this);i=this.isConst?u.constPointerType:u.pointerType;var s=function t(e,r,n){if(r===n)return e;if(void 0===n.baseClass)return null;var o=t(e,r,n.baseClass);return null===o?null:n.downcast(o)}(e,this.registeredClass,i.registeredClass);return null===s?o.call(this):this.isSmartPointer?Jt(i.registeredClass.instancePrototype,{ptrType:i,ptr:s,smartPtrType:this,smartPtr:t}):Jt(i.registeredClass.instancePrototype,{ptrType:i,ptr:s})}function Kt(t,e,r,n,o,i,a,u,s,c,l){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=u,this.rawConstructor=s,this.rawShare=c,this.rawDestructor=l,o||void 0!==e.baseClass?this.toWireType=Bt:n?(this.toWireType=Ut,this.destructorFunction=null):(this.toWireType=Mt,this.destructorFunction=null)}function Qt(t,e,r){a.hasOwnProperty(t)||vt(\\\"Replacing nonexistant public symbol\\\"),void 0!==a[t].overloadTable&&void 0!==r?a[t].overloadTable[r]=e:(a[t]=e,a[t].argCount=r)}function te(t,e){var r;if(t=ot(t),void 0!==a[\\\"FUNCTION_TABLE_\\\"+t])r=a[\\\"FUNCTION_TABLE_\\\"+t][e];else if(\\\"undefined\\\"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[e];else{var n=a[\\\"dynCall_\\\"+t];void 0===n&&void 0===(n=a[\\\"dynCall_\\\"+t.replace(/f/g,\\\"d\\\")])&&ht(\\\"No dynCall invoker for signature: \\\"+t),r=function(r){for(var n=[],o=1;o<t.length;++o)n.push(\\\"a\\\"+o);var i=\\\"return function dynCall_\\\"+t+\\\"_\\\"+e+\\\"(\\\"+n.join(\\\", \\\")+\\\") {\\\\n\\\";return i+=\\\"    return dynCall(rawFunction\\\"+(n.length?\\\", \\\":\\\"\\\")+n.join(\\\", \\\")+\\\");\\\\n\\\",i+=\\\"};\\\\n\\\",new Function(\\\"dynCall\\\",\\\"rawFunction\\\",i)(r,e)}(n)}return\\\"function\\\"!=typeof r&&ht(\\\"unknown function pointer with signature \\\"+t+\\\": \\\"+e),r}var ee=void 0;function re(t){var e=Se(t),r=ot(e);return Oe(e),r}function ne(t,e){var r=[],n={};throw e.forEach(function t(e){n[e]||at[e]||(ut[e]?ut[e].forEach(t):(r.push(e),n[e]=!0))}),new ee(t+\\\": \\\"+r.map(re).join([\\\", \\\"]))}function oe(t,e){for(var r=[],n=0;n<t;n++)r.push(O[(e>>2)+n]);return r}function ie(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ae(t,e){if(!(t instanceof Function))throw new TypeError(\\\"new_ called with constructor type \\\"+typeof t+\\\" which is not a function\\\");var r=ft(t.name||\\\"unknownFunctionName\\\",function(){});r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return o instanceof Object?o:n}function ue(t,e,r,n,o){var i=e.length;i<2&&ht(\\\"argTypes array size mismatch! Must at least get return value and 'this' types!\\\");for(var a=null!==e[1]&&null!==r,u=!1,s=1;s<e.length;++s)if(null!==e[s]&&void 0===e[s].destructorFunction){u=!0;break}var c=\\\"void\\\"!==e[0].name,l=\\\"\\\",f=\\\"\\\";for(s=0;s<i-2;++s)l+=(0!==s?\\\", \\\":\\\"\\\")+\\\"arg\\\"+s,f+=(0!==s?\\\", \\\":\\\"\\\")+\\\"arg\\\"+s+\\\"Wired\\\";var p=\\\"return function \\\"+lt(t)+\\\"(\\\"+l+\\\") {\\\\nif (arguments.length !== \\\"+(i-2)+\\\") {\\\\nthrowBindingError('function \\\"+t+\\\" called with ' + arguments.length + ' arguments, expected \\\"+(i-2)+\\\" args!');\\\\n}\\\\n\\\";u&&(p+=\\\"var destructors = [];\\\\n\\\");var d=u?\\\"destructors\\\":\\\"null\\\",h=[\\\"throwBindingError\\\",\\\"invoker\\\",\\\"fn\\\",\\\"runDestructors\\\",\\\"retType\\\",\\\"classParam\\\"],y=[ht,n,o,ie,e[0],e[1]];for(a&&(p+=\\\"var thisWired = classParam.toWireType(\\\"+d+\\\", this);\\\\n\\\"),s=0;s<i-2;++s)p+=\\\"var arg\\\"+s+\\\"Wired = argType\\\"+s+\\\".toWireType(\\\"+d+\\\", arg\\\"+s+\\\"); // \\\"+e[s+2].name+\\\"\\\\n\\\",h.push(\\\"argType\\\"+s),y.push(e[s+2]);if(a&&(f=\\\"thisWired\\\"+(f.length>0?\\\", \\\":\\\"\\\")+f),p+=(c?\\\"var rv = \\\":\\\"\\\")+\\\"invoker(fn\\\"+(f.length>0?\\\", \\\":\\\"\\\")+f+\\\");\\\\n\\\",u)p+=\\\"runDestructors(destructors);\\\\n\\\";else for(s=a?1:2;s<e.length;++s){var v=1===s?\\\"thisWired\\\":\\\"arg\\\"+(s-2)+\\\"Wired\\\";null!==e[s].destructorFunction&&(p+=v+\\\"_dtor(\\\"+v+\\\"); // \\\"+e[s].name+\\\"\\\\n\\\",h.push(v+\\\"_dtor\\\"),y.push(e[s].destructorFunction))}return c&&(p+=\\\"var ret = retType.fromWireType(rv);\\\\nreturn ret;\\\\n\\\"),p+=\\\"}\\\\n\\\",h.push(p),ae(Function,h).apply(null,y)}var se=[],ce=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function le(t){t>4&&0==--ce[t].refcount&&(ce[t]=void 0,se.push(t))}function fe(){for(var t=0,e=5;e<ce.length;++e)void 0!==ce[e]&&++t;return t}function pe(){for(var t=5;t<ce.length;++t)if(void 0!==ce[t])return ce[t];return null}function de(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=se.length?se.pop():ce.length;return ce[e]={refcount:1,value:t},e}}function he(t){if(null===t)return\\\"null\\\";var e=typeof t;return\\\"object\\\"===e||\\\"array\\\"===e||\\\"function\\\"===e?t.toString():\\\"\\\"+t}function ye(t,e){switch(e){case 2:return function(t){return this.fromWireType(W[t>>2])};case 3:return function(t){return this.fromWireType(k[t>>3])};default:throw new TypeError(\\\"Unknown float type: \\\"+t)}}function ve(t,e,r){switch(e){case 0:return r?function(t){return A[t]}:function(t){return E[t]};case 1:return r?function(t){return F[t>>1]}:function(t){return S[t>>1]};case 2:return r?function(t){return O[t>>2]}:function(t){return j[t>>2]};default:throw new TypeError(\\\"Unknown integer type: \\\"+t)}}function me(t){return t||ht(\\\"Cannot use deleted val. handle = \\\"+t),ce[t].value}function ge(t,e){var r=at[t];return void 0===r&&ht(e+\\\" has unknown type \\\"+re(t)),r}var be={};function we(t){var e=be[t];return void 0===e?ot(t):e}var Te=[];function Ce(){return\\\"object\\\"==typeof globalThis?globalThis:Function(\\\"return this\\\")()}var $e={};function Pe(){return A.length}!function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);nt=t}(),dt=a.BindingError=pt(Error,\\\"BindingError\\\"),yt=a.InternalError=pt(Error,\\\"InternalError\\\"),Wt.prototype.isAliasOf=bt,Wt.prototype.clone=_t,Wt.prototype.delete=At,Wt.prototype.isDeleted=Et,Wt.prototype.deleteLater=jt,Kt.prototype.getPointee=Nt,Kt.prototype.destructor=Ht,Kt.prototype.argPackAdvance=8,Kt.prototype.readValueFromPointer=Lt,Kt.prototype.deleteObject=zt,Kt.prototype.fromWireType=Yt,a.getInheritedInstanceCount=Vt,a.getLiveInheritedInstances=qt,a.flushPendingDeletes=Ot,a.setDelayFunction=Gt,ee=a.UnboundTypeError=pt(Error,\\\"UnboundTypeError\\\"),a.count_emval_handles=fe,a.get_first_emval=pe;var _e={c:xe,A:function(t){},i:function(t){return je(t)},I:function(){throw $=!0,\\\"Pure virtual function called!\\\"},h:function(t,e,r){throw tt[t]={ptr:t,adjusted:[t],type:e,destructor:r,refcount:0,caught:!1,rethrown:!1},\\\"uncaught_exception\\\"in Fe?Fe.uncaught_exceptions++:Fe.uncaught_exceptions=1,t},z:function(){return Fe.uncaught_exceptions},m:function(t){return a.___errno_location&&(O[a.___errno_location()>>2]=t),t},y:function(t,e){et.varargs=e;try{return et.getStreamFromFD(),et.get(),et.get(),et.get(),et.get(),0}catch(t){return\\\"undefined\\\"!=typeof FS&&t instanceof FS.ErrnoError||xe(t),-t.errno}},x:function(t,e){et.varargs=e;try{return et.getStreamFromFD(),0}catch(t){return\\\"undefined\\\"!=typeof FS&&t instanceof FS.ErrnoError||xe(t),-t.errno}},w:function(){return function(t,e,r,n){try{for(var o=0,i=0;i<r;i++){for(var a=O[e+8*i>>2],u=O[e+(8*i+4)>>2],s=0;s<u;s++)et.printChar(t,E[a+s]);o+=u}return O[n>>2]=o,0}catch(t){return\\\"undefined\\\"!=typeof FS&&t instanceof FS.ErrnoError||xe(t),-t.errno}}.apply(null,arguments)},v:function(t,e,r,n,o){var i=rt(r);gt(t,{name:e=ot(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:o},argPackAdvance:8,readValueFromPointer:function(t){var n;if(1===r)n=A;else if(2===r)n=F;else{if(4!==r)throw new TypeError(\\\"Unknown boolean type size: \\\"+e);n=O}return this.fromWireType(n[t>>i])},destructorFunction:null})},N:function(t,e,r,n,o,i,a,u,s,c,l,f,p){l=ot(l),i=te(o,i),u&&(u=te(a,u)),c&&(c=te(s,c)),p=te(f,p);var d=lt(l);It(d,function(){ne(\\\"Cannot construct \\\"+l+\\\" due to unbound types\\\",[n])}),mt([t,e,r],n?[n]:[],function(e){var r,o;e=e[0],o=n?(r=e.registeredClass).instancePrototype:Wt.prototype;var a=ft(d,function(){if(Object.getPrototypeOf(this)!==s)throw new dt(\\\"Use 'new' to construct \\\"+l);if(void 0===f.constructor_body)throw new dt(l+\\\" has no accessible constructor\\\");var t=f.constructor_body[arguments.length];if(void 0===t)throw new dt(\\\"Tried to invoke ctor of \\\"+l+\\\" with invalid number of parameters (\\\"+arguments.length+\\\") - expected (\\\"+Object.keys(f.constructor_body).toString()+\\\") parameters instead!\\\");return t.apply(this,arguments)}),s=Object.create(o,{constructor:{value:a}});a.prototype=s;var f=new Rt(l,a,s,p,r,i,u,c),h=new Kt(l,f,!0,!1,!1),y=new Kt(l+\\\"*\\\",f,!1,!1,!1),v=new Kt(l+\\\" const*\\\",f,!1,!0,!1);return kt[t]={pointerType:y,constPointerType:v},Qt(d,a),[h,y,v]})},M:function(t,e,r,n,o,i){var a=oe(e,r);o=te(n,o),mt([],[t],function(t){var r=\\\"constructor \\\"+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new dt(\\\"Cannot register multiple constructors with identical number of parameters (\\\"+(e-1)+\\\") for class '\\\"+t.name+\\\"'! Overload resolution is currently only performed using the parameter count, not actual type info!\\\");return t.registeredClass.constructor_body[e-1]=function(){ne(\\\"Cannot construct \\\"+t.name+\\\" due to unbound types\\\",a)},mt([],a,function(n){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&ht(r+\\\" called with \\\"+arguments.length+\\\" arguments, expected \\\"+(e-1));var t=[],a=new Array(e);a[0]=i;for(var u=1;u<e;++u)a[u]=n[u].toWireType(t,arguments[u-1]);var s=o.apply(null,a);return ie(t),n[0].fromWireType(s)},[]}),[]})},g:function(t,e,r,n,o,i,a,u){var s=oe(r,n);e=ot(e),i=te(o,i),mt([],[t],function(t){var n=(t=t[0]).name+\\\".\\\"+e;function o(){ne(\\\"Cannot call \\\"+n+\\\" due to unbound types\\\",s)}u&&t.registeredClass.pureVirtualFunctions.push(e);var c=t.registeredClass.instancePrototype,l=c[e];return void 0===l||void 0===l.overloadTable&&l.className!==t.name&&l.argCount===r-2?(o.argCount=r-2,o.className=t.name,c[e]=o):(xt(c,e,n),c[e].overloadTable[r-2]=o),mt([],s,function(o){var u=ue(n,o,t,i,a);return void 0===c[e].overloadTable?(u.argCount=r-2,c[e]=u):c[e].overloadTable[r-2]=u,[]}),[]})},L:function(t,e){gt(t,{name:e=ot(e),fromWireType:function(t){var e=ce[t].value;return le(t),e},toWireType:function(t,e){return de(e)},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:null})},u:function(t,e,r){var n=rt(r);gt(t,{name:e=ot(e),fromWireType:function(t){return t},toWireType:function(t,e){if(\\\"number\\\"!=typeof e&&\\\"boolean\\\"!=typeof e)throw new TypeError('Cannot convert \\\"'+he(e)+'\\\" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:ye(e,n),destructorFunction:null})},K:function(t,e,r,n,o,i){var a=oe(e,r);t=ot(t),o=te(n,o),It(t,function(){ne(\\\"Cannot call \\\"+t+\\\" due to unbound types\\\",a)},e-1),mt([],a,function(r){var n=[r[0],null].concat(r.slice(1));return Qt(t,ue(t,n,null,o,i),e-1),[]})},f:function(t,e,r,n,o){e=ot(e),-1===o&&(o=4294967295);var i=rt(r),a=function(t){return t};if(0===n){var u=32-8*r;a=function(t){return t<<u>>>u}}var s=-1!=e.indexOf(\\\"unsigned\\\");gt(t,{name:e,fromWireType:a,toWireType:function(t,r){if(\\\"number\\\"!=typeof r&&\\\"boolean\\\"!=typeof r)throw new TypeError('Cannot convert \\\"'+he(r)+'\\\" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number \\\"'+he(r)+'\\\" from JS side to C/C++ side to an argument of type \\\"'+e+'\\\", which is outside the valid range ['+n+\\\", \\\"+o+\\\"]!\\\");return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:ve(e,i,0!==n),destructorFunction:null})},e:function(t,e,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(t){var e=j,r=e[t>>=2],o=e[t+1];return new n(e.buffer,o,r)}gt(t,{name:r=ot(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},t:function(t,e){var r=\\\"std::string\\\"===(e=ot(e));gt(t,{name:e,fromWireType:function(t){var e,n=j[t>>2];if(r){var o=E[t+4+n],i=0;0!=o&&(i=o,E[t+4+n]=0);for(var a=t+4,u=0;u<=n;++u){var s=t+4+u;if(0==E[s]){var c=R(a);void 0===e?e=c:(e+=String.fromCharCode(0),e+=c),a=s+1}}0!=i&&(E[t+4+n]=i)}else{var l=new Array(n);for(u=0;u<n;++u)l[u]=String.fromCharCode(E[t+4+u]);e=l.join(\\\"\\\")}return Oe(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n=\\\"string\\\"==typeof e;n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ht(\\\"Cannot pass non-string to std::string\\\");var o=(r&&n?function(){return function(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?++e:e+=n<=2047?2:n<=65535?3:4}return e}(e)}:function(){return e.length})(),i=je(4+o+1);if(j[i>>2]=o,r&&n)!function(t,e,r,n){if(!(n>0))return 0;for(var o=r+n-1,i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),a<=127){if(r>=o)break;e[r++]=a}else if(a<=2047){if(r+1>=o)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=o)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=o)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}e[r]=0}(e,E,i+4,o+1);else if(n)for(var a=0;a<o;++a){var u=e.charCodeAt(a);u>255&&(Oe(i),ht(\\\"String has UTF-16 code units that do not fit in 8 bits\\\")),E[i+4+a]=u}else for(a=0;a<o;++a)E[i+4+a]=e[a];return null!==t&&t.push(Oe,i),i},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:function(t){Oe(t)}})},J:function(t,e,r){var n,o;r=ot(r),2===e?(n=function(){return S},o=1):4===e&&(n=function(){return j},o=2),gt(t,{name:r,fromWireType:function(t){for(var e=n(),r=j[t>>2],i=new Array(r),a=t+4>>o,u=0;u<r;++u)i[u]=String.fromCharCode(e[a+u]);return Oe(t),i.join(\\\"\\\")},toWireType:function(t,r){var i=n(),a=r.length,u=je(4+a*e);j[u>>2]=a;for(var s=u+4>>o,c=0;c<a;++c)i[s+c]=r.charCodeAt(c);return null!==t&&t.push(Oe,u),u},argPackAdvance:8,readValueFromPointer:Lt,destructorFunction:function(t){Oe(t)}})},H:function(t,e){gt(t,{isVoid:!0,name:e=ot(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},s:function(t,e,r){t=me(t),e=ge(e,\\\"emval::as\\\");var n=[],o=de(n);return O[r>>2]=o,e.toWireType(n,t)},r:function(t,e,r,n){(t=Te[t])(e=me(e),r=we(r),null,n)},b:le,G:function(t){return 0===t?de(Ce()):(t=we(t),de(Ce()[t]))},q:function(t,e){for(var r=function(t,e,r){for(var n=new Array(t),o=0;o<t;++o)n[o]=ge(O[(e>>2)+o],\\\"parameter \\\"+o);return n}(t,e),n=r[0],o=n.name+\\\"_$\\\"+r.slice(1).map(function(t){return t.name}).join(\\\"_\\\")+\\\"$\\\",i=[\\\"retType\\\"],a=[n],u=\\\"\\\",s=0;s<t-1;++s)u+=(0!==s?\\\", \\\":\\\"\\\")+\\\"arg\\\"+s,i.push(\\\"argType\\\"+s),a.push(r[1+s]);var c=\\\"return function \\\"+lt(\\\"methodCaller_\\\"+o)+\\\"(handle, name, destructors, args) {\\\\n\\\",l=0;for(s=0;s<t-1;++s)c+=\\\"    var arg\\\"+s+\\\" = argType\\\"+s+\\\".readValueFromPointer(args\\\"+(l?\\\"+\\\"+l:\\\"\\\")+\\\");\\\\n\\\",l+=r[s+1].argPackAdvance;for(c+=\\\"    var rv = handle[name](\\\"+u+\\\");\\\\n\\\",s=0;s<t-1;++s)r[s+1].deleteObject&&(c+=\\\"    argType\\\"+s+\\\".deleteObject(arg\\\"+s+\\\");\\\\n\\\");n.isVoid||(c+=\\\"    return retType.toWireType(destructors, rv);\\\\n\\\"),c+=\\\"};\\\\n\\\",i.push(c);var f,p,d=ae(Function,i).apply(null,a);return f=d,p=Te.length,Te.push(f),p},p:function(t){return t=we(t),de(a[t])},k:function(t,e){return de((t=me(t))[e=me(e)])},l:function(t){t>4&&(ce[t].refcount+=1)},o:function(t,e,r,n){t=me(t);var o=$e[e];return o||(o=function(t){for(var e=\\\"\\\",r=0;r<t;++r)e+=(0!==r?\\\", \\\":\\\"\\\")+\\\"arg\\\"+r;var n=\\\"return function emval_allocator_\\\"+t+\\\"(constructor, argTypes, args) {\\\\n\\\";for(r=0;r<t;++r)n+=\\\"var argType\\\"+r+\\\" = requireRegisteredType(Module['HEAP32'][(argTypes >> 2) + \\\"+r+'], \\\"parameter '+r+'\\\");\\\\nvar arg'+r+\\\" = argType\\\"+r+\\\".readValueFromPointer(args);\\\\nargs += argType\\\"+r+\\\"['argPackAdvance'];\\\\n\\\";return n+=\\\"var obj = new constructor(\\\"+e+\\\");\\\\nreturn __emval_register(obj);\\\\n}\\\\n\\\",new Function(\\\"requireRegisteredType\\\",\\\"Module\\\",\\\"__emval_register\\\",n)(ge,a,de)}(e),$e[e]=o),o(t,r,n)},j:function(t){return de(we(t))},n:function(t){ie(ce[t].value),le(t)},d:function(){a.abort()},F:Pe,E:function(t,e,r){E.set(E.subarray(e,e+r),t)},D:function(t){var e=Pe();if(t>2147418112)return!1;for(var r=Math.max(e,16777216);r<t;)r=r<=536870912?D(2*r,65536):Math.min(D((3*r+2147483648)/4,65536),2147418112);return!!function(t){try{return T.grow(t-_.byteLength+65535>>16),U(T.buffer),1}catch(t){}}(r)},C:function(){xe(\\\"trap!\\\")},B:function(t){xe(\\\"OOM\\\")},a:239456},Ae=a.asm({},_e,_);a.asm=Ae;var Ee,Fe=a.__ZSt18uncaught_exceptionv=function(){return a.asm.O.apply(null,arguments)},Se=(a.___embind_register_native_and_builtin_types=function(){return a.asm.P.apply(null,arguments)},a.___errno_location=function(){return a.asm.Q.apply(null,arguments)},a.___getTypeName=function(){return a.asm.R.apply(null,arguments)}),Oe=a._free=function(){return a.asm.S.apply(null,arguments)},je=a._malloc=function(){return a.asm.T.apply(null,arguments)},We=a.globalCtors=function(){return a.asm.ha.apply(null,arguments)};function ke(t){function e(){Ee||(Ee=!0,$||(M(N),M(H),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for(\\\"function\\\"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)t=a.postRun.shift(),z.unshift(t);var t;M(z)}()))}t=t||l,V>0||(function(){if(a.preRun)for(\\\"function\\\"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)t=a.preRun.shift(),L.unshift(t);var t;M(L)}(),V>0||(a.setStatus?(a.setStatus(\\\"Running...\\\"),setTimeout(function(){setTimeout(function(){a.setStatus(\\\"\\\")},1),e()},1)):e()))}function xe(t){throw a.onAbort&&a.onAbort(t),g(t+=\\\"\\\"),b(t),$=!0,\\\"abort(\\\"+t+\\\"). Build with -s ASSERTIONS=1 for more info.\\\"}if(a.dynCall_ii=function(){return a.asm.U.apply(null,arguments)},a.dynCall_iidiiii=function(){return a.asm.V.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.W.apply(null,arguments)},a.dynCall_iiii=function(){return a.asm.X.apply(null,arguments)},a.dynCall_iiiii=function(){return a.asm.Y.apply(null,arguments)},a.dynCall_iiiiii=function(){return a.asm.Z.apply(null,arguments)},a.dynCall_iiiiiiii=function(){return a.asm._.apply(null,arguments)},a.dynCall_iiiiiiiii=function(){return a.asm.$.apply(null,arguments)},a.dynCall_jiji=function(){return a.asm.aa.apply(null,arguments)},a.dynCall_v=function(){return a.asm.ba.apply(null,arguments)},a.dynCall_vi=function(){return a.asm.ca.apply(null,arguments)},a.dynCall_vii=function(){return a.asm.da.apply(null,arguments)},a.dynCall_viiii=function(){return a.asm.ea.apply(null,arguments)},a.dynCall_viiiii=function(){return a.asm.fa.apply(null,arguments)},a.dynCall_viiiiii=function(){return a.asm.ga.apply(null,arguments)},a.asm=Ae,a.then=function(t){if(Ee)t(a);else{var e=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){e&&e(),t(a)}}return a},G=function t(){Ee||ke(),Ee||(G=t)},a.run=ke,a.abort=xe,a.preInit)for(\\\"function\\\"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ke(),t});t.exports=s,onmessage=function(t){var e,r,n=t.data;switch(n.type){case\\\"init\\\":i=n.config,e=n.transcoderBinary,a=new Promise(t=>{s(r={wasmBinary:e,onRuntimeInitialized:t})}).then(()=>{var{BasisFile:t,initializeBasis:e}=r;u=t,e()});break;case\\\"transcode\\\":a.then(()=>{try{for(var{width:t,height:e,hasAlpha:r,mipmaps:o,format:a}=function(t){var e=new u(new Uint8Array(t)),r=e.getImageWidth(0,0),n=e.getImageHeight(0,0),o=e.getNumLevels(0),a=e.getHasAlpha();function s(){e.close(),e.delete()}if(!a)switch(i.format){case 9:i.format=8}if(!r||!n||!o)throw s(),new Error(\\\"THREE.BasisTextureLoader:  Invalid .basis file\\\");if(!e.startTranscoding())throw s(),new Error(\\\"THREE.BasisTextureLoader: .startTranscoding failed\\\");for(var c=[],l=0;l<o;l++){var f=e.getImageWidth(0,l),p=e.getImageHeight(0,l),d=new Uint8Array(e.getImageTranscodedSizeInBytes(0,l,i.format)),h=e.transcodeImage(d,0,l,i.format,a,0);if(!h)throw s(),new Error(\\\"THREE.BasisTextureLoader: .transcodeImage failed.\\\");c.push({data:d,width:f,height:p})}return s(),{width:r,height:n,hasAlpha:a,mipmaps:c,format:i.format}}(n.buffer),s=[],c=0;c<o.length;++c)s.push(o[c].data.buffer);i.returnBuffer&&s.push(n.buffer),self.postMessage({type:\\\"transcode\\\",id:n.id,width:t,height:e,hasAlpha:r,mipmaps:o,format:a,buffer:i.returnBuffer?n.buffer:null},s)}catch(t){console.error(t),self.postMessage({type:\\\"error\\\",id:n.id,error:t.message})}})}}}).call(this,r(0),\\\"/\\\")},function(t,e){},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];\\\".\\\"===o?t.splice(n,1):\\\"..\\\"===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift(\\\"..\\\");return t}var n=/^(\\\\/?|)([\\\\s\\\\S]*?)((?:\\\\.{1,2}|[^\\\\/]+?|)(\\\\.[^.\\\\/]*|))(?:[\\\\/]*)$/,o=function(t){return n.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e=\\\"\\\",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a=o>=0?arguments[o]:t.cwd();if(\\\"string\\\"!=typeof a)throw new TypeError(\\\"Arguments to path.resolve must be strings\\\");a&&(e=a+\\\"/\\\"+e,n=\\\"/\\\"===a.charAt(0))}return(n?\\\"/\\\":\\\"\\\")+(e=r(i(e.split(\\\"/\\\"),function(t){return!!t}),!n).join(\\\"/\\\"))||\\\".\\\"},e.normalize=function(t){var n=e.isAbsolute(t),o=\\\"/\\\"===a(t,-1);return(t=r(i(t.split(\\\"/\\\"),function(t){return!!t}),!n).join(\\\"/\\\"))||n||(t=\\\".\\\"),t&&o&&(t+=\\\"/\\\"),(n?\\\"/\\\":\\\"\\\")+t},e.isAbsolute=function(t){return\\\"/\\\"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if(\\\"string\\\"!=typeof t)throw new TypeError(\\\"Arguments to path.join must be strings\\\");return t}).join(\\\"/\\\"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&\\\"\\\"===t[e];e++);for(var r=t.length-1;r>=0&&\\\"\\\"===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split(\\\"/\\\")),i=n(r.split(\\\"/\\\")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}var c=[];for(s=u;s<o.length;s++)c.push(\\\"..\\\");return(c=c.concat(i.slice(u))).join(\\\"/\\\")},e.sep=\\\"/\\\",e.delimiter=\\\":\\\",e.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):\\\".\\\"},e.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return o(t)[3]};var a=\\\"b\\\"===\\\"ab\\\".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(0))}]);\\n//# sourceMappingURL=basis_transcoder.worker-6ab8198cbc98ff5446d2.js.map\", \"/\" + \"assets/js/basis_transcoder.worker-6ab8198cbc98ff5446d2.js\");\n};","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode, findNode } from \"../utils/three-utils\";\nimport { ensureAvatarMaterial, MAT_NAME } from \"../utils/avatar-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context, forceWebVR: true });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string,\n    onGltfLoaded: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.loadId = 0;\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadCurrentAvatarGltfUrl();\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadCurrentAvatarGltfUrl();\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  async loadCurrentAvatarGltfUrl() {\n    const newLoadId = ++this.loadId;\n    const gltf = await this.loadPreviewAvatar(this.props.avatarGltfUrl);\n    // If we had started loading another avatar while we were loading this one, throw this one away\n    if (newLoadId !== this.loadId) return;\n    if (gltf && this.props.onGltfLoaded) this.props.onGltfLoaded(gltf);\n    this.setAvatar(gltf.scene);\n  }\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      const technique = window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\", technique, null, ensureAvatarMaterial);\n    } catch (e) {\n      console.error(\"Failed to load avatar preview\", e);\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // TODO Check for \"Bot_Skinned\" here is a hack for legacy avatars which only has a name one of the MOZ_alt_material nodes\n    this.previewMesh = findNode(\n      gltf.scene,\n      n => (n.isMesh && n.material && n.material.name === MAT_NAME) || n.name === \"Bot_Skinned\"\n    );\n\n    if (!this.previewMesh) {\n      console.error(\"Failed to find avatar preview mesh\");\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(gltf.scene);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => material[p] && delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {!this.props.avatarGltfUrl ||\n          (this.state.loading &&\n            !this.state.error && (\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            ))}\n        {this.props.avatarGltfUrl &&\n          (this.state.error && !this.state.loading) && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-button\":\"change-scene-dialog__action-button__1xtdK\",\"actionButton\":\"change-scene-dialog__action-button__1xtdK\",\"buttons\":\"change-scene-dialog__buttons__2QE34\",\"spoke-launch\":\"change-scene-dialog__spoke-launch__YObDn\",\"spokeLaunch\":\"change-scene-dialog__spoke-launch__YObDn\",\"input-border\":\"change-scene-dialog__input-border__30jd6\",\"inputBorder\":\"change-scene-dialog__input-border__30jd6\",\"left-side-of-input\":\"change-scene-dialog__left-side-of-input__14WKu\",\"leftSideOfInput\":\"change-scene-dialog__left-side-of-input__14WKu\",\"change-scene-button\":\"change-scene-dialog__change-scene-button__ckfZW\",\"changeSceneButton\":\"change-scene-dialog__change-scene-button__ckfZW\",\"spoke-create\":\"change-scene-dialog__spoke-create__2krL-\",\"spokeCreate\":\"change-scene-dialog__spoke-create__2krL-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"oauth-discord-button\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauthDiscordButton\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauth-twitter-button\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauthTwitterButton\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauth-button\":\"oauth-dialog__oauth-button__25RiO\",\"oauthButton\":\"oauth-dialog__oauth-button__25RiO\",\"oauth-type-name\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauthTypeName\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauth-icon\":\"oauth-dialog__oauth-icon__v1G6W\",\"oauthIcon\":\"oauth-dialog__oauth-icon__v1G6W\",\"privacy-notice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"privacyNotice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"oauth-buttons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"oauthButtons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"twitter-message\":\"oauth-dialog__twitter-message__cWCES\",\"twitterMessage\":\"oauth-dialog__twitter-message__cWCES\"};","/*\nHACK Fix a-frame's device detection in Chrome when WebXR or WebVR flags are enabled in\nchrome://flags. See https://github.com/mozilla/hubs/issues/892\n*/\nif (!/Oculus/.test(navigator.userAgent) && navigator.xr && !navigator.xr.requestDevice) {\n  navigator.xr.requestDevice = () => Promise.reject({ message: \"Hubs: requestDevice not supported.\" });\n}\n/*\nHACK Call getVRDisplays to force Oculus Browser to use WebVR, which in turn disables the WebXR API.\n*/\nif (/Oculus/.test(navigator.userAgent)) {\n  navigator.getVRDisplays();\n}\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { easeOutQuadratic } from \"../utils/easing\";\n\n// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst MIN_VOLUME_THRESHOLD = 0.08;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume;\n};\n\nconst tempScaleFromPosition = new THREE.Vector3();\nconst tempScaleToPosition = new THREE.Vector3();\n\nexport function getAudioFeedbackScale(fromObject, toObject, minScale, maxScale, volume) {\n  tempScaleToPosition.setFromMatrixPosition(toObject.matrixWorld);\n  tempScaleFromPosition.setFromMatrixPosition(fromObject.matrixWorld);\n  const distance = tempScaleFromPosition.distanceTo(tempScaleToPosition) / 10;\n  return Math.min(maxScale, minScale + (maxScale - minScale) * volume * 8 * distance);\n}\n\nfunction updateVolume(component) {\n  const newRawVolume = calculateVolume(component.analyser, component.levels);\n\n  const newPerceivedVolume = Math.log(THREE.Math.mapLinear(newRawVolume, 0, 1, 1, Math.E));\n\n  component.volume = newPerceivedVolume < MIN_VOLUME_THRESHOLD ? 0 : newPerceivedVolume;\n\n  const s = component.volume > component.prevVolume ? 0.35 : 0.3;\n  component.volume = s * component.volume + (1 - s) * component.prevVolume;\n  component.prevVolume = component.volume;\n}\n\n/**\n * Updates a `volume` property based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.loudest = 0;\n\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.fftSize);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    updateVolume(this);\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\nfunction connectAnalyser(mediaStream) {\n  const ctx = THREE.AudioContext.getContext();\n  const source = ctx.createMediaStreamSource(mediaStream);\n  const analyser = ctx.createAnalyser();\n  analyser.fftSize = 32;\n  const levels = new Uint8Array(analyser.fftSize);\n  source.connect(analyser);\n  return { analyser, levels };\n}\n\nfunction getAnalyser(el) {\n  // Is this the local player\n  const ikRootEl = findAncestorWithComponent(el, \"ik-root\");\n  if (ikRootEl && ikRootEl.id === \"avatar-rig\") {\n    return el.sceneEl.systems[\"local-audio-analyser\"];\n  } else {\n    const analyserEl = findAncestorWithComponent(el, \"networked-audio-analyser\");\n    if (!analyserEl) return null;\n    return analyserEl.components[\"networked-audio-analyser\"];\n  }\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n    this.loudest = 0;\n    this.prevVolume = 0;\n\n    this.el.addEventListener(\"local-media-stream-created\", e => {\n      const mediaStream = e.detail.mediaStream;\n      if (this.stream) {\n        console.warn(\"media stream changed\", this.stream, mediaStream);\n        // TODO: cleanup?\n      }\n      this.stream = mediaStream;\n      const { analyser, levels } = connectAnalyser(mediaStream);\n      this.analyser = analyser;\n      this.levels = levels;\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n    updateVolume(this);\n  }\n});\n\n/**\n * Sets an entity's scale base on the volume of an audio-analyser in a parent entity.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 1.5 }\n  },\n\n  async init() {\n    await waitForDOMContentLoaded();\n    this.camera = document.getElementById(\"viewing-camera\").object3D;\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n    if (!this.camera) return;\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minScale, maxScale } = this.data;\n\n    const { object3D } = this.el;\n\n    const scale = getAudioFeedbackScale(\n      this.el.object3D,\n      this.camera,\n      minScale,\n      maxScale,\n      this.analyser ? this.analyser.volume : 0\n    );\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Animates a morph target based on an audio-analyser in a parent entity\n * @namespace avatar\n * @component morph-audio-feedback\n */\nAFRAME.registerComponent(\"morph-audio-feedback\", {\n  schema: {\n    name: { default: \"\" },\n    minValue: { default: 0 },\n    maxValue: { default: 2 }\n  },\n\n  init() {\n    this.mesh = this.el.object3DMap.skinnedmesh;\n    this.morphNumber = this.mesh.morphTargetDictionary[this.data.name];\n  },\n\n  tick() {\n    if (!this.mesh) return;\n\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minValue, maxValue } = this.data;\n    this.mesh.morphTargetInfluences[this.morphNumber] = THREE.Math.mapLinear(\n      easeOutQuadratic(this.analyser ? this.analyser.volume : 0),\n      0,\n      1,\n      minValue,\n      maxValue\n    );\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume) {\n  return THREE.Math.clamp(Math.ceil(THREE.Math.mapLinear(volume - 0.05, 0, 1, 0, 7)), 0, 7);\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.prevSpriteName = \"\";\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[!active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(audioAnalyser.volume);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nexport default function UnlessFeature(props) {\n  return (!configs.feature(props.name) && props.children) || null;\n}\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    await this.store.resetToRandomDefaultAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken, authPayload) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) => {\n      channel.onError(() => {\n        channel.leave();\n        reject();\n      });\n\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\n            await this.handleAuthCredentials(payload.email, token);\n            resolve();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\n        })\n        .receive(\"error\", reject);\n    });\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","export function easeOutQuadratic(t) {\n  return t * (2 - t);\n}\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\n\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { allowDisplayOfSceneLink } from \"../utils/scene-url-utils\";\n\nclass RoomInfoDialog extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubDescription: PropTypes.string,\n    scene: PropTypes.object,\n    store: PropTypes.object\n  };\n\n  render() {\n    const hasDescription = !!this.props.hubDescription;\n    const hasScene = !!this.props.scene;\n\n    const showSceneLink = hasScene && allowDisplayOfSceneLink(this.props.scene, this.props.store);\n\n    const toAttributionDiv = (a, i) => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\n            <div className={styles.attributionName}>\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {a.name}\n              </a>\n            </div>\n            <div className={styles.attributionAuthor}>\n              by {a.author} {source}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\n            <div className={styles.attributionName}>{a.name}</div>\n            <div className={styles.attributionAuthor}>by {a.author}</div>\n          </div>\n        );\n      }\n    };\n\n    let attributions = null;\n    let creator = null;\n\n    if (hasScene && this.props.scene.attributions) {\n      creator = this.props.scene.attributions.creator;\n      attributions = (\n        <div>\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\n        </div>\n      );\n    }\n\n    const title = (\n      <div className={styles.title}>\n        {hasDescription && hasScene ? <FormattedMessage id=\"room-info.title\" /> : this.props.hubName}\n      </div>\n    );\n\n    return (\n      <DialogContainer title={title} wide={true} {...this.props}>\n        {hasDescription && (\n          <>\n            {hasScene && <div className={styles.hubTitle}>{this.props.hubName}</div>}\n            <div className={styles.description}>{this.props.hubDescription}</div>\n          </>\n        )}\n        {hasScene && (\n          <>\n            <div className={styles.subtitle}>\n              <FormattedMessage id=\"room-info.scene-info\" />\n            </div>\n            <div className={styles.roomInfo}>\n              <div className={styles.sceneScreenshot}>\n                {showSceneLink ? (\n                  <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n                  </a>\n                ) : (\n                  <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n                )}\n              </div>\n              <div className={styles.sceneDetails}>\n                <div className={styles.sceneMain}>\n                  <div className={styles.sceneName}>\n                    {showSceneLink ? (\n                      <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {this.props.scene.name}\n                      </a>\n                    ) : (\n                      <span>{this.props.scene.name}</span>\n                    )}\n                  </div>\n                  <div className={styles.sceneCreator}>{creator}</div>\n                </div>\n                <div className={styles.sceneAttributions}>{attributions}</div>\n                <div className={styles.sceneButtons}> </div>\n              </div>\n            </div>\n          </>\n        )}\n      </DialogContainer>\n    );\n  }\n}\nexport default injectIntl(RoomInfoDialog);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport dayjs from \"dayjs-ext\";\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfo } from \"@fortawesome/free-solid-svg-icons/faInfo\";\nimport { faClone } from \"@fortawesome/free-solid-svg-icons/faClone\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\n\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { proxiedUrlFor, scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport StateLink from \"./state-link\";\nimport { remixAvatar } from \"../utils/avatar-utils\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { getReticulumFetchUrl } from \"../utils/phoenix-utils\";\n\ndayjs.extend(relativeTime);\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  poly_model: \"Google Poly\",\n  twitch_stream: \"Twitch\"\n};\n\nclass MediaTiles extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    entries: PropTypes.array,\n    hasNext: PropTypes.bool,\n    hasPrevious: PropTypes.bool,\n    isVariableWidth: PropTypes.bool,\n    page: PropTypes.number,\n    history: PropTypes.object,\n    urlSource: PropTypes.string,\n    handleEntryClicked: PropTypes.func,\n    handleEntryInfoClicked: PropTypes.func,\n    handlePager: PropTypes.func,\n    onCopyAvatar: PropTypes.func,\n    onCopyScene: PropTypes.func,\n    onShowSimilar: PropTypes.func\n  };\n\n  handleCopyAvatar = async (e, entry) => {\n    e.preventDefault();\n    await remixAvatar(entry.id, entry.name);\n    this.props.onCopyAvatar();\n  };\n\n  handleCopyScene = async (e, entry) => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(\"/api/v1/scenes\", \"POST\", {\n      parent_scene_id: entry.id\n    });\n    this.props.onCopyScene();\n  };\n\n  render() {\n    const { urlSource, hasNext, hasPrevious, page, isVariableWidth } = this.props;\n    const entries = this.props.entries || [];\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\n\n    return (\n      <div className={styles.body}>\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\n            <div\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\n              className={classNames({\n                [styles.tile]: true,\n                [styles.createTile]: true,\n                [styles.createAvatarTile]: urlSource === \"avatars\"\n              })}\n            >\n              {urlSource === \"scenes\" ? (\n                <IfFeature name=\"enable_spoke\">\n                  <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\n                    <div className={styles.tileContent}>\n                      <FontAwesomeIcon icon={faPlus} />\n                      <FormattedMessage id=\"media-browser.create-scene\" />\n                    </div>\n                  </a>\n                </IfFeature>\n              ) : (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n                  }}\n                  className={styles.tileLink}\n                >\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\n                  </div>\n                </a>\n              )}\n            </div>\n          )}\n\n          {entries.map(this.entryToTile)}\n        </div>\n\n        {(hasNext || hasPrevious) &&\n          this.props.handlePager && (\n            <div className={styles.pager}>\n              <a\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\n                onClick={() => this.props.handlePager(-1)}\n              >\n                <FontAwesomeIcon icon={faAngleLeft} />\n              </a>\n              <div className={styles.pageNumber}>{page}</div>\n              <a\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\n                onClick={() => this.props.handlePager(1)}\n              >\n                <FontAwesomeIcon icon={faAngleRight} />\n              </a>\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\n    const clientWidth = window.innerWidth;\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n    let imageWidth;\n    if (isImage) {\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n    } else if (isAvatar) {\n      imageWidth = Math.floor((9 / 16) * imageHeight);\n    } else {\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n    }\n\n    return [imageWidth, imageHeight];\n  };\n\n  entryToTile = (entry, idx) => {\n    const imageSrc = entry.images.preview.url;\n    const creator = entry.attributions && entry.attributions.creator;\n    const isImage = entry.type.endsWith(\"_image\");\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\n    const isHub = [\"room\"].includes(entry.type);\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\n\n    // Inline mp4s directly since far/nearspark cannot resize them.\n    const thumbnailElement =\n      entry.images.preview.type === \"mp4\" ? (\n        <video\n          className={classNames(styles.tileContent, styles.avatarTile)}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n          muted\n          autoPlay\n          playsInline\n          loop\n          src={proxiedUrlFor(imageSrc)}\n        />\n      ) : (\n        <img\n          className={classNames(styles.tileContent, styles.avatarTile)}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n          src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\n        />\n      );\n\n    const publisherName =\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\n        <a\n          href={entry.url}\n          rel=\"noreferrer noopener\"\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n          className={styles.tileLink}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n        >\n          {thumbnailElement}\n        </a>\n        <div className={styles.tileActions}>\n          {entry.type === \"avatar\" && (\n            <StateLink\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              stateDetail={{ avatarId: entry.id }}\n              history={this.props.history}\n              title=\"Edit\"\n            >\n              <FontAwesomeIcon icon={faPencilAlt} />\n            </StateLink>\n          )}\n          {entry.type === \"avatar_listing\" && (\n            <a\n              onClick={e => {\n                e.preventDefault();\n                this.props.onShowSimilar(entry.id, entry.name);\n              }}\n              title=\"Show Similar\"\n            >\n              <FontAwesomeIcon icon={faSearch} />\n            </a>\n          )}\n          {entry.type === \"avatar_listing\" &&\n            entry.allow_remixing && (\n              <a onClick={e => this.handleCopyAvatar(e, entry)} title=\"Copy to my avatars\">\n                <FontAwesomeIcon icon={faClone} />\n              </a>\n            )}\n          {entry.type === \"scene_listing\" &&\n            entry.allow_remixing && (\n              <a onClick={e => this.handleCopyScene(e, entry)} title=\"Copy to my scenes\">\n                <FontAwesomeIcon icon={faClone} />\n              </a>\n            )}\n          {entry.type === \"scene\" &&\n            entry.project_id && (\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={getReticulumFetchUrl(`/spoke/projects/${entry.project_id}`)}\n                title={formatMessage({ id: \"scene.edit_button\" })}\n              >\n                <FontAwesomeIcon icon={faPencilAlt} />\n              </a>\n            )}\n          {entry.type === \"room\" &&\n            this.props.handleEntryInfoClicked &&\n            entry.description && (\n              <a\n                title=\"room info\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.props.handleEntryInfoClicked(entry);\n                }}\n              >\n                <FontAwesomeIcon icon={faInfo} />\n              </a>\n            )}\n        </div>\n\n        {entry.favorited && (\n          <div className={styles.favorite}>\n            <FontAwesomeIcon icon={faStar} />\n          </div>\n        )}\n\n        {!entry.type.endsWith(\"_image\") && (\n          <div className={styles.info}>\n            <a\n              href={entry.url}\n              rel=\"noreferrer noopener\"\n              className={styles.name}\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n            >\n              {entry.name || \"\\u00A0\"}\n            </a>\n            {!isAvatar &&\n              !isHub && (\n                <div className={styles.attribution}>\n                  <div className={styles.creator}>\n                    {creator && creator.name === undefined && <span>{creator}</span>}\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n                    {creator &&\n                      creator.name &&\n                      creator.url && (\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {creator.name}\n                        </a>\n                      )}\n                  </div>\n                  {publisherName && (\n                    <div className={styles.publisher}>\n                      <i>\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </i>\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {publisherName}\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            {isHub && (\n              <>\n                <div className={styles.attribution}>\n                  <div className={styles.lastJoined}>\n                    <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\n                    {dayjs(entry.last_activated_at).fromNow()}\n                  </div>\n                </div>\n                <div className={styles.presence}>\n                  <FontAwesomeIcon icon={faUsers} />\n                  <span>{entry.member_count}</span>\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default injectIntl(MediaTiles);\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/models/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/emoji-27673179a22e6f42e8187ccba07e4dce.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","import { CAMERA_MODE_INSPECT } from \"./camera-system.js\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nlet viewingCamera;\nlet uiRoot;\nexport class ScenePreviewCameraSystem {\n  constructor() {\n    this.entities = [];\n  }\n\n  register(el) {\n    this.entities.push(el);\n  }\n\n  unregister(el) {\n    this.entities.splice(this.entities.indexOf(el, 1));\n  }\n\n  tick() {\n    viewingCamera = viewingCamera || document.getElementById(\"viewing-camera\");\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const entered = viewingCamera && viewingCamera.sceneEl.is(\"entered\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n    for (let i = 0; i < this.entities.length; i++) {\n      const el = this.entities[i];\n      const hubsSystems = AFRAME.scenes[0].systems[\"hubs-systems\"];\n      if (el && (!hubsSystems || (hubsSystems.cameraSystem.mode !== CAMERA_MODE_INSPECT && !isGhost && !entered))) {\n        el.components[\"scene-preview-camera\"].tick2();\n        if (hubsSystems && viewingCamera) {\n          el.object3D.updateMatrices();\n          setMatrixWorld(viewingCamera.object3D, el.object3D.matrixWorld);\n        }\n      }\n    }\n  }\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","module.exports = \"<svg viewBox=\\\"0 0 64 64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M61.0316 33.4196C61.841 33.0737 61.841 31.9263 61.0316 31.5804L5.78581 7.97542C4.46632 7.41163 2.99999 8.37968 2.99999 9.81457L2.99999 30.4511L29.262 32.5L2.99999 34.549L2.99998 55.1854C2.99998 56.6203 4.46632 57.5884 5.7858 57.0246L61.0316 33.4196Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = __webpack_public_path__ + \"assets/models/LoadingEnvironment-570a9f69a9509eb8a039c9ff93ccfdca.glb\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancel-button\":\"promote-client-dialog__cancel-button__3YZLa\",\"cancelButton\":\"promote-client-dialog__cancel-button__3YZLa\",\"confirm-button\":\"promote-client-dialog__confirm-button__3LXvQ\",\"confirmButton\":\"promote-client-dialog__confirm-button__3LXvQ\",\"message\":\"promote-client-dialog__message__1LA_N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancel-button\":\"close-room-dialog__cancel-button__MmtAo\",\"cancelButton\":\"close-room-dialog__cancel-button__MmtAo\",\"confirm-button\":\"close-room-dialog__confirm-button__Bs9y3\",\"confirmButton\":\"close-room-dialog__confirm-button__Bs9y3\",\"message\":\"close-room-dialog__message__1Rvh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"help-dialog\":\"help-dialog__help-dialog__3kPVz\",\"helpDialog\":\"help-dialog__help-dialog__3kPVz\",\"docs-link\":\"help-dialog__docs-link__1kBbO\",\"docsLink\":\"help-dialog__docs-link__1kBbO\",\"tour-button\":\"help-dialog__tour-button__2kJpg\",\"tourButton\":\"help-dialog__tour-button__2kJpg\",\"link-button\":\"help-dialog__link-button__18Iw0\",\"linkButton\":\"help-dialog__link-button__18Iw0\"};","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    if (parent) {\n      parent.updateMatrices();\n    }\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n    this.matrixNeedsUpdate = true;\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n  },\n\n  tick() {\n    if (!this.bodyHelper) {\n      this.bodyHelper = this.el.components[\"body-helper\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction && interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.bodyHelper.data.linearSleepingThreshold;\n      const angularThreshold = this.bodyHelper.data.angularSleepingThreshold;\n      const uuid = this.bodyHelper.uuid;\n      const isAtRest =\n        this.physicsSystem.bodyInitialized(uuid) &&\n        this.physicsSystem.getLinearVelocity(uuid) < linearThreshold &&\n        this.physicsSystem.getAngularVelocity(uuid) < angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.data.autoLockOnLoad) {\n      this.el.setAttribute(\"body-helper\", {\n        gravity: { x: 0, y: 0, z: 0 }\n      });\n      this.setLocked(true);\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"body-helper\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      const uuid = this.bodyHelper.uuid;\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        (this.physicsSystem.bodyInitialized(uuid) &&\n          this.physicsSystem.getLinearVelocity(uuid) < this.data.gravitySpeedLimit)\n      ) {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"body-helper\", {\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE,\n        gravity: { x: 0, y: -9.8, z: 0 }\n      });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"body-helper\", {\n      gravity: { x: 0, y: 0, z: 0 },\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    if (!this.data.target) return;\n\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    }\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n    this.mesh = null;\n    this.el.addEventListener(\"reset_scene\", this.removeNavMeshData.bind(this));\n    this.el.addEventListener(\"leaving_loading_environment\", this.removeNavMeshData.bind(this));\n  },\n\n  loadMesh: function(mesh, zone) {\n    if (this.mesh) {\n      console.error(\"tried to load multiple nav meshes\");\n      this.removeNavMeshData();\n    }\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    mesh.updateMatrices();\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  },\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    /* DEPRECATED: Use activeClipIndex instead since animation names are not unique */\n    clip: { type: \"string\", default: \"\" },\n    activeClipIndex: { type: \"int\", default: 0 }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    this.currentActions = [];\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n  },\n\n  update(oldData) {\n    if (this.mixerEl) {\n      if (oldData.clip !== this.data.clip || oldData.activeClipIndex !== this.data.activeClipIndex) {\n        this.updateClip();\n      }\n\n      if (oldData.paused !== this.data.paused) {\n        for (let i = 0; i < this.currentActions.length; i++) {\n          this.currentActions[i].paused = this.data.paused;\n        }\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const { clip: clipName, activeClipIndex } = this.data;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clips;\n    if (clipName !== \"\") {\n      clips = clipName.split(\",\").map(n => animations.find(({ name }) => name === n));\n    } else {\n      clips = [animations[activeClipIndex]];\n    }\n\n    if (!(clips && clips.length)) return;\n\n    this.currentActions.length = 0;\n\n    for (let i = 0; i < clips.length; i++) {\n      const action = mixer.clipAction(clips[i], this.el.object3D);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.currentActions.push(action);\n    }\n  },\n\n  destroy() {\n    for (let i = 0; i < this.currentActions.length; i++) {\n      this.currentActions[i].enabled = false;\n      this.currentActions[i].stop();\n    }\n    this.currentActions.length = 0;\n  }\n});\n","import { computeObjectAABB, getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport {\n  resolveUrl,\n  getDefaultResolveQuality,\n  injectCustomShaderChunks,\n  addMeshScaleAnimation,\n  closeExistingMediaMirror\n} from \"../utils/media-utils\";\nimport {\n  isNonCorsProxyDomain,\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isLocalHubsSceneUrl,\n  isLocalHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport loadingObjectSrc from \"../assets/models/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { cloneObject3D, setMatrixWorld } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nimport { SHAPE } from \"three-ammo/constants\";\n\nlet loadingObjectEnvMap;\nlet loadingObject;\n\nwaitForDOMContentLoaded().then(() => {\n  loadModel(loadingObjectSrc).then(gltf => {\n    loadingObject = gltf;\n  });\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst forceMeshBatching = qsTruthy(\"batchMeshes\");\nconst forceImageBatching = qsTruthy(\"batchImages\");\nconst disableBatching = qsTruthy(\"disableBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    playSoundEffect: { default: true },\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    version: { type: \"number\", default: 1 }, // Used to force a re-resolution\n    fitToBox: { default: false },\n    moveTheParentNotTheMesh: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    linkedEl: { default: null }, // This is the element of which this is a linked derivative. See linked-media.js\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.handleLinkedElRemoved = this.handleLinkedElRemoved.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.animating = false;\n\n    try {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .catch(() => {}); //ignore exception, entity might not be networked\n    } catch (e) {\n      // NAF may not exist on scene landing page\n    }\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    const originalMeshMatrix = new THREE.Matrix4();\n    const desiredObjectMatrix = new THREE.Matrix4();\n    const position = new THREE.Vector3();\n    const quaternion = new THREE.Quaternion();\n    const scale = new THREE.Vector3();\n    const box = new THREE.Box3();\n    return function(fitToBox, moveTheParentNotTheMesh) {\n      this.el.object3D.updateMatrices();\n      const mesh = this.el.getObject3D(\"mesh\");\n      mesh.updateMatrices();\n      if (moveTheParentNotTheMesh) {\n        if (fitToBox) {\n          console.warn(\n            \"Unexpected combination of inputs. Can fit the mesh to a box OR move the parent to the mesh, but did not expect to do both.\",\n            this.el\n          );\n        }\n        // Keep the mesh exactly where it is, but move the parent transform such that it aligns with the center of the mesh's bounding box.\n        originalMeshMatrix.copy(mesh.matrixWorld);\n        computeObjectAABB(mesh, box);\n        center.addVectors(box.min, box.max).multiplyScalar(0.5);\n        this.el.object3D.matrixWorld.decompose(position, quaternion, scale);\n        desiredObjectMatrix.compose(\n          center,\n          quaternion,\n          scale\n        );\n        setMatrixWorld(this.el.object3D, desiredObjectMatrix);\n        mesh.updateMatrices();\n        setMatrixWorld(mesh, originalMeshMatrix);\n      } else {\n        // Move the mesh such that the center of its bounding box is in the same position as the parent matrix position\n        const box = getBox(this.el, mesh);\n        const scaleCoefficient = fitToBox ? getScaleCoefficient(0.5, box) : 1;\n        const { min, max } = box;\n        center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n        mesh.scale.multiplyScalar(scaleCoefficient);\n        mesh.position.sub(center);\n        mesh.matrixNeedsUpdate = true;\n      }\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"shape-helper__\" + id)) {\n      this.el.removeAttribute(\"shape-helper__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  handleLinkedElRemoved(e) {\n    if (e.detail.name === \"media-loader\") {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n\n      // this should be revisited if we ever use media linking for something other than media mirroring UX --\n      // right now it is assumed if there is a linkedEl, this is the currently active mirrored media\n      closeExistingMediaMirror();\n    }\n  },\n\n  remove() {\n    if (this.data.linkedEl) {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n    }\n\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    if (this.loadingSoundEffect) {\n      sfx.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loadedSoundEffect) {\n      sfx.stopPositionalAudio(this.loadedSoundEffect);\n      this.loadedSoundEffect = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.removeAttribute(\"media-pdf\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n\n    const mesh = useFancyLoader\n      ? cloneObject3D(loadingObject.scene)\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n\n    this.updateScale(true, false);\n\n    if (useFancyLoader) {\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        const currentEnivronmentMap = environmentMapComponent.environmentMap;\n        if (loadingObjectEnvMap !== currentEnivronmentMap) {\n          environmentMapComponent.applyEnvironmentMap(mesh);\n          loadingObjectEnvMap = currentEnivronmentMap;\n        }\n      }\n\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(mesh.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"shape-helper__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n\n    if (\n      this.el.sceneEl.is(\"entered\") &&\n      (!this.networkedEl || NAF.utils.isMine(this.networkedEl)) &&\n      this.data.playSoundEffect\n    ) {\n      this.loadingSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADING,\n        this.el.object3D,\n        true\n      );\n    }\n\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundEffect) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals: (function() {\n    const boundingBox = new THREE.Box3();\n    const boundingSphere = new THREE.Sphere();\n    return function() {\n      const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n      if (hoverableVisuals) {\n        if (!this.injectedCustomShaderChunks) {\n          this.injectedCustomShaderChunks = true;\n          hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n        }\n\n        boundingBox.setFromObject(this.el.object3DMap.mesh);\n        boundingBox.getBoundingSphere(boundingSphere);\n        hoverableVisuals.geometryRadius = boundingSphere.radius / this.el.object3D.scale.y;\n      }\n    };\n  })(),\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\") && this.data.playSoundEffect) {\n      this.loadedSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADED,\n        this.el.object3D,\n        false\n      );\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"shape-helper\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      if (this.data.linkedEl) {\n        this.el.sceneEl.systems[\"linked-media\"].registerLinkage(this.data.linkedEl, this.el);\n        this.data.linkedEl.addEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n      }\n\n      el.emit(\"media-loaded\");\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n      finish();\n    }\n  },\n\n  refresh() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n\n    // When we refresh, we bump the version to the current timestamp.\n    //\n    // The only use-case for refresh right now is re-fetching screenshots.\n    this.el.setAttribute(\"media-loader\", { version: Math.floor(Date.now() / 1000) });\n  },\n\n  async update(oldData, forceLocalRefresh) {\n    const { src, version, contentSubtype } = this.data;\n    if (!src) return;\n\n    const srcChanged = oldData.src !== src;\n    const versionChanged = !!(oldData.version && oldData.version !== version);\n\n    if (versionChanged) {\n      this.el.emit(\"media_refreshing\");\n\n      // Don't animate if its a refresh.\n      this.data.animate = false;\n\n      // Play the sound effect on a refresh only if we are the owner\n      this.data.playSoundEffect = NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (forceLocalRefresh) {\n      this.el.removeAttribute(\"gltf-model-plus\");\n      this.el.removeAttribute(\"media-pager\");\n      this.el.removeAttribute(\"media-video\");\n      this.el.removeAttribute(\"media-pdf\");\n      this.el.removeAttribute(\"media-image\");\n    }\n\n    try {\n      if ((forceLocalRefresh || srcChanged) && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      let canonicalUrl = src;\n      let canonicalAudioUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      const parsedUrl = new URL(src);\n\n      // We want to resolve and proxy some hubs urls, like rooms and scene links,\n      // but want to avoid proxying assets in order for this to work in dev environments\n      const isLocalModelAsset =\n        isNonCorsProxyDomain(parsedUrl.hostname) && (guessContentType(src) || \"\").startsWith(\"model/gltf\");\n\n      if (this.data.resolve && !src.startsWith(\"data:\") && !src.startsWith(\"hubs:\") && !isLocalModelAsset) {\n        const is360 = !!(this.data.mediaOptions.projection && this.data.mediaOptions.projection.startsWith(\"360\"));\n        const quality = getDefaultResolveQuality(is360);\n        const result = await resolveUrl(src, quality, version, forceLocalRefresh);\n        canonicalUrl = result.origin;\n\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n\n        canonicalAudioUrl = result.origin_audio;\n        if (canonicalAudioUrl && canonicalAudioUrl.startsWith(\"//\")) {\n          canonicalAudioUrl = location.protocol + canonicalAudioUrl;\n        }\n\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (forceLocalRefresh || srcChanged) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      } else {\n        this.el.emit(\"media_refreshed\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        let linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource;\n        if (this.data.linkedEl) {\n          const linkedMediaVideo = this.data.linkedEl.components[\"media-video\"];\n\n          linkedVideoTexture = linkedMediaVideo.videoTexture;\n          linkedAudioSource = linkedMediaVideo.audioSource;\n          linkedMediaElementAudioSource = linkedMediaVideo.mediaElementAudioSource;\n        }\n\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            audioSrc: canonicalAudioUrl ? proxiedUrlFor(canonicalAudioUrl) : null,\n            time: startTime,\n            contentType,\n            linkedVideoTexture,\n            linkedAudioSource,\n            linkedMediaElementAudioSource\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching && forceImageBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            version,\n            contentType,\n            batch\n          })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\n          \"media-pdf\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType,\n            batch: false // Batching disabled until atlas is updated properly\n          })\n        );\n        this.el.setAttribute(\"media-pager\", {});\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"pdf-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        let batch = !disableBatching && forceMeshBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch,\n            modelToWorldScale: this.data.fitToBox ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          async () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (await isLocalHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if ((await isHubsRoomUrl(src)) || ((await isLocalHubsSceneUrl(src)) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            version,\n            contentType: guessContentType(thumbnail) || \"image/png\",\n            batch\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    index: { default: 0 },\n    maxIndex: { default: 0 }\n  },\n\n  init() {\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n    this.onSnap = this.onSnap.bind(this);\n    this.update = this.update.bind(this);\n\n    this.el.setAttribute(\"hover-menu__pager\", { template: \"#pager-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__pager\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.snapButton = this.el.querySelector(\".snap-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n      this.snapButton.object3D.addEventListener(\"interact\", this.onSnap);\n\n      this.update();\n      this.el.emit(\"pager-loaded\");\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkedEl.addEventListener(\"pinned\", this.update);\n        this.networkedEl.addEventListener(\"unpinned\", this.update);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.update);\n      })\n      .catch(() => {}); //ignore exception, entity might not be networked\n\n    this.el.addEventListener(\"pdf-loaded\", async () => {\n      this.update();\n    });\n  },\n\n  async update(oldData) {\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      if (oldData && typeof oldData.index === \"number\" && oldData.index !== this.data.index) {\n        this.el.emit(\"owned-pager-page-changed\");\n      }\n    }\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.data.maxIndex + 1}`);\n    }\n\n    if (this.prevButton && this.nextButton) {\n      const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n      const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n      this.prevButton.object3D.visible = this.nextButton.object3D.visible =\n        !isPinned || window.APP.hubChannel.can(\"pin_objects\");\n    }\n  },\n\n  onNext() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.min(this.data.index + 1, this.data.maxIndex);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onPrev() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.max(this.data.index - 1, 0);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onSnap() {\n    this.el.emit(\"pager-snap-clicked\");\n  },\n\n  remove() {\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.update);\n      this.networkedEl.removeEventListener(\"unpinned\", this.update);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.update);\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\nimport { CAMERA_MODE_SCENE_PREVIEW } from \"../systems/camera-system\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.register(this.el);\n    }\n\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n\n    let streamerCamera;\n    if (hubsSystems) {\n      hubsSystems.cameraSystem.mode = CAMERA_MODE_SCENE_PREVIEW;\n      streamerCamera = getStreamerCamera();\n    }\n\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  },\n\n  remove: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.unregister(this.el);\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\nconst {\n  Scene,\n  CubeCamera,\n  Object3D,\n  Vector3,\n  BoxBufferGeometry,\n  ShaderMaterial,\n  UniformsUtils,\n  BackSide,\n  Mesh,\n  UniformsLib,\n  PMREMGenerator,\n  PMREMCubeUVPacker\n} = THREE;\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nconst vertexShader = `\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n`;\n\nconst fragmentShader = `\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n`;\n\nexport default class Sky extends Object3D {\n  static shader = {\n    uniforms: UniformsUtils.merge([\n      UniformsLib.fog,\n      {\n        luminance: { value: 1 },\n        turbidity: { value: 10 },\n        rayleigh: { value: 2 },\n        mieCoefficient: { value: 0.005 },\n        mieDirectionalG: { value: 0.8 },\n        sunPosition: { value: new Vector3() }\n      }\n    ]),\n    vertexShader,\n    fragmentShader\n  };\n\n  static _geometry = new BoxBufferGeometry(1, 1, 1);\n\n  constructor() {\n    super();\n\n    const material = new ShaderMaterial({\n      fragmentShader: Sky.shader.fragmentShader,\n      vertexShader: Sky.shader.vertexShader,\n      uniforms: UniformsUtils.clone(Sky.shader.uniforms),\n      side: BackSide,\n      fog: true\n    });\n\n    this.skyScene = new Scene();\n    this.cubeCamera = new CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.sky = new Mesh(Sky._geometry, material);\n    this.sky.name = \"Sky\";\n    this.add(this.sky);\n\n    this._inclination = 0;\n    this._azimuth = 0.15;\n    this._distance = 8000;\n    this.updateSunPosition();\n  }\n\n  get turbidity() {\n    return this.sky.material.uniforms.turbidity.value;\n  }\n\n  set turbidity(value) {\n    this.sky.material.uniforms.turbidity.value = value;\n  }\n\n  get rayleigh() {\n    return this.sky.material.uniforms.rayleigh.value;\n  }\n\n  set rayleigh(value) {\n    this.sky.material.uniforms.rayleigh.value = value;\n  }\n\n  get luminance() {\n    return this.sky.material.uniforms.luminance.value;\n  }\n\n  set luminance(value) {\n    this.sky.material.uniforms.luminance.value = value;\n  }\n\n  get mieCoefficient() {\n    return this.sky.material.uniforms.mieCoefficient.value;\n  }\n\n  set mieCoefficient(value) {\n    this.sky.material.uniforms.mieCoefficient.value = value;\n  }\n\n  get mieDirectionalG() {\n    return this.sky.material.uniforms.mieDirectionalG.value;\n  }\n\n  set mieDirectionalG(value) {\n    this.sky.material.uniforms.mieDirectionalG.value = value;\n  }\n\n  get inclination() {\n    return this._inclination;\n  }\n\n  set inclination(value) {\n    this._inclination = value;\n    this.updateSunPosition();\n  }\n\n  get azimuth() {\n    return this._azimuth;\n  }\n\n  set azimuth(value) {\n    this._azimuth = value;\n    this.updateSunPosition();\n  }\n\n  get distance() {\n    return this._distance;\n  }\n\n  set distance(value) {\n    this._distance = value;\n    this.updateSunPosition();\n  }\n\n  updateSunPosition() {\n    const theta = Math.PI * (this._inclination - 0.5);\n    const phi = 2 * Math.PI * (this._azimuth - 0.5);\n\n    const distance = this._distance;\n\n    const x = distance * Math.cos(phi);\n    const y = distance * Math.sin(phi) * Math.sin(theta);\n    const z = distance * Math.sin(phi) * Math.cos(theta);\n\n    this.sky.material.uniforms.sunPosition.value.set(x, y, z).normalize();\n    this.sky.scale.set(distance, distance, distance);\n  }\n\n  generateEnvironmentMap(renderer) {\n    this.skyScene.add(this.sky);\n    this.cubeCamera.update(renderer, this.skyScene);\n    this.add(this.sky);\n    const vrEnabled = renderer.vr.enabled;\n    renderer.vr.enabled = false;\n    const pmremGenerator = new PMREMGenerator(this.cubeCamera.renderTarget.texture);\n    pmremGenerator.update(renderer);\n    const pmremCubeUVPacker = new PMREMCubeUVPacker(pmremGenerator.cubeLods);\n    pmremCubeUVPacker.update(renderer);\n    renderer.vr.enabled = vrEnabled;\n    pmremGenerator.dispose();\n    pmremCubeUVPacker.dispose();\n    return pmremCubeUVPacker.CubeUVRenderTarget.texture;\n  }\n\n  copy(source, recursive = true) {\n    if (recursive) {\n      this.remove(this.sky);\n    }\n\n    super.copy(source, recursive);\n\n    if (recursive) {\n      const skyIndex = source.children.indexOf(source.sky);\n\n      if (skyIndex !== -1) {\n        this.sky = this.children[skyIndex];\n      }\n    }\n\n    this.turbidity = source.turbidity;\n    this.rayleigh = source.rayleigh;\n    this.luminance = source.luminance;\n    this.mieCoefficient = source.mieCoefficient;\n    this.mieDirectionalG = source.mieDirectionalG;\n    this.inclination = source.inclination;\n    this.azimuth = source.azimuth;\n    this.distance = source.distance;\n\n    return this;\n  }\n}\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new Sky();\n    this.sky.cubeCamera.children.forEach(o => (o.matrixNeedsUpdate = true));\n    this.el.setObject3D(\"mesh\", this.sky);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    if (this.data.turbidity !== oldData.turbidity) {\n      this.sky.turbidity = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      this.sky.rayleigh = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      this.sky.luminance = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      this.sky.mieCoefficient = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      this.sky.mieDirectionalG = this.data.mieDirectionalG;\n    }\n\n    if (this.data.inclination !== oldData.inclination) {\n      this.sky.inclination = this.data.inclination;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.azimuth !== oldData.azimuth) {\n      this.sky.azimuth = this.data.azimuth;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.distance !== oldData.distance) {\n      const distance = this.data.distance;\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      this.sky.distance = this.el.object3D.scale.x === 1 ? distance : 1;\n      this.sky.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      const envMap = this.sky.generateEnvironmentMap(renderer);\n      environmentMapComponent.updateEnvironmentMap(envMap);\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Used on a avatar-rig to move the avatar to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#avatar-pov-node\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n    });\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the avatar rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nfunction setNonNullVec3Components(target, values) {\n  target.set(\n    values.x === null ? target.x : values.x,\n    values.y === null ? target.y : values.y,\n    values.z === null ? target.z : values.z\n  );\n}\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    spawnScale: { type: \"vec3\", default: { x: NaN, y: NaN, z: NaN } },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" },\n\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = this.el.sceneEl;\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n\n    this.handleMediaLoaded = this.handleMediaLoaded.bind(this);\n\n    this.spawnedMediaScale = null;\n\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n  },\n\n  play() {\n    this.el.addEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  handleMediaLoaded(e) {\n    const spawnedEntity = e.target;\n    this.spawnedMediaScale = spawnedEntity.object3D.scale.clone();\n    setNonNullVec3Components(this.spawnedMediaScale, this.data.spawnScale);\n\n    const boxSize =\n      spawnedEntity.components[\"media-image\"] ||\n      spawnedEntity.components[\"media-video\"] ||\n      spawnedEntity.components[\"media-pdf\"]\n        ? 1\n        : 0.5;\n\n    const scaleCoefficient = getScaleCoefficient(boxSize, getBox(spawnedEntity, spawnedEntity.object3D));\n    this.spawnedMediaScale.divideScalar(scaleCoefficient);\n  },\n\n  async onSpawnEvent(e) {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const spawnedEntity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false,\n      {\n        x: this.data.spawnScale.x === null ? 1 : this.data.spawnScale.x,\n        y: this.data.spawnScale.y === null ? 1 : this.data.spawnScale.y,\n        z: this.data.spawnScale.z === null ? 1 : this.data.spawnScale.z\n      }\n    ).entity;\n\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cursor = (e.detail && e.detail.object3D) || interaction.options.rightRemote.entity.object3D;\n\n    const left = cursor.el.id.indexOf(\"right\") === -1;\n    const hand = left ? interaction.options.leftHand.entity.object3D : interaction.options.rightHand.entity.object3D;\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    this.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const willAnimateFromCursor =\n      this.data.animateFromCursor &&\n      (userinput.get(paths.actions.rightHand.matrix) || userinput.get(paths.actions.leftHand.matrix));\n    if (!willAnimateFromCursor) {\n      if (left) {\n        interaction.state.leftRemote.held = spawnedEntity;\n        interaction.state.leftRemote.spawning = true;\n      } else {\n        interaction.state.rightRemote.held = spawnedEntity;\n        interaction.state.rightRemote.spawning = true;\n      }\n    }\n    this.activateCooldown();\n    await waitForEvent(\"model-loaded\", spawnedEntity);\n\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      hand.getWorldPosition(this.handPosition);\n      spawnedEntity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: {\n          x: spawnedEntity.object3D.position.x,\n          y: spawnedEntity.object3D.position.y,\n          z: spawnedEntity.object3D.position.z\n        },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      if (left) {\n        interaction.state.leftRemote.spawning = false;\n      } else {\n        interaction.state.rightRemote.spawning = false;\n      }\n    }\n\n    this.physicsSystem.resetDynamicBody(spawnedEntity.components[\"body-helper\"].uuid);\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        this.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        setTimeout(() => {\n          this.cooldownTimeout = null;\n        }, 400);\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { SimplexNoise } from \"three/examples/jsm/math/SimplexNoise\";\nimport waterNormalsUrl from \"../assets/waternormals.jpg\";\n\nconst {\n  Mesh,\n  PlaneBufferGeometry,\n  MeshStandardMaterial,\n  MeshPhongMaterial,\n  Vector2,\n  TextureLoader,\n  RepeatWrapping\n} = THREE;\n\n/**\n * SimpleWater\n * Keep in sync with Spoke's SimpleWater class\n */\n\n/**\n * Adapted dynamic geometry code from: https://github.com/ditzel/UnityOceanWavesAndShip\n */\n\nclass Octave {\n  constructor(speed = new Vector2(1, 1), scale = new Vector2(1, 1), height = 0.0025, alternate = true) {\n    this.speed = speed;\n    this.scale = scale;\n    this.height = height;\n    this.alternate = alternate;\n  }\n}\nexport default class SimpleWater extends Mesh {\n  constructor(normalMap, resolution = 24, lowQuality = false) {\n    const geometry = new PlaneBufferGeometry(10, 10, resolution, resolution);\n    geometry.rotateX(-Math.PI / 2);\n\n    const waterUniforms = {\n      ripplesSpeed: { value: 0.25 },\n      ripplesScale: { value: 1 },\n      time: { value: 0 }\n    };\n\n    const materialClass = lowQuality ? MeshPhongMaterial : MeshStandardMaterial;\n\n    normalMap.wrapS = normalMap.wrapT = RepeatWrapping;\n\n    const material = new materialClass({ color: 0x0054df, normalMap });\n    material.name = \"SimpleWaterMaterial\";\n\n    material.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, waterUniforms);\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_pars_vertex>\",\n        `\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      `\n      );\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_vertex>\",\n        `\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      `\n      );\n\n      // getNoise function from https://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water.js\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normalmap_pars_fragment>\",\n        `\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      `\n      );\n\n      // https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js#L20\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normal_fragment_maps>\",\n        `\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        `\n      );\n    };\n\n    super(geometry, material);\n\n    this.lowQuality = lowQuality;\n    this.waterUniforms = waterUniforms;\n\n    if (lowQuality) {\n      this.material.specular.set(0xffffff);\n    } else {\n      this.receiveShadow = true;\n    }\n\n    this.geometry.attributes.position.dynamic = true;\n\n    this.resolution = resolution;\n    this.octaves = [\n      new Octave(new Vector2(0.5, 0.5), new Vector2(1, 1), 0.01, true),\n      new Octave(new Vector2(0.05, 6), new Vector2(1, 20), 0.1, false)\n    ];\n\n    this.simplex = new SimplexNoise();\n  }\n\n  get opacity() {\n    return this.material.opacity;\n  }\n\n  set opacity(value) {\n    this.material.opacity = value;\n\n    if (value !== 1) {\n      this.material.transparent = true;\n    }\n  }\n\n  get color() {\n    return this.material.color;\n  }\n\n  get tideHeight() {\n    return this.octaves[0].height;\n  }\n\n  get tideScale() {\n    return this.octaves[0].scale;\n  }\n\n  get tideSpeed() {\n    return this.octaves[0].speed;\n  }\n\n  set tideHeight(value) {\n    this.octaves[0].height = value;\n  }\n\n  get waveHeight() {\n    return this.octaves[1].height;\n  }\n\n  set waveHeight(value) {\n    this.octaves[1].height = value;\n  }\n\n  get waveScale() {\n    return this.octaves[1].scale;\n  }\n\n  get waveSpeed() {\n    return this.octaves[1].speed;\n  }\n\n  set ripplesSpeed(value) {\n    this.waterUniforms.ripplesSpeed.value = value;\n  }\n\n  get ripplesSpeed() {\n    return this.waterUniforms.ripplesSpeed.value;\n  }\n\n  set ripplesScale(value) {\n    this.waterUniforms.ripplesScale.value = value;\n  }\n\n  get ripplesScale() {\n    return this.waterUniforms.ripplesScale.value;\n  }\n\n  update(time) {\n    const positionAttribute = this.geometry.attributes.position;\n\n    for (let x = 0; x <= this.resolution; x++) {\n      for (let z = 0; z <= this.resolution; z++) {\n        let y = 0;\n\n        for (let o = 0; o < this.octaves.length; o++) {\n          const octave = this.octaves[o];\n\n          if (octave.alternate) {\n            const noise = this.simplex.noise(\n              (x * octave.scale.x) / this.resolution,\n              (z * octave.scale.y) / this.resolution\n            );\n            y += Math.cos(noise + octave.speed.length() * time) * octave.height;\n          } else {\n            const noise =\n              this.simplex.noise(\n                (x * octave.scale.x + time * octave.speed.x) / this.resolution,\n                (z * octave.scale.y + time * octave.speed.y) / this.resolution\n              ) - 0.5;\n            y += noise * octave.height;\n          }\n        }\n\n        positionAttribute.setY(x * (this.resolution + 1) + z, y);\n      }\n    }\n\n    this.geometry.computeVertexNormals();\n    positionAttribute.needsUpdate = true;\n    this.waterUniforms.time.value = time;\n  }\n\n  clone(recursive) {\n    return new SimpleWater(this.material.normalMap, this.resolution, this.lowQuality).copy(this, recursive);\n  }\n\n  copy(source, recursive = true) {\n    super.copy(source, recursive);\n\n    this.opacity = source.opacity;\n    this.color.copy(source.color);\n    this.tideHeight = source.tideHeight;\n    this.tideScale.copy(source.tideScale);\n    this.tideSpeed.copy(source.tideSpeed);\n    this.waveHeight = source.waveHeight;\n    this.waveScale.copy(source.waveScale);\n    this.waveSpeed.copy(source.waveSpeed);\n    this.ripplesSpeed = source.ripplesSpeed;\n    this.ripplesScale = source.ripplesScale;\n\n    return this;\n  }\n}\n\nfunction vec2Equals(a, b) {\n  return a && b && a.x === b.x && a.y === b.y;\n}\n\nlet waterNormalMap = null;\n\nAFRAME.registerComponent(\"simple-water\", {\n  schema: {\n    opacity: { type: \"number\", default: 1 },\n    color: { type: \"color\" },\n    tideHeight: { type: \"number\", default: 0.01 },\n    tideScale: { type: \"vec2\", default: { x: 1, y: 1 } },\n    tideSpeed: { type: \"vec2\", default: { x: 0.5, y: 0.5 } },\n    waveHeight: { type: \"number\", default: 0.1 },\n    waveScale: { type: \"vec2\", default: { x: 1, y: 20 } },\n    waveSpeed: { type: \"vec2\", default: { x: 0.05, y: 6 } },\n    ripplesScale: { type: \"number\", default: 1 },\n    ripplesSpeed: { type: \"number\", default: 0.25 }\n  },\n\n  init() {\n    if (!waterNormalMap) {\n      waterNormalMap = new TextureLoader().load(waterNormalsUrl);\n    }\n    this.water = new SimpleWater(waterNormalMap, undefined, window.APP && window.APP.quality === \"low\");\n    this.el.setObject3D(\"mesh\", this.water);\n  },\n\n  update(oldData) {\n    if (this.data.opacity !== oldData.opacity) {\n      this.water.opacity = this.data.opacity;\n    }\n\n    if (this.data.color !== oldData.color) {\n      this.water.color.set(this.data.color);\n    }\n\n    if (this.data.tideHeight !== oldData.tideHeight) {\n      this.water.tideHeight = this.data.tideHeight;\n    }\n\n    if (!vec2Equals(this.data.tideScale, oldData.tideScale)) {\n      this.water.tideScale.copy(this.data.tideScale);\n    }\n\n    if (!vec2Equals(this.data.tideSpeed, oldData.tideSpeed)) {\n      this.water.tideSpeed.copy(this.data.tideSpeed);\n    }\n\n    if (this.data.waveHeight !== oldData.waveHeight) {\n      this.water.waveHeight = this.data.waveHeight;\n    }\n\n    if (!vec2Equals(this.data.waveScale, oldData.waveScale)) {\n      this.water.waveScale.copy(this.data.waveScale);\n    }\n\n    if (!vec2Equals(this.data.waveSpeed, oldData.waveSpeed)) {\n      this.water.waveSpeed.copy(this.data.waveSpeed);\n    }\n\n    if (this.data.ripplesScale !== oldData.ripplesScale) {\n      this.water.ripplesScale = this.data.ripplesScale;\n    }\n\n    if (this.data.ripplesSpeed !== oldData.ripplesSpeed) {\n      this.water.ripplesSpeed = this.data.ripplesSpeed;\n    }\n  },\n\n  tick(time) {\n    this.water.update(time / 1000);\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { ParticleEmitter } from \"@mozillareality/three-particle-emitter\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { resolveUrl } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport defaultSrcImage from \"../assets/images/warning_icon.png\";\n\nconst defaultSrcUrl = new URL(defaultSrcImage, window.location.href).href;\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    resolve: { type: \"boolean\", default: true },\n    src: { type: \"string\", default: defaultSrcUrl },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\", default: 1 },\n    middleOpacity: { type: \"number\", default: 1 },\n    endOpacity: { type: \"number\", default: 1 },\n    colorCurve: { type: \"string\", default: \"linear\" },\n    sizeCurve: { type: \"string\", default: \"linear\" },\n    startSize: { type: \"number\", default: 1 },\n    endSize: { type: \"number\", default: 1 },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\", default: 1 },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\", default: 10 },\n    startVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    endVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    velocityCurve: { type: \"string\", default: \"linear\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n    if (this.data.src === defaultSrcUrl) {\n      this.data.resolve = false;\n    }\n  },\n\n  async setTexture(src, resolve) {\n    let accessibleUrl = src;\n\n    if (resolve) {\n      const result = await resolveUrl(src);\n      let canonicalUrl = result.origin;\n\n      // handle protocol relative urls\n      if (canonicalUrl.startsWith(\"//\")) {\n        canonicalUrl = location.protocol + canonicalUrl;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n    }\n\n    const texture = new THREE.Texture();\n\n    await textureLoader.loadTextureAsync(texture, accessibleUrl);\n\n    // Guard against src changing while request was in flight\n    if (this.data.src !== src) {\n      return;\n    }\n\n    this.particleEmitter.material.uniforms.map.value = texture;\n    this.particleEmitter.visible = true;\n    this.updateParticles = true;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.setTexture(data.src, data.resolve).catch(console.error);\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { TYPE, SHAPE, FIT } from \"three-ammo/constants\";\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nfunction registerRootSceneComponent(componentName) {\n  AFRAME.GLTFModelPlus.registerComponent(componentName, componentName, (el, componentName, componentData) => {\n    const sceneEl = AFRAME.scenes[0];\n\n    sceneEl.setAttribute(componentName, componentData);\n\n    sceneEl.addEventListener(\n      \"reset_scene\",\n      () => {\n        sceneEl.removeAttribute(componentName);\n      },\n      { once: true }\n    );\n  });\n}\n\nregisterRootSceneComponent(\"fog\");\nregisterRootSceneComponent(\"background\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"body-helper\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"shape-helper\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"simple-water\", \"simple-water\");\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"morph-audio-feedback\", \"morph-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"shape-helper\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation: { x: orientation.x, y: orientation.y, z: orientation.z, w: orientation.w }\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\", el => {\n  el.setAttribute(\"waypoint\", {\n    canBeSpawnPoint: true,\n    canBeOccupied: false,\n    canBeClicked: false,\n    willDisableMotion: false,\n    willDisableTeleporting: false,\n    willMaintainWorldUp: true\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"waypoint\", \"waypoint\", (el, componentName, componentData, components) => {\n  if (componentData.canBeOccupied) {\n    el.setAttribute(\"networked\", {\n      template: \"#template-waypoint-avatar\",\n      attachTemplateToLocal: false,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n  el.setAttribute(\"waypoint\", componentData);\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  const mediaLoaderAttributes = {\n    src: componentData.src,\n    fitToBox: componentData.contentSubtype ? false : true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  };\n\n  if (componentData.version) {\n    mediaLoaderAttributes.version = componentData.version;\n  }\n\n  el.setAttribute(\"media-loader\", mediaLoaderAttributes);\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pdf\", { index: componentData.pageIndex });\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nasync function mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    isControlled = componentData.controls || componentName === \"link\";\n\n    const hasVolume = componentName === \"video\" || componentName === \"audio\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\" || componentName === \"audio\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    fitToBox: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"audio\", \"audio\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    moveTheParentNotTheMesh: true\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#avatar-pov-node\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"shape-helper__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"shape-helper__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"networked-drawing-buffer\", \"networked-drawing-buffer\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-settings\", \"audio-settings\", (el, _componentName, componentData) => {\n  el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem.updateAudioSettings(componentData);\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-text\":\"loader__loading-text__QVcF3\",\"loadingText\":\"loader__loading-text__QVcF3\"};","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-e4fe68503ab5d004deb31e43636a0a7c.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_0-902121d77164d8da8f8dd09d7a9ed761.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_1-7d6e0cd0fcf8476aa9773da9bb53e399.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_2-810f2d13cb607c120556d95765b8b21d.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_3-5d247ddca0eccab1da6d29b030181195.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_4-b1e61ff7ce3ac7aa29e92ab3fd5987c5.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_5-1f8e9d84efb84989cd717fc147a80a9d.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_6-bd090b380b4bde4f23a3b10040eb5623.png\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_0-f3f46448f25bc1d8599c39fc43fc3430.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_1-99633c94256b7520f7833921094bedfe.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_2-4531e5b1d197a14e76c8d47894b62db0.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_3-167102458af413f37fc62cd5b201a010.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_4-834ee3738e00e03227ff45809c6f2fe8.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_5-b2763de169ccdb200ec5e8503170079d.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_6-6df1120c791dabb88d6b1ada0d8f973d.glb\";","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","module.exports = __webpack_public_path__ + \"assets/images/audio-0205471a2825b8450c63e45f83436997.png\";","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/add-owner-c3f352da151b4a5be71defd565720235.png\";","module.exports = __webpack_public_path__ + \"assets/images/remove-owner-02b96ad3a84badda798fde00ac4c2243.png\";","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><mask id=\\\"path-1-inside-1\\\" fill=\\\"currentColor\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M28 17C25.2386 17 23 19.2386 23 22V50C23 52.7614 25.2386 55 28 55H43C45.7614 55 48 52.7614 48 50V22C48 19.2386 45.7614 17 43 17H28ZM45 21H26V46H45V21Z\\\"></path></mask><path d=\\\"M26 21V18H23V21H26ZM45 21H48V18H45V21ZM26 46H23V49H26V46ZM45 46V49H48V46H45ZM26 22C26 20.8954 26.8954 20 28 20V14C23.5817 14 20 17.5817 20 22H26ZM26 50V22H20V50H26ZM28 52C26.8954 52 26 51.1046 26 50H20C20 54.4183 23.5817 58 28 58V52ZM43 52H28V58H43V52ZM45 50C45 51.1046 44.1046 52 43 52V58C47.4183 58 51 54.4183 51 50H45ZM45 22V50H51V22H45ZM43 20C44.1046 20 45 20.8954 45 22H51C51 17.5817 47.4183 14 43 14V20ZM28 20H43V14H28V20ZM26 24H45V18H26V24ZM29 46V21H23V46H29ZM45 43H26V49H45V43ZM42 21V46H48V21H42Z\\\" fill=\\\"currentColor\\\" mask=\\\"url(#path-1-inside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect x=\\\"25\\\" y=\\\"52\\\" width=\\\"20\\\" height=\\\"3\\\" fill=\\\"currentColor\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M17 18C15.3431 18 14 19.3431 14 21V49C14 50.6569 15.3431 52 17 52H52C53.6569 52 55 50.6569 55 49V21C55 19.3431 53.6569 18 52 18H17ZM50 24H19V46H50V24Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M56.1704 22H16.7123C15.2406 22 14 23.226 14 24.7381V47.2622C14 48.7742 15.2406 50 16.7711 50H27.5496C28.7053 50 29.6958 49.3015 30.112 48.3081L33.2462 40.8289C33.7747 39.5677 35.0324 38.6805 36.5 38.6805C37.9676 38.6805 39.2253 39.5677 39.7538 40.8289L42.888 48.3081C43.3042 49.3015 44.2947 50 45.3916 50H56.1704C57.7594 50 59 48.7742 59 47.2622V24.7381C59 23.226 57.7594 22 56.1704 22ZM26.294 40.9274C23.5369 40.9274 21.3046 38.7226 21.3046 36C21.3046 33.2774 23.5369 31.0729 26.294 31.0729C29.0507 31.0729 31.2785 33.2774 31.2785 36C31.2785 38.7226 29.0459 40.9274 26.294 40.9274ZM46.7086 40.9251C43.9531 40.9251 41.7215 38.7214 41.7215 36C41.7215 33.2789 43.9531 31.0751 46.7086 31.0751C49.4641 31.0751 51.6957 33.2789 51.6957 36C51.6957 38.7214 49.4641 40.9251 46.7086 40.9251Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 90 90\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M88.5 45C88.5 69.0244 69.0244 88.5 45 88.5C20.9756 88.5 1.5 69.0244 1.5 45C1.5 20.9756 20.9756 1.5 45 1.5C69.0244 1.5 88.5 20.9756 88.5 45Z\\\" fill=\\\"currentColor\\\" stroke=\\\"white\\\" stroke-width=\\\"3\\\"></path><path opacity=\\\"0.995697\\\" d=\\\"M14 4.5H31C36.2467 4.5 40.5 8.75329 40.5 14C40.5 19.2467 36.2467 23.5 31 23.5H14C8.75329 23.5 4.5 19.2467 4.5 14C4.5 8.75329 8.75329 4.5 14 4.5Z\\\" transform=\\\"translate(22 32)\\\" fill=\\\"currentColor\\\" fill-opacity=\\\"0.01\\\" stroke=\\\"white\\\" stroke-width=\\\"9\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M36.9396 28.0771L36.9407 28.0791L42.6084 23.8706L36.9396 28.0771ZM46.1453 21.2459L46.2056 21.2012C44.9645 13.4303 37.2392 10.5728 32.3743 12.3211C29.6618 13.2959 27.4228 15.8722 27.7725 19.6208C28.5866 19.9334 29.4993 20.3901 30.4405 20.988C29.7485 20.5556 29.02 20.1659 28.2565 19.8237C28.2326 19.8128 28.2068 19.8013 28.1798 19.7896L28.136 19.7706L28.0937 19.7526C27.9853 19.7068 27.8689 19.6597 27.7781 19.623L28.9614 31.0567L28.9592 31.0566L27.7733 19.6278C20.4643 16.8238 13.9753 21.995 13.0476 27.1085C12.5303 29.9594 13.7032 33.2419 17.1044 34.8115C17.1982 34.7357 17.2955 34.6596 17.3959 34.5834C17.2963 34.6596 17.1885 34.7455 17.1049 34.8122L27.5308 39.4958L17.1057 34.8158C11.0378 39.7828 12.272 48.063 16.2093 51.4281C18.4026 53.3028 21.7772 53.8141 24.8267 51.6413C24.8271 51.6437 24.8274 51.646 24.8278 51.6483C26.0717 59.4153 33.7589 62.5507 38.6227 60.8028C41.3351 59.828 43.5405 57.1432 43.1908 53.3947L43.1887 53.3938L42.0629 41.9876C42.8049 42.023 43.5494 42.0128 44.2918 41.9565C43.5693 42.013 42.8273 42.0263 42.0704 41.9884L43.1917 53.3903C50.5007 56.1943 57.0086 51.0182 57.9363 45.9048C58.4531 43.0563 57.261 39.8491 53.8666 38.2781L53.8726 38.2733L53.8813 38.2772C59.9492 33.3103 58.733 25.03 54.7957 21.6649C52.6011 19.7892 49.2551 19.0298 46.2043 21.2065L46.204 21.2049L46.1453 21.2459ZM24.7381 50.8659C24.6885 50.2898 24.6664 49.7171 24.6708 49.1492C24.6627 49.7549 24.6868 50.3301 24.7381 50.8659ZM26.4947 41.3573C26.7594 40.8103 27.0509 40.2765 27.3679 39.7576C27.0437 40.2833 26.7535 40.8179 26.4947 41.3573ZM35.899 47.811C35.2143 46.9425 34.5955 45.9912 34.0836 44.9638L34.0848 44.9629C34.6027 45.966 35.2091 46.9197 35.899 47.811ZM42.77 53.2217L42.8006 53.2352L42.838 53.2515C42.3392 53.0395 41.811 52.7758 41.2672 52.4623C41.7518 52.7362 42.2529 52.9898 42.77 53.2217ZM53.4572 38.5906C52.3548 39.3893 51.1917 40.0449 49.9897 40.5607C51.3569 39.983 52.5339 39.2898 53.4572 38.5906ZM46.1688 26.3694L46.1608 26.4207L46.1521 26.476C46.2432 25.8756 46.3047 25.2674 46.3351 24.6529C46.3103 25.2118 46.2582 25.786 46.1688 26.3694ZM46.2315 21.5027C46.252 21.7142 46.2709 21.9316 46.2875 22.1546C46.2786 22.0527 46.2688 21.9506 46.2582 21.8485C46.2556 21.8247 46.253 21.7961 46.2504 21.7643L46.2478 21.7306L46.243 21.6663L46.2363 21.5711L46.2315 21.5027ZM36.7446 27.7097C36.2049 26.7199 35.5771 25.7805 34.8671 24.9054C35.5604 25.7504 36.1988 26.6857 36.7446 27.7097ZM28.5085 31.0408C27.3591 31.0152 26.205 31.0989 25.0634 31.2945C26.1819 31.0909 27.3412 30.9931 28.5085 31.0408ZM18.1473 34.0527C18.0911 34.0902 18.0351 34.128 17.9792 34.1662C17.9387 34.1939 17.8983 34.2218 17.858 34.2498C17.7852 34.3004 17.7128 34.3516 17.6405 34.4034C17.5975 34.4343 17.5545 34.4654 17.5117 34.4967L17.5087 34.4989C17.7096 34.35 17.9229 34.2008 18.1473 34.0527Z\\\" fill=\\\"url(#paint0_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M28.9603 31.0463L27.7733 19.6074C20.4643 16.8034 13.9753 21.9747 13.0476 27.0881C12.5303 29.939 13.7032 33.2215 17.1044 34.7911C19.5285 32.8327 24.2134 30.6976 28.9603 31.0463Z\\\" fill=\\\"url(#paint1_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M27.532 39.4763L17.1056 34.7954C11.0378 39.7623 12.272 48.0426 16.2093 51.4077C18.4045 53.2839 21.7828 53.7945 24.8343 51.6155C24.3519 48.5236 24.8343 43.6784 27.532 39.4763Z\\\" fill=\\\"url(#paint2_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M34.0831 44.9423L24.8273 51.6222C26.0684 59.3932 33.7578 62.5307 38.6228 60.7824C41.3352 59.8076 43.5405 57.1228 43.1909 53.3743C40.3075 52.2601 36.2428 49.2778 34.0831 44.9423Z\\\" fill=\\\"url(#paint3_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M42.0704 41.968L43.1917 53.3699C50.5007 56.1739 57.0086 50.9978 57.9363 45.8844C58.4536 43.0334 57.259 39.8232 53.8578 38.2536C51.5074 40.1955 47.1197 42.221 42.0704 41.968Z\\\" fill=\\\"url(#paint4_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M43.4933 33.5267L53.8813 38.2568C59.9492 33.2899 58.733 25.0096 54.7957 21.6445C52.6005 19.7683 49.2533 19.0089 46.2018 21.1879C46.3564 22.6597 46.4588 24.4579 46.1687 26.349C45.8099 28.6889 44.997 31.1531 43.4933 33.5267Z\\\" fill=\\\"url(#paint5_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M36.9358 28.0596L46.2056 21.1809C44.9645 13.4099 37.2392 10.5524 32.3742 12.3008C29.6618 13.2755 27.4228 15.8519 27.7725 19.6004C30.6226 20.6949 34.6806 23.5543 36.9358 28.0596Z\\\" fill=\\\"url(#paint6_radial)\\\"></path><defs><radialGradient id=\\\"paint0_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(17.6669 15.2447) rotate(53.2605) scale(49.8783 48.801)\\\"><stop stop-color=\\\"#F5F5F5\\\"></stop><stop offset=\\\"0.412807\\\" stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#DBDBDB\\\"></stop></radialGradient><radialGradient id=\\\"paint1_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(19.3019 36.2829) rotate(-103.017) scale(10.8394 10.8734)\\\"><stop stop-color=\\\"$ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint2_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(27.1801 50.5029) rotate(-163.042) scale(10.7545 10.9388)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint3_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(43.3906 50.7488) rotate(136.694) scale(10.7723 10.8964)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint4_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(51.6998 36.7682) rotate(76.9667) scale(10.7941 10.8401)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint5_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(43.7493 22.4711) rotate(17.0544) scale(10.8065 10.917)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint6_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(27.6037 22.3039) rotate(-43.1622) scale(10.8536 10.8674)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient></defs></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-url-dialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\",\"avatarUrlDialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\"};","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-frame\":\"feedback-dialog__form-frame__1gfk_\",\"formFrame\":\"feedback-dialog__form-frame__1gfk_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leave-room\":\"leave-room-dialog__leave-room__31Jf7\",\"leaveRoom\":\"leave-room-dialog__leave-room__31Jf7\"};","module.exports = \"<svg viewBox=\\\"0 0 64 64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M37.681 23.5792C36.9 22.7981 35.6337 22.7981 34.8526 23.5792L28.061 30.3708L33.6796 35.9893L40.4712 29.1977C41.2522 28.4167 41.2522 27.1503 40.4712 26.3693L37.681 23.5792ZM32.1187 37.5501L26.5002 31.9316L6.46454 51.9672C5.68349 52.7483 5.68349 54.0146 6.46454 54.7957L9.25466 57.5858C10.0357 58.3668 11.302 58.3668 12.0831 57.5858L32.1187 37.5501Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M27.2783 2.46352C27.4279 2.00287 28.0797 2.00287 28.2293 2.46353L29.9356 7.71476C30.0025 7.92078 30.1945 8.06026 30.4111 8.06026L35.9326 8.06026C36.4169 8.06026 36.6183 8.68006 36.2265 8.96476L31.7595 12.2102C31.5842 12.3375 31.5109 12.5632 31.5779 12.7692L33.2841 18.0205C33.4338 18.4811 32.9065 18.8642 32.5147 18.5795L28.0477 15.334C27.8724 15.2067 27.6352 15.2067 27.4599 15.334L22.9929 18.5795C22.6011 18.8642 22.0738 18.4811 22.2235 18.0205L23.9297 12.7692C23.9967 12.5632 23.9234 12.3375 23.7481 12.2102L19.2811 8.96476C18.8893 8.68006 19.0907 8.06026 19.575 8.06026L25.0965 8.06026C25.3131 8.06026 25.5051 7.92078 25.572 7.71476L27.2783 2.46352Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M48.3949 10.6377C48.5445 10.177 49.1962 10.177 49.3459 10.6377L50.2875 13.5355C50.3544 13.7415 50.5464 13.881 50.763 13.881H53.81C54.2943 13.881 54.4957 14.5008 54.1039 14.7855L51.6388 16.5764C51.4636 16.7038 51.3902 16.9295 51.4572 17.1355L52.3987 20.0333C52.5484 20.4939 52.0212 20.877 51.6293 20.5923L49.1643 18.8013C48.989 18.674 48.7517 18.674 48.5765 18.8013L46.1115 20.5923C45.7196 20.877 45.1924 20.4939 45.342 20.0333L46.2836 17.1355C46.3505 16.9295 46.2772 16.7038 46.102 16.5764L43.6369 14.7855C43.2451 14.5008 43.4465 13.881 43.9308 13.881H46.9778C47.1944 13.881 47.3864 13.7415 47.4533 13.5355L48.3949 10.6377Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M49.7572 31.0731C49.9069 30.6124 50.5586 30.6124 50.7083 31.0731L51.9557 34.9123C52.0226 35.1183 52.2146 35.2577 52.4312 35.2577H56.468C56.9524 35.2577 57.1537 35.8776 56.7619 36.1623L53.4961 38.535C53.3208 38.6623 53.2475 38.888 53.3144 39.094L54.5619 42.9332C54.7116 43.3939 54.1843 43.7769 53.7925 43.4922L50.5266 41.1195C50.3514 40.9922 50.1141 40.9922 49.9389 41.1195L46.6731 43.4922C46.2812 43.7769 45.754 43.3939 45.9036 42.9332L47.1511 39.094C47.218 38.888 47.1447 38.6623 46.9694 38.535L43.7036 36.1623C43.3118 35.8776 43.5131 35.2577 43.9975 35.2577H48.0343C48.2509 35.2577 48.4429 35.1183 48.5098 34.9123L49.7572 31.0731Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 245 240\\\"><style>.st0{fill:currentColor;}</style><path class=\\\"st0\\\" d=\\\"M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z\\\"></path><path class=\\\"st0\\\" d=\\\"M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 32 32\\\" fill=\\\"currentColor\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><g id=\\\"device icon\\\"><path id=\\\"Vector 2\\\" d=\\\"M37.5 12C39.2921 12.2907 42.9409 13.0468 43.9308 13.5486C43.5236 1.76734 37.0468 -0.180441 33.5 2C37.7222 3.12137 37.6018 9.45614 37.5 12Z\\\" fill=\\\"#C4C4C4\\\"></path><path id=\\\"Vector 2.1\\\" d=\\\"M37.5 12C39.2921 12.2907 42.9409 13.0468 43.9308 13.5486C43.5236 1.76734 37.0468 -0.180441 33.5 2C37.7222 3.12137 37.6018 9.45614 37.5 12Z\\\" fill=\\\"#EFEFEF\\\"></path><g id=\\\"Subtract\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M27.5209 16.7286C28.8705 16.9007 30.167 16.1431 30.6795 14.8828C31.2166 13.5623 31.744 12.3973 32.2569 11.3735C33.4626 11.4107 34.5557 11.45 35.5 11.5C40.6072 11.7706 43.9609 13.2812 46.0424 15.3205C44.6124 15.9529 42.8928 16.8012 41.241 17.6476C39.5412 18.5184 37.8927 19.3977 36.6705 20.0585C36.059 20.3892 35.5532 20.6656 35.2001 20.8596C35.0234 20.9566 34.8849 21.033 34.7903 21.0853L34.644 21.1663C34.1086 21.4638 33.8079 22.057 33.8844 22.6648L33.8935 31.1305C33.9531 31.6039 34.2344 32.0208 34.6512 32.2532C35.0731 32.4938 35.5692 32.4314 36.0506 32.2866L36.1806 32.2269C36.294 32.1746 36.4598 32.098 36.6704 32C36.9037 31.8914 37.1922 31.7565 37.5258 31.5992C37.7946 31.4724 38.0927 31.3311 38.4147 31.1773L38.6575 31.0614C40.1664 30.3413 42.8905 29.0412 44.7287 28.0867C45.9328 27.4615 47.1537 26.8042 48.2714 26.1612C47.8862 27.1642 47.3632 28.0057 46.77 28.5856L29.5 38C28.0825 36.957 28.5674 36.3965 29.432 35.3968C30.97 33.6185 33.7096 30.4509 29.0818 20.7075C23.4626 16.2822 10.8481 16.1996 5.46832 16.1644C3.72919 16.153 2.74615 16.1466 3 16C4.71545 15.0093 15.9421 11.8416 19.6582 10.9238C19.5714 11.1113 19.4879 11.2913 19.4076 11.463C19.3668 11.5502 19.3269 11.6352 19.2878 11.7179C18.8773 12.5863 18.9074 13.5989 19.369 14.4414C19.8304 15.2838 20.6675 15.8543 21.6204 15.9759L27.5209 16.7286Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M30.6795 14.8828L30.2163 14.6945L30.2163 14.6945L30.6795 14.8828ZM27.5209 16.7286L27.5842 16.2326L27.5842 16.2326L27.5209 16.7286ZM32.2569 11.3735L32.2723 10.8738L31.953 10.8639L31.8099 11.1496L32.2569 11.3735ZM35.5 11.5L35.5265 11.0007L35.5265 11.0007L35.5 11.5ZM46.0424 15.3205L46.2447 15.7778L46.9192 15.4795L46.3923 14.9633L46.0424 15.3205ZM41.241 17.6476L41.469 18.0925L41.469 18.0925L41.241 17.6476ZM36.6705 20.0585L36.4327 19.6187L36.4327 19.6187L36.6705 20.0585ZM35.2001 20.8596L35.4407 21.2979L35.4408 21.2978L35.2001 20.8596ZM34.7903 21.0853L34.5485 20.6477L34.548 20.6479L34.7903 21.0853ZM34.644 21.1663L34.4018 20.7289L34.4012 20.7292L34.644 21.1663ZM33.8844 22.6648L34.3844 22.6643L34.3844 22.6332L34.3805 22.6023L33.8844 22.6648ZM33.8935 31.1305L33.3935 31.131L33.3935 31.1621L33.3974 31.193L33.8935 31.1305ZM34.6512 32.2532L34.8989 31.8188L34.8947 31.8165L34.6512 32.2532ZM36.0506 32.2866L36.1945 32.7655L36.2278 32.7555L36.2594 32.7409L36.0506 32.2866ZM36.1806 32.2269L36.3894 32.6812L36.3898 32.681L36.1806 32.2269ZM36.6704 32L36.8814 32.4533L36.8814 32.4533L36.6704 32ZM37.5258 31.5992L37.7391 32.0514L37.7391 32.0514L37.5258 31.5992ZM38.4147 31.1773L38.1994 30.7261L38.1993 30.7261L38.4147 31.1773ZM38.6575 31.0614L38.4422 30.6102L38.4422 30.6102L38.6575 31.0614ZM44.7287 28.0867L44.4983 27.643L44.4983 27.643L44.7287 28.0867ZM48.2714 26.1612L48.7381 26.3405L49.2432 25.0252L48.022 25.7278L48.2714 26.1612ZM46.77 28.5856L47.0093 29.0246L47.0701 28.9915L47.1196 28.9431L46.77 28.5856ZM29.5 38L29.2037 38.4027L29.46 38.5913L29.7393 38.439L29.5 38ZM29.432 35.3968L29.8102 35.7238V35.7238L29.432 35.3968ZM29.0818 20.7075L29.5335 20.493L29.4832 20.3872L29.3912 20.3147L29.0818 20.7075ZM5.46832 16.1644L5.46505 16.6644H5.46505L5.46832 16.1644ZM3 16L2.74994 15.567L2.74994 15.567L3 16ZM19.6582 10.9238L20.1119 11.1338L20.5495 10.1886L19.5383 10.4383L19.6582 10.9238ZM19.4076 11.463L19.8605 11.6748L19.8605 11.6748L19.4076 11.463ZM19.2878 11.7179L18.8358 11.5041L18.8357 11.5042L19.2878 11.7179ZM19.369 14.4414L19.8075 14.2011L19.8075 14.2011L19.369 14.4414ZM21.6204 15.9759L21.6837 15.4799L21.6204 15.9759ZM30.2163 14.6945C29.7892 15.7447 28.7088 16.3761 27.5842 16.2326L27.4577 17.2246C29.0321 17.4254 30.5447 16.5416 31.1427 15.0712L30.2163 14.6945ZM31.8099 11.1496C31.2905 12.1863 30.7577 13.3633 30.2163 14.6945L31.1427 15.0712C31.6754 13.7614 32.1975 12.6083 32.7039 11.5975L31.8099 11.1496ZM35.5265 11.0007C34.5764 10.9504 33.4789 10.911 32.2723 10.8738L32.2415 11.8733C33.4464 11.9104 34.5349 11.9496 35.4735 11.9993L35.5265 11.0007ZM46.3923 14.9633C44.2011 12.8166 40.7191 11.2759 35.5265 11.0007L35.4735 11.9993C40.4953 12.2654 43.7206 13.7459 45.6925 15.6777L46.3923 14.9633ZM41.469 18.0925C43.1179 17.2477 44.8276 16.4045 46.2447 15.7778L45.8402 14.8632C44.3972 15.5014 42.6677 16.3548 41.013 17.2026L41.469 18.0925ZM36.9083 20.4984C38.1286 19.8386 39.7736 18.9611 41.469 18.0925L41.013 17.2026C39.3088 18.0757 37.6568 18.9569 36.4327 19.6187L36.9083 20.4984ZM35.4408 21.2978C35.7931 21.1043 36.2979 20.8284 36.9083 20.4984L36.4327 19.6187C35.8201 19.95 35.3134 20.2269 34.9594 20.4213L35.4408 21.2978ZM35.0321 21.5229C35.1264 21.4708 35.2645 21.3946 35.4407 21.2979L34.9594 20.4213C34.7823 20.5186 34.6434 20.5952 34.5485 20.6477L35.0321 21.5229ZM34.8863 21.6037L35.0325 21.5227L34.548 20.6479L34.4018 20.7289L34.8863 21.6037ZM34.3805 22.6023C34.3295 22.1972 34.5299 21.8017 34.8869 21.6033L34.4012 20.7292C33.6872 21.1259 33.2863 21.9169 33.3883 22.7273L34.3805 22.6023ZM34.3935 31.1299L34.3844 22.6643L33.3844 22.6653L33.3935 31.131L34.3935 31.1299ZM34.8947 31.8165C34.6169 31.6615 34.4293 31.3836 34.3896 31.068L33.3974 31.193C33.4769 31.8242 33.852 32.38 34.4077 32.6898L34.8947 31.8165ZM35.9067 31.8078C35.454 31.9439 35.1332 31.9525 34.8989 31.8188L34.4034 32.6875C35.0129 33.0351 35.6843 32.9188 36.1945 32.7655L35.9067 31.8078ZM35.9718 31.7726L35.8418 31.8323L36.2594 32.7409L36.3894 32.6812L35.9718 31.7726ZM36.4594 31.5467C36.2495 31.6444 36.0843 31.7207 35.9714 31.7728L36.3898 32.681C36.5037 32.6285 36.6701 32.5516 36.8814 32.4533L36.4594 31.5467ZM37.3125 31.1469C36.9798 31.3039 36.692 31.4384 36.4594 31.5467L36.8814 32.4533C37.1153 32.3444 37.4046 32.2091 37.7391 32.0514L37.3125 31.1469ZM38.1993 30.7261C37.878 30.8795 37.5806 31.0205 37.3125 31.1469L37.7391 32.0514C38.0085 31.9243 38.3073 31.7827 38.6302 31.6285L38.1993 30.7261ZM38.4422 30.6102L38.1994 30.7261L38.6301 31.6286L38.8729 31.5127L38.4422 30.6102ZM44.4983 27.643C42.6691 28.5928 39.9535 29.8889 38.4422 30.6102L38.8729 31.5127C40.3793 30.7937 43.1119 29.4897 44.9591 28.5305L44.4983 27.643ZM48.022 25.7278C46.9126 26.3661 45.6984 27.0198 44.4983 27.643L44.9591 28.5305C46.1672 27.9031 47.3949 27.2423 48.5207 26.5946L48.022 25.7278ZM47.1196 28.9431C47.7765 28.3009 48.3341 27.3925 48.7381 26.3405L47.8046 25.982C47.4382 26.9359 46.95 27.7104 46.4205 28.2281L47.1196 28.9431ZM29.7393 38.439L47.0093 29.0246L46.5307 28.1466L29.2607 37.561L29.7393 38.439ZM29.0538 35.0697C28.843 35.3134 28.6308 35.5579 28.4674 35.7941C28.3039 36.0304 28.1557 36.3043 28.1145 36.6168C28.0235 37.3074 28.4737 37.8656 29.2037 38.4027L29.7963 37.5973C29.1089 37.0914 29.0927 36.8479 29.1059 36.7475C29.1169 36.6645 29.1634 36.5457 29.2897 36.3631C29.4161 36.1804 29.5887 35.9799 29.8102 35.7238L29.0538 35.0697ZM28.6302 20.922C30.9222 25.7476 31.3544 28.8735 31.0735 30.9728C30.7952 33.0523 29.8106 34.1947 29.0538 35.0697L29.8102 35.7238C30.5914 34.8206 31.7455 33.4901 32.0647 31.1054C32.3811 28.7404 31.8693 25.4108 29.5335 20.493L28.6302 20.922ZM5.46505 16.6644C8.15636 16.682 12.627 16.7117 17.122 17.2857C21.6411 17.8627 26.0783 18.9786 28.7725 21.1003L29.3912 20.3147C26.4662 18.0111 21.7865 16.8731 17.2486 16.2937C12.6865 15.7112 8.16005 15.682 5.47159 15.6644L5.46505 16.6644ZM2.74994 15.567C2.71449 15.5875 2.63778 15.6347 2.57251 15.7184C2.4953 15.8174 2.40557 16.0157 2.50093 16.2425C2.57364 16.4154 2.71294 16.4913 2.7561 16.5134C2.81543 16.5439 2.87237 16.5607 2.91009 16.5703C3.05002 16.6061 3.25286 16.622 3.46207 16.6323C3.90703 16.6543 4.60126 16.6588 5.46505 16.6644L5.4716 15.6644C4.59625 15.6587 3.9294 15.6542 3.51152 15.6335C3.40834 15.6284 3.32552 15.6226 3.26166 15.616C3.22991 15.6128 3.20507 15.6096 3.18627 15.6067C3.177 15.6053 3.16997 15.604 3.16491 15.603C3.15975 15.602 3.15762 15.6015 3.15795 15.6015C3.15808 15.6016 3.16273 15.6028 3.17068 15.6055C3.17813 15.6081 3.19331 15.6138 3.21289 15.6239C3.23191 15.6336 3.35604 15.6962 3.42276 15.8549C3.51215 16.0675 3.42563 16.2506 3.36106 16.3334C3.30842 16.4009 3.25378 16.4308 3.25006 16.433L2.74994 15.567ZM19.5383 10.4383C17.6705 10.8997 13.9271 11.9233 10.4371 12.955C8.69171 13.4711 7.00533 13.9904 5.64585 14.4436C4.3085 14.8894 3.23173 15.2888 2.74994 15.567L3.25006 16.433C3.62599 16.2159 4.59586 15.8477 5.9621 15.3923C7.30623 14.9442 8.98043 14.4285 10.7206 13.914C14.2019 12.8848 17.9298 11.8657 19.7781 11.4092L19.5383 10.4383ZM19.8605 11.6748C19.9412 11.5022 20.0251 11.3215 20.1119 11.1338L19.2045 10.7137C19.1178 10.901 19.0345 11.0804 18.9547 11.2512L19.8605 11.6748ZM19.7398 11.9317C19.7793 11.8481 19.8195 11.7624 19.8605 11.6748L18.9547 11.2512C18.9141 11.3379 18.8745 11.4223 18.8358 11.5041L19.7398 11.9317ZM19.8075 14.2011C19.4228 13.4991 19.3977 12.6553 19.7398 11.9316L18.8357 11.5042C18.3568 12.5174 18.392 13.6987 18.9305 14.6816L19.8075 14.2011ZM21.6837 15.4799C20.8896 15.3786 20.192 14.9032 19.8075 14.2011L18.9304 14.6816C19.4689 15.6645 20.4455 16.3301 21.5572 16.4719L21.6837 15.4799ZM27.5842 16.2326L21.6837 15.4799L21.5572 16.4719L27.4577 17.2246L27.5842 16.2326Z\\\" fill=\\\"currentColor\\\"></path></g><path id=\\\"Vector 2_2\\\" d=\\\"M22 13L27.9005 13.7527C35.7204 -5.47592 43.5914 1.80677 44.1005 14.3013C44.0496 6.10544 41.4074 -0.0498744 33.7029 0.000304595C27.5393 0.0404478 24.1269 8.50061 22 13Z\\\" fill=\\\"currentColor\\\"></path><path id=\\\"Vector\\\" d=\\\"M30.0146 35.5184C30.6209 34.4891 31.0856 32.6318 31.0919 29.3392C30.6547 23.0315 29.594 21.1437 28.0037 20.1879C27.075 19.6298 25.7496 19.2525 23.6724 18.9311C22.4151 18.7366 21.0244 18.5798 19.4032 18.3969C18.3173 18.2744 17.1281 18.1402 15.8062 17.9753C14.4882 17.8108 13.3113 17.65 12.2415 17.5038C10.7839 17.3046 9.52502 17.1325 8.3785 17.0155C6.3889 16.8124 5.1769 16.8342 4.37736 17.0632C3.75934 17.2402 3.34932 17.5441 2.9782 18.3246C2.54305 19.2397 2.20891 20.7381 2.00005 23.2152C2.01122 29.3363 3.26876 31.3737 4.77762 32.3943C5.64876 32.9836 6.81469 33.386 8.46877 33.7555C9.28645 33.9381 10.1726 34.1028 11.1646 34.2866L11.1946 34.2922C12.1523 34.4696 13.1959 34.663 14.2995 34.8984C16.2798 35.2154 18.1882 35.6107 19.9036 35.966C20.7256 36.1363 21.5034 36.2974 22.2235 36.4363C24.575 36.8898 26.3227 37.1091 27.6414 36.9478C28.8125 36.8045 29.5026 36.3874 30.0146 35.5184Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4\\\"></path><path id=\\\"Vector 3\\\" d=\\\"M36.6921 29L36.6921 23.1034C40.7408 21.1901 45.2593 18.8099 48 17.5C49.86 16.611 51.371 17.3214 51.7408 19.1901C52 20.5 51.1543 21.8739 50 22.5C48.8457 23.1261 36.6921 29 36.6921 29Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\"};","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","module.exports = \"<svg viewBox=\\\"0 0 31 31\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"15.5\\\" cy=\\\"15.5\\\" r=\\\"14.5\\\" fill=\\\"currentColor\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M18.3345 12.9125C17.944 12.522 17.3108 12.522 16.9203 12.9125L14.8338 14.999L16.7466 16.9118L18.8331 14.8253C19.2236 14.4348 19.2236 13.8016 18.8331 13.4111L18.3345 12.9125ZM16.2152 17.4432L14.3024 15.5304L7.70711 22.1257C7.31658 22.5162 7.31658 23.1494 7.70711 23.5399L8.20568 24.0385C8.59621 24.429 9.22937 24.429 9.6199 24.0385L16.2152 17.4432Z\\\" fill=\\\"white\\\"></path><path d=\\\"M14.539 5.58541C14.5989 5.40115 14.8595 5.40115 14.9194 5.58541L15.4653 7.26541C15.4921 7.34781 15.5688 7.40361 15.6555 7.40361H17.4219C17.6157 7.40361 17.6962 7.65153 17.5395 7.76541L16.1104 8.80371C16.0403 8.85463 16.011 8.94491 16.0378 9.02731L16.5836 10.7073C16.6435 10.8916 16.4326 11.0448 16.2759 10.9309L14.8468 9.89262C14.7767 9.84169 14.6817 9.84169 14.6116 9.89262L13.1826 10.9309C13.0258 11.0448 12.8149 10.8916 12.8748 10.7073L13.4206 9.02731C13.4474 8.94491 13.4181 8.85463 13.348 8.80371L11.9189 7.76541C11.7622 7.65153 11.8427 7.40361 12.0365 7.40361H13.8029C13.8896 7.40361 13.9664 7.34781 13.9931 7.26541L14.539 5.58541Z\\\" fill=\\\"white\\\"></path><path d=\\\"M21.728 8.36823C21.7878 8.18397 22.0485 8.18397 22.1084 8.36823L22.3939 9.24703C22.4207 9.32943 22.4975 9.38523 22.5841 9.38523H23.5081C23.7019 9.38523 23.7824 9.63315 23.6257 9.74703L22.8782 10.2902C22.8081 10.3411 22.7787 10.4314 22.8055 10.5138L23.091 11.3926C23.1509 11.5768 22.94 11.73 22.7833 11.6162L22.0357 11.073C21.9656 11.0221 21.8707 11.0221 21.8006 11.073L21.0531 11.6162C20.8963 11.73 20.6854 11.5768 20.7453 11.3926L21.0308 10.5138C21.0576 10.4314 21.0283 10.3411 20.9582 10.2902L20.2106 9.74703C20.0539 9.63315 20.1344 9.38523 20.3282 9.38523H21.2522C21.3388 9.38523 21.4156 9.32943 21.4424 9.24703L21.728 8.36823Z\\\" fill=\\\"white\\\"></path><path d=\\\"M22.1918 15.3253C22.2516 15.141 22.5123 15.141 22.5722 15.3253L22.9618 16.5246C22.9886 16.607 23.0654 16.6628 23.1521 16.6628H24.4131C24.6068 16.6628 24.6874 16.9107 24.5306 17.0246L23.5104 17.7658C23.4403 17.8167 23.411 17.907 23.4378 17.9894L23.8275 19.1887C23.8873 19.3729 23.6764 19.5261 23.5197 19.4123L22.4995 18.6711C22.4294 18.6201 22.3345 18.6201 22.2644 18.6711L21.2442 19.4123C21.0875 19.5261 20.8766 19.3729 20.9365 19.1887L21.3261 17.9894C21.3529 17.907 21.3236 17.8167 21.2535 17.7658L20.2333 17.0246C20.0766 16.9107 20.1571 16.6628 20.3509 16.6628H21.6119C21.6985 16.6628 21.7753 16.607 21.8021 16.5246L22.1918 15.3253Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"11.5005\\\" y=\\\"23\\\" width=\\\"10\\\" height=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.5005 9C8.84363 9 7.50049 10.3431 7.50049 12V20C7.50049 21.6569 8.84363 23 10.5005 23H22.5005C24.1573 23 25.5005 21.6569 25.5005 20V12C25.5005 10.3431 24.1573 9 22.5005 9H10.5005ZM11.5005 12C10.9482 12 10.5005 12.4477 10.5005 13V19C10.5005 19.5523 10.9482 20 11.5005 20H21.5005C22.0528 20 22.5005 19.5523 22.5005 19V13C22.5005 12.4477 22.0528 12 21.5005 12H11.5005Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><rect x=\\\"11.5005\\\" y=\\\"23\\\" width=\\\"10\\\" height=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.5005 9C8.84363 9 7.50049 10.3431 7.50049 12V20C7.50049 21.6569 8.84363 23 10.5005 23H22.5005C24.1573 23 25.5005 21.6569 25.5005 20V12C25.5005 10.3431 24.1573 9 22.5005 9H10.5005ZM11.5005 12C10.9482 12 10.5005 12.4477 10.5005 13V19C10.5005 19.5523 10.9482 20 11.5005 20H21.5005C22.0528 20 22.5005 19.5523 22.5005 19V13C22.5005 12.4477 22.0528 12 21.5005 12H11.5005Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"8.00049\\\" y=\\\"11\\\" width=\\\"14\\\" height=\\\"11\\\" rx=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M25.8032 12.7057C25.3814 12.5114 24.8337 12.5587 24.4733 12.8475L20.8237 15.7718C20.3927 16.1171 20.3927 16.677 20.8237 17.0224L24.568 20.0225C24.902 20.2901 25.3968 20.3503 25.8032 20.2032V12.7057Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><rect x=\\\"8.00049\\\" y=\\\"11\\\" width=\\\"14\\\" height=\\\"11\\\" rx=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M25.8032 12.7057C25.3814 12.5114 24.8337 12.5587 24.4733 12.8475L20.8237 15.7718C20.3927 16.1171 20.3927 16.677 20.8237 17.0224L24.568 20.0225C24.902 20.2901 25.3968 20.3503 25.8032 20.2032V12.7057Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><path d=\\\"M8.75049 24H24.2505C24.5266 24 24.7505 24.2239 24.7505 24.5C24.7505 24.7761 24.5266 25 24.2505 25H9.75049C9.1982 25 8.75049 24.5523 8.75049 24Z\\\" fill=\\\"white\\\"></path><path d=\\\"M10.0005 17.9508L14.0005 22L10.1844 23.0407C9.43889 23.2441 8.7543 22.561 8.95595 21.815L10.0005 17.9508ZM24.7934 9.8226C25.1839 10.2131 25.1839 10.8463 24.7934 11.2368L14.5497 21.4805L10.5207 17.4508L20.7637 7.20715C21.1542 6.81661 21.7874 6.8166 22.1779 7.20713L24.7934 9.8226Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path d=\\\"M8.75049 24H24.2505C24.5266 24 24.7505 24.2239 24.7505 24.5C24.7505 24.7761 24.5266 25 24.2505 25H9.75049C9.1982 25 8.75049 24.5523 8.75049 24Z\\\" fill=\\\"white\\\"></path><path d=\\\"M10.0005 17.9508L14.0005 22L10.1844 23.0407C9.43889 23.2441 8.7543 22.561 8.95595 21.815L10.0005 17.9508ZM24.7934 9.8226C25.1839 10.2131 25.1839 10.8463 24.7934 11.2368L14.5497 21.4805L10.5207 17.4508L20.7637 7.20715C21.1542 6.81661 21.7874 6.8166 22.1779 7.20713L24.7934 9.8226Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.26715 10C7.56759 10 7.00049 10.5698 7.00049 11.2727V22.7273C7.00049 23.4302 7.56759 24 8.26715 24H24.7338C25.4334 24 26.0005 23.4302 26.0005 22.7273V11.2727C26.0005 10.5698 25.4334 10 24.7338 10H8.26715ZM9.13382 11C8.5079 11 8.00049 11.1628 8.00049 11.3636V14.6364C8.00049 14.8372 8.5079 15 9.13382 15H23.8672C24.4931 15 25.0005 14.8372 25.0005 14.6364V11.3636C25.0005 11.1628 24.4931 11 23.8672 11H9.13382Z\\\" fill=\\\"white\\\"></path><circle cx=\\\"16.5005\\\" cy=\\\"19.5\\\" r=\\\"3\\\" stroke=\\\"#404040\\\"></circle></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.26715 10C7.56759 10 7.00049 10.5698 7.00049 11.2727V22.7273C7.00049 23.4302 7.56759 24 8.26715 24H24.7338C25.4334 24 26.0005 23.4302 26.0005 22.7273V11.2727C26.0005 10.5698 25.4334 10 24.7338 10H8.26715ZM9.13382 11C8.5079 11 8.00049 11.1628 8.00049 11.3636V14.6364C8.00049 14.8372 8.5079 15 9.13382 15H23.8672C24.4931 15 25.0005 14.8372 25.0005 14.6364V11.3636C25.0005 11.1628 24.4931 11 23.8672 11H9.13382Z\\\" fill=\\\"white\\\"></path><circle cx=\\\"16.5005\\\" cy=\\\"19.5\\\" r=\\\"3\\\" stroke=\\\"#404040\\\"></circle></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"74\\\" width=\\\"22\\\" height=\\\"10\\\"><rect x=\\\"53.3186\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"65\\\" width=\\\"22\\\" height=\\\"19\\\"><rect x=\\\"53.3186\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3186\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"56\\\" width=\\\"22\\\" height=\\\"28\\\"><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"47\\\" width=\\\"22\\\" height=\\\"37\\\"><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"38\\\" width=\\\"22\\\" height=\\\"46\\\"><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"28\\\" width=\\\"22\\\" height=\\\"56\\\"><rect x=\\\"53.3187\\\" y=\\\"28.944\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"19\\\" width=\\\"22\\\" height=\\\"65\\\"><rect x=\\\"53.3187\\\" y=\\\"19.8525\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"28.944\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"white\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFEAED\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFD2D8\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFAEB9\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF8D9D\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF7083\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF6479\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM47.6375 40.5516L44.809 43.38L47.6375 40.5516ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM40.5664 80.3774L37.738 77.549L40.5664 80.3774ZM47.6375 87.4485L44.809 84.6201L47.6375 87.4485ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4634 47.6226C89.416 45.67 89.416 42.5042 87.4634 40.5515C85.5108 38.5989 82.3449 38.5989 80.3923 40.5515L64.0149 56.929L47.6375 40.5516C45.6849 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6849 89.4011 47.6375 87.4485L64.0149 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4634 87.4486C89.416 85.4959 89.416 82.3301 87.4634 80.3775L71.0859 64.0001L87.4634 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4634 47.6226C89.416 45.67 89.416 42.5042 87.4634 40.5515C85.5108 38.5989 82.3449 38.5989 80.3923 40.5515L64.0149 56.929L47.6375 40.5516C45.6849 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6849 89.4011 47.6375 87.4485L64.0149 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4634 87.4486C89.416 85.4959 89.416 82.3301 87.4634 80.3775L71.0859 64.0001L87.4634 47.6226Z\\\" fill=\\\"#FF3550\\\"></path><path d=\\\"M64.0149 56.929L61.1864 59.7574L64.0149 62.5858L66.8433 59.7574L64.0149 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM40.5664 47.6227L43.3948 44.7942L40.5664 47.6227ZM56.9438 64.0001L59.7722 66.8285L62.6007 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0149 71.0711L66.8433 68.2427L64.0149 65.4143L61.1864 68.2427L64.0149 71.0711ZM87.4634 87.4486L90.2918 90.277L90.2918 90.277L87.4634 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.635 43.38C85.0255 43.7705 85.0255 44.4037 84.635 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.635 43.38ZM83.2207 43.38C83.6113 42.9894 84.2444 42.9894 84.635 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.8091 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.8091 43.38ZM43.3948 43.38C43.7854 42.9895 44.4185 42.9895 44.8091 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2233 41.2379 34.2233 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1154 66.8285L59.7722 61.1716ZM43.3949 83.2059L59.7722 66.8285L54.1154 61.1716L37.738 77.549L43.3949 83.2059ZM43.3949 84.6201C43.0043 84.2295 43.0043 83.5964 43.3949 83.2059L37.738 77.549C34.2233 81.0637 34.2233 86.7622 37.738 90.2769L43.3949 84.6201ZM44.8091 84.6201C44.4185 85.0106 43.7854 85.0106 43.3949 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.8091 84.6201ZM61.1864 68.2427L44.8091 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5639 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6113 85.0107 83.2207 84.6201L77.5639 90.277C81.0786 93.7917 86.7771 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0255 83.5964 85.0255 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9144 61.1716L68.2575 66.8285ZM84.635 44.7942L68.2575 61.1716L73.9144 66.8285L90.2918 50.451L84.635 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"spectating-label__label__3JS5A\"};","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\n// Keep these separate so three only sets them once\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\n\\nout vec3 hubs_WorldPosition;\\nout float fogDepth;\\n\\nin vec3 position;\\nin vec2 uv;\\n\\n#ifdef PSEUDO_INSTANCING\\nin float instance;\\nflat out uint vInstance;\\n#endif\\n\\n#ifdef VERTEX_COLORS\\nin vec3 color;\\n#endif\\n\\nout vec2 vUv;\\nout vec4 vColor;\\n\\nflat out vec4 vUVTransform;\\nflat out vec4 vMapSettings;\\n\\nvoid main() {\\n  #ifdef PSEUDO_INSTANCING\\n  uint instanceIndex = uint(instance);\\n  #elif\\n  uint instanceIndex = gl_InstanceID;\\n  #endif\\n\\n  vColor = instanceData.colors[instanceIndex];\\n\\n  #ifdef VERTEX_COLORS\\n  vColor *= vec4(color, 1.0);\\n  #endif\\n\\n  vUv = uv;\\n  vUVTransform = instanceData.uvTransforms[instanceIndex];\\n  vMapSettings = instanceData.mapSettings[instanceIndex];\\n\\n  vec4 mvPosition = viewMatrix * instanceData.transforms[instanceIndex] * vec4(position, 1.0);\\n\\n  gl_Position = projectionMatrix * mvPosition;\\n\\n  hubs_WorldPosition = (instanceData.transforms[instanceIndex] * vec4(position, 1.0)).xyz;\\n  vInstance = instanceIndex;\\n\\n  fogDepth = -mvPosition.z;\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\nprecision highp sampler2DArray;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\nin vec3 hubs_WorldPosition;\\n#ifdef PSEUDO_INSTANCING\\nflat in uint vInstance;\\n#endif\\n\\n\\nuniform sampler2DArray map;\\n\\nin float fogDepth;\\nuniform vec3 fogColor;\\n\\n// Fog Type\\n// 0.0 -> disabled\\n// 1.0 -> linear\\n// 2.0 -> exponential\\nuniform vec4 fogOptions; // r = type; g = density; b = near; a = far;\\n\\nin vec2 vUv;\\nin vec4 vColor;\\nflat in vec4 vUVTransform;\\nflat in vec4 vMapSettings;\\n\\nout vec4 outColor;\\n\\nfloat applyWrapping(float value, int mode) {\\n  if (mode == 0) {\\n    // CLAMP_TO_EDGE - default\\n    return clamp(value, 0.0, 1.0);\\n  } else if (mode == 1) {\\n    // REPEAT\\n    return fract(value);\\n  } else {\\n    // MIRRORED_REPEAT\\n    float n = mod(value, 2.0);\\n    return mix(n, 2.0 - n, step(1.0, n));\\n  }\\n}\\n\\nvoid main() {\\n  vec2 uv = vUv;\\n\\n  int wrapS = int(vMapSettings.y);\\n  int wrapT = int(vMapSettings.z);\\n  uv.s = applyWrapping(uv.s, wrapS);\\n  uv.t = applyWrapping(uv.t, wrapT);\\n\\n  vec2 uvMin = vUVTransform.xy;\\n  vec2 uvScale = vUVTransform.zw;\\n  uv = uvMin + uv * uvScale;\\n\\n  int mapIdx = int(vMapSettings.x);\\n  outColor = texture(map, vec3(uv, mapIdx)) * vColor;\\n  if(outColor.a == 0.0) {\\n      discard;\\n  }\\n\\n  bool hubs_HighlightInteractorOne = instanceData.hubs_SweepParams[vInstance].z > 0.0;\\n  bool hubs_HighlightInteractorTwo = instanceData.hubs_SweepParams[vInstance].w > 0.0;\\n  bool hubs_IsFrozen = instanceData.hubs_IsFrozen;\\n\\n  if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n\\n      bool hubs_EnableSweepingEffect = true;\\n      vec2 hubs_SweepParams = instanceData.hubs_SweepParams[vInstance].xy;\\n      float hubs_Time = instanceData.hubs_Time;\\n\\n      float ratio = 0.0;\\n      float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n\\n      if (hubs_EnableSweepingEffect) {\\n          float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n          if (hubs_WorldPosition.y < line) {\\n              // Highlight with a sweeping gradient.\\n              ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n          }\\n      }\\n\\n      // Highlight with a gradient falling off with distance.\\n      float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n      if (hubs_HighlightInteractorOne) {\\n          float dist1 = distance(hubs_WorldPosition, instanceData.hubs_InteractorOnePos);\\n          ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      if (hubs_HighlightInteractorTwo) {\\n          float dist2 = distance(hubs_WorldPosition, instanceData.hubs_InteractorTwoPos);\\n          ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      ratio = min(1.0, ratio);\\n\\n      // Gamma corrected highlight color\\n      vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n      outColor = vec4((outColor.rgb * (1.0 - ratio)) + (highlightColor * ratio), outColor.a);\\n  }\\n\\n  float fogType = fogOptions.r;\\n\\n  if (fogType > 0.5) {\\n    float fogFactor = 0.0;\\n\\n    if (fogType < 1.5) {\\n      float fogNear = fogOptions.z;\\n      float fogFar = fogOptions.w;\\n      fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n    } else {\\n      float fogDensity = fogOptions.y;\\n      fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n    }\\n\\n    outColor.rgb = mix( outColor.rgb, fogColor, fogFactor );\\n  }\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-action-spritesheet-63df7c855b130ea65c284bd3f8e98afc.png\";","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-notice-spritesheet-0b7026f818dc58d5d33db88931d02c7a.png\";","module.exports = \"attribute vec4 mvCol0;\\nattribute vec4 mvCol1;\\nattribute vec4 mvCol2;\\nattribute vec4 mvCol3;\\nattribute vec3 a_vertices;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  mat4 mv = mat4(mvCol0, mvCol1, mvCol2, mvCol3);\\n  gl_Position = projectionMatrix * modelViewMatrix * mv * vec4(a_vertices, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(a_vertices, 1.0);\\n  hubs_WorldPosition = (mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\n#define GAMMA_FACTOR 2.2\\n\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearToGamma( value, float( GAMMA_FACTOR ) );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = linearToOutputTexel(vec4(0.184, 0.499, 0.933, 1.0));\\n    gl_FragColor = vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a);\\n}\\n\"","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleInfo = console.info;\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  console.info = function() {\n    origConsoleInfo.apply(null, arguments);\n    log(\"info\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ui\":\"hub__ui__3UYRO\",\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"object-list\":\"hub__object-list__Y0_hh\",\"objectList\":\"hub__object-list__Y0_hh\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"corner-button\":\"hub__corner-button__2KphD\",\"cornerButton\":\"hub__corner-button__2KphD\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"choose-scene-button\":\"hub__choose-scene-button__5Y0Q_\",\"chooseSceneButton\":\"hub__choose-scene-button__5Y0Q_\",\"choose-avatar\":\"hub__choose-avatar__22JJm\",\"chooseAvatar\":\"hub__choose-avatar__22JJm\",\"entry-button-secondary\":\"hub__entry-button-secondary__2ui-g\",\"entryButtonSecondary\":\"hub__entry-button-secondary__2ui-g\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"secondary-action-button\":\"hub__secondary-action-button__2KoCD\",\"secondaryActionButton\":\"hub__secondary-action-button__2KoCD\",\"leave-button\":\"hub__leave-button__1YK4o\",\"leaveButton\":\"hub__leave-button__1YK4o\",\"interstitial\":\"hub__interstitial__3WXbJ\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"collapse-button\":\"hub__collapse-button__3N-6b\",\"collapseButton\":\"hub__collapse-button__3N-6b\",\"favorite-button\":\"hub__favorite-button__1Qgbp\",\"favoriteButton\":\"hub__favorite-button__1Qgbp\",\"back\":\"hub__back__3AZh2\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"lobby-label\":\"hub__lobby-label__2ktmo\",\"lobbyLabel\":\"hub__lobby-label__2ktmo\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"rename-button\":\"hub__rename-button__h-4K7\",\"renameButton\":\"hub__rename-button__h-4K7\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"close\":\"hub__close__gWtCN\",\"invite-tip\":\"hub__invite-tip__9enoe\",\"inviteTip\":\"hub__invite-tip__9enoe\",\"loading-text\":\"hub__loading-text__1WDud\",\"loadingText\":\"hub__loading-text__1WDud\",\"streaming-tip\":\"hub__streaming-tip__1LnId\",\"streamingTip\":\"hub__streaming-tip__1LnId\",\"streaming-tip-attach-point\":\"hub__streaming-tip-attach-point__1oCgh\",\"streamingTipAttachPoint\":\"hub__streaming-tip-attach-point__1oCgh\",\"streaming-tip-close\":\"hub__streaming-tip-close__E6fwS\",\"streamingTipClose\":\"hub__streaming-tip-close__E6fwS\",\"streaming-tip-message\":\"hub__streaming-tip-message__XcScW\",\"streamingTipMessage\":\"hub__streaming-tip-message__XcScW\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"in-room-favorite-button\":\"hub__in-room-favorite-button__2T-zs\",\"inRoomFavoriteButton\":\"hub__in-room-favorite-button__2T-zs\",\"help-button\":\"hub__help-button__3TCSZ\",\"helpButton\":\"hub__help-button__3TCSZ\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"camera-mode-exit-button\":\"hub__camera-mode-exit-button__BqKKt\",\"cameraModeExitButton\":\"hub__camera-mode-exit-button__BqKKt\",\"corner-button-selected\":\"hub__corner-button-selected__Cqa93\",\"cornerButtonSelected\":\"hub__corner-button-selected__Cqa93\",\"invite-tip-attach-point\":\"hub__invite-tip-attach-point__2y_bz\",\"inviteTipAttachPoint\":\"hub__invite-tip-attach-point__2y_bz\",\"avatar-editor\":\"hub__avatar-editor__2b8-H\",\"avatarEditor\":\"hub__avatar-editor__2b8-H\",\"logo\":\"hub__logo__3kJSj\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"preview\":\"hub__preview__2UUoU\",\"edit-avatar\":\"hub__edit-avatar__22A53\",\"editAvatar\":\"hub__edit-avatar__22A53\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"favorited\":\"hub__favorited__3c3lB\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"room-subtitle\":\"hub__room-subtitle__GhUCG\",\"roomSubtitle\":\"hub__room-subtitle__GhUCG\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"button-subtitle\":\"hub__button-subtitle__3kkpo\",\"buttonSubtitle\":\"hub__button-subtitle__3kkpo\",\"audio-loader\":\"hub__audio-loader__F5ovU\",\"audioLoader\":\"hub__audio-loader__F5ovU\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","AFRAME.registerComponent(\"scale-in-screen-space\", {\n  schema: {\n    baseScale: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    addedScale: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } }\n  },\n\n  play() {\n    if (!this.didRegister) {\n      this.didRegister = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].scaleInScreenSpaceSystem.register(this);\n    }\n  },\n  remove() {\n    if (this.didRegister) {\n      this.el.sceneEl.systems[\"hubs-systems\"].scaleInScreenSpaceSystem.unregister(this);\n    }\n  }\n});\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","/**\n * Creates a box around the element (assumed to be the camera's PoV) which can be used for fade-to-black.\n */\n\nconst FADE_DURATION_MS = 750;\n\nAFRAME.registerComponent(\"fader\", {\n  schema: {\n    direction: { type: \"string\", default: \"none\" } // \"in\", \"out\", or \"none\"\n  },\n\n  init() {\n    const mesh = new THREE.Mesh(\n      new THREE.BoxGeometry(),\n      new THREE.MeshBasicMaterial({ color: 0x0, side: THREE.BackSide, opacity: 0, transparent: true, fog: false })\n    );\n    mesh.scale.x = mesh.scale.y = 1;\n    mesh.scale.z = 0.15;\n    mesh.matrixNeedsUpdate = true;\n    this.el.object3D.add(mesh);\n    this.mesh = mesh;\n  },\n\n  fadeOut() {\n    return this.beginTransition(\"out\");\n  },\n\n  fadeIn() {\n    return this.beginTransition(\"in\");\n  },\n\n  async beginTransition(direction) {\n    if (this._resolveFinish) {\n      throw new Error(\"Cannot fade while a fade is happening.\");\n    }\n\n    this.el.setAttribute(\"fader\", { direction });\n\n    return new Promise(res => {\n      if (this.mesh.material.opacity === (direction == \"in\" ? 0 : 1)) {\n        res();\n      } else {\n        this._resolveFinish = res;\n      }\n    });\n  },\n\n  tick(t, dt) {\n    const mat = this.mesh.material;\n    this.mesh.visible = this.data.direction === \"out\" || mat.opacity !== 0;\n    if (!this.mesh.visible) return;\n\n    if (this.data.direction === \"in\") {\n      mat.opacity = Math.max(0, mat.opacity - (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    } else if (this.data.direction === \"out\") {\n      mat.opacity = Math.min(1, mat.opacity + (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    }\n\n    if (mat.opacity === 0 || mat.opacity === 1) {\n      if (this.data.direction !== \"none\") {\n        if (this._resolveFinish) {\n          this._resolveFinish();\n          this._resolveFinish = null;\n        }\n      }\n\n      this.el.setAttribute(\"fader\", { direction: \"none\" });\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    disabledImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    disabled: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = true;\n      }\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = false;\n      }\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n    const disabled = this.data.disabled;\n\n    let image;\n    if (disabled) {\n      image = \"disabledImage\";\n    } else if (active) {\n      image = hovering ? \"activeHoverImage\" : \"activeImage\";\n    } else {\n      image = hovering ? \"hoverImage\" : \"image\";\n    }\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      const tooltipText =\n        (this.data.active ? this.data.activeTooltipText : this.data.tooltipText) + (disabled ? \" Disabled\" : \"\");\n      this.data.tooltip.querySelector(\"[text]\").setAttribute(\"text\", \"value\", tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","AFRAME.registerComponent(\"visibility-on-content-types\", {\n  schema: {\n    contentTypes: { type: \"string\" }, // Space separate content types. Or partial type, like video/\n    contentSubtype: { type: \"string\" },\n    visible: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(el => {\n        this.networkedEl = el;\n        el.addEventListener(\"media_resolved\", ({ detail: { contentType } }) => this.updateVisibility(contentType));\n        this.updateVisibility();\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now.\n      });\n  },\n\n  updateVisibility(contentType) {\n    const mediaLoader = this.networkedEl.components[\"media-loader\"];\n    const mediaImage = this.networkedEl.components[\"media-image\"];\n    const mediaVideo = this.networkedEl.components[\"media-video\"];\n    const mediaPdf = this.networkedEl.components[\"media-pdf\"];\n    const currentContentType =\n      contentType ||\n      (mediaVideo && mediaVideo.data.contentType) ||\n      (mediaImage && mediaImage.data.contentType) ||\n      (mediaPdf && mediaPdf.data.contentType);\n\n    let matchesType = !this.data.contentTypes;\n\n    if (this.data.contentTypes && currentContentType) {\n      for (const contentType of this.data.contentTypes.split(\" \")) {\n        const targetContentType = currentContentType.toLowerCase().split(\";\")[0];\n\n        if (\n          targetContentType === contentType ||\n          (contentType.endsWith(\"/\") && targetContentType.startsWith(contentType))\n        ) {\n          matchesType = true;\n          break;\n        }\n      }\n    }\n\n    const matchesSubtype =\n      !this.data.contentSubtype ||\n      (mediaLoader.data.contentSubtype && mediaLoader.data.contentSubtype === this.data.contentSubtype);\n    const matches = !!(matchesType && matchesSubtype);\n    this.el.object3D.visible = this.data.visible ? matches : !matches;\n  }\n});\n","AFRAME.registerComponent(\"hide-when-pinned-and-forbidden\", {\n  schema: {\n    // Hide regardless of being forbidden.\n    whenPinned: { type: \"boolean\" }\n  },\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (!this.targetEl) return;\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n\n    if (this.data.whenPinned) {\n      this.el.object3D.visible = !isPinned;\n    } else {\n      const pinnedAndForbidden = isPinned && !window.APP.hubChannel.canOrWillIfCreator(\"pin_objects\");\n      this.el.object3D.visible = !pinnedAndForbidden;\n    }\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._fireEventsAndAnimate = this._fireEventsAndAnimate.bind(this);\n\n    // Fire pinned events when media is refreshed since the version will be bumped.\n    this.el.addEventListener(\"media_refreshed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"owned-pager-page-changed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEventsAndAnimate);\n  },\n\n  update(oldData) {\n    this._fireEventsAndAnimate(oldData);\n  },\n\n  _fireEventsAndAnimate(oldData, force) {\n    // We need to guard against _fireEventsAndAnimate being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (!this.el.components.networked || !this.el.components.networked.data) return;\n\n    const isMine = NAF.utils.isMine(this.el);\n\n    // Avoid firing events during initialization by checking if the pin state has changed before doing so.\n    const pinStateChanged = !!oldData.pinned !== this.data.pinned;\n\n    if (this.data.pinned) {\n      if (pinStateChanged || force) {\n        this.el.emit(\"pinned\", { el: this.el });\n      }\n\n      if (isMine) {\n        this.el.removeAttribute(\"animation__pin-start\");\n        this.el.removeAttribute(\"animation__pin-end\");\n        const currentScale = this.el.object3D.scale;\n\n        this.el.setAttribute(\"animation__pin-start\", {\n          property: \"scale\",\n          dur: 200,\n          from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n          to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n          easing: \"easeOutElastic\"\n        });\n\n        this.el.setAttribute(\"animation__pin-end\", {\n          property: \"scale\",\n          delay: 200,\n          dur: 200,\n          from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n          to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n          easing: \"easeOutElastic\"\n        });\n\n        if (this.el.components[\"body-helper\"] && !this.el.sceneEl.systems.interaction.isHeld(this.el)) {\n          this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n        }\n      }\n    } else {\n      if (pinStateChanged || force) {\n        this.el.emit(\"unpinned\", { el: this.el });\n      }\n    }\n  },\n\n  isHeld(el) {\n    const { leftHand, rightHand, rightRemote } = el.sceneEl.systems.interaction.state;\n    return leftHand.held === el || rightHand.held === el || rightRemote.held === el;\n  },\n\n  tick() {\n    const held = this.isHeld(this.el);\n    const isMine = this.el.components.networked && this.el.components.networked.data && NAF.utils.isMine(this.el);\n\n    let didFireThisFrame = false;\n    if (!held && this.wasHeld && isMine) {\n      didFireThisFrame = true;\n      this._fireEventsAndAnimate(this.data, true);\n    }\n\n    this.wasHeld = held;\n\n    this.transformObjectSystem = this.transformObjectSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n    const transforming = this.transformObjectSystem.transforming && this.transformObjectSystem.target.el === this.el;\n    if (!didFireThisFrame && !transforming && this.wasTransforming && isMine) {\n      this._fireEventsAndAnimate(this.data, true);\n    }\n    this.wasTransforming = transforming;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"body-helper\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n\n      const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n      if (this.targetEl.components[\"body-helper\"].uuid) {\n        physicsSystem.activateBody(this.targetEl.components[\"body-helper\"].uuid);\n      }\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        NAF.utils.takeOwnership(this.targetEl);\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" },\n    withPermission: { type: \"string\" }\n  },\n\n  init() {\n    this.needsPermission = !!this.data.withPermission;\n    this.updatePermissions = () => {\n      if (!this.needsPermission || !window.APP.hubChannel) return;\n      this.hasPermission = window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    };\n  },\n\n  play() {\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updatePermissions);\n    this.updatePermissions();\n  },\n\n  pause() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updatePermissions);\n  },\n\n  tick() {\n    if (this.needsPermission && !this.hasPermission) return;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n    if (!this.data.target) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Slow updating position if the element or any subelement is hovered.\n    let isHovered = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const hoveredEl = interaction.state.rightRemote.hovered || interaction.state.leftRemote.hovered;\n\n    if (hoveredEl) {\n      let el = hoveredEl;\n\n      while (el) {\n        if (this.el === el) {\n          isHovered = true;\n          break;\n        }\n\n        el = el.parentNode;\n      }\n    }\n\n    if (!isHovered) {\n      this._hoveredFrames = 0;\n    } else {\n      this._hoveredFrames += 1;\n    }\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      // Slow down movement if hovering by dampening speed each frame.\n      const speed = this._hoveredFrames\n        ? this.data.speed * (1.0 / ((this._hoveredFrames + 5.0) * 0.2))\n        : this.data.speed;\n      const t = speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  reset() {\n    this.started = false;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    dirs: { type: \"array\" },\n    dim: { default: true },\n    withPermission: { type: \"string\" }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n\n        // HACK workaround for now due to position-at-box-shape-border having problems\n        // with nested entities, when using 'mirror' viewing.\n        //\n        // TODO Revisit once that component is removed/deprecated. If we disable repositioning,\n        // the menu will only appear on the front of the object (which is fine for our purposes)\n        const isMirroredMedia = this.el.parentEl.id === \"media-mirror-target\";\n        const enableRepositioning = !isMirroredMedia;\n\n        if (enableRepositioning) {\n          this.el.setAttribute(\"position-at-box-shape-border\", {\n            target: \".hover-container\",\n            dirs: this.data.dirs,\n            animate: false,\n            scale: false\n          });\n        } else {\n          const hoverContainer = this.el.querySelector(\".hover-container\");\n          hoverContainer.object3D.position.z = 0.001;\n          hoverContainer.object3D.matrixNeedsUpdate = true;\n        }\n\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    const allowed = !this.data.withPermission || window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    this.menu.object3D.visible = allowed && !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"set-active-camera\", {\n  init() {\n    // This is a hack needed to set the active camera because sometimes A-Frame will create the default camera and set it to the active camera on startup because the query selector to find an existing camera in the scene fails.\n\n    const cameraSystem = this.el.sceneEl.systems.camera;\n    const currentActiveCamera = cameraSystem.activeCameraEl;\n\n    if (currentActiveCamera !== this.el) {\n      cameraSystem.setActiveCamera(this.el);\n\n      // Also A-Frame fails to delete the default camera :P\n      currentActiveCamera.parentNode.removeChild(currentActiveCamera);\n\n      // Look controls leaves behind this CSS class.\n      this.el.sceneEl.canvas.classList.remove(\"a-grab-cursor\");\n    }\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  play() {\n    if (!this.didRegister) {\n      this.didRegister = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.register(this.el.object3D, this.data.path);\n    }\n  },\n  remove() {\n    if (this.didRegister) {\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.unregister(this.el.object3D);\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  init: function() {\n    this.target = new THREE.Vector3();\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = this.el.sceneEl.is(\"vr-mode\") ? true : isInViewOfCamera(this.el.object3D, this.playerCamera);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(this.el.object3D, cameraTool.camera);\n          });\n        }\n      }\n    };\n  })(),\n\n  _updateBillboard: function() {\n    if (!this.el.object3D.visible) return;\n\n    const camera = this.el.sceneEl.camera;\n    const object3D = this.el.object3D;\n\n    if (camera) {\n      // Set the camera world position as the target.\n      this.target.setFromMatrixPosition(camera.matrixWorld);\n      object3D.lookAt(this.target);\n      object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const SYNC_DURATION_MS = 5000;\n\n// HACK this is a hacky component that is used to mitigate the situation where a first sync is missed on critical\n// networked elements. (At the time of this writing, specifically just the user's avatar.) The motivation\n// is that there have been a variety of issues resulting in missed avatar instantiation messages, and\n// this is meant to ensure we recover from those in the cases where they occur.\n//\n// This component, when added, will re-send a isFirstSync message for the networked object is it attached to\n// every SYNC_DURATION_MS milliseconds.\nAFRAME.registerComponent(\"periodic-full-syncs\", {\n  init() {\n    this.lastSync = 0;\n  },\n\n  tick() {\n    const now = performance.now();\n\n    if (now - this.lastSync >= SYNC_DURATION_MS && this.el.components && this.el.components.networked) {\n      this.lastSync = now;\n\n      // Sends an undirected first sync message.\n      this.el.components.networked.syncAll(null, true);\n    }\n  }\n});\n","AFRAME.registerComponent(\"set-max-resolution\", {\n  init() {\n    const store = window.APP.store;\n    this.onStoreChanged = () => {\n      const width =\n        store.state.preferences.maxResolutionWidth === undefined ? 1920 : store.state.preferences.maxResolutionWidth;\n      const height =\n        store.state.preferences.maxResolutionHeight === undefined ? 1920 : store.state.preferences.maxResolutionHeight;\n      this.el.sceneEl.maxCanvasSize = { width, height };\n      this.el.sceneEl.resize();\n    };\n    this.onStoreChanged();\n    store.addEventListener(\"statechanged\", this.onStoreChanged);\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: \"\" }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  onPermissionsUpdated(handler) {\n    if (window.APP.hubChannel) {\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", handler);\n    } else {\n      window.addEventListener(\n        \"hub_channel_ready\",\n        () => window.APP.hubChannel.addEventListener(\"permissions_updated\", handler),\n        { once: true }\n      );\n    }\n  },\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// On high-DPI displays, measures the median FPS over time and reduces the\n// pixelRatio if the FPS drops below a threshold.\n\nconst LOW_FPS_THRESHOLD = 30;\nconst HIGH_FPS_THRESHOLD = 48;\nconst SKIP_SECONDS_AFTER_SCENE_VISIBLE = 30;\nconst MEASUREMENT_PERIOD_SECONDS = 5;\nconst MIN_PIXEL_RATIO = 1;\nconst CHANGE_RATE = 1;\nconst NUM_TIMES_DECREASED_BEFORE_CHANGING_MAX_PIXEL_RATIO = 3;\n\nAFRAME.registerSystem(\"auto-pixel-ratio\", {\n  init() {\n    // For now let's only enabled this on macs, since they tend to have retina displays.\n    // Note this test will also include iPads running iPadOS.\n    this.enabled = window.devicePixelRatio > 1 && /macintosh/i.test(navigator.userAgent);\n    this.deltas = [];\n    this.secondsSinceMeasurementStart = 0;\n    this.secondsSinceSceneVisible = 0;\n    this.maxPixelRatio = window.devicePixelRatio;\n    this.pixelRatioToTimesDecreased = {};\n\n    this.disabledByPref = !!window.APP.store.state.preferences.disableAutoPixelRatio;\n    this.onPreferenceChange = this.onPreferenceChange.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPreferenceChange);\n  },\n  onPreferenceChange() {\n    this.disabledByPref = !!window.APP.store.state.preferences.disableAutoPixelRatio;\n  },\n  tick(time, delta) {\n    if (!this.enabled || this.disabledByPref || this.maxPixelRatio === MIN_PIXEL_RATIO) return;\n    if (!this.el.is(\"visible\")) return;\n    if (this.secondsSinceSceneVisible < SKIP_SECONDS_AFTER_SCENE_VISIBLE) {\n      this.secondsSinceSceneVisible += delta / 1000;\n      return;\n    }\n    if (document.visibilityState === \"hidden\") return;\n\n    this.deltas.push(delta);\n    this.secondsSinceMeasurementStart += delta / 1000;\n\n    if (this.secondsSinceMeasurementStart > MEASUREMENT_PERIOD_SECONDS) {\n      this.deltas.sort();\n      const medianDelta = this.deltas[Math.floor(this.deltas.length / 2)];\n      const medianFps = 1000 / medianDelta;\n\n      const currentPixelRatio = this.el.renderer.getPixelRatio();\n\n      const shouldDecrease = currentPixelRatio > MIN_PIXEL_RATIO && medianFps < LOW_FPS_THRESHOLD;\n      const shouldIncrease = currentPixelRatio < this.maxPixelRatio && medianFps > HIGH_FPS_THRESHOLD;\n      if (shouldDecrease || shouldIncrease) {\n        const newPixelRatio = currentPixelRatio + (CHANGE_RATE * shouldIncrease ? 1 : -1);\n        console.info(\n          `Hubs auto-pixel-ratio: Median FPS (${medianFps.toFixed()}) was ${\n            shouldIncrease ? `above ${HIGH_FPS_THRESHOLD}` : `below ${LOW_FPS_THRESHOLD}`\n          }. ` + `Adjusting pixel ratio to ${newPixelRatio}.`\n        );\n        this.el.renderer.setPixelRatio(newPixelRatio);\n        if (shouldDecrease) {\n          const timesDecreased = (this.pixelRatioToTimesDecreased[currentPixelRatio] || 0) + 1;\n          this.pixelRatioToTimesDecreased[currentPixelRatio] = timesDecreased;\n          if (timesDecreased >= NUM_TIMES_DECREASED_BEFORE_CHANGING_MAX_PIXEL_RATIO) {\n            console.info(\n              `Hubs auto-pixel-ratio: Attempts to maintain high frame rate with pixel ratio ${currentPixelRatio} failed ${timesDecreased} times and will not be attempted again. Lowering maximum pixel ratio to ${newPixelRatio}.`\n            );\n            this.maxPixelRatio = newPixelRatio;\n          }\n        }\n      }\n\n      // Clear deltas so that we start measuring a new median.\n      this.deltas.length = 0;\n      this.secondsSinceMeasurementStart = 0;\n    }\n  }\n});\n","AFRAME.registerSystem(\"listed-media\", {\n  init: function() {\n    this.els = [];\n  },\n\n  register: function(el) {\n    this.els.push(el);\n    this.el.emit(\"listed_media_changed\");\n  },\n\n  unregister: function(el) {\n    this.els.splice(this.els.indexOf(el), 1);\n    this.el.emit(\"listed_media_changed\");\n  }\n});\n\nAFRAME.registerComponent(\"listed-media\", {\n  init: function() {\n    this.system.register(this.el);\n  },\n\n  remove: function() {\n    this.system.unregister(this.el);\n  }\n});\n","// Provides the idea of \"media linking\" -- if two media objects are linked\n// then updates to one (src, page, etc) will be reflected on the other, and vice versa.\n//\n// When you link a media element from A -> B via registerLinkage, a few notes:\n// - The media is assumed to be of the same kind, ideally created via media-utils/cloneMedia\n// - Sync is bidirectional, however, elB is assumed to be a 'derivate of' elA. this means:\n//   - for the video case, elA will have its volume set to zero and restored if elB is removed\n//   - when elA is removed, elB will be removed (done in media-loader) but not vice-versa\n//\nAFRAME.registerSystem(\"linked-media\", {\n  init: function() {\n    this.handlers = [];\n    this.addLinkageHandler = this.addLinkageHandler.bind(this);\n    this.syncLinkage = this.syncLinkage.bind(this);\n  },\n\n  addLinkageHandler(elA, elB) {\n    const handler = () => {\n      // Since elB will have its event fired here if we change something, ignore it.\n      if (elB._handlingLinkage) return;\n      elA._handlingLinkage = true;\n      this.syncLinkage(elA, elB);\n      elA._handlingLinkage = false;\n    };\n\n    if (elA.components[\"media-loader\"].data) {\n      elA.addEventListener(\"componentchanged\", handler);\n    } else {\n      const waitForMediaLoader = evt => {\n        if (evt.detail.name === \"media-loader\") {\n          elA.removeEventListener(\"componentinitialized\", waitForMediaLoader);\n          elA.addEventListener(\"componentchanged\", handler);\n        }\n      };\n\n      elA.addEventListener(\"componentinitialized\", waitForMediaLoader);\n    }\n\n    return handler;\n  },\n\n  registerLinkage: function(elA, elB) {\n    this.syncLinkage(elA, elB);\n\n    const handlerA = this.addLinkageHandler(elA, elB);\n    const handlerB = this.addLinkageHandler(elB, elA);\n    elA.setAttribute(\"linked-media\", \"\");\n    elB.setAttribute(\"linked-media\", \"\");\n\n    // As a convenience, if elA is a video, we turn its volume off so we don't hear it twice\n    if (elA.components[\"media-video\"]) {\n      elA.setAttribute(\"media-video\", \"volume\", 0);\n    }\n\n    this.handlers.push([elA, elB, handlerA, handlerB]);\n  },\n\n  deregisterLinkage: function(el) {\n    // Deregister elA -> elB, get list of elBs, and remove them\n    for (const [elA, elB, handlerA, handlerB] of this.handlers) {\n      if (el === elA || el === elB) {\n        elA.removeEventListener(\"componentchanged\", handlerA);\n        elB.removeEventListener(\"componentchanged\", handlerB);\n      }\n\n      // As a convenience, if elA is a video, we restore its volume to 50% since we muted it upon link.\n      if (elA.components[\"media-video\"]) {\n        elA.setAttribute(\"media-video\", \"volume\", 0.5);\n      }\n    }\n\n    this.handlers = this.handlers.filter(([elA, elB]) => elA !== el && elB !== el);\n  },\n\n  syncLinkage(elA, elB) {\n    if (elB.components[\"networked\"]) {\n      // Take ownership before updating\n      if (!NAF.utils.isMine(elB) && !NAF.utils.takeOwnership(elB)) return;\n    }\n\n    const { src, version } = elA.components[\"media-loader\"].data;\n\n    // For now, manually sync linkable properties.\n    elB.setAttribute(\"media-loader\", { src, version });\n\n    if (elA.components[\"media-pdf\"]) {\n      const { index } = elA.components[\"media-pdf\"].data;\n      elB.setAttribute(\"media-pdf\", { index });\n    }\n\n    if (elA.components[\"media-video\"]) {\n      const { time, videoPaused, loop, hidePlaybackControls } = elA.components[\"media-video\"].data;\n\n      // Sync time, pause state, playback controls, and tighten sync tolerance since its local\n      const syncedVideoAttributes = { time, videoPaused, loop, hidePlaybackControls };\n\n      const targetIsNetworked = !elB.components.networked;\n      if (targetIsNetworked) {\n        syncedVideoAttributes.syncTolerance = 0.25;\n      }\n\n      elB.setAttribute(\"media-video\", syncedVideoAttributes);\n      elB.components[\"media-video\"].updatePlaybackState(true);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"linked-media\", {\n  remove: function() {\n    this.system.deregisterLinkage(this.el);\n  }\n});\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global performance */\nAFRAME.registerComponent(\"owned-object-cleanup-timeout\", {\n  schema: {\n    counter: { type: \"selector\" },\n    ttl: { default: 0 }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n    this.timeout = Number.POSITIVE_INFINITY;\n  },\n\n  tick() {\n    if (this.el.components[\"networked\"] && NAF.utils.isMine(this.el)) {\n      const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n      if (NAF.utils.isMine(this.el) && !isPinned && performance.now() >= this.timeout) {\n        this.el.parentNode.removeChild(this.el);\n        this.timeout = Number.POSITIVE_INFINITY;\n      }\n    }\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.timeout = performance.now() + this.data.ttl * 1000;\n    } else if (isHeld && !this.wasHeld) {\n      this.timeout = Number.POSITIVE_INFINITY;\n    }\n    this.wasHeld = isHeld;\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!this.el.components.networked || !NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"body-helper\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    if (el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Initializes teleporters when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  init: function() {\n    this.el.addEventListener(\"model-loaded\", () => {\n      const teleporters = document.querySelectorAll(\"[teleporter]\");\n      for (let i = 0; i < teleporters.length; i++) {\n        teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  schema: {\n    penSpawner: { type: \"selector\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n    this.data.penSpawner.addEventListener(\"spawned-entity-created\", () => {\n      if (!this.drawingEl) {\n        this.createDrawing();\n      }\n    });\n  },\n\n  createDrawing() {\n    if (!this.createDrawingPromise) {\n      this.createDrawingPromise = new Promise(resolve => {\n        this.drawingEl = document.createElement(\"a-entity\");\n        this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n        this.el.sceneEl.appendChild(this.drawingEl);\n\n        const handNetworkedDrawingInit = e => {\n          if (e.detail.name === \"networked-drawing\") {\n            this.drawing = this.drawingEl.components[\"networked-drawing\"];\n            this.drawingEl.removeEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n            resolve();\n          }\n        };\n\n        this.drawingEl.addEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n      });\n    }\n    return this.createDrawingPromise;\n  },\n\n  destroyDrawing(networkedDrawing) {\n    if (this.drawing === networkedDrawing) {\n      this.drawingToPen.delete(this.drawing);\n      this.drawing = null;\n      this.drawingEl = null;\n      this.createDrawingPromise = null;\n      this.getDrawingPromise = null;\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (!this.getDrawingPromise) {\n      this.getDrawingPromise = new Promise((resolve, reject) => {\n        if (!this.drawingEl) {\n          this.createDrawing().then(() => {\n            this.drawingToPen.set(this.drawing, pen);\n            resolve(this.drawing);\n          });\n        } else if (\n          this.drawing &&\n          (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)\n        ) {\n          this.drawingToPen.set(this.drawing, pen);\n          resolve(this.drawing);\n        } else {\n          reject();\n        }\n      });\n    }\n    return this.getDrawingPromise;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and other controls that don't necessarily have hardware buttons.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"mic-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n      if (window.APP.hubChannel) {\n        this.spawn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_and_move_media\"));\n        this.pen.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_drawing\"));\n        this.cameraBtn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_camera\"));\n      }\n    };\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\"))\n        return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onSpawnClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_and_move_media\")) return;\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = e => {\n      if (!window.APP.hubChannel.can(\"spawn_drawing\")) return;\n      this.el.emit(\"spawn_pen\", { object3D: e.object3D });\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_camera\")) return;\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updateButtonStates);\n    this.updateButtonStates();\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateButtonStates);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","/* global performance */\n\nimport { SOUND_SPAWN_EMOJI } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"emoji\", {\n  schema: {\n    emitDecayTime: { default: 1.5 },\n    emitFadeTime: { default: 0.5 },\n    emitEndTime: { default: 0 },\n    particleEmitterConfig: {\n      default: null,\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.data.emitEndTime = performance.now() + this.data.emitDecayTime * 1000;\n    this.physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n\n    this.emojiHud = document.querySelector(\"[emoji-hud]\").components[\"emoji-hud\"];\n  },\n\n  play() {\n    const mediaLoader = this.el.components[\"media-loader\"];\n    if (this.emojiHud.emojiUrls.indexOf(mediaLoader.data.src) === -1) {\n      this.el.parentNode.removeChild(this.el);\n      return;\n    }\n\n    const uuid = this.el.components[\"body-helper\"].uuid;\n    this.lastLinearVelocity = this.physicsSystem.getLinearVelocity(uuid);\n    this.lastAngularVelocity = this.physicsSystem.getAngularVelocity(uuid);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n      SOUND_SPAWN_EMOJI,\n      this.el.object3D\n    );\n    this.particleEmitter = this.el.querySelector(\".particle-emitter\");\n  },\n\n  update() {\n    if (!this.particleConfig && this.data.particleEmitterConfig) {\n      this.particleConfig = Object.assign({}, this.data.particleEmitterConfig);\n      this.originalParticleCount = this.particleConfig.particleCount;\n    }\n  },\n\n  tick(t, dt) {\n    const isMine = this.el.components.networked.initialized && this.el.components.networked.isMine();\n\n    if (this.particleConfig && isMine) {\n      const now = performance.now();\n\n      const uuid = this.el.components[\"body-helper\"].uuid;\n\n      const linearVelocity = this.physicsSystem.getLinearVelocity(uuid);\n      const linearAcceleration = ((linearVelocity - this.lastLinearVelocity) / dt) * 1000;\n      this.lastLinearVelocity = linearVelocity;\n\n      const angularVelocity = this.physicsSystem.getAngularVelocity(uuid);\n      const angularAcceleration = ((angularVelocity - this.lastAngularVelocity) / dt) * 1000;\n      this.lastAngularVelocity = angularVelocity;\n\n      if (Math.abs(linearAcceleration) > 33 || Math.abs(angularAcceleration) > 33) {\n        this.data.emitEndTime = now + this.data.emitDecayTime * 1000;\n      }\n\n      const emitFadeTime = this.data.emitFadeTime * 1000;\n\n      if (now < this.data.emitEndTime && this.particleConfig.startOpacity < 1) {\n        this.particleConfig.particleCount = this.originalParticleCount;\n        this.particleConfig.startOpacity = 1;\n        this.particleConfig.middleOpacity = 1;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      } else if (now >= this.data.emitEndTime && this.particleConfig.startOpacity > 0.001) {\n        const timeSinceStop = Math.min(now - this.data.emitEndTime, emitFadeTime);\n        const opacity = 1 - timeSinceStop / emitFadeTime;\n        const particleCount = opacity < 0.001 && this.particleConfig.particleCount > 0 ? 0 : this.originalParticleCount;\n        this.particleConfig.particleCount = particleCount;\n        this.particleConfig.startOpacity = opacity;\n        this.particleConfig.middleOpacity = opacity;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      }\n    }\n  }\n});\n","import emoji_particle_0 from \"../assets/images/emojis/emoji_0.png\";\nimport emoji_particle_1 from \"../assets/images/emojis/emoji_1.png\";\nimport emoji_particle_2 from \"../assets/images/emojis/emoji_2.png\";\nimport emoji_particle_3 from \"../assets/images/emojis/emoji_3.png\";\nimport emoji_particle_4 from \"../assets/images/emojis/emoji_4.png\";\nimport emoji_particle_5 from \"../assets/images/emojis/emoji_5.png\";\nimport emoji_particle_6 from \"../assets/images/emojis/emoji_6.png\";\n\nimport emoji_0 from \"../assets/models/emojis/emoji_0.glb\";\nimport emoji_1 from \"../assets/models/emojis/emoji_1.glb\";\nimport emoji_2 from \"../assets/models/emojis/emoji_2.glb\";\nimport emoji_3 from \"../assets/models/emojis/emoji_3.glb\";\nimport emoji_4 from \"../assets/models/emojis/emoji_4.glb\";\nimport emoji_5 from \"../assets/models/emojis/emoji_5.glb\";\nimport emoji_6 from \"../assets/models/emojis/emoji_6.glb\";\n\nimport { TYPE } from \"three-ammo/constants\";\n\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nconst EMOJIS = [emoji_0, emoji_1, emoji_2, emoji_3, emoji_4, emoji_5, emoji_6];\nconst particles = [\n  emoji_particle_0,\n  emoji_particle_1,\n  emoji_particle_2,\n  emoji_particle_3,\n  emoji_particle_4,\n  emoji_particle_5,\n  emoji_particle_6\n];\n\nfunction setOffsetVector(i, totalNumEmojis, width, spacing, offsetVector) {\n  const sign = i & 1 ? -1 : 1;\n  offsetVector.y = 0;\n  if (totalNumEmojis % 2 === 0) {\n    offsetVector.x = (spacing / 2 + width / 2 + Math.floor(i / 2) * (width + spacing)) * sign;\n    offsetVector.z = (Math.floor(i / 2) * width) / 2;\n  } else if (i !== 0) {\n    offsetVector.x = (width + spacing) * Math.floor((i + 1) / 2) * -sign;\n    offsetVector.z = (Math.floor((i + 1) / 2) * width) / 2;\n  }\n}\n\nAFRAME.registerComponent(\"emoji-hud\", {\n  schema: {\n    spawnerScale: { default: 0.1 },\n    spawnedScale: { default: 0.5 },\n    camera: { type: \"selector\" },\n    hudAngle: { default: -0.5 },\n    minHudAngle: { default: -0.2 },\n    maxHudAngle: { default: 0.7 },\n    hudDistance: { default: 0.4 },\n    spawnerPlatformWidth: { default: 0.0625 },\n    spawnerPlatformSpacing: { default: 0.021 },\n    spawnCooldown: { default: 1 }\n  },\n\n  init: (() => {\n    const cameraWorldPosition = new THREE.Vector3();\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      this._onFrozen = this._onFrozen.bind(this);\n      this._onThaw = this._onThaw.bind(this);\n\n      const width = this.data.spawnerPlatformWidth;\n      const spacing = this.data.spawnerPlatformSpacing;\n\n      this.emojiUrls = [];\n      this.spawnerEntities = [];\n      this.spawnEvents = [];\n      this.lastSpawnTime = 0;\n\n      for (let i = 0; i < EMOJIS.length; i++) {\n        const spawnerEntity = document.createElement(\"a-entity\");\n        const url = new URL(EMOJIS[i], window.location.href).href;\n        this.emojiUrls.push(url);\n        spawnerEntity.setAttribute(\"media-loader\", { src: url });\n        spawnerEntity.setAttribute(\"hoverable-visuals\", \"\");\n        spawnerEntity.setAttribute(\"scale\", {\n          x: this.data.spawnerScale,\n          y: this.data.spawnerScale,\n          z: this.data.spawnerScale\n        });\n        spawnerEntity.setAttribute(\"is-remote-hover-target\", \"\");\n        spawnerEntity.setAttribute(\"tags\", { isHandCollisionTarget: false });\n        spawnerEntity.setAttribute(\"visibility-while-frozen\", {\n          requireHoverOnNonMobile: false,\n          withPermission: \"spawn_emoji\"\n        });\n        spawnerEntity.setAttribute(\"css-class\", \"interactable\");\n        spawnerEntity.setAttribute(\"body-helper\", {\n          mass: 0,\n          type: TYPE.STATIC,\n          collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n        });\n\n        const particle = new URL(particles[i], window.location.href).href;\n        const particleEmitterConfig = {\n          src: particle,\n          resolve: false,\n          particleCount: 20,\n          startSize: 0.01,\n          endSize: 0.2,\n          sizeRandomness: 0.05,\n          lifetime: 1,\n          lifetimeRandomness: 0.2,\n          ageRandomness: 1,\n          startVelocity: { x: 0, y: 1, z: 0 },\n          endVelocity: { x: 0, y: 0.25, z: 0 },\n          startOpacity: 1,\n          middleOpacity: 1,\n          endOpacity: 0\n        };\n\n        spawnerEntity.addEventListener(\"spawned-entity-created\", e => {\n          if (this.el.sceneEl.is(\"vr-mode\")) {\n            return;\n          }\n          const object3D = e.detail.target.object3D;\n          const cameraObject3D = this.data.camera.object3D;\n          object3D.updateMatrices();\n          cameraObject3D.getWorldPosition(cameraWorldPosition);\n          object3D.lookAt(cameraWorldPosition.x, object3D.position.y, cameraWorldPosition.z);\n          object3D.matrixNeedsUpdate = true;\n        });\n\n        spawnerEntity.addEventListener(\"spawned-entity-loaded\", e => {\n          e.detail.target.querySelector(\".particle-emitter\").setAttribute(\"particle-emitter\", particleEmitterConfig);\n          e.detail.target.setAttribute(\"emoji\", { particleEmitterConfig: particleEmitterConfig });\n        });\n\n        const spawnEvent = `spawnEmoji${i}`;\n        this.spawnEvents.push(spawnEvent);\n\n        spawnerEntity.setAttribute(\"super-spawner\", {\n          src: url,\n          template: \"#interactable-emoji\",\n          spawnScale: { x: this.data.spawnedScale, y: this.data.spawnedScale, z: this.data.spawnedScale },\n          spawnEvent\n        });\n\n        const cylinder = document.createElement(\"a-cylinder\");\n        cylinder.setAttribute(\"visibility-while-frozen\", {\n          requireHoverOnNonMobile: false,\n          withPermission: \"spawn_emoji\"\n        });\n        cylinder.setAttribute(\"material\", { opacity: 0.2, color: \"#2f7fee\" });\n        cylinder.setAttribute(\"segments-height\", 1);\n        cylinder.setAttribute(\"segments-radial\", 16);\n        cylinder.setAttribute(\"scale\", { x: width / 2, y: width / 20, z: width / 5 });\n        cylinder.setAttribute(\"rotation\", { x: 45, y: 0, z: 0 });\n\n        setOffsetVector(i, EMOJIS.length, width, spacing, offsetVector);\n\n        spawnerEntity.object3D.position.copy(offsetVector);\n        spawnerEntity.object3D.matrixNeedsUpdate = true;\n\n        cylinder.object3D.position.set(offsetVector.x, -width / 2, offsetVector.z + 0.01); //move back to avoid transparency issues with emojis\n        cylinder.object3D.matrixNeedsUpdate = true;\n\n        this.el.appendChild(spawnerEntity);\n        this.el.appendChild(cylinder);\n\n        this.spawnerEntities.push(spawnerEntity);\n      }\n    };\n  })(),\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._onThaw);\n    this._updateOffset();\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._onThaw);\n  },\n\n  tick() {\n    if (\n      window.APP.hubChannel &&\n      window.APP.hubChannel.can(\"spawn_emoji\") &&\n      this.lastSpawnTime + this.data.spawnCooldown * 1000 < performance.now()\n    ) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n\n      for (let i = 0; i < this.spawnEvents.length; i++) {\n        if (userinput.get(paths.actions[this.spawnEvents[i]])) {\n          this.lastSpawnTime = performance.now();\n          this.el.sceneEl.emit(this.spawnEvents[i]);\n          break;\n        }\n      }\n    }\n  },\n\n  _onFrozen(e) {\n    if (e.detail === \"frozen\") {\n      this._updateOffset();\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = true;\n      }\n    }\n  },\n\n  _onThaw(e) {\n    if (e.detail === \"frozen\") {\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = false;\n      }\n    }\n  },\n\n  _updateOffset: (function() {\n    const targetWorldPos = new THREE.Vector3();\n    const cameraForward = new THREE.Vector3();\n    const projectedCameraForward = new THREE.Vector3();\n    const angledCameraForward = new THREE.Vector3();\n    const defaultRight = new THREE.Vector3(1, 0, 0);\n    return function() {\n      const obj = this.el.object3D;\n      const cameraObject3D = this.data.camera.object3D;\n      cameraObject3D.updateMatrices();\n      cameraForward.set(0, 0, -1);\n      cameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.set(0, 0, -1);\n      projectedCameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.projectOnPlane(THREE.Object3D.DefaultUp).normalize();\n      const angle =\n        Math.sign(THREE.Object3D.DefaultUp.dot(cameraForward)) * projectedCameraForward.angleTo(cameraForward);\n      const angleOffset = angle - Math.max(this.data.minHudAngle, Math.min(this.data.maxHudAngle, angle));\n      angledCameraForward.set(0, 0, -1);\n      angledCameraForward.applyAxisAngle(defaultRight, this.data.hudAngle - angleOffset);\n      angledCameraForward.multiplyScalar(this.data.hudDistance);\n      cameraObject3D.localToWorld(angledCameraForward);\n      obj.parent.worldToLocal(angledCameraForward);\n      obj.position.copy(angledCameraForward);\n      obj.updateMatrices(true);\n      cameraObject3D.getWorldPosition(targetWorldPos);\n      obj.lookAt(targetWorldPos);\n      obj.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\nconst HIDDEN_JOYSTICK_STYLE = `${styles.mockJoystick}__hidden`;\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    this.leftMock = document.createElement(\"div\");\n    this.leftMock.classList.add(styles.mockJoystick);\n    this.leftMockSmall = document.createElement(\"div\");\n    this.leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    this.leftMock.appendChild(this.leftMockSmall);\n    this.mockJoystickContainer.appendChild(this.leftMock);\n    this.rightMock = document.createElement(\"div\");\n    this.rightMock.classList.add(styles.mockJoystick);\n    this.rightMockSmall = document.createElement(\"div\");\n    this.rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    this.rightMock.appendChild(this.rightMockSmall);\n    this.mockJoystickContainer.appendChild(this.rightMock);\n\n    this.enableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    this.enableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    if (this.enableLeft || this.enableRight) {\n      document.body.appendChild(this.mockJoystickContainer);\n    }\n    if (this.enableLeft) {\n      this.createLeftStick();\n    } else {\n      this.leftMock.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.leftMockSmall.classList.add(HIDDEN_JOYSTICK_STYLE);\n    }\n    if (this.enableRight) {\n      this.createRightStick();\n    } else {\n      this.rightMock.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.rightMockSmall.classList.add(HIDDEN_JOYSTICK_STYLE);\n    }\n    this.onPreferenceChange = this.onPreferenceChange.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPreferenceChange);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.displacement = new THREE.Vector3();\n    this.lookDy = 0;\n    this.lookDx = 0;\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onPreferenceChange() {\n    const newEnableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    const newEnableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    const isChanged = this.enableLeft !== newEnableLeft || this.enableRight !== newEnableRight;\n    if (!isChanged) {\n      return;\n    }\n    if (!this.enableLeft && newEnableLeft) {\n      this.createLeftStick();\n    } else if (this.enableLeft && !newEnableLeft) {\n      this.leftMock.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.leftMockSmall.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.leftStick.destroy();\n      this.leftTouchZone.parentNode.removeChild(this.leftTouchZone);\n      this.leftStick = null;\n      this.leftTouchZone = null;\n    }\n    if (!this.enableRight && newEnableRight) {\n      this.createRightStick();\n    } else if (this.enableRight && !newEnableRight) {\n      this.rightMock.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.rightMockSmall.classList.add(HIDDEN_JOYSTICK_STYLE);\n      this.rightStick.destroy();\n      this.rightTouchZone.parentNode.removeChild(this.rightTouchZone);\n      this.rightStick = null;\n      this.rightTouchZone = null;\n    }\n    this.enableLeft = newEnableLeft;\n    this.enableRight = newEnableRight;\n\n    if (this.enableLeft) {\n      this.leftMock.classList.remove(HIDDEN_JOYSTICK_STYLE);\n      this.leftMockSmall.classList.remove(HIDDEN_JOYSTICK_STYLE);\n      this.leftStick.on(\"start\", this.onFirstInteraction);\n    }\n    if (this.enableRight) {\n      this.rightMock.classList.remove(HIDDEN_JOYSTICK_STYLE);\n      this.rightMockSmall.classList.remove(HIDDEN_JOYSTICK_STYLE);\n      this.rightStick.on(\"start\", this.onFirstInteraction);\n    }\n    if ((this.enableLeft || this.enableRight) && !this.mockJoystickContainer.parentNode) {\n      document.body.appendChild(this.mockJoystickContainer);\n    }\n    if (!this.enableLeft && !this.enableRight) {\n      this.mockJoystickContainer.parentNode &&\n        this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n    }\n  },\n\n  createRightStick() {\n    this.rightTouchZone = document.createElement(\"div\");\n    this.rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(this.rightTouchZone);\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n  },\n\n  createLeftStick() {\n    this.leftTouchZone = document.createElement(\"div\");\n    this.leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(this.leftTouchZone);\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n  },\n\n  onFirstInteraction() {\n    if (this.leftStick) this.leftStick.off(\"start\", this.onFirstInteraction);\n    if (this.rightStick) this.rightStick.off(\"start\", this.onFirstInteraction);\n    this.mockJoystickContainer.parentNode &&\n      this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    this.displacement.set(Math.cos(angle), 0, Math.sin(angle)).multiplyScalar(force * 1.85);\n    this.moving = true;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.displacement.set(0, 0, 0);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.05;\n    this.rotating = true;\n    this.lookDy = -Math.cos(angle) * force * turnStrength;\n    this.lookDx = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.lookDx = 0;\n    this.lookDy = 0;\n    this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n  },\n\n  tick() {\n    if (this.inVr) {\n      return;\n    }\n    if (this.moving) {\n      this.characterController.enqueueRelativeMotion(this.displacement);\n    }\n    if (this.rotating) {\n      this.characterController.enqueueInPlaceRotationAroundWorldUp(this.lookDy);\n      this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"none\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"block\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    this.mockJoystickContainer.parentNode &&\n      this.mockJoystickContainer.parentNode.removeChild(this.mockJoystickContainer);\n    if (this.leftTouchZone) document.body.removeChild(this.leftTouchZone);\n    if (this.rightTouchZone) document.body.removeChild(this.rightTouchZone);\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    rotationSpeed: { default: 5 },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    waitForDOMContentLoaded().then(() => {\n      this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n    });\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n    this.forceIkUpdate = true;\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    this.avatar = this.el.object3D;\n\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    root.updateMatrices();\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        avatar,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the avatar such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      //\n      // Note that we position the avatar itself, *not* the hips, since positioning the\n      // hips will use vertex skinning to do the root displacement, which results in\n      // frustum culling errors since three.js does not take into account skinning when\n      // computing frustum culling sphere bounds.\n      avatar.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n\n      if (this._hadFirstTick) {\n        Quaternion.slerp(\n          avatar.quaternion,\n          cameraYQuaternion,\n          avatar.quaternion,\n          (this.data.rotationSpeed * dt) / 1000\n        );\n      } else {\n        avatar.quaternion.copy(cameraYQuaternion);\n      }\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, avatar.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(avatar.quaternion).inverse();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      avatar.updateMatrix();\n      rootToChest.multiplyMatrices(avatar.matrix, chest.matrix);\n      invRootToChest.getInverse(rootToChest);\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    if (leftHand) this.updateHand(HAND_ROTATIONS.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(HAND_ROTATIONS.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n\n    if (!this._hadFirstTick) {\n      // Ensure the avatar is not shown until we've done our first IK step, to prevent seeing mis-oriented/t-pose pose or our own avatar at the wrong place.\n      this.ikRoot.el.object3D.visible = true;\n      this._hasFirstTick = true;\n    }\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n\n    if (spaceInvader) {\n      // If this hand has an invader, defer to it to manage visibility overall but tell it to hide based upon controller state\n      spaceInvader.setAlwaysHidden(!controllerObject3D.visible);\n    } else {\n      handObject3D.visible = controllerObject3D.visible;\n    }\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      if (!this.playerCamera) return;\n\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      // Check player camera\n      this.isInView = isInViewOfCamera(this.playerCamera, cameraWorld);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(cameraTool.camera, cameraWorld);\n          });\n        }\n      }\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { showHoverEffect } from \"../utils/permissions-utils\";\n\n/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n    this.sweepParams = [0, 1.0];\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    },\n    lookAt: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      if (this.data.on) {\n        this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n      } else {\n        this.updateOffset();\n      }\n    });\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    const targetWorldPos = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      if (this.data.lookAt) {\n        target.getWorldPosition(targetWorldPos);\n        obj.updateMatrices(true);\n        obj.lookAt(targetWorldPos);\n      } else {\n        target.getWorldQuaternion(obj.quaternion);\n      }\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance } from \"../utils/component-utils\";\nimport { deregisterComponentInstance } from \"../utils/component-utils\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.SKINNABLE }\n  },\n  init() {\n    this.displayName = null;\n    this.identityName = null;\n    this.isOwner = false;\n    this.isRecording = false;\n    this.applyProperties = this.applyProperties.bind(this);\n    this.updateDisplayName = this.updateDisplayName.bind(this);\n    this.applyDisplayName = this.applyDisplayName.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n    this.update = this.update.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"avatar-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateDisplayNameFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n    registerComponentInstance(this, \"player-info\");\n  },\n  remove() {\n    deregisterComponentInstance(this, \"player-info\");\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    }\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n\n    this.el.sceneEl.addEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.update);\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    }\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.update);\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n  },\n\n  update() {\n    this.applyProperties();\n  },\n  updateDisplayName(e) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== e.detail.sessionId) return;\n\n    this.updateDisplayNameFromPresenceMeta(e.detail);\n  },\n  updateDisplayNameFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.identityName = presenceMeta.profile.identityName;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isOwner = !!(presenceMeta.roles && presenceMeta.roles.owner);\n    this.applyDisplayName();\n  },\n  applyDisplayName() {\n    const store = window.APP.store;\n\n    const infoShouldBeHidden =\n      this.isLocalPlayerInfo || (store.state.preferences.onlyShowNametagsInFreeze && !this.el.sceneEl.is(\"frozen\"));\n\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", { value: this.displayName });\n      nametagEl.object3D.visible = !infoShouldBeHidden;\n    }\n    const identityNameEl = this.el.querySelector(\".identityName\");\n    if (identityNameEl) {\n      if (this.identityName) {\n        identityNameEl.setAttribute(\"text\", { value: this.identityName });\n        identityNameEl.object3D.visible = this.el.sceneEl.is(\"frozen\");\n      }\n    }\n    const recordingBadgeEl = this.el.querySelector(\".recordingBadge\");\n    if (recordingBadgeEl) {\n      recordingBadgeEl.object3D.visible = this.isRecording && !infoShouldBeHidden;\n    }\n\n    const modBadgeEl = this.el.querySelector(\".modBadge\");\n    if (modBadgeEl) {\n      modBadgeEl.object3D.visible = !this.isRecording && this.isOwner && !infoShouldBeHidden;\n    }\n  },\n  applyProperties(e) {\n    this.applyDisplayName();\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n    }\n\n    if (!e || e.target === modelEl) {\n      const uniforms = injectCustomShaderChunks(this.el.object3D);\n      this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n        el.components[\"hover-visuals\"].uniforms = uniforms;\n      });\n    }\n  },\n  handleModelError() {\n    window.APP.store.resetToRandomDefaultAvatar();\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { CAMERA_MODE_FIRST_PERSON } from \"../systems/camera-system\";\nconst TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible =\n      (!hudOutOfView || forceHudVisible) &&\n      this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_FIRST_PERSON;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n    const inspecting = scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT;\n    if (inspecting) {\n      if (this.el.is(\"frozen\")) {\n        this.onToggle();\n      }\n      if (!NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = true;\n    } else if (this.wasInspecting) {\n      if (NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = false;\n    } else {\n      const userinput = scene.systems.userinput;\n      const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n      const thaw = userinput.get(paths.actions.thaw);\n      const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n      const toggleFreezeDueToInput =\n        (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n      if (toggleFreezeDueToInput) {\n        this.onToggle();\n      }\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true },\n    withPermission: { type: \"string\" },\n    withoutPermission: { type: \"string\" },\n    visibleIfOwned: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n\n    waitForDOMContentLoaded().then(() => {\n      this.cam = document.getElementById(\"viewing-camera\").object3D;\n      this.updateVisibility();\n    });\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    if (!this.data.visibleIfOwned) {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .then(() => {}); //ignore exception, entity might not be networked\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    if (!this.cam) return;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = this.el.sceneEl.systems[\"transform-selected-object\"].transforming;\n\n    if (this.data.withPermission && this.data.withoutPermission) {\n      throw new Error(\n        \"only withPermission or withoutPermission can be speciifed on visibility-while-frozen, not both.\"\n      );\n    }\n\n    const allowed = !!(\n      (!this.data.withPermission && !this.data.withoutPermission) ||\n      (this.data.withPermission &&\n        window.APP.hubChannel &&\n        window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission)) ||\n      (this.data.withoutPermission &&\n        window.APP.hubChannel &&\n        !window.APP.hubChannel.canOrWillIfCreator(this.data.withoutPermission))\n    );\n\n    let shouldBeVisible =\n      allowed &&\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) &&\n      isWithinDistance &&\n      !isTransforming;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable &&\n          (this.el.sceneEl.systems.interaction.state.rightRemote.hovered === this.hoverable ||\n            this.el.sceneEl.systems.interaction.state.leftRemote.hovered === this.hoverable)) ||\n          isVisible);\n    }\n\n    if (!this.data.visibleIfOwned) {\n      shouldBeVisible = shouldBeVisible && this.networkedEl && !NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 },\n      batchdraws: { caption: \"Draws\" },\n      batchinstances: { caption: \"Instances\" },\n      batchatlassize: { caption: \"Atlas Size\" }\n    },\n    groups: [\n      { caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] },\n      { caption: \"Batching\", values: [\"batchdraws\", \"batchinstances\", \"batchatlassize\"] }\n    ],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n    // HACK for now in rare case where dom isn't ready, just bail\n    if (!this.statsEl) return;\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { width: 0.5, whiteSpace: \"pre\", value: \"_\", baseline: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = document.createElement(\"a-plane\");\n    background.setAttribute(\"color\", \"#333333\");\n    background.setAttribute(\"material\", \"shader\", \"flat\");\n    background.setAttribute(\"material\", \"depthTest\", false);\n    background.setAttribute(\"width\", 0.1);\n    background.setAttribute(\"height\", 0.12);\n    background.setAttribute(\"position\", \"-0.2 0.055 0\");\n    this.el.append(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (!this.statsEl) return;\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n      stats(\"physics\").set(this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem.stepDuration);\n\n      const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n      if (batchManagerSystem.batchingEnabled) {\n        const batchManager = batchManagerSystem.batchManager;\n        stats(\"batchdraws\").set(batchManager.batches.length);\n        stats(\"batchinstances\").set(batchManager.instanceCount);\n        stats(\"batchatlassize\").set(batchManager.atlas.arrayDepth);\n      }\n\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","import { cloneMedia, closeExistingMediaMirror } from \"./media-utils\";\nlet mirrorTarget;\nexport function getCurrentMirroredMedia() {\n  mirrorTarget = mirrorTarget || document.querySelector(\"#media-mirror-target\");\n  const mirrorEl = mirrorTarget.firstChild;\n  const linkedEl = mirrorEl && mirrorEl.components[\"media-loader\"] && mirrorEl.components[\"media-loader\"].data.linkedEl;\n  return linkedEl;\n}\nexport async function refreshMediaMirror() {\n  const linkedEl = getCurrentMirroredMedia();\n  if (!linkedEl) {\n    return;\n  }\n  await closeExistingMediaMirror();\n  const { entity } = cloneMedia(\n    linkedEl,\n    \"#linked-media\",\n    linkedEl.components[\"media-loader\"].data.src,\n    false,\n    true,\n    mirrorTarget\n  );\n\n  entity.object3D.scale.set(0.75, 0.75, 0.75);\n  entity.object3D.matrixNeedsUpdate = true;\n\n  const refreshButton = entity.querySelector(\"[refresh-media-button]\");\n  if (refreshButton) {\n    refreshButton.parentNode.removeChild(refreshButton);\n  }\n\n  const localRefreshButton = entity.querySelector(\"[local-refresh-media-button]\");\n  if (localRefreshButton) {\n    localRefreshButton.parentNode.removeChild(localRefreshButton);\n  }\n\n  mirrorTarget.parentEl.components[\"follow-in-fov\"].reset();\n  mirrorTarget.parentEl.object3D.visible = true;\n}\n","/* global performance THREE AFRAME NAF MediaStream setTimeout */\nimport configs from \"../utils/configs\";\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\nimport audioIcon from \"../assets/images/audio.png\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js/dist/hls.light.js\";\nimport { addAndArrangeMedia, createImageTexture, createBasisTexture } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport pdfjs from \"pdfjs-dist\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { refreshMediaMirror, getCurrentMirroredMedia } from \"../utils/mirror-utils\";\n\n// Using external CDN to reduce build size\nif (!pdfjs.GlobalWorkerOptions.workerSrc) {\n  pdfjs.GlobalWorkerOptions.workerSrc =\n    \"https://assets-prod.reticulum.io/assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js\";\n}\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nconst isIOS = AFRAME.utils.device.isIOS();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isFirefoxReality = isMobileVR && navigator.userAgent.match(/Firefox/);\nconst HLS_TIMEOUT = 10000; // HLS can sometimes fail, we re-try after this duration\nconst audioIconTexture = new THREE.TextureLoader().load(audioIcon);\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"[\";\n  for (let j = 1; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"]\";\n  VOLUME_LABELS[i] = s;\n}\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nfunction createVideoOrAudioEl(type) {\n  const el = document.createElement(type);\n  el.setAttribute(\"playsinline\", \"\");\n  el.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  el.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  el.muted = isIOS;\n  el.preload = \"auto\";\n  el.crossOrigin = \"anonymous\";\n\n  return el;\n}\n\nfunction scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.stopLoad();\n    texture.hls.detachMedia();\n    texture.hls.destroy();\n    texture.hls = null;\n  }\n\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  key(src, version) {\n    return `${src}_${version}`;\n  }\n\n  set(src, version, texture) {\n    const image = texture.image;\n    this.cache.set(this.key(src, version), {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src, version);\n  }\n\n  has(src, version) {\n    return this.cache.has(this.key(src, version));\n  }\n\n  get(src, version) {\n    return this.cache.get(this.key(src, version));\n  }\n\n  retain(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(this.key(src, version));\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\nconst inflightTextures = new Map();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\nconst errorCacheItem = { texture: errorTexture, ratio: 1 };\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    audioSrc: { type: \"string\" },\n    contentType: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.updateHoverMenu = this.updateHoverMenu.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.ensureOwned = this.ensureOwned.bind(this);\n    this.isMineOrLocal = this.isMineOrLocal.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n\n    this.distanceBasedAttenuation = 1;\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.videoIsLive = null; // value null until we've determined if the video is live or not.\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenu();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        applyPersistentSync(this.networkedEl.components.networked.data.networkId);\n        this.updatePlaybackState();\n\n        this.networkedEl.addEventListener(\"pinned\", this.updateHoverMenu);\n        this.networkedEl.addEventListener(\"unpinned\", this.updateHoverMenu);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n        // For scene-owned videos, take ownership after a random delay if nobody\n        // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n        // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n        // at once, which will pause the videos for everyone in the room if owned.\n        if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n          setTimeout(() => {\n            if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n              NAF.utils.takeOwnership(this.networkedEl);\n            }\n          }, 2000 + Math.floor(Math.random() * 2000));\n        }\n      })\n      .catch(() => {\n        // Non-networked\n        this.updatePlaybackState();\n      });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  isMineOrLocal() {\n    return !this.el.components.networked || (this.networkedEl && NAF.utils.isMine(this.networkedEl));\n  },\n\n  ensureOwned() {\n    return (\n      !this.el.components.networked ||\n      ((this.networkedEl && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl))\n    );\n  },\n\n  seekForward() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"media-video\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      this.video.play();\n      return;\n    }\n\n    if (this.ensureOwned()) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      return;\n    }\n\n    // Used in the HACK in hub.js for dealing with auto-pause in Oculus Browser\n    if (this._ignorePauseStateChanges) return;\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    this.updateHoverMenu();\n\n    // Only update playback position for videos you don't own\n    if (this.video && (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl)))) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n\n    // Volume is local, always update it\n    if (this.audio && window.APP.store.state.preferences.audioOutputMode !== \"audio\") {\n      const globalMediaVolume =\n        window.APP.store.state.preferences.globalMediaVolume !== undefined\n          ? window.APP.store.state.preferences.globalMediaVolume\n          : 100;\n      this.audio.gain.gain.value = (globalMediaVolume / 100) * this.data.volume;\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    // Update current time if we've determined this video is not a live stream, since otherwise we may\n    // update the video to currentTime = 0\n    if (this.videoIsLive === false && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        if (pause !== this.data.videoPaused) return;\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  async update(oldData) {\n    const src = this.data.src;\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n    return this.updateSrc(oldData);\n  },\n\n  setupAudio() {\n    if (this.audio) {\n      this.audio.disconnect();\n      this.el.removeObject3D(\"sound\");\n    }\n\n    if (this.data.audioType === \"pannernode\") {\n      this.audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n      this.setPositionalAudioProperties();\n      this.distanceBasedAttenuation = 1;\n    } else {\n      this.audio = new THREE.Audio(this.el.sceneEl.audioListener);\n    }\n    window.foo = this.audio;\n\n    this.audio.setNodeSource(this.mediaElementAudioSource);\n    this.el.setObject3D(\"sound\", this.audio);\n  },\n\n  setPositionalAudioProperties() {\n    this.audio.setDistanceModel(this.data.distanceModel);\n    this.audio.setRolloffFactor(this.data.rolloffFactor);\n    this.audio.setRefDistance(this.data.refDistance);\n    this.audio.setMaxDistance(this.data.maxDistance);\n    this.audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n    this.audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n    this.audio.panner.coneOuterGain = this.data.coneOuterGain;\n  },\n\n  async updateSrc(oldData) {\n    const { src, linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture, audioSourceEl;\n    try {\n      if (linkedVideoTexture) {\n        texture = linkedVideoTexture;\n        audioSourceEl = linkedAudioSource;\n      } else {\n        ({ texture, audioSourceEl } = await this.createVideoTextureAudioSourceEl());\n        if (getCurrentMirroredMedia() === this.el) {\n          await refreshMediaMirror();\n        }\n      }\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      this.mediaElementAudioSource = null;\n\n      if (!src.startsWith(\"hubs://\")) {\n        // iOS video audio is broken, see: https://github.com/mozilla/hubs/issues/1797\n        if (!isIOS) {\n          // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n          this.mediaElementAudioSource =\n            linkedMediaElementAudioSource ||\n            this.el.sceneEl.audioListener.context.createMediaElementSource(audioSourceEl);\n          this.setupAudio();\n        }\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateLiveState = () => {\n          if (texture.hls.currentLevel >= 0) {\n            const videoWasLive = !!this.videoIsLive;\n            this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n            this.updateHoverMenu();\n\n            if (!videoWasLive && this.videoIsLive) {\n              this.el.emit(\"video_is_live_update\", { videoIsLive: this.videoIsLive });\n              // We just determined the video is live (there can be a delay due to autoplay issues, etc)\n              // so catch it up to HEAD.\n              if (!isFirefoxReality) {\n                // HACK this causes live streams to freeze in FxR due to https://github.com/MozillaReality/FirefoxReality/issues/1602, TODO remove once 1.4 ships\n                this.video.currentTime = this.video.duration - 0.01;\n              }\n            }\n          }\n        };\n        texture.hls.on(HLS.Events.LEVEL_LOADED, updateLiveState);\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.el.emit(\"video_is_live_update\", { videoIsLive: this.videoIsLive });\n        this.updateHoverMenu();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n\n      this.videoTexture = texture;\n      this.audioSource = audioSourceEl;\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n      this.videoTexture = this.audioSource = null;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    if (this.data.contentType.startsWith(\"audio/\")) {\n      this.mesh.material.map = audioIconTexture;\n    } else {\n      this.mesh.material.map = texture;\n    }\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\" && !this.data.contentType.startsWith(\"audio/\")) {\n      scaleToAspectRatio(\n        this.el,\n        (texture.image.videoHeight || texture.image.height) / (texture.image.videoWidth || texture.image.width)\n      );\n    }\n\n    this.updatePlaybackState(true);\n\n    if (this.video && this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  async createVideoTextureAudioSourceEl() {\n    const url = this.data.src;\n    const contentType = this.data.contentType;\n\n    return new Promise(async (resolve, reject) => {\n      if (this._audioSyncInterval) {\n        clearInterval(this._audioSyncInterval);\n        this._audioSyncInterval = null;\n      }\n\n      const videoEl = createVideoOrAudioEl(\"video\");\n\n      let texture, audioEl, isReady;\n      if (contentType.startsWith(\"audio/\")) {\n        // We want to treat audio almost exactly like video, so we mock a video texture with an image property.\n        texture = new THREE.Texture();\n        texture.image = videoEl;\n        isReady = () => true;\n      } else {\n        texture = new THREE.VideoTexture(videoEl);\n        texture.minFilter = THREE.LinearFilter;\n        texture.encoding = THREE.sRGBEncoding;\n        isReady = () =>\n          (texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width);\n      }\n\n      // Set src on video to begin loading.\n      if (url.startsWith(\"hubs://\")) {\n        const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n        const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n        videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n        // If hls.js is supported we always use it as it gives us better events\n      } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n        if (HLS.isSupported()) {\n          const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n          const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n          const setupHls = () => {\n            if (texture.hls) {\n              texture.hls.stopLoad();\n              texture.hls.detachMedia();\n              texture.hls.destroy();\n              texture.hls = null;\n            }\n\n            const hls = new HLS({\n              xhrSetup: (xhr, u) => {\n                if (u.startsWith(corsProxyPrefix)) {\n                  u = u.substring(corsProxyPrefix.length);\n                }\n\n                // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n                // TODO extend HLS.js to allow overriding of its internal resolving instead\n                if (!u.startsWith(\"http\")) {\n                  u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n                }\n\n                xhr.open(\"GET\", proxiedUrlFor(u));\n              }\n            });\n\n            texture.hls = hls;\n            hls.loadSource(url);\n            hls.attachMedia(videoEl);\n\n            hls.on(HLS.Events.ERROR, function(event, data) {\n              if (data.fatal) {\n                switch (data.type) {\n                  case HLS.ErrorTypes.NETWORK_ERROR:\n                    // try to recover network error\n                    hls.startLoad();\n                    break;\n                  case HLS.ErrorTypes.MEDIA_ERROR:\n                    hls.recoverMediaError();\n                    break;\n                  default:\n                    reject(event);\n                    return;\n                }\n              }\n            });\n          };\n\n          setupHls();\n\n          // Sometimes for weird streams HLS fails to initialize.\n          const setupInterval = setInterval(() => {\n            // Stop retrying if the src changed.\n            const isNoLongerSrc = this.data.src !== url;\n\n            if (isReady() || isNoLongerSrc) {\n              clearInterval(setupInterval);\n            } else {\n              console.warn(\"HLS failed to read video, trying again\");\n              setupHls();\n            }\n          }, HLS_TIMEOUT);\n          // If not, see if native support will work\n        } else if (videoEl.canPlayType(contentType)) {\n          videoEl.src = url;\n          videoEl.onerror = reject;\n        } else {\n          reject(\"HLS unsupported\");\n        }\n      } else {\n        videoEl.src = url;\n        videoEl.onerror = reject;\n\n        if (this.data.audioSrc) {\n          // If there's an audio src, create an audio element to play it that we keep in sync\n          // with the video while this component is active.\n          audioEl = createVideoOrAudioEl(\"audio\");\n          audioEl.src = this.data.audioSrc;\n          audioEl.onerror = reject;\n\n          this._audioSyncInterval = setInterval(() => {\n            if (Math.abs(audioEl.currentTime - videoEl.currentTime) >= 0.33) {\n              // In Chrome, drift of a few frames seems persistent\n              audioEl.currentTime = videoEl.currentTime;\n            }\n\n            // During pause state change, correct any drift that remains.\n            if (videoEl.paused !== audioEl.paused) {\n              videoEl.paused ? audioEl.pause() : audioEl.play();\n              audioEl.currentTime = videoEl.currentTime;\n            }\n          }, 1000);\n        }\n      }\n\n      // NOTE: We used to use the canplay event here to yield the texture, but that fails to fire on iOS Safari\n      // and also sometimes in Chrome it seems.\n      const poll = () => {\n        if (isReady()) {\n          resolve({ texture, audioSourceEl: audioEl || texture.image });\n        } else {\n          setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    });\n  },\n\n  updateHoverMenu() {\n    if (!this.hoverMenu) return;\n\n    const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n    const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n    this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n    this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n\n    this.snapButton.object3D.visible =\n      !!this.video && !this.data.contentType.startsWith(\"audio/\") && window.APP.hubChannel.can(\"spawn_and_move_media\");\n    this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n\n    const mayModifyPlayHead =\n      !!this.video && !this.videoIsLive && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n\n    this.playPauseButton.object3D.visible = this.seekForwardButton.object3D.visible = this.seekBackButton.object3D.visible = mayModifyPlayHead;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick: (() => {\n    const positionA = new THREE.Vector3();\n    const positionB = new THREE.Vector3();\n    return function() {\n      if (!this.video) return;\n\n      const userinput = this.el.sceneEl.systems.userinput;\n      const interaction = this.el.sceneEl.systems.interaction;\n      const volumeModRight = userinput.get(paths.actions.cursor.right.mediaVolumeMod);\n      if (interaction.state.rightRemote.hovered === this.el && volumeModRight) {\n        this.changeVolumeBy(volumeModRight);\n      }\n      const volumeModLeft = userinput.get(paths.actions.cursor.left.mediaVolumeMod);\n      if (interaction.state.leftRemote.hovered === this.el && volumeModLeft) {\n        this.changeVolumeBy(volumeModLeft);\n      }\n\n      const isHeld = interaction.isHeld(this.el);\n\n      if (this.wasHeld && !isHeld) {\n        this.localSnapCount = 0;\n      }\n\n      this.wasHeld = isHeld;\n\n      if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n        this.timeLabel.setAttribute(\n          \"text\",\n          \"value\",\n          `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n        );\n      }\n\n      // If a known non-live video is currently playing and we own it, send out time updates\n      if (\n        !this.data.videoPaused &&\n        this.videoIsLive === false &&\n        this.networkedEl &&\n        NAF.utils.isMine(this.networkedEl)\n      ) {\n        const now = performance.now();\n        if (now - this.lastUpdate > this.data.tickRate) {\n          this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n          this.lastUpdate = now;\n        }\n      }\n\n      if (this.audio) {\n        const audioOutputMode = window.APP.store.state.preferences.audioOutputMode === \"audio\" ? \"audio\" : \"panner\";\n        if (\n          (audioOutputMode === \"panner\" && this.data.audioType !== \"pannernode\") ||\n          (audioOutputMode === \"audio\" && this.data.audioType !== \"audionode\")\n        ) {\n          this.data.audioType = audioOutputMode === \"panner\" ? \"pannernode\" : \"audionode\";\n          this.setupAudio();\n        }\n\n        if (audioOutputMode === \"audio\") {\n          this.el.object3D.getWorldPosition(positionA);\n          this.el.sceneEl.camera.getWorldPosition(positionB);\n          const distance = positionA.distanceTo(positionB);\n          this.distanceBasedAttenuation = Math.min(1, 10 / Math.max(1, distance * distance));\n          const globalMediaVolume =\n            window.APP.store.state.preferences.globalMediaVolume !== undefined\n              ? window.APP.store.state.preferences.globalMediaVolume\n              : 100;\n          this.audio.gain.gain.value = (globalMediaVolume / 100) * this.data.volume * this.distanceBasedAttenuation;\n        }\n      }\n    };\n  })(),\n\n  cleanUp() {\n    if (this.mesh && this.mesh.material) {\n      if (!this.data.linkedVideoTexture) {\n        disposeTexture(this.mesh.material.map);\n      }\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    if (this.mesh) {\n      this.el.removeObject3D(\"mesh\");\n    }\n\n    if (this._audioSyncInterval) {\n      clearInterval(this._audioSyncInterval);\n      this._audioSyncInterval = null;\n    }\n\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audio.disconnect();\n      delete this.audio;\n    }\n\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.updateHoverMenu);\n      this.networkedEl.removeEventListener(\"unpinned\", this.updateHoverMenu);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    version: { type: \"number\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    batch: { default: false }\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n    if (this.currentSrcIsRetained) {\n      textureCache.release(this.data.src, this.data.version);\n      this.currentSrcIsRetained = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n\n    try {\n      const { src, version, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.material.map && (src !== oldData.src || version !== oldData.version)) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.material.map !== errorTexture) {\n          textureCache.release(oldData.src, oldData.version);\n          this.currentSrcIsRetained = false;\n        }\n      }\n\n      let cacheItem;\n      if (textureCache.has(src, version)) {\n        if (this.currentSrcIsRetained) {\n          cacheItem = textureCache.get(src, version);\n        } else {\n          cacheItem = textureCache.retain(src, version);\n        }\n      } else {\n        const inflightKey = textureCache.key(src, version);\n\n        if (src === \"error\") {\n          cacheItem = errorCacheItem;\n        } else if (inflightTextures.has(inflightKey)) {\n          await inflightTextures.get(inflightKey);\n          cacheItem = textureCache.retain(src, version);\n        } else {\n          let promise;\n          if (contentType.includes(\"image/gif\")) {\n            promise = createGIFTexture(src);\n          } else if (contentType.includes(\"image/basis\")) {\n            promise = createBasisTexture(src);\n          } else if (contentType.startsWith(\"image/\")) {\n            promise = createImageTexture(src);\n          } else {\n            throw new Error(`Unknown image content type: ${contentType}`);\n          }\n          inflightTextures.set(inflightKey, promise);\n          texture = await promise;\n          inflightTextures.delete(inflightKey);\n          cacheItem = textureCache.set(src, version, texture);\n        }\n\n        // No way to cancel promises, so if src has changed or this entity was removed while we were creating the texture just throw it away.\n        if (this.data.src !== src || this.data.version !== version || !this.el.parentNode) {\n          textureCache.release(src, version);\n          return;\n        }\n      }\n\n      texture = cacheItem.texture;\n      ratio = cacheItem.ratio;\n\n      this.currentSrcIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this.currentSrcIsRetained = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (this.mesh && this.data.batch) {\n      // This is a no-op if the mesh was just created.\n      // Otherwise we want to ensure the texture gets updated.\n      batchManagerSystem.removeObject(this.mesh);\n    }\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n\n        // Flip uvs on the geometry\n        if (!texture.flipY) {\n          const uvs = geometry.attributes.uv.array;\n\n          for (let i = 1; i < uvs.length; i += 2) {\n            uvs[i] = 1 - uvs[i];\n          }\n        }\n      } else {\n        geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    // We only support transparency on gifs. Other images will support cutout as part of batching, but not alpha transparency for now\n    this.mesh.material.transparent =\n      !this.data.batch ||\n      texture == errorTexture ||\n      this.data.contentType.includes(\"image/gif\") ||\n      (texture.image && texture.image.hasAlpha);\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    if (texture !== errorTexture && this.data.batch && !texture.isCompressedTexture) {\n      batchManagerSystem.addObject(this.mesh);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n\nAFRAME.registerComponent(\"media-pdf\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    index: { default: 0 },\n    batch: { default: false }\n  },\n\n  init() {\n    this.snap = this.snap.bind(this);\n    this.canvas = document.createElement(\"canvas\");\n    this.canvasContext = this.canvas.getContext(\"2d\");\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n    this.texture = new THREE.CanvasTexture(this.canvas);\n\n    this.texture.encoding = THREE.sRGBEncoding;\n    this.texture.minFilter = THREE.LinearFilter;\n\n    this.el.addEventListener(\"pager-snap-clicked\", () => this.snap());\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const blob = await new Promise(resolve => this.canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount, false, 1);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, index } = this.data;\n      if (!src) return;\n\n      if (this.renderTask) {\n        await this.renderTask.promise;\n        if (src !== this.data.src || index !== this.data.index) return;\n      }\n\n      this.el.emit(\"pdf-loading\");\n\n      if (src !== oldData.src) {\n        const loadingSrc = this.data.src;\n        const pdf = await pdfjs.getDocument(src);\n        if (loadingSrc !== this.data.src) return;\n\n        this.pdf = pdf;\n        this.el.setAttribute(\"media-pager\", { maxIndex: this.pdf.numPages - 1 });\n      }\n\n      const page = await this.pdf.getPage(index + 1);\n      if (src !== this.data.src || index !== this.data.index) return;\n\n      const viewport = page.getViewport({ scale: 3 });\n      const pw = viewport.width;\n      const ph = viewport.height;\n      texture = this.texture;\n      ratio = ph / pw;\n\n      this.canvas.width = pw;\n      this.canvas.height = ph;\n\n      this.renderTask = page.render({ canvasContext: this.canvasContext, viewport });\n\n      await this.renderTask.promise;\n\n      this.renderTask = null;\n\n      if (src !== this.data.src || index !== this.data.index) return;\n\n      this.currentPageTextureIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading PDF\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    if (!this.mesh) {\n      const material = new THREE.MeshBasicMaterial();\n      const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n      material.side = THREE.DoubleSide;\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.transparent = texture == errorTexture;\n    this.mesh.material.map = texture;\n    this.mesh.material.map.needsUpdate = true;\n    this.mesh.material.needsUpdate = true;\n\n    scaleToAspectRatio(this.el, ratio);\n\n    if (texture !== errorTexture && this.data.batch) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.mesh);\n    }\n\n    if (this.el.components[\"media-pager\"] && this.el.components[\"media-pager\"].data.index !== this.data.index) {\n      this.el.setAttribute(\"media-pager\", { index: this.data.index });\n    }\n\n    this.el.emit(\"pdf-loaded\", { src: this.data.src });\n  }\n});\n","import { VOLUME_LABELS } from \"./media-views\";\nconst MAX_VOLUME = 8;\nconst SMALL_STEP = 1 / (VOLUME_LABELS.length / 2);\nconst BIG_STEP = (MAX_VOLUME - 1) / (VOLUME_LABELS.length / 2);\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  schema: {\n    volume: { type: \"number\", default: 1.0 }\n  },\n\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n    this.update = this.update.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n\n    this.updateVolumeLabel();\n  },\n  remove() {\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"avatar-volume-controls\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, MAX_VOLUME));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    const step = this.data.volume > 1 - SMALL_STEP ? BIG_STEP : SMALL_STEP;\n    this.changeVolumeBy(step);\n  },\n\n  volumeDown() {\n    const step = this.data.volume > 1 + SMALL_STEP ? BIG_STEP : SMALL_STEP;\n    this.changeVolumeBy(-1 * step);\n  },\n\n  update() {\n    const audioOutputMode = window.APP.store.state.preferences.audioOutputMode;\n    if (\n      this.networkedAudioSource &&\n      this.networkedAudioSource.sound &&\n      (audioOutputMode === undefined || audioOutputMode === \"panner\")\n    ) {\n      const globalVoiceVolume =\n        window.APP.store.state.preferences.globalVoiceVolume !== undefined\n          ? window.APP.store.state.preferences.globalVoiceVolume\n          : 100;\n      this.networkedAudioSource.sound.gain.gain.value = (globalVoiceVolume / 100) * this.data.volume;\n    }\n  },\n\n  updateVolumeLabel() {\n    const numBars = Math.min(\n      VOLUME_LABELS.length - 1,\n      this.data.volume <= 1.001\n        ? Math.floor(this.data.volume / SMALL_STEP)\n        : Math.floor(VOLUME_LABELS.length / 2 + (this.data.volume - 1) / BIG_STEP)\n    );\n    this.volumeLabel.setAttribute(\"text\", \"value\", this.data.volume === 0 ? \"Muted\" : VOLUME_LABELS[numBars]);\n  },\n\n  tick: (() => {\n    const positionA = new THREE.Vector3();\n    const positionB = new THREE.Vector3();\n    return function() {\n      if (!this.networkedAudioSource) {\n        // Walk up to Spine and then search down.\n        const source = this.el.parentNode.parentNode.querySelector(\"[networked-audio-source]\");\n        if (!source) return;\n        this.networkedAudioSource = source.components[\"networked-audio-source\"];\n      }\n      if (!this.networkedAudioSource) return;\n\n      if (window.APP.store.state.preferences.audioOutputMode === \"audio\") {\n        const globalVoiceVolume =\n          window.APP.store.state.preferences.globalVoiceVolume !== undefined\n            ? window.APP.store.state.preferences.globalVoiceVolume\n            : 100;\n        this.networkedAudioSource.el.object3D.getWorldPosition(positionA);\n        this.el.sceneEl.camera.getWorldPosition(positionB);\n        const distance = positionA.distanceTo(positionB);\n        this.networkedAudioSource.sound.gain.gain.value =\n          (globalVoiceVolume / 100) * this.data.volume * Math.min(1, 10 / Math.max(1, distance * distance));\n      } else {\n        this.update();\n      }\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst rotatePitchAndYaw = (function() {\n  const opq = new THREE.Quaternion();\n  const owq = new THREE.Quaternion();\n  const oq = new THREE.Quaternion();\n  const pq = new THREE.Quaternion();\n  const yq = new THREE.Quaternion();\n  const q = new THREE.Quaternion();\n  const right = new THREE.Vector3();\n  const v = new THREE.Vector3();\n  const UP = new THREE.Vector3(0, 1, 0);\n\n  return function rotatePitchAndYaw(o, p, y) {\n    o.parent.updateMatrices();\n    o.updateMatrices();\n    o.parent.getWorldQuaternion(opq);\n    o.getWorldQuaternion(owq);\n    oq.copy(o.quaternion);\n    v.set(0, 1, 0).applyQuaternion(oq);\n    const initialUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(oq);\n    const initialForwardDotUp = Math.abs(v.dot(UP));\n    right.set(1, 0, 0).applyQuaternion(owq);\n    pq.setFromAxisAngle(right, p);\n    yq.setFromAxisAngle(UP, y);\n\n    q.copy(owq)\n      .premultiply(pq)\n      .premultiply(yq)\n      .premultiply(opq.inverse());\n    v.set(0, 1, 0).applyQuaternion(q);\n    const newUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(q);\n    const newForwardDotUp = Math.abs(v.dot(UP));\n    // Ensure our pitch is in an accepted range and our head would not be flipped upside down\n    if ((newForwardDotUp > 0.9 && newForwardDotUp > initialForwardDotUp) || (newUpDot < 0 && newUpDot < initialUpDot)) {\n      // TODO: Apply a partial rotation that does not exceed the bounds for nicer UX\n      return;\n    } else {\n      o.quaternion.copy(q);\n      o.matrixNeedsUpdate = true;\n      o.updateMatrices();\n    }\n  };\n})();\n\nlet uiRoot;\nlet scenePreviewNode;\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  init() {\n    this.pendingXRotation = 0;\n    this.el.sceneEl.addEventListener(\"rotateX\", e => {\n      this.pendingXRotation += e.detail;\n    });\n    this.on = true;\n  },\n\n  tick() {\n    if (this.on) {\n      const scene = AFRAME.scenes[0];\n      const userinput = scene.systems.userinput;\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      scenePreviewNode = scenePreviewNode || document.getElementById(\"scene-preview-node\");\n      const lobby = !scene.is(\"entered\");\n      const isGhost = lobby && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      const cameraDelta = userinput.get(lobby ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta);\n      if (cameraDelta) {\n        rotatePitchAndYaw(\n          lobby && !isGhost ? scenePreviewNode.object3D : this.el.object3D,\n          this.pendingXRotation + cameraDelta[1],\n          cameraDelta[0]\n        );\n      } else if (this.pendingXRotation) {\n        rotatePitchAndYaw(lobby && !isGhost ? scenePreviewNode.object3D : this.el.object3D, this.pendingXRotation, 0);\n      }\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\nimport { CAMERA_MODE_FIRST_PERSON } from \"../systems/camera-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst zero = new THREE.Vector3(0, 0, 0);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this._setupTarget = this._setupTarget.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n\n    this._setupTarget();\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  async _setupTarget() {\n    await waitForDOMContentLoaded();\n\n    this.targetEl = this.el.querySelector(this.data.target);\n    this.target = this.targetEl.object3D;\n\n    this.targetEl.addEventListener(\"animationcomplete\", () => {\n      this.targetEl.removeAttribute(\"animation__show\");\n    });\n\n    this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (!this.target) return;\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.object3D.visible;\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(this.data.animate, true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const pointOnBoxFaceToCamera = new THREE.Vector3();\n    const boxCenter = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n    const boxFaceNormal = new THREE.Vector3();\n    const min = new THREE.Vector3(0.001, 0.001, 0.001);\n\n    return function(animate, forceNewExtents) {\n      if (forceNewExtents || this.mesh !== this.el.getObject3D(\"mesh\")) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n        if (!this.mesh) return;\n\n        const box = getBox(this.el, this.mesh);\n        this.halfExtents = box.min\n          .clone()\n          .negate()\n          .add(box.max)\n          .multiplyScalar(0.65);\n\n        this.halfExtents.max(min);\n      }\n\n      if (!this.target) return;\n\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let targetSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n      let targetCameraDot = -1.1;\n\n      this.el.object3D.updateMatrices();\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        boxCenter.copy(zero);\n\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        this.el.object3D.localToWorld(boxCenter);\n\n        pointOnBoxFaceToCamera.subVectors(camWorldPos, pointOnBoxFace);\n        pointOnBoxFaceToCamera.normalize();\n\n        boxFaceNormal.subVectors(pointOnBoxFace, boxCenter);\n        boxFaceNormal.normalize();\n\n        // Compute dot between camera + box normal to ensure menus are going to be\n        // somewhat perpendicular to camera frustum\n        const cameraAngleDotBoxNormal = boxFaceNormal.dot(pointOnBoxFaceToCamera);\n\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (cameraAngleDotBoxNormal > targetCameraDot) {\n          targetSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n          targetCameraDot = cameraAngleDotBoxNormal;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(targetSquareDistance);\n      const scale = Math.max(this.halfExtents.x, this.halfExtents.z) * distance;\n      const targetScale = Math.min(\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_FIRST_PERSON ? 2.0 : 4.0,\n        Math.max(0.5, scale * tempParentWorldScale.x)\n      );\n      const finalScale = this.data.scale ? targetScale / tempParentWorldScale.x : 1;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\nimport { applyThemeToTextButton } from \"../utils/theme\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    return window.APP.hubChannel.discordBridges();\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin =\n      window.APP.hubChannel.can(\"pin_objects\") && !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.object3D.visible = canPin;\n    this.labelEl.object3D.visible = canPin;\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.object3D.visible = !!(canPin && !isPinned && this.hovering && discordBridges.length > 0);\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    applyThemeToTextButton(this.el, isPinned);\n  }\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"mirror-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = async () => {\n      const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n      await closeExistingMediaMirror();\n\n      const { entity } = cloneMedia(this.targetEl, \"#linked-media\", this.src, false, true, mirrorTarget);\n\n      entity.object3D.scale.set(0.75, 0.75, 0.75);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      mirrorTarget.parentEl.components[\"follow-in-fov\"].reset();\n      mirrorTarget.parentEl.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"close-mirrored-media-button\", {\n  init() {\n    this.onClick = async () => {\n      this.el.object3D.visible = false; // Hide button immediately on click\n      await closeExistingMediaMirror();\n      this.el.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { addAndArrangeMedia } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, SOUND_CAMERA_TOOL_COUNTDOWN } from \"../systems/sound-effects-system\";\nimport { getAudioFeedbackScale } from \"./audio-feedback\";\nimport { cloneObject3D } from \"../utils/three-utils\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\nimport anime from \"animejs\";\n\nconst cameraModelPromise = waitForDOMContentLoaded().then(() => loadModel(cameraModelSrc));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  \"right-cursor\": {\n    takeSnapshot: paths.actions.cursor.right.takeSnapshot\n  },\n  \"left-cursor\": {\n    takeSnapshot: paths.actions.cursor.left.takeSnapshot\n  }\n};\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst VIEWFINDER_FPS = 6;\nconst VIDEO_FPS = 25;\n// Prefer h264 if available due to faster decoding speec on most platforms\nconst videoCodec = [\"h264\", \"vp9,opus\", \"vp8,opus\", \"vp9\", \"vp8\"].find(\n  codec => window.MediaRecorder && MediaRecorder.isTypeSupported(`video/webm; codecs=${codec}`)\n);\nconst videoMimeType = videoCodec ? `video/webm; codecs=${videoCodec}` : null;\nconst hasWebGL2 = !!document.createElement(\"canvas\").getContext(\"webgl2\");\nconst allowVideo = !!videoMimeType && hasWebGL2;\n\nconst CAPTURE_WIDTH = isMobileVR ? 640 : 1280;\nconst CAPTURE_HEIGHT = isMobileVR ? 360 : 720;\nconst RENDER_WIDTH = 1280;\nconst RENDER_HEIGHT = 720;\nconst CAPTURE_DURATIONS = [3, 7, 15, 30, 60, Infinity];\nconst DEFAULT_CAPTURE_DURATION = 7;\nconst COUNTDOWN_DURATION = 3;\nconst VIDEO_LOOPS = 3; // Number of times to loop the videos we spawn before stopping them (for perf)\nconst MAX_DURATION_TO_LIMIT_LOOPS = 31; // Max duration for which we limit loops (eg GIFs vs long form videos)\n\nconst snapCanvas = document.createElement(\"canvas\");\n\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\nfunction blitFramebuffer(renderer, src, srcX0, srcY0, srcX1, srcY1, dest, dstX0, dstY0, dstX1, dstY1) {\n  const gl = renderer.context;\n\n  // Copies from one framebuffer to another. Note that at the end of this function, you need to restore\n  // the original framebuffer via setRenderTarget\n  const srcFramebuffer = renderer.properties.get(src).__webglFramebuffer;\n  const destFramebuffer = renderer.properties.get(dest).__webglFramebuffer;\n\n  if (srcFramebuffer && destFramebuffer) {\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, srcFramebuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, destFramebuffer);\n\n    if (gl.checkFramebufferStatus(gl.READ_FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      gl.blitFramebuffer(srcX0, srcY0, srcX1, srcY1, dstX0, dstY0, dstX1, dstY1, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n    }\n  }\n}\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    captureDuration: { default: DEFAULT_CAPTURE_DURATION },\n    captureAudio: { default: false },\n    isSnapping: { default: false },\n    isRecording: { default: false },\n    label: { default: \"\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false; // Make invisible until model ready\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos/videos\n\n    this.showCameraViewfinder = !isMobileVR;\n\n    this.renderTarget = new THREE.WebGLRenderTarget(RENDER_WIDTH, RENDER_HEIGHT, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, RENDER_WIDTH / RENDER_HEIGHT, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (this.showCameraViewfinder) {\n        this.viewfinderInViewThisFrame = true;\n      }\n    };\n\n    this.el.sceneEl.addEventListener(\"stateadded\", () => this.updateUI());\n    this.el.sceneEl.addEventListener(\"stateremoved\", () => this.updateUI());\n\n    cameraModelPromise.then(model => {\n      const mesh = cloneObject3D(model.scene);\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      this.el.object3D.visible = true;\n      this.el.object3D.scale.set(0.5, 0.5, 0.5);\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      const obj = this.el.object3D;\n\n      const step = (function() {\n        const lastValue = {};\n        return function(anim) {\n          const value = anim.animatables[0].target;\n\n          value.x = Math.max(Number.MIN_VALUE, value.x);\n          value.y = Math.max(Number.MIN_VALUE, value.y);\n          value.z = Math.max(Number.MIN_VALUE, value.z);\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          obj.scale.set(value.x, value.y, value.z);\n          obj.matrixNeedsUpdate = true;\n        };\n      })();\n\n      const config = {\n        duration: 200,\n        easing: \"easeOutQuad\",\n        elasticity: 400,\n        loop: 0,\n        round: false,\n        x: 1,\n        y: 1,\n        z: 1,\n        targets: [{ x: 0.5, y: 0.5, z: 0.5 }],\n        update: anim => step(anim),\n        complete: anim => step(anim)\n      };\n\n      anime(config);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(this.el.object3D);\n      }\n\n      this.screen = new THREE.Mesh(geometry, material);\n      this.screen.rotation.set(0, Math.PI, 0);\n      this.screen.position.set(0, 0, -0.042);\n      this.screen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"screen\", this.screen);\n\n      this.selfieScreen = new THREE.Mesh(geometry, material);\n      this.selfieScreen.position.set(0, 0.4, 0);\n      this.selfieScreen.scale.set(-2, 2, 2);\n      this.selfieScreen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"selfieScreen\", this.selfieScreen);\n\n      this.label = this.el.querySelector(\".label\");\n      this.labelActionBackground = this.el.querySelector(\".label-action-background\");\n      this.labelBackground = this.el.querySelector(\".label-background\");\n      this.durationLabel = this.el.querySelector(\".duration\");\n\n      this.recordIcon = this.el.querySelector(\".record-icon\");\n      this.recordAlphaIcon = this.el.querySelector(\".record-alpha-icon\");\n\n      this.label.object3D.visible = false;\n      this.durationLabel.object3D.visible = false;\n\n      this.snapMenu = this.el.querySelector(\".camera-snap-menu\");\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.recordButton = this.el.querySelector(\".record-button\");\n\n      this.cancelButton = this.el.querySelector(\".cancel-button\");\n      this.nextDurationButton = this.el.querySelector(\".next-duration\");\n      this.prevDurationButton = this.el.querySelector(\".prev-duration\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => this.snapClicked(true));\n      this.recordButton.object3D.addEventListener(\"interact\", () => this.snapClicked(false));\n      this.cancelButton.object3D.addEventListener(\"interact\", () => this.cancelSnapping());\n      this.nextDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(1));\n      this.prevDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(-1));\n      this.stopButton = this.el.querySelector(\".stop-button\");\n      this.stopButton.object3D.addEventListener(\"interact\", () => this.stopRecording());\n      this.captureAudioButton = this.el.querySelector(\".capture-audio\");\n      this.captureAudioIcon = this.el.querySelector(\".capture-audio-icon\");\n      this.captureAudioButton.object3D.addEventListener(\"interact\", () =>\n        this.el.setAttribute(\"camera-tool\", \"captureAudio\", !this.data.captureAudio)\n      );\n\n      this.updateUI();\n\n      this.updateRenderTargetNextTick = true;\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n\n      waitForDOMContentLoaded().then(() => {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      });\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.emit(\"camera_removed\");\n    this.stopRecording();\n  },\n\n  updateViewfinder() {\n    this.updateRenderTargetNextTick = true;\n  },\n\n  changeDuration(delta) {\n    const idx = CAPTURE_DURATIONS.findIndex(d => this.data.captureDuration == d);\n    const newIdx = idx === 0 && delta === -1 ? CAPTURE_DURATIONS.length - 1 : (idx + delta) % CAPTURE_DURATIONS.length;\n    this.el.setAttribute(\"camera-tool\", \"captureDuration\", CAPTURE_DURATIONS[newIdx]);\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  snapClicked(isPhoto) {\n    if (this.data.isSnapping) return;\n    if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) return;\n\n    this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n\n    this.snapCountdown = COUNTDOWN_DURATION;\n    this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n\n    this.countdownInterval = setInterval(async () => {\n      if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n        return;\n      }\n\n      this.snapCountdown--;\n\n      if (this.snapCountdown === 0) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n\n        if (isPhoto) {\n          this.el.setAttribute(\"camera-tool\", { label: \"\", isSnapping: false });\n          this.takeSnapshotNextTick = true;\n        } else {\n          this.beginRecording(this.data.captureDuration);\n        }\n      } else {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n        this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n      }\n    }, 1000);\n  },\n\n  cancelSnapping() {\n    clearInterval(this.countdownInterval);\n    this.stopRecording(true);\n    this.updateUI();\n  },\n\n  update() {\n    this.updateUI();\n  },\n\n  updateUI() {\n    if (!this.label) return;\n\n    const label = this.data.label;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hasDuration = this.data.captureDuration !== Infinity;\n\n    const isRecordingUnbound = !hasDuration && this.data.isRecording && this.videoRecorder;\n    this.label.object3D.visible = !!label && !isRecordingUnbound;\n    const showActionLabelBackground = this.label.object3D.visible && this.data.isRecording && !isRecordingUnbound;\n\n    if (label) {\n      this.label.setAttribute(\"text\", { value: label, color: showActionLabelBackground ? \"#fafafa\" : \"#ff3464\" });\n    }\n\n    this.labelActionBackground.object3D.visible = showActionLabelBackground;\n    this.labelBackground.object3D.visible = this.label.object3D.visible && !showActionLabelBackground;\n\n    this.stopButton.object3D.visible = isRecordingUnbound;\n\n    if (hasDuration) {\n      this.durationLabel.setAttribute(\"text\", \"value\", `${this.data.captureDuration}`);\n    }\n\n    this.durationLabel.object3D.visible = hasDuration && !this.data.isSnapping && !isFrozen && allowVideo;\n    this.recordIcon.object3D.visible = !hasDuration && !isFrozen && allowVideo;\n    this.recordAlphaIcon.object3D.visible = hasDuration && !isFrozen && allowVideo;\n    this.snapButton.object3D.visible = !this.data.isSnapping && !isFrozen;\n    this.recordButton.object3D.visible = !this.data.isSnapping && !isFrozen && allowVideo;\n    this.cancelButton.object3D.visible = this.data.isSnapping && !isFrozen;\n    this.prevDurationButton.object3D.visible = this.nextDurationButton.object3D.visible =\n      !this.data.isSnapping && allowVideo && !isFrozen && allowVideo;\n\n    this.captureAudioIcon.setAttribute(\"icon-button\", \"active\", this.data.captureAudio);\n  },\n\n  async beginRecording(duration) {\n    if (!this.videoContext) {\n      this.videoCanvas = document.createElement(\"canvas\");\n      this.videoCanvas.width = CAPTURE_WIDTH;\n      this.videoCanvas.height = CAPTURE_HEIGHT;\n      this.videoContext = this.videoCanvas.getContext(\"2d\");\n      this.videoImageData = this.videoContext.createImageData(CAPTURE_WIDTH, CAPTURE_HEIGHT);\n      this.videoPixels = new Uint8Array(CAPTURE_WIDTH * CAPTURE_HEIGHT * 4);\n      this.videoImageData.data.set(this.videoPixels);\n    }\n\n    const stream = new MediaStream();\n    const track = this.videoCanvas.captureStream(VIDEO_FPS).getVideoTracks()[0];\n\n    // HACK: FF 73+ seems to fail to decode videos with no audio track, so we always include a silent track.\n    // Note that chrome won't generate the video without some data flowing to the track, hence the oscillator.\n    const attachBlankAudio = () => {\n      const context = THREE.AudioContext.getContext();\n      const oscillator = context.createOscillator();\n      const gain = context.createGain();\n      const destination = context.createMediaStreamDestination();\n      gain.gain.setValueAtTime(0.0001, context.currentTime);\n      oscillator.connect(destination);\n      gain.connect(destination);\n      stream.addTrack(destination.stream.getAudioTracks()[0]);\n    };\n\n    if (this.data.captureAudio) {\n      const selfAudio = await NAF.connection.adapter.getMediaStream(NAF.clientId, \"audio\");\n\n      // NOTE: if we don't have a self audio track, we can end up generating an empty video (browser bug?)\n      // if no audio comes through on the listener source. (Eg the room is otherwise silent.)\n      // So for now, if we don't have a track, just disable audio capture.\n      if (selfAudio && selfAudio.getAudioTracks().length > 0) {\n        const context = THREE.AudioContext.getContext();\n        const destination = context.createMediaStreamDestination();\n\n        const listener = this.el.sceneEl.audioListener;\n        if (listener) {\n          // NOTE audio is not captured from camera vantage point for now.\n          listener.getInput().connect(destination);\n        }\n        context.createMediaStreamSource(selfAudio).connect(destination);\n\n        const audio = destination.stream.getAudioTracks()[0];\n        stream.addTrack(audio);\n      } else {\n        attachBlankAudio();\n      }\n    } else {\n      attachBlankAudio();\n    }\n\n    stream.addTrack(track);\n    this.videoRecorder = new MediaRecorder(stream, { mimeType: videoMimeType });\n    const chunks = [];\n    const recordingStartTime = performance.now();\n\n    this.videoRecorder.ondataavailable = e => chunks.push(e.data);\n\n    this.updateRenderTargetNextTick = true;\n\n    this.videoRecorder.start();\n    this.el.setAttribute(\"camera-tool\", { isRecording: true, label: \" \" });\n    this.el.sceneEl.emit(\"action_camera_recording_started\");\n\n    if (duration !== Infinity) {\n      this.videoCountdown = this.data.captureDuration;\n      this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n\n      this.videoCountdownInterval = setInterval(() => {\n        this.videoCountdown--;\n\n        if (this.videoCountdown === 0) {\n          this.stopRecording();\n          this.videoCountdownInterval = null;\n        } else {\n          this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n        }\n      }, 1000);\n    }\n\n    this.videoRecorder._free = () => (chunks.length = 0); // Used for cancelling\n    this.videoRecorder.onstop = async () => {\n      this.el.sceneEl.emit(\"action_camera_recording_ended\");\n\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const recordingDuration = performance.now() - recordingStartTime;\n      const blob = new Blob(chunks, { type: mimeType });\n\n      chunks.length = 0;\n\n      const { entity, orientation } = addAndArrangeMedia(\n        this.el,\n        new File([blob], \"capture\", { type: mimeType.split(\";\")[0] }), // Drop codec\n        \"video-camera\",\n        this.localSnapCount,\n        !!this.playerIsBehindCamera\n      );\n\n      entity.addEventListener(\n        \"video-loaded\",\n        () => {\n          // If we were recording audio, then pause the video immediately after starting.\n          //\n          // Or, to limit the # of concurrent videos playing, if it was a short clip, let it loop\n          // a few times and then pause it.\n          if (this.data.captureAudio || recordingDuration <= MAX_DURATION_TO_LIMIT_LOOPS * 1000) {\n            setTimeout(() => {\n              if (!NAF.utils.isMine(entity) && !NAF.utils.takeOwnership(entity)) return;\n              entity.components[\"media-video\"].tryUpdateVideoPlaybackState(true);\n            }, this.data.captureAudio ? 0 : recordingDuration * VIDEO_LOOPS + 100);\n          }\n        },\n        { once: true }\n      );\n\n      this.localSnapCount++;\n\n      orientation.then(() => this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA }));\n    };\n  },\n\n  stopRecording(cancel) {\n    if (this.videoRecorder) {\n      if (cancel) {\n        this.videoRecorder.onstop = () => {};\n        this.videoRecorder._free();\n      }\n\n      this.videoRecorder.stop();\n      this.videoRecorder = null;\n\n      if (!cancel) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n      }\n    }\n    clearInterval(this.videoCountdownInterval);\n\n    this.videoCountdownInterval = null;\n    this.el.setAttribute(\"camera-tool\", \"label\", \"\");\n    this.el.setAttribute(\"camera-tool\", { isRecording: false, isSnapping: false });\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n\n    const heldThisFrame =\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath));\n\n    const isHolding = heldLeftHand || heldRightHand || heldRightRemote;\n\n    this.updateSnapMenuOrientation();\n\n    if (heldThisFrame) {\n      this.localSnapCount = 0;\n    }\n\n    this.showCameraViewfinder = isHolding || !isMobileVR || this.data.isSnapping || this.videoRecorder;\n\n    if (this.screen && this.selfieScreen) {\n      this.screen.visible = this.selfieScreen.visible = !!this.showCameraViewfinder;\n    }\n\n    // Always draw held, snapping, or recording camera viewfinders with a decent framerate\n    if (\n      (isHolding || this.data.isSnapping || this.videoRecorder) &&\n      performance.now() - this.lastUpdate >= 1000 / (this.videoRecorder ? VIDEO_FPS : VIEWFINDER_FPS)\n    ) {\n      this.updateRenderTargetNextTick = true;\n    }\n\n    const isHoldingTrigger = this.isHoldingSnapshotTrigger();\n    const isPermittedToUse = window.APP.hubChannel.can(\"spawn_camera\");\n\n    if (isPermittedToUse) {\n      // If the user lets go of the trigger before 500ms, take a picture, otherwise record until they let go.\n      if (isHoldingTrigger && !this.data.isSnapping && !this.snapTriggerTimeout) {\n        this.snapTriggerTimeout = setTimeout(() => {\n          if (this.isHoldingSnapshotTrigger()) {\n            this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n            this.beginRecording(Infinity);\n\n            const releaseInterval = setInterval(() => {\n              if (this.isHoldingSnapshotTrigger()) return;\n              this.stopRecording();\n              clearInterval(releaseInterval);\n            }, 500);\n          }\n\n          this.snapTriggerTimeout = null;\n        }, 500);\n      } else if (!isHoldingTrigger && !this.data.isSnapping && this.snapTriggerTimeout) {\n        clearTimeout(this.snapTriggerTimeout);\n        this.snapTriggerTimeout = null;\n        this.takeSnapshotNextTick = true;\n      }\n    }\n  },\n\n  tock: (function() {\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n      const playerHead = this.cameraSystem.playerHead;\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (\n        this.takeSnapshotNextTick ||\n        (this.updateRenderTargetNextTick && (this.viewfinderInViewThisFrame || this.videoRecorder))\n      ) {\n        if (playerHead) {\n          // We want to scale our own head in between frames now that we're taking a video/photo.\n          let scale = 1;\n          // TODO: The local-audio-analyser has the non-networked media stream, which is active\n          // even while the user is muted. This should be looking at a different analyser that\n          // has the networked media stream instead.\n          const analyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n\n          if (analyser && playerHead.el.components[\"scale-audio-feedback\"]) {\n            scale = getAudioFeedbackScale(this.el.object3D, playerHead, 1, 2, analyser.volume);\n          }\n\n          playerHead.visible = true;\n          playerHead.scale.set(scale, scale, scale);\n          playerHead.updateMatrices(true, true);\n          playerHead.updateMatrixWorld(true, true);\n        }\n\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = false;\n            }\n          }\n        }\n\n        const bubbleSystem = this.el.sceneEl.systems[\"personal-space-bubble\"];\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].disable();\n          }\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        if (allowVideo && this.videoRecorder && !this.videoRenderTarget) {\n          // Create a separate render target for video becuase we need to flip and (sometimes) downscale it before\n          // encoding it to video.\n          this.videoRenderTarget = new THREE.WebGLRenderTarget(CAPTURE_WIDTH, CAPTURE_HEIGHT, {\n            format: THREE.RGBAFormat,\n            minFilter: THREE.LinearFilter,\n            magFilter: THREE.NearestFilter,\n            encoding: THREE.sRGBEncoding,\n            depth: false,\n            stencil: false\n          });\n\n          // Used to set up framebuffer in three.js as a side effect\n          renderer.setRenderTarget(this.videoRenderTarget);\n        }\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (playerHead) {\n          playerHead.visible = false;\n          playerHead.scale.set(0.00000001, 0.00000001, 0.00000001);\n          playerHead.updateMatrices(true, true);\n          playerHead.updateMatrixWorld(true, true);\n        }\n\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = true;\n            }\n          }\n        }\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].enable();\n          }\n        }\n\n        this.lastUpdate = now;\n\n        if (this.videoRecorder) {\n          // This blit operation will (if necessary) scale/resample the view finder render target and, importantly,\n          // flip the texture on Y\n          blitFramebuffer(\n            renderer,\n            this.renderTarget,\n            0,\n            0,\n            RENDER_WIDTH,\n            RENDER_HEIGHT,\n            this.videoRenderTarget,\n            0,\n            CAPTURE_HEIGHT,\n            CAPTURE_WIDTH,\n            0\n          );\n          renderer.readRenderTargetPixels(\n            this.videoRenderTarget,\n            0,\n            0,\n            CAPTURE_WIDTH,\n            CAPTURE_HEIGHT,\n            this.videoPixels\n          );\n          this.videoImageData.data.set(this.videoPixels);\n          this.videoContext.putImageData(this.videoImageData, 0, 0);\n        }\n\n        this.updateRenderTargetNextTick = false;\n        this.viewfinderInViewThisFrame = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(RENDER_WIDTH * RENDER_HEIGHT * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, RENDER_WIDTH, RENDER_HEIGHT, this.snapPixels);\n\n        pixelsToPNG(this.snapPixels, RENDER_WIDTH, RENDER_HEIGHT).then(file => {\n          const { orientation } = addAndArrangeMedia(\n            this.el,\n            file,\n            \"photo-camera\",\n            this.localSnapCount,\n            !!this.playerIsBehindCamera\n          );\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })(),\n\n  isHoldingSnapshotTrigger: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n    const heldLeftRemote = interaction.state.leftRemote.held === this.el;\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"right-cursor\";\n    } else if (heldLeftRemote) {\n      grabberId = \"left-cursor\";\n    }\n\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        return true;\n      }\n    }\n\n    return !!userinput.get(paths.actions.takeSnapshot);\n  },\n\n  updateSnapMenuOrientation: (function() {\n    const playerWorld = new THREE.Vector3();\n    const cameraWorld = new THREE.Vector3();\n    const playerToCamera = new THREE.Vector3();\n    const cameraForwardPoint = new THREE.Vector3();\n    const cameraForwardWorld = new THREE.Vector3();\n    return function() {\n      if (!this.playerCamera) return;\n      this.el.object3D.getWorldPosition(cameraWorld);\n      this.playerCamera.getWorldPosition(playerWorld);\n      playerToCamera.subVectors(playerWorld, cameraWorld);\n      cameraForwardPoint.set(0, 0, 1);\n      this.el.object3D.localToWorld(cameraForwardPoint);\n      cameraForwardWorld.subVectors(cameraForwardPoint, cameraWorld);\n      cameraForwardWorld.normalize();\n      playerToCamera.normalize();\n\n      const playerIsBehindCamera = cameraForwardWorld.dot(playerToCamera) < 0;\n\n      if (this.playerIsBehindCamera !== playerIsBehindCamera) {\n        this.playerIsBehindCamera = playerIsBehindCamera;\n        this.snapMenu.object3D.rotation.set(0, this.playerIsBehindCamera ? Math.PI : 0, 0);\n        this.snapMenu.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const { entity } = cloneMedia(this.targetEl, \"#interactable-media\", this.src);\n\n      entity.object3D.scale.copy(this.targetEl.object3D.scale);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#avatar-pov-node\",\n        offset: { x: 0, y: 0, z: -1.5 * this.targetEl.object3D.scale.z }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { willRequireUserGesture, showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst getUserGesture = () => {\n  return new Promise(resolve => {\n    const scene = document.querySelector(\"a-scene\");\n    scene.addEventListener(\"2d-interstitial-gesture-complete\", resolve, { once: true });\n    scene.emit(\"2d-interstitial-gesture-required\");\n  });\n};\n\nexport async function handleExitTo2DInterstitial(isLower, exitAction, nonFullscreen) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) {\n    if (isMobileVR && willRequireUserGesture()) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n\n    return;\n  }\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    await scene.exitVR();\n\n    if (!nonFullscreen) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport async function exit2DInterstitialAndEnterVR(force) {\n  if (!force && !_isIn2DInterstitial) {\n    return;\n  }\n\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  const scene = document.querySelector(\"a-scene\");\n\n  if (isMobileVR) {\n    if (screenfull.isFullscreen) {\n      await screenfull.exit();\n      await getUserGesture();\n      await scene.enterVR();\n    } else {\n      await scene.enterVR();\n    }\n  } else {\n    if (!scene.is(\"vr-mode\")) {\n      await scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport async function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  await exit2DInterstitialAndEnterVR();\n}\n","import { isLocalHubsSceneUrl, isHubsRoomUrl, isLocalHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\nimport { handleExitTo2DInterstitial } from \"../utils/vr-interstitial\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  schema: {\n    onlyOpenLink: { type: \"boolean\" }\n  },\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = async () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (!this.data.onlyOpenLink) {\n          if (await isLocalHubsAvatarUrl(src)) {\n            label = \"use avatar\";\n          } else if ((await isLocalHubsSceneUrl(src)) && mayChangeScene) {\n            label = \"use scene\";\n          } else if (await isHubsRoomUrl(src)) {\n            label = \"visit room\";\n          }\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = async () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      const exitImmersive = async () => await handleExitTo2DInterstitial(false, () => {}, true);\n\n      if (this.data.onlyOpenLink) {\n        await exitImmersive();\n        window.open(this.src);\n      } else if (await isLocalHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n        this.el.sceneEl.emit(\"avatar_updated\");\n      } else if ((await isLocalHubsSceneUrl(this.src)) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if (await isHubsRoomUrl(this.src)) {\n        await exitImmersive();\n        location.href = this.src;\n      } else {\n        await exitImmersive();\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { SOUND_MEDIA_LOADING } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"local-refresh-media-button\", {\n  init() {\n    this.onClick = async () => {\n      if (this.targetEl) {\n        this.targetEl.components[\"media-loader\"] &&\n          this.targetEl.components[\"media-loader\"].update(this.targetEl.components[\"media-loader\"].data, true);\n      }\n    };\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.targetEl = networkedEl;\n        const isNonLiveVideo =\n          this.targetEl.components[\"media-video\"] && this.targetEl.components[\"media-video\"].videoIsLive === false;\n        const src =\n          (this.targetEl.components[\"media-loader\"] && this.targetEl.components[\"media-loader\"].data.src) || \"\";\n        const shouldHaveLocalRefreshButton = !isNonLiveVideo && src.indexOf(\"twitch.tv\") !== -1;\n        if (!shouldHaveLocalRefreshButton) {\n          this.el.parentNode.removeChild(this.el);\n        } else {\n          const onVideoIsLiveUpdate = e => {\n            if (!e.detail.videoIsLive) {\n              this.targetEl.removeEventListener(\"video_is_live_update\", onVideoIsLiveUpdate);\n              this.el.parentNode.removeChild(this.el);\n            }\n          };\n          this.targetEl.addEventListener(\"video_is_live_update\", onVideoIsLiveUpdate);\n        }\n      })\n      .catch(() => {\n        this.el.parentNode.removeChild(this.el);\n      });\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n\nAFRAME.registerComponent(\"refresh-media-button\", {\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    this.onClick = async () => {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n\n      if (this.targetEl) {\n        this.targetEl.components[\"media-loader\"].refresh();\n\n        // Hide button + do the sound effect here, so only the person who clicked hears it, not everyone.\n        this.el.object3D.visible = false;\n        const loadingSoundEffect = sfx.playPositionalSoundFollowing(SOUND_MEDIA_LOADING, this.targetEl.object3D, true);\n\n        this.targetEl.addEventListener(\n          \"media_refreshed\",\n          () => {\n            sfx.stopPositionalAudio(loadingSoundEffect);\n            this.el.object3D.visible = true;\n            this.updateVisibility();\n          },\n          { once: true }\n        );\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n\n      if (this.targetEl) {\n        this.targetEl.addEventListener(\"pinned\", this.updateVisibility);\n        this.targetEl.addEventListener(\"unpinned\", this.updateVisibility);\n      }\n\n      this.updateVisibility();\n    });\n  },\n\n  updateVisibility() {\n    if (!this.targetEl) return;\n\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n    this.el.object3D.visible =\n      (!isPinned && window.APP.hubChannel.can(\"spawn_and_move_media\")) || window.APP.hubChannel.can(\"pin_objects\");\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this.updateVisibility);\n      this.targetEl.removeEventListener(\"unpinned\", this.updateVisibility);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nAFRAME.registerComponent(\"tweet-media-button\", {\n  init() {\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.targetEl = networkedEl;\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now, and hide button.\n        this.el.object3D.visible = false;\n      });\n\n    this.onClick = () => {\n      const hasDiscordBridges = window.APP.hubChannel && window.APP.hubChannel.discordBridges().length > 0;\n\n      const text = !hasDiscordBridges\n        ? `Taken in ${location.hostname} - ` +\n          `join me now at ${configs.SHORTLINK_DOMAIN}/${window.APP.hubChannel.hubId}! `\n        : `Taken in ${location.hostname} `;\n\n      const { src, contentSubtype } = this.targetEl.components[\"media-loader\"].data;\n      this.el.sceneEl.emit(\"action_media_tweet\", { url: src, contentSubtype, text, el: this.targetEl });\n    };\n  },\n\n  play() {\n    if (!configs.AVAILABLE_INTEGRATIONS.twitter) {\n      this.el.object3D.visible = false;\n      return;\n    }\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { idForAvatarUrl } from \"../utils/media-url-utils\";\nimport { fetchAvatar, remixAvatar } from \"../utils/avatar-utils\";\n\nconst REMIX_LABEL = \"copy avatar\";\nAFRAME.registerComponent(\"remix-avatar-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n    this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n    this.updateSrc = async () => {\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n      try {\n        this.avatar = await fetchAvatar(idForAvatarUrl(this.src));\n        this.el.object3D.visible = this.avatar && this.avatar.allow_remixing && this.avatar.type === \"avatar_listing\";\n      } catch (e) {\n        console.error(e);\n        this.el.object3D.visible = false;\n      }\n    };\n\n    this.onClick = async () => {\n      if (this.copying || !this.avatar) return;\n\n      try {\n        this.copying = true;\n        this.label.setAttribute(\"text\", \"value\", \"Copying...\");\n\n        await remixAvatar(this.avatar.avatar_id, this.avatar.name);\n\n        this.label.setAttribute(\"text\", \"value\", \"Copied!\");\n      } catch (e) {\n        this.label.setAttribute(\"text\", \"value\", \"Error\");\n      }\n\n      setTimeout(() => {\n        this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n        this.copying = false;\n      }, 2000);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nexport const TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nconst eps = 0.001;\nfunction qAlmostEquals(a, b) {\n  return (\n    Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps && Math.abs(a.w - b.w) < eps\n  );\n}\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    let leftHand, rightHand;\n\n    waitForDOMContentLoaded().then(() => {\n      leftHand = document.getElementById(\"player-left-controller\");\n      rightHand = document.getElementById(\"player-right-controller\");\n    });\n    this.onGrabStart = e => {\n      if (!leftHand || !rightHand) return;\n\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"body-helper\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"right-cursor\"\n          ? rightHand.object3D\n          : e.object3D.el.id === \"left-cursor\"\n            ? leftHand.object3D\n            : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n    this.startQ = new THREE.Quaternion();\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.raycasters = {};\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform: (function() {\n    const q = new THREE.Quaternion();\n    const PI_AROUND_Y = new THREE.Quaternion(0, 1, 0, 0);\n    const pInv = new THREE.Quaternion();\n    return function stopTransform() {\n      this.transforming = false;\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(q);\n        if (qAlmostEquals(q, this.startQ)) {\n          q.multiply(PI_AROUND_Y);\n          this.target.parent.getWorldQuaternion(pInv);\n          pInv.inverse();\n          this.target.quaternion.copy(pInv).multiply(q);\n          this.target.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })(),\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycasters.right =\n      this.raycasters.right ||\n      document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    this.raycasters.left =\n      this.raycasters.left ||\n      document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      this.target.getWorldQuaternion(this.startQ);\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).inverse();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion\n      .copy(initialObjectOrientation)\n      .premultiply(controllerOrientationDelta)\n      .premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n    this.target.getWorldPosition(plane.position);\n    //    this.el.camera.getWorldQuaternion(plane.quaternion);\n    this.el.camera.getWorldPosition(v);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    const intersection = intersections[0];\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).inverse())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.SCALE) {\n      return; // Taken care of by scale-button\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    this.userinput = this.userinput || this.el.sceneEl.systems.userinput;\n    const hasHand = this.userinput.get(paths.actions.rightHand.pose) || this.userinput.get(paths.actions.leftHand.pose);\n    if (!hasHand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {},\n  tick(t) {\n    const shouldBeVisible =\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming &&\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].hand.el.id.indexOf(this.data.hand) !== -1;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { TRANSFORM_MODE } from \"./transform-object-button\";\n\nconst calculatePlaneMatrix = (function() {\n  const planeMatrix = new THREE.Matrix4();\n  const planeUp = new THREE.Vector3();\n  const planeForward = new THREE.Vector3();\n  const planeRight = new THREE.Vector3();\n  const planePosition = new THREE.Vector3();\n  const camPosition = new THREE.Vector3();\n\n  return function calculatePlaneMatrix(camera, button) {\n    camera.updateMatrices();\n    camPosition.setFromMatrixPosition(camera.matrixWorld);\n    button.updateMatrices();\n    planePosition.setFromMatrixPosition(button.matrixWorld);\n    planeForward.subVectors(planePosition, camPosition);\n    planeForward.y = 0;\n    planeForward.normalize();\n    planeUp.set(0, 1, 0);\n    planeRight.crossVectors(planeForward, planeUp);\n    planeMatrix.makeBasis(planeRight, planeUp, planeForward.multiplyScalar(-1));\n    planeMatrix.elements[12] = planePosition.x;\n    planeMatrix.elements[13] = planePosition.y;\n    planeMatrix.elements[14] = planePosition.z;\n    return planeMatrix;\n  };\n})();\n\nconst planeForLeftCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\nconst planeForRightCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\n\nAFRAME.registerComponent(\"scale-button\", {\n  init() {\n    this.isScaling = false;\n    this.planeRotation = new THREE.Matrix4();\n    this.planeUp = new THREE.Vector3();\n    this.planeRight = new THREE.Vector3();\n    this.intersections = [];\n    this.initialIntersectionPoint = new THREE.Vector3();\n    this.intersectionPoint = new THREE.Vector3();\n    this.initialObjectScale = new THREE.Vector3();\n    this.desiredObjectScale = new THREE.Vector3();\n    this.deltaScale = new THREE.Vector3();\n    this.objectMatrix = new THREE.Matrix4();\n    this.dragVector = new THREE.Vector3();\n    this.currentObjectScale = new THREE.Vector3();\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.objectToScale = networkedEl.object3D;\n    });\n    const camPosition = new THREE.Vector3();\n    const objectPosition = new THREE.Vector3();\n    const objectToCam = new THREE.Vector3();\n    this.startScaling = e => {\n      if (this.isScaling || !this.objectToScale) {\n        return;\n      }\n      if (!this.didGetObjectReferences) {\n        this.didGetObjectReferences = true;\n        this.leftEventer = document.getElementById(\"left-cursor\").object3D;\n        this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n        this.leftRaycaster = this.leftCursorController.components[\"cursor-controller\"].raycaster;\n        this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n        this.rightRaycaster = this.rightCursorController.components[\"cursor-controller\"].raycaster;\n        this.viewingCamera = document.getElementById(\"viewing-camera\").object3D;\n      }\n      this.plane = e.object3D === this.leftEventer ? planeForLeftCursor : planeForRightCursor;\n      setMatrixWorld(this.plane, calculatePlaneMatrix(this.viewingCamera, this.el.object3D));\n      this.planeRotation.extractRotation(this.plane.matrixWorld);\n      this.planeUp.set(0, 1, 0).applyMatrix4(this.planeRotation);\n      this.planeRight.set(1, 0, 0).applyMatrix4(this.planeRotation);\n      this.raycaster = e.object3D === this.leftEventer ? this.leftRaycaster : this.rightRaycaster;\n      const intersection = this.raycastOnPlane();\n      if (!intersection) return;\n      this.isScaling = true;\n      this.initialIntersectionPoint.copy(intersection.point);\n      this.objectToScale.updateMatrices();\n      this.initialObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n      this.initialDistanceToObject = objectToCam\n        .subVectors(\n          camPosition.setFromMatrixPosition(this.viewingCamera.matrixWorld),\n          objectPosition.setFromMatrixPosition(this.el.object3D.matrixWorld)\n        )\n        .length();\n      window.APP.store.update({ activity: { hasScaled: true } });\n\n      // TODO: Refactor transform-selected-object system so this isn't so awkward\n      this.transformSelectedObjectSystem =\n        this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n      this.transformSelectedObjectSystem.transforming = true;\n      this.transformSelectedObjectSystem.mode = TRANSFORM_MODE.SCALE;\n      this.transformSelectedObjectSystem.target = this.objectToScale;\n      this.transformSelectedObjectSystem.hand =\n        e.object3D === this.leftEventer ? this.leftCursorController.object3D : this.rightCursorController.object3D;\n    };\n    this.endScaling = e => {\n      if (!this.isScaling) {\n        return;\n      }\n      if (\n        (e.object3D === this.leftEventer && this.raycaster === this.leftRaycaster) ||\n        (e.object3D !== this.leftEventer && this.raycaster === this.rightRaycaster)\n      ) {\n        this.isScaling = false;\n        this.transformSelectedObjectSystem =\n          this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n        this.transformSelectedObjectSystem.transforming = false;\n      }\n    };\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.startScaling);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.endScaling);\n  },\n  raycastOnPlane() {\n    this.intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    this.plane.raycast(this.raycaster, this.intersections);\n    this.raycaster.far = far;\n    return this.intersections[0];\n  },\n  tick() {\n    if (!this.isScaling) return;\n    const intersection = this.raycastOnPlane();\n    if (!intersection) return;\n    this.intersectionPoint.copy(intersection.point);\n    this.dragVector.subVectors(this.intersectionPoint, this.initialIntersectionPoint);\n    const dotFactor =\n      (this.dragVector.dot(this.planeUp) + this.dragVector.dot(this.planeRight)) / this.initialDistanceToObject;\n\n    let scaleFactor = 1;\n    if (dotFactor > 0) {\n      scaleFactor = 1 + dotFactor;\n    } else if (dotFactor < 0) {\n      scaleFactor = 1 / (1 + Math.abs(dotFactor));\n    }\n    this.desiredObjectScale.copy(this.initialObjectScale).multiplyScalar(scaleFactor);\n    this.objectToScale.updateMatrices();\n    this.currentObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n    this.deltaScale.set(\n      this.desiredObjectScale.x / this.currentObjectScale.x,\n      this.desiredObjectScale.y / this.currentObjectScale.y,\n      this.desiredObjectScale.z / this.currentObjectScale.z\n    );\n    this.objectMatrix.copy(this.objectToScale.matrixWorld);\n    this.objectMatrix.scale(this.deltaScale);\n    setMatrixWorld(this.objectToScale, this.objectMatrix);\n  }\n});\n","import { CYLINDER_TEXTURE } from \"./cylinder-texture\";\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst RayCurve = function(numPoints, width) {\n  this.geometry = new THREE.BufferGeometry();\n  this.vertices = new Float32Array(numPoints * 3 * 2);\n  this.uvs = new Float32Array(numPoints * 2 * 2);\n  this.width = width;\n\n  this.geometry.addAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3).setDynamic(true));\n\n  this.material = new THREE.MeshBasicMaterial({\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n\n  this.mesh = new THREE.Mesh(this.geometry, this.material);\n  this.mesh.drawMode = THREE.TriangleStripDrawMode;\n\n  this.mesh.frustumCulled = false;\n  this.mesh.vertices = this.vertices;\n\n  this.direction = new THREE.Vector3();\n  this.numPoints = numPoints;\n};\n\nRayCurve.prototype = {\n  setDirection: function(direction) {\n    const UP = new THREE.Vector3(0, 1, 0);\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  },\n\n  setWidth: function(width) {\n    this.width = width;\n  },\n\n  setPoint: (function() {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n\n    return function(i, point) {\n      posA.copy(point).add(this.direction);\n      posB.copy(point).sub(this.direction);\n\n      let idx = 2 * 3 * i;\n      this.vertices[idx++] = posA.x;\n      this.vertices[idx++] = posA.y;\n      this.vertices[idx++] = posA.z;\n\n      this.vertices[idx++] = posB.x;\n      this.vertices[idx++] = posB.y;\n      this.vertices[idx++] = posB.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })()\n};\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nfunction getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x00ff00;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\nconst v = new THREE.Vector3();\n\nlet uiRoot;\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.mesh.visible = false;\n    this.teleportEntity = document.createElement(\"a-entity\");\n    this.teleportEntity.setObject3D(\"mesh\", this.rayCurve.mesh);\n    this.el.sceneEl.appendChild(this.teleportEntity);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.object3D.visible = false;\n    this.el.sceneEl.appendChild(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const entered = this.el.sceneEl.is(\"entered\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n    if (!entered && !isGhost) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (\n      !this.isTeleporting &&\n      userinput.get(start) &&\n      !this.characterController.isTeleportingDisabled &&\n      !window.APP.store.state.preferences.disableTeleporter\n    ) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.mesh.visible = true;\n      this.rayCurve.mesh.updateMatrixWorld();\n      this.rayCurve.mesh.material.opacity = MISS_OPACITY;\n      this.rayCurve.mesh.material.color.set(MISS_COLOR);\n      this.rayCurve.mesh.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.setAttribute(\"visible\", false);\n      this.isTeleporting = false;\n      this.rayCurve.mesh.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.el.object3D.updateMatrices();\n    const playerScale = v.setFromMatrixColumn(this.characterController.avatarPOV.object3D.matrixWorld, 1).length();\n    this.v0.copy(this.direction).multiplyScalar(speed * Math.sqrt(playerScale));\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n    if (this.characterController.isTeleportingDisabled) {\n      this.hit = false;\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.setAttribute(\"visible\", this.hit);\n    if (this.hit) {\n      this.hitEntity.setAttribute(\"position\", this.hitPoint);\n      this.hitEntity.object3D.traverse(o => {\n        o.matrixNeedsUpdate = true;\n      });\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.object3D.scale.set(outerScale, outerScale, 1);\n      this.torus.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n      this.cylinder.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n    }\n  },\n\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = document.createElement(\"a-entity\");\n    hitEntity.className = \"hitEntity\";\n\n    // Torus.\n    this.torus = document.createElement(\"a-entity\");\n    this.torus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.hitCylinderRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.torus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.torus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      depthTest: false\n    });\n    hitEntity.appendChild(this.torus);\n\n    // Cylinder.\n    this.cylinder = document.createElement(\"a-entity\");\n    this.cylinder.setAttribute(\"position\", { x: 0, y: data.hitCylinderHeight / 2, z: 0 });\n    this.cylinder.setAttribute(\"geometry\", {\n      primitive: \"cylinder\",\n      segmentsHeight: 1,\n      radius: data.hitCylinderRadius,\n      height: data.hitCylinderHeight,\n      openEnded: true\n    });\n    this.cylinder.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      src: CYLINDER_TEXTURE,\n      transparent: true,\n      depthTest: false\n    });\n    hitEntity.appendChild(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = document.createElement(\"a-entity\");\n    this.outerTorus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.outerRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.outerTorus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.outerTorus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      opacity: HIT_OPACITY,\n      depthTest: false\n    });\n    this.outerTorus.setAttribute(\"id\", \"outerTorus\");\n    hitEntity.appendChild(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","export const CYLINDER_TEXTURE =\n  \"data:image/png;base64,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\";\n","export function isTagged(el, tag) {\n  return el && el.components && el.components.tags && el.components.tags.data[tag];\n}\n\nAFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    togglesHoveredActionSet: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false },\n    isStatic: { default: false },\n    inspectable: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  },\n\n  remove() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (interaction.isHeld(this.el)) {\n      interaction.release(this.el);\n      this.el.sceneEl.systems[\"hubs-systems\"].constraintsSystem.release(this.el);\n    }\n  }\n});\n","import createTextGeometry from \"three-bmfont-text\";\n\n// 1 to match other A-Frame default widths.\nconst DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nconst MAX_ANISOTROPY = 16;\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.FrontSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth(wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || (0.5 + wrapCount) * widthFactor;\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor(font) {\n  let sum = 0;\n  let digitsum = 0;\n  let digits = 0;\n  for (const ch of font.chars) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  }\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\nfunction loadFont(src) {\n  return fetch(src)\n    .then(resp => resp.json())\n    .then(font => {\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf(\"/Roboto-msdf.json\") >= 0) {\n        for (const ch of font.chars) {\n          ch.yoffset += 30;\n        }\n      }\n      font.widthFactor = computeFontWidthFactor(font);\n      return font;\n    });\n}\n\nfunction loadTexture(src) {\n  return new Promise((resolve, reject) => {\n    new THREE.ImageLoader().load(\n      src,\n      image => {\n        const texture = new THREE.Texture();\n        texture.image = image;\n        texture.needsUpdate = true;\n        texture.anisotropy = MAX_ANISOTROPY;\n        resolve(texture);\n      },\n      undefined,\n      err => {\n        console.error(\"Error loading font image\", src, err);\n        reject(null);\n      }\n    );\n  });\n}\n\nconst FONTS = {\n  roboto: {\n    json: loadFont(\"https://cdn.aframe.io/fonts/Roboto-msdf.json\"),\n    texture: loadTexture(\"https://cdn.aframe.io/fonts/Roboto-msdf.png\")\n  }\n};\n\nAFRAME.registerComponent(\"text\", {\n  multiple: true,\n  schema: {\n    align: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\"] },\n    alphaTest: { default: 0.5 },\n    // `anchor` defaults to center to match geometries.\n    anchor: { default: \"center\", oneOf: [\"left\", \"right\", \"center\", \"align\"] },\n    baseline: { default: \"center\", oneOf: [\"top\", \"center\", \"bottom\"] },\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"roboto\" },\n    // `height` has no default, will be populated at layout.\n    height: { type: \"number\" },\n    letterSpacing: { type: \"number\", default: 0 },\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: { type: \"number\" },\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: { type: \"boolean\", default: true },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    tabSize: { default: 4 },\n    transparent: { default: true },\n    value: { type: \"string\" },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"pre\", \"nowrap\"] },\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: { type: \"number\" },\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: { type: \"number\", default: 40 },\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: { type: \"number\" },\n    // `xOffset` to add padding.\n    xOffset: { type: \"number\", default: 0 },\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: { type: \"number\", default: 0.001 }\n  },\n\n  init: function() {\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject = new AFRAME.shaders[\"msdf\"].Shader();\n    this.shaderObject.el = this.el;\n    this.shaderObject.init(shaderData);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n    this.geometry = createTextGeometry();\n    this.mesh = new THREE.Mesh(this.geometry, this.shaderObject.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont().catch(err => console.error(err));\n    }\n\n    // Not a new font, but we need to accomodate other changes with the existing font.\n    if (this.currentFont != null) {\n      this.updateGeometry(this.geometry, this.currentFont);\n      this.updateLayout(this.currentFont);\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function() {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.shaderObject.material.dispose();\n    this.shaderObject.material = null;\n    delete this.shaderObject;\n  },\n\n  getShaderData: (function() {\n    const shaderData = {};\n    return function(data) {\n      shaderData.alphaTest = data.alphaTest;\n      shaderData.color = data.color;\n      shaderData.opacity = data.opacity;\n      shaderData.side = parseSide(data.side);\n      shaderData.transparent = data.transparent;\n      shaderData.negate = data.negate;\n      return shaderData;\n    };\n  })(),\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function() {\n    const data = this.data;\n    const geometry = this.geometry;\n\n    // Make invisible during font swap.\n    this.mesh.visible = false;\n    const fetchFontData = Promise.all([FONTS[data.font].json, FONTS[data.font].texture]);\n    return fetchFontData.then(([font, texture]) => {\n      if (font.pages.length !== 1) {\n        throw new Error(\"Currently only single-page bitmap fonts are supported.\");\n      }\n      this.currentFont = font;\n      this.updateGeometry(geometry, font);\n      this.shaderObject.update({ map: texture });\n      this.updateLayout(font);\n      this.mesh.visible = true;\n    });\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function(font) {\n    const el = this.el;\n    const data = this.data;\n    const geometry = this.geometry;\n    const mesh = this.mesh;\n\n    if (!geometry.layout) {\n      return;\n    }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    const geometryComponent = el.getAttribute(\"geometry\");\n    const width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    const textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n    const textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    const layout = geometry.layout;\n    const height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === \"plane\") {\n      if (!geometryComponent.width) {\n        el.setAttribute(\"geometry\", \"width\", width);\n      }\n      if (!geometryComponent.height) {\n        el.setAttribute(\"geometry\", \"height\", height);\n      }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    const anchor = data.anchor === \"align\" ? data.align : data.anchor;\n    let x, y;\n    if (anchor === \"left\") {\n      x = 0;\n    } else if (anchor === \"right\") {\n      x = -1 * layout.width;\n    } else if (anchor === \"center\") {\n      x = (-1 * layout.width) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.anchor property value\", anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    const baseline = data.baseline;\n    if (baseline === \"bottom\") {\n      y = 0;\n    } else if (baseline === \"top\") {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === \"center\") {\n      y = (-1 * layout.height) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.baseline property value\", baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n    mesh.matrixNeedsUpdate = true;\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function() {\n    const geometryUpdateBase = {};\n    const geometryUpdateData = {};\n    const newLineRegex = /\\\\n/g;\n    const tabRegex = /\\\\t/g;\n\n    return function(geometry, font) {\n      const data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight =\n        data.lineHeight && isFinite(data.lineHeight) ? data.lineHeight : font.common.lineHeight;\n      geometryUpdateData.text = data.value\n        .toString()\n        .replace(newLineRegex, \"\\n\")\n        .replace(tabRegex, \"\\t\");\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n      geometry.update(Object.assign(geometryUpdateBase, data, geometryUpdateData));\n      geometry.boundingBox = null;\n      geometry.boundingSphere = null;\n    };\n  })()\n});\n","import { getInspectable } from \"../systems/camera-system\";\n\nAFRAME.registerComponent(\"inspect-button\", {\n  tick() {\n    if (!this.initializedInTick) {\n      // initialize in tick so that parent's `tags` component has been initialized\n      this.initializedInTick = true;\n\n      this.inspectable = getInspectable(this.el);\n      if (!this.inspectable) {\n        console.error(\"You put an inspect button but I could not find what you want to inspect.\", this.el);\n        return;\n      }\n      this.el.object3D.addEventListener(\"holdable-button-down\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.inspect(this.inspectable.object3D);\n      });\n      this.el.object3D.addEventListener(\"holdable-button-up\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.uninspect();\n      });\n    }\n  }\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.rightCursorHoveringOnPen = \"rightCursorHoveringOnPen\";\nsets.rightCursorHoveringOnCamera = \"rightCursorHoveringOnCamera\";\nsets.rightCursorHoveringOnInteractable = \"rightCursorHoveringOnInteractable\";\nsets.rightCursorHoveringOnUI = \"rightCursorHoveringOnUI\";\nsets.rightCursorHoveringOnVideo = \"rightCursorHoveringOnVideo\";\nsets.rightCursorHoveringOnNothing = \"rightCursorHoveringOnNothing\";\nsets.rightCursorHoldingPen = \"rightCursorHoldingPen\";\nsets.rightCursorHoldingCamera = \"rightCursorHoldingCamera\";\nsets.rightCursorHoldingInteractable = \"rightCursorHoldingInteractable\";\nsets.rightCursorHoldingUI = \"rightCursorHoldingUI\";\nsets.rightCursorHoldingNothing = \"rightCursorHoldingNothing\";\nsets.leftCursorHoveringOnPen = \"leftCursorHoveringOnPen\";\nsets.leftCursorHoveringOnCamera = \"leftCursorHoveringOnCamera\";\nsets.leftCursorHoveringOnInteractable = \"leftCursorHoveringOnInteractable\";\nsets.leftCursorHoveringOnUI = \"leftCursorHoveringOnUI\";\nsets.leftCursorHoveringOnVideo = \"leftCursorHoveringOnVideo\";\nsets.leftCursorHoveringOnNothing = \"leftCursorHoveringOnNothing\";\nsets.leftCursorHoldingPen = \"leftCursorHoldingPen\";\nsets.leftCursorHoldingCamera = \"leftCursorHoldingCamera\";\nsets.leftCursorHoldingInteractable = \"leftCursorHoldingInteractable\";\nsets.leftCursorHoldingUI = \"leftCursorHoldingUI\";\nsets.leftCursorHoldingNothing = \"leftCursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\nsets.debugUserInput = \"debugUserInput\";\nsets.inspecting = \"inspecting\";\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\nexport function canShare() {\n  // TODO, fix up when OB/FxR support sharing\n  return navigator.share && !isMobileVR;\n}\n\n/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (canShare()) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/promote-client-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class PromoteClientDialog extends Component {\n  static propTypes = {\n    displayName: PropTypes.string,\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Promote User\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"promote.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"promote.confirm-prefix\" />\n          <span>{this.props.displayName}</span>\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"promote.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PromoteClientDialog from \"./promote-client-dialog.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { sluglessPath } from \"../utils/history\";\nimport { getAvatarThumbnailUrl } from \"../utils/avatar-utils\";\n\nexport function getClientInfoClientId(location) {\n  const { search } = location;\n  const urlParams = new URLSearchParams(search);\n  const pathname = sluglessPath(location);\n\n  if (!pathname.startsWith(\"/client\") && !urlParams.get(\"client_id\")) return null;\n  return urlParams.get(\"client_id\") || pathname.substring(9);\n}\n\nexport default class ClientInfoDialog extends Component {\n  static propTypes = {\n    clientId: PropTypes.string,\n    history: PropTypes.object,\n    hubChannel: PropTypes.object,\n    presences: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    onClose: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func\n  };\n\n  state = {\n    avatarThumbnailUrl: null\n  };\n\n  kick() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"kick_users\"),\n      async () => await hubChannel.kick(clientId),\n      \"kick-user\"\n    );\n\n    onClose();\n  }\n\n  hide() {\n    const { clientId, onClose, hubChannel } = this.props;\n    hubChannel.hide(clientId);\n    onClose();\n  }\n\n  mute() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"mute_users\"),\n      async () => await hubChannel.mute(clientId),\n      \"mute-user\"\n    );\n\n    onClose();\n  }\n\n  addOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n    const { profile } = this.getPresenceEntry();\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => {\n        onClose();\n\n        this.props.showNonHistoriedDialog(PromoteClientDialog, {\n          displayName: profile.displayName,\n          onConfirm: () => hubChannel.addOwner(clientId)\n        });\n      },\n      \"add-owner\"\n    );\n  }\n\n  removeOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => await hubChannel.removeOwner(clientId),\n      \"remove-owner\"\n    );\n\n    onClose();\n  }\n\n  unhide() {\n    const { clientId, hubChannel, onClose } = this.props;\n    hubChannel.unhide(clientId);\n    onClose();\n  }\n\n  getPresenceEntry() {\n    if (!this.props.presences) return null;\n\n    const presence = Object.entries(this.props.presences).find(([k]) => k === this.props.clientId);\n    if (!presence) return { profile: {}, roles: {} };\n\n    const metas = presence[1].metas;\n    return metas[metas.length - 1];\n  }\n\n  componentDidMount() {\n    const { profile } = this.getPresenceEntry();\n    if (profile.avatarId) {\n      getAvatarThumbnailUrl(profile.avatarId).then(avatarThumbnailUrl => this.setState({ avatarThumbnailUrl }));\n    }\n  }\n\n  render() {\n    const { profile, roles } = this.getPresenceEntry();\n\n    const { displayName, identityName } = profile;\n    const { hubChannel, clientId, onClose } = this.props;\n    const title = (\n      <div className={styles.title}>\n        {displayName}\n        <div className={styles.identityName}>{identityName}</div>\n      </div>\n    );\n    const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n    const mayMute = hubChannel.canOrWillIfCreator(\"mute_users\");\n    const targetIsOwner = !!roles.owner;\n    const targetIsCreator = !!roles.creator;\n    const targetIsSignedIn = !!roles.signed_in;\n    const mayAddOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && !targetIsOwner && !targetIsCreator;\n    const mayRemoveOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && targetIsOwner && !targetIsCreator;\n    const isHidden = hubChannel.isHidden(clientId);\n\n    return (\n      <DialogContainer className={styles.clientInfoDialog} title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.clientProfileImage}>\n            <img src={this.state.avatarThumbnailUrl} />\n          </div>\n          <div className={styles.primaryActionButtons}>\n            {mayAddOwner && (\n              <button\n                onClick={() => this.addOwner()}\n                disabled={!targetIsSignedIn}\n                title={targetIsSignedIn ? \"Promote\" : `${profile.displayName} is signed out.`}\n              >\n                <img className={styles.buttonIcon} src=\"../assets/images/add-owner.png\" />\n                <FormattedMessage id=\"client-info.add-owner\" />\n              </button>\n            )}\n            {mayRemoveOwner && (\n              <button onClick={() => this.removeOwner()}>\n                <img className={styles.buttonIcon} src=\"../assets/images/remove-owner.png\" />\n                <FormattedMessage id=\"client-info.remove-owner\" />\n              </button>\n            )}\n            {!isHidden && (\n              <button onClick={() => this.hide()}>\n                <FormattedMessage id=\"client-info.hide-button\" />\n              </button>\n            )}\n            {isHidden && (\n              <button onClick={() => this.unhide()}>\n                <FormattedMessage id=\"client-info.unhide-button\" />\n              </button>\n            )}\n            {mayMute && (\n              <button onClick={() => this.mute()}>\n                <FormattedMessage id=\"client-info.mute-button\" />\n              </button>\n            )}\n            {mayKick && (\n              <button onClick={() => this.kick()}>\n                <FormattedMessage id=\"client-info.kick-button\" />\n              </button>\n            )}\n            <button className={styles.cancel} onClick={onClose}>\n              <FormattedMessage id=\"client-info.cancel\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage } from \"react-intl\";\nimport UnlessFeature from \"./unless-feature\";\n\nimport configs from \"../utils/configs\";\nimport { lang, messages } from \"../utils/i18n\";\nimport loaderStyles from \"../assets/stylesheets/loader.scss\";\n\nclass Loader extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    finished: PropTypes.bool,\n    onLoaded: PropTypes.func\n  };\n\n  doneWithInitialLoad = false;\n  state = {\n    loadingNum: 0,\n    loadedNum: 0\n  };\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"pdf-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"pdf-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"model-error\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\n      \"environment-scene-loaded\",\n      () => {\n        this.environmentSceneLoaded = true;\n        this.tryFinishLoading();\n      },\n      { once: true }\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"pdf-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"pdf-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"model-error\", this.onObjectLoaded);\n  }\n\n  onObjectLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) {\n      window.clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.setState(state => {\n      return { loadingNum: state.loadingNum + 1 };\n    });\n  };\n\n  onObjectLoaded = () => {\n    this.setState(state => {\n      return { loadedNum: state.loadedNum + 1 };\n    });\n\n    this.tryFinishLoading();\n  };\n\n  tryFinishLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) window.clearTimeout(this.loadingTimeout);\n\n    if (this.environmentSceneLoaded) {\n      this.loadingTimeout = window.setTimeout(() => {\n        this.doneWithInitialLoad = true;\n        if (this.props.onLoaded) {\n          this.props.onLoaded();\n        }\n      }, 1500);\n    }\n  };\n\n  render() {\n    const nomore = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.entering_lobby\" />\n      </h4>\n    );\n    const progress =\n      this.state.loadingNum === 0\n        ? \" \"\n        : `${Math.min(this.state.loadedNum, this.state.loadingNum)} / ${this.state.loadingNum} `;\n    const usual = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.loading\" />\n        {progress}\n        <FormattedMessage id={this.state.loadingNum !== 1 ? \"loader.objects\" : \"loader.object\"} />\n        ...\n      </h4>\n    );\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <img className=\"loading-panel__logo\" src={configs.image(\"logo\")} />\n          <UnlessFeature name=\"hide_powered_by\">\n            <div className=\"loading-panel__powered-by\">\n              <span className=\"loading-panel__powered-by__prefix\">\n                <FormattedMessage id=\"home.powered_by_prefix\" />\n              </span>\n              <a href=\"https://hubs.mozilla.com/cloud\">\n                <FormattedMessage id=\"home.powered_by_link\" />\n              </a>\n            </div>\n          </UnlessFeature>\n\n          {this.props.finished ? nomore : usual}\n\n          <div className=\"loader-wrap loader-bottom\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id={props.message} />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  message: PropTypes.string,\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nfunction InlineSVG(props) {\n  const filteredProps = { ...props };\n  delete filteredProps.src;\n  return <div {...filteredProps} dangerouslySetInnerHTML={{ __html: props.src }} />;\n}\n\nInlineSVG.propTypes = {\n  src: PropTypes.string\n};\n\nfunction InlineSVGButton(props) {\n  const filteredProps = { ...props };\n  delete filteredProps.src;\n  return <button {...filteredProps} dangerouslySetInnerHTML={{ __html: props.src }} />;\n}\n\nInlineSVGButton.propTypes = {\n  src: PropTypes.string\n};\n\nexport { InlineSVG, InlineSVGButton };\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svgi\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svgi\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svgi\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svgi\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svgi\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport cx from \"classnames\";\nimport { InlineSVG } from \"./svgi\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button\n        autoFocus={props.autoFocus}\n        className={cx([{ [styles.entryButton]: true, [styles.entryButtonSecondary]: props.secondary }])}\n        onClick={props.onClick}\n      >\n        <InlineSVG src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  iconSrc: PropTypes.string,\n  secondary: PropTypes.bool,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: isMobile ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: isMobile ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: isMobile ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport StateLink from \"./state-link\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport AvatarPreview from \"./avatar-preview\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object,\n    history: PropTypes.object,\n    avatarId: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n    this.scene.emit(\"avatar_updated\");\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: { entry, selectAction } }) => {\n    if ((entry.type !== \"avatar\" && entry.type !== \"avatar_listing\") || selectAction !== \"use\") return;\n\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <div className={styles.close}>\n          <button autoFocus onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </div>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            {this.props.displayNameOverride ? (\n              <span className={styles.displayName}>{this.props.displayNameOverride}</span>\n            ) : (\n              <input\n                id=\"profile-entry-display-name\"\n                className={styles.formFieldText}\n                value={this.state.displayName}\n                onFocus={e => handleTextFieldFocus(e.target)}\n                onBlur={() => handleTextFieldBlur()}\n                onChange={e => this.setState({ displayName: e.target.value })}\n                required\n                spellCheck=\"false\"\n                pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n                title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n                ref={inp => (this.nameInput = inp)}\n              />\n            )}\n\n            {this.state.avatar ? (\n              <div className={styles.preview}>\n                <AvatarPreview avatarGltfUrl={this.state.avatar.gltf_url} />\n\n                {this.state.avatar.account_id === this.props.store.credentialsAccountId && (\n                  <StateLink\n                    stateKey=\"overlay\"\n                    stateValue=\"avatar-editor\"\n                    stateDetail={{ avatarId: this.state.avatarId, hideDelete: true, returnToProfile: true }}\n                    history={this.props.history}\n                    className={styles.editAvatar}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </StateLink>\n                )}\n\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.preview}>\n                <AvatarPreview />\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            )}\n\n            <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            <div className={styles.links}>\n              <IfFeature name=\"show_terms\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </IfFeature>\n\n              <IfFeature name=\"show_privacy\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </IfFeature>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={configs.image(\"logo\")} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { faLink } from \"@fortawesome/free-solid-svg-icons/faLink\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport MediaTiles from \"./media-tiles\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  poly: \"https://policies.google.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  poly: [\n    { text: \"Featured\", params: { filter: \"\" } },\n    { text: \"Animals\", params: { filter: \"animals\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art\" } },\n    { text: \"Food\", params: { filter: \"food\" } },\n    { text: \"Nature\", params: { filter: \"nature\" } },\n    { text: \"Objects\", params: { filter: \"objects\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Scenes\", params: { filter: \"scenes\" } },\n    { text: \"Transport\", params: { filter: \"transport\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } },\n    { text: \"Newest\", params: { filter: \"\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nclass MediaBrowser extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n    newState.selectAction = searchParams.get(\"selectAction\") || \"spawn\";\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  onCopyAvatar = () => {\n    this.handleFacetClicked({ params: { filter: \"my-avatars\" } });\n  };\n\n  onCopyScene = () => {\n    this.handleFacetClicked({ params: { filter: \"my-scenes\" } });\n  };\n\n  onShowSimilar = (id, name) => {\n    this.handleFacetClicked({ params: { similar_to: id, similar_name: name } });\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry, this.state.selectAction);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    this.setState({ query: \"\" }, () => {\n      const searchParams = this.getSearchClearedSearchParams(true, true, true);\n\n      for (const [k, v] of Object.entries(facet.params)) {\n        searchParams.set(k, v);\n      }\n\n      pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n    });\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav, keepSelectAction) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(\n      this.props.history.location,\n      keepSource,\n      keepNav,\n      keepSelectAction\n    );\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const isSceneApiType = source === \"scenes\";\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n    const dialog = isSceneApiType ? \"change_scene\" : isAvatarApiType ? \"avatar_url\" : \"create\";\n    pushHistoryState(this.props.history, \"modal\", dialog);\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    const facets = this.state.facets && this.state.facets.length > 0 && this.state.facets;\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          \"change-scene\"\n        );\n      }\n    };\n\n    const activeFilter =\n      searchParams.get(\"filter\") || (searchParams.get(\"similar_to\") && \"similar\") || (!searchParams.get(\"q\") && \"\");\n\n    const meta = this.state.result && this.state.result.meta;\n    const hasNext = !!(meta && meta.next_cursor);\n    const hasPrevious = searchParams.get(\"cursor\");\n    const page = (meta && meta.page) || 0;\n    const apiSource = (meta && meta.source) || null;\n    const isVariableWidth = [\"bing_images\", \"tenor\"].includes(apiSource);\n\n    return (\n      <div className={styles.mediaBrowser} ref={browserDiv => (this.browserDiv = browserDiv)}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <div className={classNames(styles.header, { [styles.noSearch]: hideSearch })}>\n            <div className={styles.headerLeft}>\n              <button onClick={() => this.close()}>\n                <i>\n                  <FontAwesomeIcon icon={faTimes} />\n                </i>\n              </button>\n            </div>\n            <div className={styles.headerCenter}>\n              {urlSource === \"favorites\" && (\n                <div className={styles.favoritesHeader}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                  <FormattedMessage id=\"media-browser.favorites-header\" />\n                </div>\n              )}\n              {!hideSearch && (\n                <div className={styles.search}>\n                  <i className={styles.searchIcon}>\n                    <FontAwesomeIcon icon={faSearch} />\n                  </i>\n                  <input\n                    type=\"text\"\n                    autoFocus={!isMobile && !isMobileVR}\n                    ref={r => (this.inputRef = r)}\n                    placeholder={formatMessage({\n                      id: `media-browser.search-placeholder.${urlSource}`\n                    })}\n                    onFocus={e => handleTextFieldFocus(e.target)}\n                    onBlur={() => handleTextFieldBlur()}\n                    onKeyDown={e => {\n                      if (e.key === \"Enter\" && e.ctrlKey) {\n                        if (entries.length > 0 && !this._sendQueryTimeout) {\n                          this.handleEntryClicked(e, entries[0]);\n                        } else if (this.state.query.trim() !== \"\") {\n                          this.handleQueryUpdated(this.state.query, true);\n                          this.setState({ selectNextResult: true });\n                        } else {\n                          this.close();\n                        }\n                      } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n                        e.target.blur();\n                      }\n                    }}\n                    value={this.state.query}\n                    onChange={e => this.handleQueryUpdated(e.target.value)}\n                  />\n                  <i className={styles.searchClear} onClick={() => this.handleQueryUpdated(\"\", true)}>\n                    <FontAwesomeIcon icon={faTimes} />\n                  </i>\n                </div>\n              )}\n              <div className={styles.engineAttribution}>\n                {!hideSearch &&\n                  urlSource !== \"scenes\" &&\n                  urlSource !== \"avatars\" &&\n                  urlSource !== \"favorites\" && (\n                    <div className={styles.engineAttributionContents}>\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      {PRIVACY_POLICY_LINKS[urlSource] && (\n                        <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n                          <FormattedMessage id=\"media-browser.privacy_policy\" />\n                        </a>\n                      )}\n                    </div>\n                  )}\n                {urlSource === \"scenes\" && (\n                  <div className={styles.engineAttributionContents}>\n                    <IfFeature name=\"enable_spoke\">\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                        <FormattedMessage id=\"editor-name\" />\n                      </a>\n                    </IfFeature>\n                    {configs.feature(\"enable_spoke\") && configs.feature(\"show_issue_report_link\") && \"|\"}\n                    <IfFeature name=\"show_issue_report_link\">\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" href={configs.link(\"issue_report\", \"/#/report\")}>\n                        <FormattedMessage id=\"media-browser.report_issue\" />\n                      </a>\n                    </IfFeature>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className={styles.headerRight}>\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createButton}>\n                  <i>\n                    <FontAwesomeIcon icon={[\"scenes\", \"avatars\"].includes(urlSource) ? faLink : faCloudUploadAlt} />\n                  </i>\n                </a>\n              )}\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createLink}>\n                  <FormattedMessage\n                    id={`media-browser.add_custom_${\n                      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\"\n                    }`}\n                  />\n                </a>\n              )}\n            </div>\n          </div>\n\n          {this.state.showNav && (\n            <div className={styles.nav}>\n              {SOURCES.map(s => (\n                <a\n                  onClick={() => this.handleSourceClicked(s)}\n                  key={s}\n                  className={classNames({ [styles.navSource]: true, [styles.navSourceSelected]: urlSource === s })}\n                >\n                  <FormattedMessage id={`media-browser.nav_title.${s}`} />\n                </a>\n              ))}\n              <div className={styles.navRightPad}>&nbsp;</div>\n              <div className={styles.navScrollArrow}>\n                <FontAwesomeIcon icon={faAngleRight} />\n              </div>\n            </div>\n          )}\n\n          {(facets || activeFilter === \"similar\") && (\n            <div className={styles.facets}>\n              {facets &&\n                facets.map((s, i) => (\n                  <a\n                    onClick={() => this.handleFacetClicked(s)}\n                    key={i}\n                    className={classNames(styles.facet, { selected: s.params.filter === activeFilter })}\n                  >\n                    {s.text}\n                  </a>\n                ))}\n              {activeFilter === \"similar\" && (\n                <a className={classNames(styles.facet, \"selected\")}>\n                  <FormattedMessage\n                    id=\"media-browser.similar-to-facet\"\n                    values={{ name: searchParams.get(\"similar_name\") }}\n                  />\n                </a>\n              )}\n            </div>\n          )}\n\n          {this.props.mediaSearchStore.isFetching ||\n          this._sendQueryTimeout ||\n          entries.length > 0 ||\n          !showEmptyStringOnNoResult ? (\n            <MediaTiles\n              entries={entries}\n              hasNext={hasNext}\n              hasPrevious={hasPrevious}\n              page={page}\n              isVariableWidth={isVariableWidth}\n              history={this.props.history}\n              urlSource={urlSource}\n              handleEntryClicked={this.handleEntryClicked}\n              onCopyAvatar={this.onCopyAvatar}\n              onCopyScene={this.onCopyScene}\n              onShowSimilar={this.onShowSimilar}\n              handlePager={this.handlePager}\n            />\n          ) : (\n            <div className={styles.emptyString}>\n              <FormattedMessage id={`media-browser.empty.${urlSource}`} />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowser);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport { messages } from \"../utils/i18n\";\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport ducky from \"../assets/models/DuckyMesh.glb\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { getAbsoluteHref } from \"../utils/media-url-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\nconst instructions = \"Paste a URL to an image, video, model, scene, or upload.\";\nconst desktopTips = `Tip: You can paste URLs directly into ${messages[\"app-name\"]} with Ctrl+V`;\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>{\" \"}\n    and{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>\n    <IfFeature name=\"show_model_collection_link\">\n      , or our{\" \"}\n      <a\n        href={configs.link(\"model_collection\", \"https://sketchfab.com/mozillareality\")}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        collection\n      </a>\n    </IfFeature>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || getAbsoluteHref(location.href, ducky));\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onFocus={e => handleTextFieldFocus(e.target)}\n        onBlur={() => handleTextFieldBlur()}\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport cx from \"classnames\";\n\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/change-scene-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { messages } from \"../utils/i18n\";\nimport { isValidSceneUrl } from \"../utils/scene-url-utils\";\n\nexport default class ChangeSceneDialog extends Component {\n  state = {\n    url: \"\",\n    submitting: false\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    this.urlValidationPromise = null;\n  }\n\n  onUrlChange = e => {\n    const urlInput = e.target;\n    const url = urlInput.value;\n    this.setState({ url });\n\n    urlInput.setCustomValidity(\"\");\n\n    this.urlValidationPromise = new Promise(async resolve => {\n      urlInput.setCustomValidity((await isValidSceneUrl(url.trim())) ? \"\" : messages[\"invalid-scene-url\"]);\n      resolve();\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({ url: \"\" });\n  };\n\n  onSubmit = async e => {\n    e.preventDefault();\n\n    this.setState({ submitting: true });\n\n    const form = e.target;\n\n    if (this.state.url) {\n      await this.urlValidationPromise;\n      if (form.checkValidity()) {\n        this.props.onChange(this.state.url.trim());\n        this.props.onClose();\n      } else {\n        form.reportValidity();\n        this.setState({ submitting: false });\n      }\n    }\n  };\n\n  render() {\n    const { onChange, onClose } = this.props; // eslint-disable-line no-unused-vars\n\n    return (\n      <DialogContainer title=\"Custom Scene\" onClose={this.props.onClose}>\n        <div>\n          <div>\n            <p>\n              Paste a URL to a{\" \"}\n              <IfFeature name=\"enable_spoke\">\n                <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <FormattedMessage id=\"editor-name\" />\n                </a>{\" \"}\n              </IfFeature>\n              scene or a URL to a{\" \"}\n              <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLB\n              </a>.\n            </p>\n          </div>\n          <form onSubmit={this.onSubmit}>\n            <div className={styles.changeSceneForm}>\n              <div className={styles.inputBorder}>\n                <input\n                  className={cx(styles.leftSideOfInput)}\n                  placeholder=\"Scene URL\"\n                  onFocus={e => handleTextFieldFocus(e.target)}\n                  onBlur={() => handleTextFieldBlur()}\n                  onChange={this.onUrlChange}\n                  type=\"url\"\n                  value={this.state.url}\n                />\n              </div>\n              <div className={styles.buttons}>\n                <button className={styles.actionButton} disabled={this.state.submitting}>\n                  <FormattedMessage id=\"change-scene-dialog.change-scene\" />\n                </button>\n              </div>\n              <IfFeature name=\"enable_spoke\">\n                <div className={styles.spokeCreate}>\n                  <div>\n                    <FormattedMessage id=\"change-scene-dialog.create-in-spoke\" />\n                  </div>\n                  <a className={styles.spokeLaunch} href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    <FormattedMessage id=\"change-scene-dialog.new-spoke-project\" />\n                  </a>\n                </div>\n              </IfFeature>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/avatar-url-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class AvatarUrlDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Custom Avatar URL\" className={styles.avatarUrlDialog} onClose={this.props.onClose}>\n        <p>\n          Paste a URL to a{\" \"}\n          <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GLB\n          </a>.\n        </p>\n        <form className=\"form\" onSubmit={this.onChangeClicked}>\n          <input\n            className=\"url-field\"\n            placeholder=\"Avatar GLB URL\"\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={this.onUrlChange}\n            type=\"url\"\n            value={this.state.url}\n          />\n          <button className=\"submit\">\n            <FormattedMessage id=\"avatar-url-dialog.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport configs from \"../utils/configs\";\n\nimport { messages } from \"../utils/i18n\";\nimport { share, canShare } from \"../utils/share\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    isModal: PropTypes.bool,\n    onClose: PropTypes.func,\n    hasPush: PropTypes.bool,\n    isSubscribed: PropTypes.bool,\n    onSubscribeChanged: PropTypes.func,\n    embedUrl: PropTypes.string\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: `Join me now in ${messages[\"share-hashtag\"]}!` }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode, embedUrl } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `${configs.SHORTLINK_DOMAIN}/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n    const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n\n    return (\n      <div className={classNames({ [styles.dialog]: true, [styles.modal]: this.props.isModal })}>\n        {!this.props.isModal && <div className={styles.attachPoint} />}\n        <div>\n          <FormattedMessage id={`invite.or_visit${this.props.isModal ? \"_modal\" : \"\"}`} />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n        <WithHoverSound>\n          <button className={styles.close} onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </WithHoverSound>\n        <div className={styles.linkCode}>\n          <FormattedMessage id={`invite.enter_via${this.props.isModal ? \"_modal\" : \"\"}`} />\n          <a\n            href={`https://${configs.SHORTLINK_DOMAIN}`}\n            target=\"_blank\"\n            className={styles.hubLinkLink}\n            rel=\"noopener noreferrer\"\n          >\n            {configs.SHORTLINK_DOMAIN}\n          </a>\n          {/* <div className={styles.linkcode}> */}\n          <FormattedMessage id=\"invite.and_enter_code\" />\n          {/* </div> */}\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div className={styles.codeDuration}>\n          <FormattedMessage id=\"invite.duration_of_code\" />\n        </div>\n        {embedUrl && (\n          <div className={styles.embed}>\n            <div>\n              <FormattedMessage id={`invite.embed`} />\n            </div>\n            <div className={styles.embedText}>\n              <input\n                type=\"text\"\n                readOnly\n                onFocus={e => {\n                  e.target.select();\n                  this.setState({ showEmbedTip: true });\n                }}\n                onBlur={() => this.setState({ showEmbedTip: false })}\n                value={embedText}\n              />\n            </div>\n            {this.state.showEmbedTip && (\n              <div className={styles.embedTipWrap}>\n                <div className={styles.embedTip}>\n                  <div className={styles.embedTipAttachPoint} />\n                  <FormattedMessage id=\"invite.embed-tip\" />\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.hasPush && (\n          <div className={styles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={() => this.props.onSubscribeChanged()}\n              checked={this.props.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        {this.props.isModal && (\n          <button className={styles.enterVrButton} onClick={() => this.props.onClose()}>\n            <FormattedMessage id=\"entry.return-to-vr\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span></span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <a\n                href={`https://${configs.SHORTLINK_DOMAIN}`}\n                className={styles.domain}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {configs.SHORTLINK_DOMAIN}\n              </a>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\nimport { detectOS } from \"detect-browser\";\n\nimport { messages } from \"../utils/i18n\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InAppBrowserDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    const detectedOS = detectOS(navigator.userAgent);\n    return (\n      <DialogContainer title=\"Open in Browser\" {...this.props}>\n        <div>\n          <div>\n            {messages[\"app-name\"]} does not support your current browser.<br />\n            Copy and paste this link directly into {detectedOS === \"iOS\" ? \"Safari\" : \"Chrome or Firefox\"}.\n          </div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nimport styles from \"../assets/stylesheets/room-settings-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport configs from \"../utils/configs\";\n\nexport default class RoomSettingsDialog extends Component {\n  static propTypes = {\n    initialSettings: PropTypes.object,\n    onChange: PropTypes.func,\n    onClose: PropTypes.func,\n    showRoomAccessSettings: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = props.initialSettings;\n  }\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onChange(this.state);\n    this.props.onClose();\n  };\n\n  onRoomAccessSettingsChange = e =>\n    this.setState({\n      allow_promotion: e.target.value === \"public\"\n    });\n\n  renderCheckbox(member_permission, disabled, onChange) {\n    return (\n      <label className={cx(styles.permission, { [styles.permissionDisabled]: disabled })} key={member_permission}>\n        <input\n          type=\"checkbox\"\n          checked={this.state.member_permissions[member_permission]}\n          disabled={disabled}\n          onChange={\n            onChange ||\n            (e =>\n              this.setState({\n                member_permissions: { ...this.state.member_permissions, [member_permission]: e.target.checked }\n              }))\n          }\n        />\n        <FormattedMessage id={`room-settings.${member_permission}`} />\n      </label>\n    );\n  }\n\n  render() {\n    const { showRoomAccessSettings } = this.props;\n\n    const maxRoomSize = configs.feature(\"max_room_size\");\n\n    return (\n      <DialogContainer title=\"Room Settings\" {...this.props}>\n        <form onSubmit={this.onSubmit} className={styles.roomSettingsForm}>\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.name-subtitle\" />\n          </span>\n          <input\n            name=\"name\"\n            type=\"text\"\n            required\n            autoComplete=\"off\"\n            placeholder=\"Room name\"\n            value={this.state.name}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ name: e.target.value })}\n            className={styles.nameField}\n          />\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.description-subtitle\" />\n          </span>\n          <textarea\n            name=\"description\"\n            rows=\"5\"\n            autoComplete=\"off\"\n            placeholder=\"Room description\"\n            value={this.state.description || \"\"}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ description: e.target.value })}\n            className={styles.descriptionField}\n          />\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.room-size-subtitle\" />\n          </span>\n          <div className={styles.memberCapContainer}>\n            <input\n              name=\"room_size\"\n              type=\"number\"\n              required\n              min={0}\n              max={maxRoomSize}\n              placeholder=\"Member Limit\"\n              value={this.state.room_size}\n              onFocus={e => handleTextFieldFocus(e.target)}\n              onBlur={() => handleTextFieldBlur()}\n              onChange={e => this.setState({ room_size: e.target.value })}\n              className={styles.nameField}\n            />\n          </div>\n          {showRoomAccessSettings && (\n            <>\n              <span className={styles.subtitle}>\n                <FormattedMessage id=\"room-settings.room-access-subtitle\" />\n              </span>\n              <div className={styles.selectContainer}>\n                <label>\n                  <input\n                    type=\"radio\"\n                    value=\"private\"\n                    checked={!this.state.allow_promotion}\n                    onChange={this.onRoomAccessSettingsChange}\n                  />\n                  <div>\n                    <FormattedMessage id=\"room-settings.access-private\" />\n                    <span>\n                      <FormattedMessage id=\"room-settings.access-private-subtitle\" />\n                    </span>\n                  </div>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    value=\"public\"\n                    checked={this.state.allow_promotion}\n                    onChange={this.onRoomAccessSettingsChange}\n                  />\n                  <div>\n                    <FormattedMessage id=\"room-settings.access-public\" />\n                    <span>\n                      <FormattedMessage id=\"room-settings.access-public-subtitle\" />\n                    </span>\n                  </div>\n                </label>\n              </div>\n            </>\n          )}\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.permissions-subtitle\" />\n          </span>\n          <div className={styles.permissions}>\n            {this.renderCheckbox(\"spawn_and_move_media\", false, e => {\n              const newMemberPermissions = {\n                spawn_and_move_media: e.target.checked\n              };\n              if (!e.target.checked) {\n                newMemberPermissions.spawn_camera = false;\n                newMemberPermissions.pin_objects = false;\n              }\n              this.setState({ member_permissions: { ...this.state.member_permissions, ...newMemberPermissions } });\n            })}\n            <div className={styles.permissionsGroup}>\n              {this.renderCheckbox(\"spawn_camera\", !this.state.member_permissions.spawn_and_move_media)}\n              {this.renderCheckbox(\"pin_objects\", !this.state.member_permissions.spawn_and_move_media)}\n            </div>\n            {this.renderCheckbox(\"spawn_drawing\")}\n            {this.renderCheckbox(\"spawn_emoji\")}\n            <div />\n            {this.renderCheckbox(\"fly\")}\n          </div>\n          <button type=\"submit\" className={styles.nextButton}>\n            <FormattedMessage id=\"room-settings.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/close-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class CloseRoomDialog extends Component {\n  static propTypes = {\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Close Room\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"close-room.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"close-room.confirm\" />\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"close-room.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import { sets } from \"./userinput/sets\";\nimport { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTips which shows, if any, the tips to show at the top\n// and bottom of the screen. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\n//\n// Tips have \"scope\", which is a certain context within which the validators are run (right now,\n// just the top of bottom of the screen.) They are also platform-local.\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\n\nconst TIPS = {\n  desktop: {\n    top: [\"pen_mode\", \"video_share_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"turning\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"object_zoom\",\n      \"object_scale\",\n      \"freeze_gesture\",\n      \"menu_hover\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"pen_color\",\n      \"pen_size\",\n      \"feedback\"\n    ]\n  },\n  mobile: {\n    top: [\"pen_mode\", \"video_share_mode\", \"freeze_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"freeze_gesture\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"feedback\"\n    ]\n  },\n  standalone: { top: [], bottom: [] }\n};\n\n// These tips, if closed, will only clear themselves, not all tips.\nconst LOCAL_CLOSE_TIPS = [\"feedback\", \"invite\", \"object_pin\"];\n\n// These tips will remain active even if the user closes the tips globally.\nconst KEEP_ACTIVE_AFTER_GLOBAL_CLOSE = [\"freeze_gesture\", \"menu_hover\", \"feedback\"];\n\nlet localStorageCache = null;\nlet finishedScopes = {}; // Optimization, lets system skip scopes altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nconst isTipFinished = tip => {\n  if (localStorageCache === null) {\n    localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  }\n\n  return !!(localStorageCache[tip] && localStorageCache[tip].finished);\n};\n\nexport const markTipFinished = tip => {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n};\n\nexport const handleTipClose = (fullTip, scope) => {\n  const tip = fullTip.split(\".\")[1];\n\n  // Invite and pinning tips should be locally cleared, others should clear all remaining tips.\n  const tips = LOCAL_CLOSE_TIPS.includes(tip) ? [tip] : platformTips[scope];\n\n  for (let i = 0; i < tips.length; i++) {\n    const t = tips[i];\n\n    if (!KEEP_ACTIVE_AFTER_GLOBAL_CLOSE.includes(t) || t === tip) {\n      markTipFinished(t);\n    }\n  }\n};\n\nexport const resetTips = () => {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n  localStorageCache = null;\n  window.APP.store.resetTipActivityFlags();\n  window.APP.store.resetConfirmedBroadcastedRooms();\n  finishedScopes = {};\n};\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  spawn_menu: function(userinput, scene, mediaCounter) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    if (mediaCounter.count() === 0) return VALID;\n    return FINISH;\n  },\n  freeze_gesture: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (\n      scene.is(\"frozen\") &&\n      (userinput.activeSets.includes(sets.rightCursorHoveringOnInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoveringOnInteractable))\n    )\n      return FINISH;\n    return scene.is(\"frozen\") ? INVALID : VALID;\n  },\n  menu_hover: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (\n      scene.is(\"frozen\") &&\n      (userinput.activeSets.includes(sets.rightCursorHoveringOnInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoveringOnInteractable))\n    )\n      return FINISH;\n    return VALID;\n  },\n  invite: function(userinput, scene) {\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  },\n  object_grab: function(userinput, scene, mediaCounter) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return FINISH;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return FINISH;\n    return VALID;\n  },\n  object_rotate_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRotated) return FINISH;\n    return VALID;\n  },\n  object_scale_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasScaled) return FINISH;\n    return VALID;\n  },\n  object_recenter_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRecentered) return FINISH;\n    return VALID;\n  },\n  object_pin: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasPinned) return FINISH;\n    return VALID;\n  },\n  object_zoom: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingInteractable)\n      )\n    )\n      return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.get(paths.actions.cursor.right.modDelta)) return FINISH;\n    if (userinput.get(paths.actions.cursor.left.modDelta)) return FINISH;\n    return VALID;\n  },\n  object_scale: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingInteractable)\n      )\n    )\n      return INVALID;\n    if (\n      userinput.get(paths.actions.cursor.right.scaleGrabbedGrabbable) ||\n      userinput.get(paths.actions.cursor.left.scaleGrabbedGrabbable)\n    )\n      return FINISH;\n    return VALID;\n  },\n  pen_color: function(userinput) {\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingPen)\n      )\n    )\n      return INVALID;\n    if (\n      userinput.get(paths.actions.cursor.right.penNextColor) ||\n      userinput.get(paths.actions.cursor.right.penPrevColor)\n    ) {\n      return FINISH;\n    }\n    if (\n      userinput.get(paths.actions.cursor.left.penNextColor) ||\n      userinput.get(paths.actions.cursor.left.penPrevColor)\n    ) {\n      return FINISH;\n    }\n    return VALID;\n  },\n  pen_size: function(userinput) {\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingPen)\n      )\n    )\n      return INVALID;\n    if (userinput.get(paths.actions.cursor.right.scalePenTip) || userinput.get(paths.actions.cursor.left.scalePenTip))\n      return FINISH;\n    return VALID;\n  },\n  pen_mode: function(userinput) {\n    if (\n      !userinput.activeSets.includes(sets.rightCursorHoldingPen) &&\n      !userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    return VALID;\n  },\n  freeze_mode: function(userinput, scene) {\n    return scene.is(\"frozen\") ? VALID : INVALID;\n  },\n  video_share_mode: function(userinput, scene) {\n    return scene.is(\"sharing_video\") ? VALID : INVALID;\n  },\n  mute_mode: function(userinput, scene) {\n    return scene.is(\"muted\") ? VALID : INVALID;\n  },\n  feedback: function(/*userinput, scene, mediaCounter, store*/) {\n    /*if (configs.feature(\"show_feedback_ui\") && store && store.state.activity.entryCount >= NUM_ENTRIES_FOR_FEEDBACK_TIP)\n      return VALID;*/\n    return INVALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTips = {};\n    this._finishedScopes = {};\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    if (!this._mediaCounter) {\n      this._mediaCounter =\n        document.querySelector(\"#media-counter\") &&\n        document.querySelector(\"#media-counter\").components[\"networked-counter\"];\n\n      if (!this._mediaCounter) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTop = this.activeTips.top;\n    const prevBottom = this.activeTips.bottom;\n\n    this._performStep(tips.top, \"top\");\n    this._performStep(tips.bottom, \"bottom\");\n\n    if (prevTop !== this.activeTips.top || prevBottom !== this.activeTips.bottom) {\n      this.el.emit(\"tips_changed\", this.activeTips);\n    }\n  },\n\n  _performStep: function(tips, scope) {\n    if (finishedScopes[scope]) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n      if (isTipFinished(tip)) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, this._mediaCounter, window.APP.store)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTips[scope] = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed for this scope, no need to re-walk.\n      finishedScopes[scope] = true;\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/tip.scss\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { handleTipClose } from \"../systems/tips.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class Tip extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    tip: PropTypes.string,\n    tipRegion: PropTypes.string,\n    broadcastTarget: PropTypes.string,\n    pushHistoryState: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { tip, tipRegion, broadcastTarget, pushHistoryState } = this.props;\n    const rootStyles = [styles.tipRoot];\n    let tipBody;\n\n    if ([\".spawn_menu\", \"_button\"].find(x => tip.endsWith(x))) {\n      rootStyles.push(styles.tourTipRoot);\n      tipBody = (\n        <div className={styles.splitTip}>\n          <FormattedMessage id={`tips.${tip}-pre`} />\n          <div\n            className={classNames({\n              [styles.splitTipIcon]: true,\n              [styles[tip.split(\".\")[1] + \"-icon\"]]: true\n            })}\n          />\n          <FormattedMessage id={`tips.${tip}-post`} />\n        </div>\n      );\n    } else if (tip === \"discord\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <span>{`Chat in this room is being bridged to ${broadcastTarget} on Discord.`}</span>\n        </div>\n      );\n    } else if (tip === \"embed\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id=\"embed.presence-warning\" />\n        </div>\n      );\n    } else if (tip.endsWith(\".feedback\")) {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n          &nbsp;\n          <button\n            className={styles.tipLink}\n            onClick={() => {\n              handleTipClose(tip, tipRegion);\n              pushHistoryState(\"modal\", \"feedback\");\n            }}\n          >\n            <FormattedMessage id={`tips.${tip}-link`} />\n          </button>\n        </div>\n      );\n    } else {\n      rootStyles.push(styles.tourTipRoot);\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classNames(rootStyles)}>\n        <button\n          className={styles.tipCancel}\n          onClick={() => (this.props.onClose ? this.props.onClose(tip, tipRegion) : handleTipClose(tip, tipRegion))}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </button>\n        {tipBody}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport { messages } from \"../utils/i18n\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support screen sharing.\n            <br />\n            To share your screen in ${messages[\"app-name\"]}, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            You can try&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              testing WebRTC screen sharing\n            </a>&nbsp;in your browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebAssemblyUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"WebAssembly Unsupported\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebAssembly.\n            <br />\n            Please update or switch to a newer browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/feedback-dialog.scss\";\n\nexport default class FeedbackDialog extends Component {\n  render() {\n    return (\n      <DialogContainer wide={true} title=\"\" {...this.props}>\n        <iframe\n          className={styles.formFrame}\n          src=\"https://docs.google.com/forms/d/e/1FAIpQLSe1C-7hCA1XMT8IL8XBnjlxMAU1JXrwAW8YkbmbBJ4B3pDSsw/viewform?embedded=true\"\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n        >\n          Loading...\n        </iframe>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/help-dialog.scss\";\nimport configs from \"../utils/configs\";\nimport { resetTips } from \"../systems/tips\";\n\nexport default class HelpDialog extends Component {\n  static propTypes = {\n    onClose: PropTypes.func\n  };\n  render() {\n    return (\n      <DialogContainer title=\"Help\" {...this.props}>\n        <div className={styles.helpDialog}>\n          <div>To get started, you can take a tour.</div>\n          <div>\n            Or, you can{\" \"}\n            <a href={configs.link(\"docs\", \"https://hubs.mozilla.com/docs\")} rel=\"noreferrer noopener\" target=\"_blank\">\n              browse the documentation\n            </a>.\n          </div>\n          <button\n            className={styles.tourButton}\n            onClick={e => {\n              e.preventDefault();\n              resetTips();\n              this.props.onClose();\n            }}\n          >\n            Start Tour\n          </button>\n          <a\n            className={styles.docsLink}\n            href={configs.link(\"docs\", \"https://hubs.mozilla.com/docs\")}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            Browse Documentation\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/leave-room-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nexport default class LeaveRoomDialog extends Component {\n  static propTypes = {\n    messageType: PropTypes.string,\n    destinationUrl: PropTypes.string\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Leave Room\" {...this.props}>\n        <div className={styles.leaveRoom}>\n          <div>\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.message`} />\n          </div>\n          <a href={this.props.destinationUrl} rel=\"noopener noreferrer\">\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.confirm`} />\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","export const SORT_ORDER_VIDEO = 0;\nexport const SORT_ORDER_AUDIO = 1;\nexport const SORT_ORDER_IMAGE = 2;\nexport const SORT_ORDER_PDF = 3;\nexport const SORT_ORDER_MODEL = 4;\nexport const SORT_ORDER_UNIDENTIFIED = 5;\n\nexport function mediaSortOrder(el) {\n  if (el.components[\"media-video\"] && el.components[\"media-video\"].data.contentType.startsWith(\"audio/\")) {\n    return SORT_ORDER_AUDIO;\n  }\n  if (el.components[\"media-video\"]) return SORT_ORDER_VIDEO;\n  if (el.components[\"media-image\"]) return SORT_ORDER_IMAGE;\n  if (el.components[\"media-pdf\"]) return SORT_ORDER_PDF;\n  if (el.components[\"gltf-model-plus\"]) return SORT_ORDER_MODEL;\n  return SORT_ORDER_UNIDENTIFIED;\n}\n\nexport function mediaSort(el1, el2) {\n  return mediaSortOrder(el1) - mediaSortOrder(el2);\n}\n","import React, { Component } from \"react\";\nimport { rotateInPlaceAroundWorldUp, affixToWorldUp } from \"../utils/three-utils\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons/faChevronLeft\";\nimport { faChevronRight } from \"@fortawesome/free-solid-svg-icons/faChevronRight\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport { mediaSort } from \"../utils/media-sorting.js\";\n\nexport default class ObjectInfoDialog extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    el: PropTypes.object,\n    pinned: PropTypes.bool,\n    src: PropTypes.string,\n    onClose: PropTypes.func,\n    onPinChanged: PropTypes.func,\n    onNavigated: PropTypes.func,\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    enableLights: false,\n    mediaEntities: []\n  };\n\n  componentDidMount() {\n    this.updateMediaEntities = this.updateMediaEntities.bind(this);\n    this.navigateNext = this.navigateNext.bind(this);\n    this.navigatePrev = this.navigatePrev.bind(this);\n    this.navigate = this.navigate.bind(this);\n    this.viewingCamera = document.getElementById(\"viewing-camera\");\n    this.pin = this.pin.bind(this);\n    this.unpin = this.unpin.bind(this);\n    this.props.scene.addEventListener(\"uninspect\", this.props.onClose);\n    const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n    this.setState({ enableLights: cameraSystem.enableLights });\n    this.updateMediaEntities();\n    this.props.scene.addEventListener(\"listed_media_changed\", () => this.updateMediaEntities());\n  }\n\n  updateMediaEntities() {\n    const mediaEntities = [...this.props.scene.systems[\"listed-media\"].els];\n    mediaEntities.sort(mediaSort);\n    this.setState({ mediaEntities });\n  }\n\n  pin() {\n    if (!NAF.utils.isMine(this.props.el) && !NAF.utils.takeOwnership(this.props.el)) return;\n    this.props.el.setAttribute(\"pinnable\", \"pinned\", true);\n    this.props.el.emit(\"pinned\", { el: this.props.el });\n    this.props.onPinChanged && this.props.onPinChanged();\n  }\n\n  unpin() {\n    if (!NAF.utils.isMine(this.props.el) && !NAF.utils.takeOwnership(this.props.el)) return;\n    this.props.el.setAttribute(\"pinnable\", \"pinned\", false);\n    this.props.el.emit(\"unpinned\", { el: this.props.el });\n    this.props.onPinChanged && this.props.onPinChanged();\n  }\n\n  toggleLights() {\n    const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n    cameraSystem.enableLights = !cameraSystem.enableLights;\n    localStorage.setItem(\"show-background-while-inspecting\", cameraSystem.enableLights.toString());\n    this.setState({ enableLights: cameraSystem.enableLights });\n    if (cameraSystem.enableLights) {\n      cameraSystem.showEverythingAsNormal();\n    } else {\n      cameraSystem.hideEverythingButThisObject(this.props.el.object3D);\n    }\n  }\n\n  enqueueWaypointTravel = (function() {\n    const targetMatrix = new THREE.Matrix4();\n    const translation = new THREE.Matrix4();\n    return function enqueueWaypointTravel() {\n      this.viewingCamera.object3D.updateMatrices();\n      targetMatrix.copy(this.viewingCamera.object3D.matrixWorld);\n      affixToWorldUp(targetMatrix, targetMatrix);\n      translation.makeTranslation(0, -1.6, 0.15);\n      targetMatrix.multiply(translation);\n      rotateInPlaceAroundWorldUp(targetMatrix, Math.PI, targetMatrix);\n\n      this.props.scene.systems[\"hubs-systems\"].characterController.enqueueWaypointTravelTo(targetMatrix, true, {\n        willDisableMotion: false,\n        willDisableTeleporting: false,\n        snapToNavMesh: false,\n        willMaintainInitialOrientation: false\n      });\n      this.props.onClose();\n    };\n  })().bind(this);\n\n  navigateNext() {\n    this.navigate(1);\n  }\n\n  navigatePrev() {\n    this.navigate(-1);\n  }\n\n  navigate(direction) {\n    const { mediaEntities } = this.state;\n    let targetIndex = (mediaEntities.indexOf(this.props.el) + direction) % mediaEntities.length;\n    targetIndex = targetIndex === -1 ? mediaEntities.length - 1 : targetIndex;\n    this.props.onNavigated && this.props.onNavigated(mediaEntities[targetIndex]);\n  }\n\n  remove() {\n    if (this._isRemoving) return;\n    this._isRemoving = true;\n\n    const targetEl = this.props.el;\n\n    if (!NAF.utils.isMine(targetEl) && !NAF.utils.takeOwnership(targetEl)) return;\n\n    targetEl.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    targetEl.addEventListener(\"animationcomplete\", () => {\n      const exitAfterRemove = this.state.mediaEntities.length <= 1;\n      this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n      NAF.utils.takeOwnership(targetEl);\n      targetEl.parentNode.removeChild(targetEl);\n\n      if (exitAfterRemove) {\n        this.props.onClose();\n      } else {\n        this.navigateNext();\n      }\n\n      this._isRemoving = false;\n    });\n  }\n\n  render() {\n    const { pinned, onClose } = this.props;\n    const isStatic = this.props.el.components.tags && this.props.el.components.tags.data.isStatic;\n\n    return (\n      <DialogContainer noOverlay={true} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.titleAndClose}>\n            <button autoFocus className={entryStyles.collapseButton} onClick={onClose}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n            <a className={styles.objectDisplayString} href={this.props.src} target=\"_blank\" rel=\"noopener noreferrer\">\n              <FormattedMessage id={`object-info.open-link`} />\n            </a>\n          </div>\n          <div className={styles.actionButtonSections}>\n            <div className={styles.leftActionButtons}>\n              {this.state.mediaEntities.length > 1 && (\n                <button className={styles.navigationButton} onClick={this.navigatePrev}>\n                  <i>\n                    <FontAwesomeIcon icon={faChevronLeft} />\n                  </i>\n                </button>\n              )}\n            </div>\n            <div className={styles.primaryActionButtons}>\n              <button onClick={this.toggleLights.bind(this)}>\n                <FormattedMessage id={`object-info.${this.state.enableLights ? \"lower\" : \"raise\"}-lights`} />\n              </button>\n              {this.props.scene.is(\"entered\") && (\n                <button onClick={this.enqueueWaypointTravel}>\n                  <FormattedMessage id=\"object-info.waypoint\" />\n                </button>\n              )}\n              {this.props.scene.is(\"entered\") &&\n              !pinned &&\n              !isStatic &&\n              this.props.hubChannel &&\n              this.props.hubChannel.can(\"spawn_and_move_media\") ? (\n                <button onClick={this.remove.bind(this)}>\n                  <FormattedMessage id=\"object-info.remove-button\" />\n                </button>\n              ) : (\n                <div className={styles.actionButtonPlaceholder} />\n              )}\n              {this.props.scene.is(\"entered\") &&\n                !isStatic &&\n                this.props.hubChannel &&\n                this.props.hubChannel.can(\"pin_objects\") && (\n                  <button className={pinned ? \"\" : styles.primaryActionButton} onClick={pinned ? this.unpin : this.pin}>\n                    <FormattedMessage id={`object-info.${pinned ? \"unpin-button\" : \"pin-button\"}`} />\n                  </button>\n                )}\n              <a className={styles.cancelText} href=\"#\" onClick={onClose}>\n                <FormattedMessage id=\"client-info.cancel\" />\n              </a>\n            </div>\n            <div className={styles.rightActionButtons}>\n              {this.state.mediaEntities.length > 1 && (\n                <button className={styles.navigationButton} onClick={this.navigateNext}>\n                  <i>\n                    <FontAwesomeIcon icon={faChevronRight} />\n                  </i>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/oauth-dialog.scss\";\n\nexport default class OAuthDialog extends Component {\n  static propTypes = {\n    oauthInfo: PropTypes.array\n  };\n  renderSignInDisclaimer(type) {\n    return (\n      <div>\n        <div>\n          You&apos;ll need to sign in to <span className={styles.oauthTypeName}>{type}</span> to access this room.\n        </div>\n        <br />\n        <div>We&apos;ll ask for access to your e-mail address so you can skip signing in next time.</div>\n        <p className={styles.privacyNotice}>\n          By proceeding, you agree to the{\" \"}\n          <IfFeature name=\"show_terms\">\n            <a\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n            >\n              terms of use\n            </a>{\" \"}\n          </IfFeature>\n          {configs.feature(\"show_terms\") && configs.feature(\"show_privacy\") && \"and \"}\n          <IfFeature name=\"show_privacy\">\n            <a\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n            >\n              privacy notice\n            </a>\n          </IfFeature>.\n        </p>\n      </div>\n    );\n  }\n\n  renderTweetDisclaimer() {\n    return (\n      <div className={styles.twitterMessage}>\n        <FormattedMessage id=\"oauth-dialog.message.twitter\" />\n      </div>\n    );\n  }\n\n  render() {\n    const info = this.props.oauthInfo && this.props.oauthInfo[0];\n    const closable = info && info.type === \"twitter\"; // NOTE: for now, allow closing dialog if doing Twitter sign in (currently just for sharing)\n\n    return (\n      <DialogContainer title=\"\" closable={closable} {...this.props}>\n        <div>\n          {info && (info.type === \"twitter\" ? this.renderTweetDisclaimer() : this.renderSignInDisclaimer(info.type))}\n          <div className=\"invite-form\">\n            <div className={`invite-form__buttons ${styles.oauthButtons}`}>\n              {info ? (\n                <a\n                  href={info.url}\n                  key={info.type}\n                  className={classNames({\n                    [styles.oauthButton]: true,\n                    [styles.oauthTwitterButton]: info.type === \"twitter\",\n                    [styles.oauthDiscordButton]: info.type === \"discord\"\n                  })}\n                >\n                  <FormattedMessage id={`oauth-dialog.sign-in.${info.type}`} />\n                </a>\n              ) : (\n                <div className=\"loader-wrap loader-mid\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/tweet-dialog.scss\";\nimport Editor, { createEditorStateWithText } from \"draft-js-plugins-editor\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\nimport createHashtagPlugin from \"draft-js-hashtag-plugin\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport createCounterPlugin from \"draft-js-counter-plugin\";\nimport classNames from \"classnames\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { Modifier, EditorState } from \"draft-js\";\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\nimport \"draft-js-hashtag-plugin/lib/plugin.css\";\nimport \"draft-js-linkify-plugin/lib/plugin.css\";\nimport \"draft-js-counter-plugin/lib/plugin.css\";\n\nconst emojiPlugin = createEmojiPlugin();\nconst hashtagPlugin = createHashtagPlugin();\nconst linkifyPlugin = createLinkifyPlugin();\nconst counterPlugin = createCounterPlugin();\n\n// Taken from draft-js-emoji\nconst addEmoji = (emoji, editorState) => {\n  const contentState = editorState.getCurrentContent();\n  const contentStateWithEntity = contentState.createEntity(\"emoji\", \"IMMUTABLE\", { emojiUnicode: emoji });\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const currentSelectionState = editorState.getSelection();\n\n  let emojiAddedContent;\n  let emojiEndPos = 0;\n  let blockSize = 0;\n\n  // in case text is selected it is removed and then the emoji is added\n  const afterRemovalContentState = Modifier.removeRange(contentState, currentSelectionState, \"backward\");\n\n  // deciding on the position to insert emoji\n  const targetSelection = afterRemovalContentState.getSelectionAfter();\n\n  emojiAddedContent = Modifier.insertText(afterRemovalContentState, targetSelection, emoji, null, entityKey);\n\n  emojiEndPos = targetSelection.getAnchorOffset();\n  const blockKey = targetSelection.getAnchorKey();\n  blockSize = contentState.getBlockForKey(blockKey).getLength();\n\n  // If the emoji is inserted at the end, a space is appended right after for\n  // a smooth writing experience.\n  if (emojiEndPos === blockSize) {\n    emojiAddedContent = Modifier.insertText(emojiAddedContent, emojiAddedContent.getSelectionAfter(), \" \");\n  }\n\n  const newEditorState = EditorState.push(editorState, emojiAddedContent, \"insert-emoji\");\n  return EditorState.forceSelection(newEditorState, emojiAddedContent.getSelectionAfter());\n};\n\nexport default class TweetDialog extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      editorState: createEditorStateWithText(props.history.location.state.detail.text || \"\"),\n      suggestions: []\n    };\n  }\n\n  componentDidMount() {\n    // Calling this immediately seems to break editor initialization\n    setTimeout(() => {\n      this.editorRef.focus();\n\n      // Other attempts at doing this resulted in no visible cursor or weird editor behavior:\n      this.setState({ editorState: addEmoji(\"\", this.state.editorState) });\n    });\n  }\n\n  async sendTweet() {\n    // For now assume url is a stored file media url\n    const media_stored_file_url = this.props.history.location.state.detail.url;\n    const body = this.state.editorState.getCurrentContent().getPlainText();\n\n    const payload = { media_stored_file_url, body };\n    this.setState({ posting: true });\n    await fetchReticulumAuthenticated(\"/api/v1/twitter/tweets\", \"POST\", payload);\n    this.setState({ posting: false, posted: true });\n  }\n\n  renderPostedDialog() {\n    return (\n      <DialogContainer wide={true} allowOverflow={true} closable={false} title=\"\" {...this.props}>\n        <div className={styles.posted}>\n          <div className={styles.message}>\n            <FormattedMessage id=\"tweet-dialog.posted\" />\n          </div>\n\n          <div className={styles.buttons}>\n            <button className={styles.tweetButton} onClick={() => this.props.onClose()}>\n              <FormattedMessage id=\"tweet-dialog.close\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  renderTweetDialog() {\n    const { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n    const { CharCounter } = counterPlugin;\n    const { url, contentSubtype } = this.props.history.location.state.detail;\n\n    return (\n      <DialogContainer\n        wide={true}\n        allowOverflow={true}\n        title=\"\"\n        additionalClass={styles.dialogBackground}\n        {...this.props}\n      >\n        <div className={styles.tweet}>\n          <div className={styles.editor} onClick={() => this.editorRef.focus()}>\n            <div className={styles.editorInner}>\n              <Editor\n                ref={r => (this.editorRef = r)}\n                editorState={this.state.editorState}\n                onChange={editorState => this.setState({ editorState })}\n                plugins={[emojiPlugin, hashtagPlugin, linkifyPlugin, counterPlugin]}\n              />\n            </div>\n\n            <div className={styles.emojiButton}>\n              <EmojiSelect />\n            </div>\n\n            <div className={styles.emojiSuggestions}>\n              <EmojiSuggestions />\n            </div>\n\n            {this.state.editorState.getCurrentContent().getPlainText().length > 200 && (\n              <div className={styles.counter}>\n                <CharCounter editorState={this.state.editorState} limit={280} /> / 280\n              </div>\n            )}\n\n            <div className={styles.media}>\n              {contentSubtype && contentSubtype.startsWith(\"video\") ? (\n                <video src={url} width={450} height={255} controls />\n              ) : (\n                <img src={scaledThumbnailUrlFor(url, 450, 255)} />\n              )}\n            </div>\n          </div>\n\n          {!this.state.posting ? (\n            <div className={styles.buttons}>\n              <button\n                className={styles.tweetButton}\n                onClick={() => this.sendTweet()}\n                disabled={this.state.editorState.getCurrentContent().getPlainText().length > 280}\n              >\n                <FormattedMessage id=\"tweet-dialog.tweet\" />\n              </button>\n            </div>\n          ) : (\n            <div className={classNames([\"loader-wrap\", \"loader-mid\", styles.tweetLoader])}>\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  render() {\n    if (this.state.posted) {\n      return this.renderPostedDialog();\n    } else {\n      return this.renderTweetDialog();\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport sendMessageIcon from \"../assets/images/send_message.svgi\";\nimport { InlineSVGButton } from \"./svgi\";\n\nclass LobbyChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    occupantCount: PropTypes.number,\n    onSendMessage: PropTypes.func\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const occupantSnippet = `${this.props.occupantCount - 1} other${this.props.occupantCount > 2 ? \"s\" : \"\"}`;\n    const messageEntryPlaceholder =\n      this.props.occupantCount <= 1\n        ? \"Nobody is here yet...\"\n        : this.props.discordBridges.length\n          ? `Send message to ${occupantSnippet} and ${discordSnippet}...`\n          : `Send message to ${occupantSnippet}...`;\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({\n            [styles.messageEntry]: true,\n            [styles.messageEntryDisabled]: this.props.occupantCount <= 1\n          })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          <textarea\n            className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            style={{ height: pendingMessageTextareaHeight }}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ pendingMessage: e.target.value })}\n            disabled={this.props.occupantCount <= 1 ? true : false}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={messageEntryPlaceholder}\n          />\n          <WithHoverSound>\n            <InlineSVGButton\n              className={classNames([styles.messageEntryButton, styles.messageEntrySubmit])}\n              disabled={this.props.occupantCount <= 1 ? true : false}\n              type=\"submit\"\n              src={sendMessageIcon}\n            />\n          </WithHoverSound>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default LobbyChatBox;\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// this component is currently just being used for its componentDidMount\n// TODO migrate render from ui-root.js renderEntryStartPanel()\nexport default class EntryStartPanel extends Component {\n  static propTypes = {\n    entering: PropTypes.bool,\n    onEnteringCanceled: PropTypes.func\n  };\n\n  componentDidMount() {\n    if (this.props.entering) {\n      this.props.onEnteringCanceled();\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string,\n    onTop: PropTypes.bool\n  };\n\n  render() {\n    const commands = [\n      \"leave\",\n      \"grow\",\n      \"shrink\",\n      \"duck\",\n      \"debug\",\n      \"vrstats\",\n      \"scene <scene url>\",\n      \"rename <new name>\",\n      \"audiomode\",\n      \"monitoring\"\n    ];\n\n    if (window.APP.hubChannel && window.APP.hubChannel.can(\"fly\")) {\n      commands.push(\"fly\");\n    }\n\n    if (qsTruthy(\"video_capture\")) {\n      commands.push(\"capture [stop]\");\n    }\n\n    return (\n      <div className={classNames({ [styles.commandHelp]: true, [styles.commandHelpOnTop]: this.props.onTop })}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" ||\n              c.split(\" \")[0].startsWith(this.props.matchingPrefix.split(\" \")[0])) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c.split(\" \")[0]}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import configs from \"../utils/configs\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport maskEmail from \"../utils/mask-email\";\nimport StateLink from \"./state-link.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faDesktop } from \"@fortawesome/free-solid-svg-icons/faDesktop\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport discordIcon from \"../assets/images/discord.svgi\";\nimport hmdIcon from \"../assets/images/hmd-icon.svgi\";\nimport { faMobileAlt } from \"@fortawesome/free-solid-svg-icons/faMobileAlt\";\nimport { pushHistoryPath, withSlug } from \"../utils/history\";\nimport { hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { InlineSVG } from \"./svgi\";\n\nfunction getPresenceIcon(ctx) {\n  if (ctx && ctx.hmd) {\n    return <InlineSVG src={hmdIcon} />;\n  } else if (ctx && ctx.mobile) {\n    return <FontAwesomeIcon icon={faMobileAlt} />;\n  } else if (ctx && ctx.discord) {\n    return <InlineSVG src={discordIcon} />;\n  } else {\n    return <FontAwesomeIcon icon={faDesktop} />;\n  }\n}\n\nexport function navigateToClientInfo(history, clientId) {\n  const currentParams = new URLSearchParams(history.location.search);\n\n  if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n    currentParams.set(\"client_id\", clientId);\n    pushHistoryPath(history, history.location.pathname, currentParams.toString());\n  } else {\n    pushHistoryPath(history, withSlug(history.location, `/clients/${clientId}`), currentParams.toString());\n  }\n}\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func,\n    expanded: PropTypes.bool,\n    onExpand: PropTypes.func\n  };\n\n  navigateToClientInfo = clientId => {\n    navigateToClientInfo(this.props.history, clientId);\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[data.metas.length - 1];\n    const context = meta.context;\n    const profile = meta.profile;\n    const recording = meta.streaming || meta.recording;\n    const icon = recording ? <FontAwesomeIcon icon={faVideo} /> : getPresenceIcon(context);\n    const isBot = context && context.discord;\n    const isEntering = context && context.entering;\n    const isOwner = meta.roles && meta.roles.owner;\n    const messageId = isEntering ? \"presence.entering\" : `presence.in_${meta.presence}`;\n    const badge = isOwner && (\n      <span className={styles.moderatorBadge} title=\"Moderator\">\n        &#x2605;\n      </span>\n    );\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <i>{icon}</i>\n          </div>\n          <div\n            className={classNames({\n              [styles.listItem]: true\n            })}\n          >\n            {sessionId === this.props.sessionId ? (\n              <StateLink className={styles.self} stateKey=\"overlay\" stateValue=\"profile\" history={this.props.history}>\n                {profile && profile.displayName}\n                {badge}\n                <i>\n                  <FontAwesomeIcon icon={faPencilAlt} />\n                </i>\n              </StateLink>\n            ) : (\n              <div>\n                {!isBot ? (\n                  <button className={styles.clientLink} onClick={() => this.navigateToClientInfo(sessionId)}>\n                    {profile && profile.displayName}\n                  </button>\n                ) : (\n                  <span>{profile && profile.displayName}</span>\n                )}\n                {badge}\n              </div>\n            )}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={messageId} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\n      \"mouseup\",\n      () => {\n        this.props.onExpand(false);\n      },\n      { once: true }\n    );\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const occupantCount = this.props.presences ? Object.entries(this.props.presences).length : 0;\n    return (\n      <div>\n        <div\n          title={\"Members\"}\n          onClick={() => {\n            this.props.onExpand(!this.props.expanded);\n          }}\n          className={classNames({\n            [rootStyles.presenceInfo]: true,\n            [rootStyles.presenceInfoSelected]: this.props.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faUsers} />\n          <span className={rootStyles.occupantCount}>{occupantCount}</span>\n        </div>\n        {this.props.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\nimport { navigateToClientInfo } from \"./presence-list\";\nimport { coerceToUrl } from \"../utils/media-utils\";\n\nconst messageCanvas = document.createElement(\"canvas\");\n\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst textureLoader = new THREE.TextureLoader();\n\nconst CHAT_MESSAGE_TEXTURE_SIZE = 1024;\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from, fromSessionId, includeFromLink, history) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n  const includeClientLink = includeFromLink && fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => navigateToClientInfo(history, fromSessionId) : () => {};\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      const width = el.offsetWidth;\n      const height = el.offsetHeight;\n      const ratio = height / width;\n      const scale = (CHAT_MESSAGE_TEXTURE_SIZE * Math.min(1.0, 1.0 / ratio)) / el.offsetWidth;\n      messageCanvas.width = width * scale;\n      messageCanvas.height = height * scale;\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}px\" height=\"${messageCanvas.height}px\">\n            <foreignObject width=\"100%\" height=\"100%\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = () => {\n        context.drawImage(img, 0, 0);\n        ReactDOM.unmountComponentAtNode(el);\n        el.remove();\n        img.onload = null;\n        img.src = \"\";\n        messageCanvas.toBlob(blob => resolve([blob, width, height]));\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const [blob, width, height] = await renderChatMessage(body, name, false);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"class\", \"ui\");\n  entity.setAttribute(\"is-remote-hover-target\", {});\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#avatar-pov-node\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 400;\n    meshEntity.object3DMap.mesh.scale.set(width / scaleFactor, height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  try {\n    const url = new URL(coerceToUrl(body));\n    if (url.host) {\n      document.querySelector(\"a-scene\").emit(\"add_media\", body);\n      return;\n    }\n  } catch (e) {\n    // Ignore parse error\n  }\n\n  // If not a URL, spawn as a text bubble\n\n  const [blob] = await renderChatMessage(body, from, true);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name, props.sessionId, props.includeFromLink, props.history)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  history: PropTypes.object,\n  className: PropTypes.string,\n  includeFromLink: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport sendMessageIcon from \"../assets/images/send_message.svgi\";\nimport spawnMessageIcon from \"../assets/images/spawn_message.svgi\";\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons/faCamera\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { pushHistoryState } from \"../utils/history\";\nimport { InlineSVGButton } from \"./svgi\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nclass InWorldChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    onSendMessage: PropTypes.func,\n    onObjectCreated: PropTypes.func,\n    history: PropTypes.object,\n    enableSpawning: PropTypes.bool\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({ [styles.messageEntryInRoom]: true, [styles.messageEntryOnMobile]: isMobile })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          {this.state.pendingMessage.startsWith(\"/\") && (\n            <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n          )}\n          <input\n            id=\"message-entry-media-input\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            accept={isMobile ? \"image/*\" : \"*\"}\n            multiple\n            onChange={e => {\n              if (this.props.onObjectCreated) {\n                for (const file of e.target.files) {\n                  this.props.onObjectCreated(file);\n                }\n              }\n            }}\n          />\n          {this.props.enableSpawning && (\n            <label\n              htmlFor=\"message-entry-media-input\"\n              title={\"Upload\"}\n              className={classNames([\n                styles.messageEntryButton,\n                styles.messageEntryButtonInRoom,\n                styles.messageEntryUpload\n              ])}\n            >\n              <i>\n                <FontAwesomeIcon icon={isMobile ? faCamera : faPlus} />\n              </i>\n            </label>\n          )}\n          <textarea\n            style={{ height: pendingMessageTextareaHeight }}\n            className={classNames([\n              styles.messageEntryInput,\n              styles.messageEntryInputInRoom,\n              \"chat-focus-target\",\n              !this.props.enableSpawning && styles.messageEntryInputNoSpawn\n            ])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            onFocus={e => {\n              handleTextFieldFocus(e.target);\n            }}\n            onBlur={() => {\n              handleTextFieldBlur();\n            }}\n            onChange={e => {\n              e.stopPropagation();\n              this.setState({ pendingMessage: e.target.value });\n            }}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.ctrlKey && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Enter\" && e.ctrlKey) {\n                spawnChatMessage(e.target.value);\n                this.setState({ pendingMessage: \"\" });\n                e.target.blur();\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={this.props.discordBridges.length ? `Send to room and ${discordSnippet}...` : \"Send to room...\"}\n          />\n          {this.props.enableSpawning && (\n            <InlineSVGButton\n              title={\"Create\"}\n              className={classNames([styles.messageEntrySpawn])}\n              src={spawnMessageIcon}\n              onClick={() => {\n                if (this.state.pendingMessage.length > 0) {\n                  spawnChatMessage(this.state.pendingMessage);\n                  this.setState({ pendingMessage: \"\" });\n                } else {\n                  pushHistoryState(this.props.history, \"modal\", \"create\");\n                }\n              }}\n            />\n          )}\n          <InlineSVGButton\n            type=\"submit\"\n            title={\"Submit\"}\n            className={classNames([\n              styles.messageEntryButton,\n              styles.messageEntryButtonInRoom,\n              styles.messageEntrySubmit\n            ])}\n            src={sendMessageIcon}\n          />\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default InWorldChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { messages } from \"../utils/i18n\";\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport { ensureAvatarMaterial } from \"../utils/avatar-utils\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nconst defaultEditors = [\n  {\n    name: \"Quilt\",\n    url: \"https://tryquilt.io/?gltf=$AVATAR_GLTF\"\n  }\n];\nconst useEditorWhitelist = true;\nconst editorWhitelist = [\n  ...defaultEditors,\n  {\n    name: \"Skindex Editor\",\n    url: \"https://www.minecraftskins.com/skin-editor\"\n  },\n  {\n    name: \"MinecraftSkins.net Editor\",\n    url: \"https://www.minecraftskins.net/skineditor\"\n  }\n];\n\nconst fetchAvatar = async avatarId => {\n  const { avatars } = await fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`);\n  return avatars[0];\n};\n\nexport default class AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    signedIn: PropTypes.bool,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  state = {\n    baseAvatarResults: [],\n    editorLinks: defaultEditors,\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { entries } = await fetchReticulumAuthenticated(`/api/v1/media/search?filter=base&source=avatar_listings`);\n      const baseAvatarResults = entries.map(e => ({ id: e.id, name: e.name, gltfs: e.gltfs, images: e.images }));\n      if (baseAvatarResults.length) {\n        const randomAvatarResult = baseAvatarResults[Math.floor(Math.random() * baseAvatarResults.length)];\n        this.setState({\n          baseAvatarResults,\n          avatar: {\n            name: \"My Avatar\",\n            files: {},\n            base_gltf_url: randomAvatarResult.gltfs.base,\n            parent_avatar_listing_id: randomAvatarResult.id\n          },\n          previewGltfUrl: randomAvatarResult.gltfs.avatar\n        });\n      } else {\n        this.setState({\n          avatar: {\n            name: \"My Avatar\",\n            files: {}\n          }\n        });\n      }\n    }\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader();\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n      const parser = await new Promise((resolve, reject) =>\n        gltfLoader.createParser(gltfUrl, resolve, onProgress, reject)\n      );\n      URL.revokeObjectURL(gltfUrl);\n\n      const { body } = parser.extensions.KHR_binary_glTF;\n      const content = JSON.stringify(ensureAvatarMaterial(parser.json));\n      // Inject hubs components on upload. Used to create base avatar\n      // const gltf = parser.json;\n      // Object.assign(gltf.scenes[0], {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"loop-animation\": {\n      //         clip: \"idle_eyes\"\n      //       }\n      //     }\n      //   }\n      // });\n      // Object.assign(gltf.nodes.find(n => n.name === \"Head\"), {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"scale-audio-feedback\": \"\"\n      //     }\n      //   }\n      // });\n      // content = JSON.stringify(gltf);\n\n      this.inputFiles.gltf = new File([content], \"file.gltf\", {\n        type: \"model/gltf\"\n      });\n      this.inputFiles.bin = new File([body], \"file.bin\", {\n        type: \"application/octet-stream\"\n      });\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.getWrappedInstance().snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className={classNames(\"file-input-row\", { disabled })} key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.previewGltfUrl);\n          const previewGltfUrl = URL.createObjectURL(this.inputFiles.glb);\n          this.setState({\n            previewGltfUrl,\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState(\n              {\n                avatar: {\n                  ...this.state.avatar,\n                  files: {\n                    ...this.state.avatar.files,\n                    [name]: null\n                  }\n                }\n              },\n              () => this.setState({ previewGltfUrl: this.getPreviewUrl() })\n            );\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">\n          {this.state.avatar.files[name] ? (\n            <img src={this.state.avatar.files[name]} />\n          ) : (\n            <FontAwesomeIcon icon={faCloudUploadAlt} />\n          )}\n        </div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div className=\"text-field-container\">\n      <label htmlFor={`#avatar-${name}`}>{placeholder}</label>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  // Return the gltf for the selected base avatar, the locally modified glb, or the avatar's base_gltf_url\n  getPreviewUrl = baseSid => {\n    if (baseSid) {\n      const avatarResult = this.state.baseAvatarResults.find(a => a.id === baseSid);\n      if (avatarResult) return avatarResult.gltfs.avatar;\n    }\n\n    return this.inputFiles.glb ? URL.createObjectURL(this.inputFiles.glb) : this.state.avatar.base_gltf_url;\n  };\n\n  selectListingField = (propName, placeholder) => (\n    <div className=\"select-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <select\n        id={`avatar-${propName}`}\n        value={this.state.avatar[propName] || \"\"}\n        onChange={async e => {\n          const sid = e.target.value;\n          this.setState({ avatar: { ...this.state.avatar, [propName]: sid }, previewGltfUrl: this.getPreviewUrl(sid) });\n        }}\n        placeholder={placeholder}\n        className=\"select\"\n      >\n        {this.state.baseAvatarResults.map(a => (\n          <option key={a.id} value={a.id}>\n            {a.name}\n          </option>\n        ))}\n        <option value=\"\">Custom GLB...</option>\n      </select>\n      <img\n        className=\"arrow\"\n        src=\"../assets/images/dropdown_arrow.png\"\n        srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n      />\n    </div>\n  );\n\n  selectListingGrid = (propName, placeholder) => (\n    <div className=\"select-grid-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <div className=\"select-grid\">\n        {this.state.baseAvatarResults.map(a => (\n          <div\n            onClick={() =>\n              this.setState({\n                avatar: { ...this.state.avatar, [propName]: a.id },\n                previewGltfUrl: this.getPreviewUrl(a.id)\n              })\n            }\n            key={a.id}\n            className={classNames(\"item\", { selected: a.id === this.state.avatar[propName] })}\n            style={{ paddingBottom: `${(a.images.preview.width / a.images.preview.height) * 100}%` }}\n          >\n            <img src={a.images.preview.url} />\n          </div>\n        ))}\n      </div>\n      <input\n        id=\"avatar-file_glb\"\n        type=\"file\"\n        accept=\"model/gltf+binary,.glb\"\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[\"glb\"] = file;\n          URL.revokeObjectURL(this.state.avatar.files[\"glb\"]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              [propName]: \"\",\n              files: {\n                ...this.state.avatar.files,\n                glb: URL.createObjectURL(file)\n              }\n            },\n            previewGltfUrl: this.getPreviewUrl(\"\")\n          });\n        }}\n      />\n      <label\n        htmlFor=\"avatar-file_glb\"\n        className={classNames(\"item\", \"custom\", { selected: \"\" === this.state.avatar[propName] })}\n      >\n        <FontAwesomeIcon icon={faCloudUploadAlt} />\n        &nbsp; Custom GLB\n      </label>\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, title, children, disabled) => (\n    <div className=\"checkbox-container\" title={title}>\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  handleGltfLoaded = gltf => {\n    const ext = gltf.parser.json.extensions && gltf.parser.json.extensions[\"MOZ_hubs_avatar\"];\n    let editorLinks = (ext && ext.editors) || defaultEditors;\n    if (useEditorWhitelist) {\n      editorLinks = editorLinks.filter(e => editorWhitelist.some(w => w.name === e.name && w.url === e.url));\n    }\n    this.setState({ editorLinks });\n  };\n\n  render() {\n    const { debug } = this.props;\n    const { avatar } = this.state;\n\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {!this.state.avatar ? (\n          <div className=\"loader\">\n            <div className=\"loader-center\" />\n          </div>\n        ) : this.props.signedIn ? (\n          <form onSubmit={this.uploadAvatar} className=\"center\">\n            {this.textField(\"name\", \"Name\", false, true)}\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug && this.textField(\"avatar_id\", \"Avatar ID\", true)}\n                {debug && this.textField(\"parent_avatar_id\", \"Parent Avatar ID\")}\n                {debug && this.textField(\"parent_avatar_listing_id\", \"Parent Avatar Listing ID\")}\n                {debug && this.textarea(\"description\", \"Description\")}\n                {!!this.state.baseAvatarResults.length && this.selectListingGrid(\"parent_avatar_listing_id\", \"Model\")}\n\n                <label>Skin</label>\n                {this.mapField(\"base_map\", \"Base Map\", \"image/*\")}\n                <details>\n                  <summary>Advanced</summary>\n                  {this.mapField(\"emissive_map\", \"Emissive Map\", \"image/*\")}\n                  {this.mapField(\"normal_map\", \"Normal Map\", \"image/*\")}\n                  {this.mapField(\"orm_map\", \"ORM Map\", \"image/*\", false, \"Occlussion (r), Roughness (g), Metallic (b)\")}\n                </details>\n\n                <label>Share Settings</label>\n                {this.checkbox(\n                  \"allow_promotion\",\n                  `Allow ${messages[\"company-name\"]} to promote your avatar, and show it in search results.`,\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href={configs.link(\"promotion\", \"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\")}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Promotion\n                    </a>\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  \"Allow others to edit and re-publish your avatar as long as they give you credit.\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href={configs.link(\"remixing\", \"https://github.com/mozilla/hubs/blob/master/REMIXING.md\")}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Remixing\n                    </a>{\" \"}\n                    <span className=\"license\">\n                      (under{\" \"}\n                      <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        CC-BY 3.0\n                      </a>)\n                    </span>\n                  </span>\n                )}\n                {this.textField(\"creatorAttribution\", \"Attribution (optional)\", false, false)}\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                onGltfLoaded={this.handleGltfLoaded}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <IfFeature name=\"show_avatar_editor_link\">\n                <p>\n                  <FormattedMessage id=\"avatar-editor.external-editor-info\" />\n                  {this.state.editorLinks.map(({ name, url }) => (\n                    <a\n                      key={name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={url.replace(\"$AVATAR_GLTF\", encodeURIComponent(this.state.previewGltfUrl))}\n                    >\n                      {name}\n                    </a>\n                  ))}\n                </p>\n              </IfFeature>\n              <IfFeature name=\"show_avatar_pipelines_link\">\n                <p>\n                  <FormattedMessage id=\"avatar-editor.info\" />\n                  <a\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href=\"https://github.com/MozillaReality/hubs-avatar-pipelines\"\n                  >\n                    <FormattedMessage id=\"avatar-editor.info-link\" />\n                  </a>\n                </p>\n              </IfFeature>\n            </div>\n            <div>\n              <input\n                disabled={this.state.uploading}\n                className=\"form-submit\"\n                type=\"submit\"\n                value={this.state.uploading ? \"Uploading...\" : \"Save\"}\n              />\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    are you sure? <a onClick={this.deleteAvatar}>yes</a> /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>no</a>\n                  </span>\n                ) : (\n                  <a\n                    onClick={() => this.setState({ confirmDelete: true })}\n                    title={\n                      avatar.has_listings\n                        ? \"Other users already using this avatar will still be able to use it, but it will be removed from 'My Avatars' and search results.\"\n                        : \"\"\n                    }\n                  >\n                    {avatar.has_listings ? \"delist\" : \"delete\"} avatar\n                  </a>\n                )}\n              </div>\n            )}\n          </form>\n        ) : (\n          <a onClick={this.props.onSignIn}>\n            <FormattedMessage id=\"sign-in.in\" />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport MovingAverage from \"moving-average\";\n\nexport default class MicLevelWidget extends Component {\n  static propTypes = {\n    hasAudioTrack: PropTypes.bool,\n    muteOnEntry: PropTypes.bool,\n    scene: PropTypes.object\n  };\n\n  state = {\n    volume: 0\n  };\n\n  componentDidMount() {\n    this.startAnalyser();\n  }\n\n  componentWillUnmount() {\n    this.stopAnalyser();\n  }\n\n  stopAnalyser() {\n    if (this.micUpdateInterval != null) {\n      clearInterval(this.micUpdateInterval);\n    }\n  }\n\n  startAnalyser() {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    const micLevelMovingAverage = MovingAverage(100);\n    let max = 0;\n    this.micUpdateInterval = setInterval(() => {\n      const analyser = this.props.scene.systems[\"local-audio-analyser\"];\n      max = Math.max(analyser.volume, max);\n      // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n      // the css renderer to keep up.\n      micLevelMovingAverage.push(Date.now(), analyser.volume);\n      const average = micLevelMovingAverage.movingAverage();\n      const volume = max === 0 ? 0 : average / max;\n      if (Math.abs(this.state.volume - volume) > 0.05) {\n        this.setState({ volume });\n      }\n    }, 50);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.volume * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n\n    return (\n      <div className=\"audio-setup-panel__levels__icon\">\n        {!this.props.muteOnEntry && (\n          <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n          </svg>\n        )}\n        {!this.props.muteOnEntry && (\n          <div className=\"audio-setup-panel__levels__icon__talking\" style={micClip}>\n            <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n            </svg>\n          </div>\n        )}\n        {this.props.hasAudioTrack && !this.props.muteOnEntry ? (\n          <img\n            src=\"../assets/images/mic_level.png\"\n            srcSet=\"../assets/images/mic_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        ) : (\n          <img\n            src=\"../assets/images/mic_denied.png\"\n            srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        )}\n        {this.props.hasAudioTrack &&\n          !this.props.muteOnEntry && (\n            <div className=\"audio-setup-panel__levels__test_label\">\n              <FormattedMessage id=\"audio.talk_to_test\" />\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\n\nexport class NumberRangeSelector extends Component {\n  static propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    currentValue: PropTypes.number,\n    onChange: PropTypes.func\n  };\n  state = {\n    isDragging: false\n  };\n  constructor(props) {\n    super(props);\n    this.myRoot = React.createRef();\n    this.stopDragging = this.stopDragging.bind(this);\n    this.drag = this.drag.bind(this);\n    window.addEventListener(\"mouseup\", this.stopDragging);\n    window.addEventListener(\"mousemove\", this.drag);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"mouseup\", this.stopDragging);\n    window.removeEventListener(\"mousemove\", this.drag);\n  }\n\n  stopDragging() {\n    this.setState({ isDragging: false });\n  }\n\n  drag(e) {\n    if (!this.state.isDragging) return;\n    const t = Math.max(0, Math.min((e.clientX - this.myRoot.current.offsetLeft) / this.myRoot.current.clientWidth, 1));\n    this.props.onChange(this.props.min + t * (this.props.max - this.props.min));\n  }\n\n  render() {\n    return (\n      <div className={classNames(styles.numberWithRange)}>\n        <div className={classNames(styles.numberInNumberWithRange)}>\n          <input\n            type=\"text\"\n            value={this.props.currentValue.toFixed(2)}\n            onClick={e => {\n              e.preventDefault();\n              e.target.focus();\n              e.target.select();\n            }}\n            onChange={e => {\n              const num = parseInt(e.target.value);\n              this.props.onChange(num ? num : 0, true);\n            }}\n          />\n        </div>\n        <div\n          ref={this.myRoot}\n          className={classNames(styles.rangeSlider)}\n          onMouseDown={e => {\n            e.preventDefault();\n            this.setState({ isDragging: true });\n            const t = Math.max(\n              0,\n              Math.min((e.clientX - this.myRoot.current.offsetLeft) / this.myRoot.current.clientWidth, 1)\n            );\n            this.props.onChange(this.props.min + t * (this.props.max - this.props.min));\n          }}\n        >\n          <input\n            type=\"range\"\n            min={this.props.min}\n            max={this.props.max}\n            value={this.props.currentValue}\n            onChange={e => {\n              this.props.onChange(e.target.value);\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { SOUND_PREFERENCE_MENU_SELECT } from \"../systems/sound-effects-system\";\nimport { NumberRangeSelector } from \"./number-range-selector.js\";\n\nexport const PREFERENCE_LIST_ITEM_TYPE = {\n  CHECK_BOX: 1,\n  SELECT: 2,\n  NUMBER_WITH_RANGE: 3,\n  MAX_RESOLUTION: 4\n};\n\nexport class MaxResolutionPreferenceItem extends Component {\n  static propTypes = {\n    store: PropTypes.object\n  };\n  render() {\n    return (\n      <div className={classNames(styles.maxResolutionPreferenceItem)}>\n        <input\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionWidth === undefined\n              ? 1920\n              : this.props.store.state.preferences.maxResolutionWidth\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={e => {\n            const num = parseInt(e.target.value);\n            this.props.store.update({\n              preferences: { maxResolutionWidth: num ? num : 0 }\n            });\n          }}\n        />\n        &nbsp;x&nbsp;\n        <input\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionHeight === undefined\n              ? 1920\n              : this.props.store.state.preferences.maxResolutionHeight\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={e => {\n            const num = parseInt(e.target.value);\n            this.props.store.update({\n              preferences: { maxResolutionHeight: num ? num : 0 }\n            });\n          }}\n        />\n      </div>\n    );\n  }\n}\nexport class PreferenceListItem extends Component {\n  static propTypes = {\n    store: PropTypes.object,\n    storeKey: PropTypes.string,\n    prefType: PropTypes.number,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    onChange: PropTypes.func,\n    options: PropTypes.array,\n    defaultNumber: PropTypes.number,\n    defaultString: PropTypes.string,\n    defaultBool: PropTypes.bool\n  };\n  state = {\n    hovered: false,\n    selectHovered: false\n  };\n  UNSAFE_componentWillMount() {\n    this.renderControls = this.renderControls.bind(this);\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    waitForDOMContentLoaded().then(() => {\n      this.sfx = AFRAME.scenes[0].systems[\"hubs-systems\"].soundEffectsSystem;\n    });\n  }\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  renderControls() {\n    let options;\n    let storedPref;\n    switch (this.props.prefType) {\n      case PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX:\n        storedPref = this.props.store.state.preferences[this.props.storeKey];\n        return (\n          <div className={classNames(styles.checkbox)}>\n            <input\n              tabIndex=\"0\"\n              type=\"checkbox\"\n              checked={storedPref === undefined ? this.props.defaultBool : storedPref}\n              onChange={() => {\n                this.props.store.update({\n                  preferences: { [this.props.storeKey]: !this.props.store.state.preferences[this.props.storeKey] }\n                });\n              }}\n            />\n          </div>\n        );\n      case PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION:\n        return <MaxResolutionPreferenceItem store={this.props.store} />;\n      case PREFERENCE_LIST_ITEM_TYPE.SELECT:\n        options = this.props.options.map((o, i) => {\n          const opts = {};\n          const storedPref = this.props.store.state.preferences[this.props.storeKey];\n          if (\n            o.value === storedPref ||\n            ((storedPref === undefined || storedPref === \"\") && o.value === this.props.defaultString)\n          ) {\n            opts.selected = \"selected\";\n          }\n\n          return (\n            <option key={`${this.props.storeKey}_${i}`} value={o.value} {...opts}>\n              {o.text}\n            </option>\n          );\n        });\n        return (\n          <div className={styles.dropdown}>\n            <select\n              tabIndex=\"0\"\n              className={classNames({\n                [styles.hovered]: this.state.hovered,\n                [styles.selectHovered]: this.state.selectHovered\n              })}\n              onMouseEnter={() => {\n                this.setState({ selectHovered: true });\n              }}\n              onMouseLeave={() => {\n                this.setState({ selectHovered: false });\n              }}\n              onChange={e => {\n                this.props.store.update({ preferences: { [this.props.storeKey]: e.target.value } });\n              }}\n            >\n              {options}\n            </select>\n            <img\n              className={styles.dropdownArrow}\n              src=\"../assets/images/dropdown_arrow.png\"\n              srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n            />\n          </div>\n        );\n      case PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE:\n        return (\n          <NumberRangeSelector\n            min={this.props.min}\n            max={this.props.max}\n            currentValue={\n              this.props.store.state.preferences[this.props.storeKey] !== undefined\n                ? this.props.store.state.preferences[this.props.storeKey]\n                : this.props.defaultNumber\n            }\n            onChange={(value, playSound) => {\n              this.props.store.update({\n                preferences: { [this.props.storeKey]: Number.parseFloat(value) }\n              });\n              playSound && this.sfx && this.sfx.playSoundOneShot(SOUND_PREFERENCE_MENU_SELECT);\n            }}\n          />\n        );\n      default:\n        return <div />;\n    }\n  }\n\n  render() {\n    const isCheckbox = this.props.prefType === PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX;\n\n    return (\n      <div\n        className={classNames(\n          { [styles.hovered]: this.state.hovered },\n          styles.preferenceListItem,\n          !isCheckbox && styles.preferenceListNonCheckbox\n        )}\n        onMouseEnter={() => {\n          this.setState({ hovered: true });\n        }}\n        onMouseLeave={() => {\n          this.setState({ hovered: false });\n        }}\n      >\n        <div className={classNames(styles.checkboxMargin)}>\n          {isCheckbox ? this.renderControls() : <span>&nbsp;</span>}\n        </div>\n        <div className={classNames(styles.part, styles.left, styles.label)}>\n          <FormattedMessage id={`preferences.${this.props.storeKey}`} />\n        </div>\n        <div className={classNames(styles.part, styles.right)}>\n          {!isCheckbox && this.renderControls()}\n          <button\n            className={classNames(styles.resetToDefaultButton)}\n            onClick={() => {\n              switch (this.props.prefType) {\n                case PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION:\n                  this.props.store.update({\n                    preferences: {\n                      maxResolutionWidth: undefined,\n                      maxResolutionHeight: undefined\n                    }\n                  });\n                  break;\n                default:\n                  this.props.store.update({ preferences: { [this.props.storeKey]: undefined } });\n                  break;\n              }\n              this.forceUpdate();\n            }}\n          >\n            <i title=\"Reset to default\">\n              <FontAwesomeIcon icon={faUndo} />\n            </i>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { IntlProvider, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\nimport { lang, messages } from \"../utils/i18n\";\nimport { PreferenceListItem, PREFERENCE_LIST_ITEM_TYPE } from \"./preference-list-item\";\n\naddLocaleData([...en]);\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport default class PreferencesScreen extends Component {\n  static propTypes = {\n    onClose: PropTypes.func,\n    store: PropTypes.object\n  };\n\n  UNSAFE_componentWillMount() {\n    window.APP.preferenceScreenIsVisible = true;\n  }\n  componentWillUnmount() {\n    window.APP.preferenceScreenIsVisible = false;\n  }\n\n  render() {\n    const preferenceListItem = props => {\n      return (\n        <PreferenceListItem\n          key={props.key}\n          store={this.props.store}\n          storeKey={props.key}\n          prefType={props.prefType}\n          min={props.min}\n          max={props.max}\n          currentValue={props.currentValue}\n          onChange={props.onChange}\n          options={props.options}\n          defaultNumber={props.defaultNumber}\n          defaultString={props.defaultString}\n          defaultBool={props.defaultBool}\n        />\n      );\n    };\n    // TODO: Add search text field and sort rows by fuzzy search\n    const general = [\n      { key: \"muteMicOnEntry\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"onlyShowNametagsInFreeze\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      {\n        key: \"globalVoiceVolume\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 200,\n        defaultNumber: 100\n      },\n      {\n        key: \"globalMediaVolume\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 200,\n        defaultNumber: 100\n      },\n      {\n        key: \"snapRotationDegrees\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 90,\n        defaultNumber: 45\n      },\n      { key: \"disableMovement\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableBackwardsMovement\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableStrafing\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableTeleporter\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false }\n    ].map(preferenceListItem);\n\n    const touchscreen = [\n      { key: \"enableOnScreenJoystickLeft\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"enableOnScreenJoystickRight\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false }\n    ].map(preferenceListItem);\n\n    const advanced = [\n      { key: \"maxResolution\", prefType: PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION },\n      {\n        key: \"materialQualitySetting\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n        options: [{ value: \"low\", text: \"Low\" }, { value: \"high\", text: \"High\" }],\n        defaultString: isMobile ? \"low\" : \"high\"\n      },\n      { key: \"disableAutoPixelRatio\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"allowMultipleHubsInstances\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false }\n    ].map(preferenceListItem);\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={classNames(styles.preferencesPanel)}>\n          <div className={classNames(styles.panelMargin)}>\n            <button autoFocus className={classNames(styles.closeButton)} onClick={e => this.props.onClose(e)}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n\n            <div className={classNames(styles.contentContainer)}>\n              <div className={classNames(styles.sectionBar)}>\n                <div className={classNames(styles.sectionTitle)}>\n                  <span>General</span>\n                </div>\n              </div>\n              <div className={classNames(styles.scrollingContent)}>{general}</div>\n              <div className={classNames(styles.sectionBar)}>\n                <div className={classNames(styles.sectionTitle)}>\n                  <span>Touchscreen</span>\n                </div>\n              </div>\n              <div className={classNames(styles.scrollingContent)}>{touchscreen}</div>\n              <div className={classNames(styles.sectionBar)}>\n                <div className={classNames(styles.sectionTitle)}>\n                  <span>Advanced</span>\n                </div>\n              </div>\n              <div className={classNames(styles.scrollingContent)}>{advanced}</div>\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\n\nexport default class OutputLevelWidget extends Component {\n  state = {\n    tonePlaying: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.playTestTone = this.playTestTone.bind(this);\n    this.toneClip = document.createElement(\"audio\");\n    if (this.toneClip.canPlayType(\"audio/webm\")) {\n      this.toneClip.src = webmTone;\n    } else if (this.toneClip.canPlayType(\"audio/mpeg\")) {\n      this.toneClip.src = mp3Tone;\n    } else if (this.toneClip.canPlayType(\"audio/ogg\")) {\n      this.toneClip.src = oggTone;\n    } else {\n      this.toneClip.src = wavTone;\n    }\n  }\n\n  componentWillUnmount() {\n    this.toneClip.pause();\n    this.toneClip.currentTime = 0;\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n  }\n\n  playTestTone() {\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n    this.toneClip.currentTime = 0;\n    this.toneClip.play();\n    this.setState({ tonePlaying: true });\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, 1393);\n  }\n\n  render() {\n    const iconClass = `audio-setup-panel__levels__icon_clickable__${this.state.tonePlaying ? \"playing\" : \"pending\"}`;\n\n    return (\n      <WithHoverSound>\n        <div className=\"audio-setup-panel__levels__icon_clickable\" onClick={this.playTestTone}>\n          <img\n            src=\"../assets/images/speaker_level.png\"\n            srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <div className={iconClass}>\n            <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n            </svg>\n          </div>\n          <div className=\"audio-setup-panel__levels__test_label\">\n            <FormattedMessage id=\"audio.click_to_test\" />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { messages } from \"../utils/i18n\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport configs from \"../utils/configs\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in ${messages[\"share-hashtag\"]}, join me at https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../utils/configs\";\n\nimport { messages } from \"../utils/i18n\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\n\nexport default function VideoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const onShareClicked = share.bind(null, {\n    url: url,\n    title: `Taken in ${messages[\"share-hashtag\"]}, join me at https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n              video\n            </a>\n          </b>.\n        </span>\n      </div>\n    </div>\n  );\n}\nVideoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport VideoMessage from \"./video-message\";\nimport ImageMessage from \"./image-message\";\nimport { getPresenceContextForSession } from \"../utils/phoenix-utils\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object,\n    presences: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    const presenceContext = e.sessionId ? getPresenceContextForSession(this.props.presences, e.sessionId) : {};\n    const isBot = !!presenceContext.discord;\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"scene_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.scene_change\" />&nbsp;<b>{e.sceneName}</b>.\n          </div>\n        );\n      case \"hub_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.hub_name_change\" />&nbsp;<b>{e.hubName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            includeFromLink={this.props.inRoom && !isBot}\n            history={this.props.history}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"video\":\n        return (\n          <VideoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCubes } from \"@fortawesome/free-solid-svg-icons/faCubes\";\nimport { faCube } from \"@fortawesome/free-solid-svg-icons/faCube\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { faMusic } from \"@fortawesome/free-solid-svg-icons/faMusic\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faNewspaper } from \"@fortawesome/free-solid-svg-icons/faNewspaper\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport {\n  SORT_ORDER_VIDEO,\n  SORT_ORDER_AUDIO,\n  SORT_ORDER_IMAGE,\n  SORT_ORDER_PDF,\n  SORT_ORDER_MODEL,\n  SORT_ORDER_UNIDENTIFIED,\n  mediaSortOrder,\n  mediaSort\n} from \"../utils/media-sorting.js\";\n\nconst THUMBNAIL_TITLE = new Map([\n  [SORT_ORDER_VIDEO, \"Video\"],\n  [SORT_ORDER_AUDIO, \"Audio\"],\n  [SORT_ORDER_IMAGE, \"Image\"],\n  [SORT_ORDER_PDF, \"PDF\"],\n  [SORT_ORDER_UNIDENTIFIED, \"Unknown Media Type\"],\n  [SORT_ORDER_MODEL, \"Model\"]\n]);\n\nconst DISPLAY_IMAGE = new Map([\n  [SORT_ORDER_VIDEO, faVideo],\n  [SORT_ORDER_AUDIO, faMusic],\n  [SORT_ORDER_IMAGE, faImage],\n  [SORT_ORDER_PDF, faNewspaper],\n  [SORT_ORDER_UNIDENTIFIED, faQuestion],\n  [SORT_ORDER_MODEL, faCube]\n]);\n\nfunction getDisplayString(el) {\n  // Having a listed-media component does not guarantee the existence of a media-loader component,\n  // so don't crash if there isn't one.\n  const url = (el.components[\"media-loader\"] && el.components[\"media-loader\"].data.src) || \"\";\n  const split = url.split(\"/\");\n  const resourceName = split[split.length - 1].split(\"?\")[0];\n  let httpIndex = -1;\n  for (let i = 0; i < split.length; i++) {\n    if (split[i].indexOf(\"http\") !== -1) {\n      httpIndex = i;\n    }\n  }\n\n  let host = \"\";\n  let lessHost = \"\";\n  if (httpIndex !== -1 && split.length > httpIndex + 3) {\n    host = split[httpIndex + 2];\n    const hostSplit = host.split(\".\");\n    if (hostSplit.length > 1) {\n      lessHost = `${hostSplit[hostSplit.length - 2]}.${hostSplit[hostSplit.length - 1]}`;\n    }\n  }\n\n  const firstPart =\n    url.indexOf(\"poly.google\") !== -1\n      ? \"Google Poly\"\n      : url.indexOf(\"sketchfab.com\") !== -1\n        ? \"Sketchfab\"\n        : url.indexOf(\"youtube.com\") !== -1\n          ? \"YouTube\"\n          : lessHost;\n\n  return `${firstPart} ... ${resourceName.substr(0, 4)}`;\n}\n\nexport default class ObjectList extends Component {\n  static propTypes = {\n    onInspectObject: PropTypes.func,\n    onExpand: PropTypes.func,\n    scene: PropTypes.object,\n    expanded: PropTypes.bool\n  };\n\n  state = {\n    inspecting: false,\n    mediaEntities: []\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.props.expanded) {\n        this.props.onExpand(false, true);\n      }\n    });\n    this.updateMediaEntities = this.updateMediaEntities.bind(this);\n    this.updateMediaEntities();\n    this.props.scene.addEventListener(\"listed_media_changed\", () => setTimeout(() => this.updateMediaEntities(), 0));\n    // HACK: The listed-media component exists before the media-loader component does, in cases where an entity is created from a network template because of an incoming message, so don't updateMediaEntities right away.\n    // Sorry in advance for the day this comment is out of date.\n  }\n\n  updateMediaEntities() {\n    const mediaEntities = [...this.props.scene.systems[\"listed-media\"].els];\n    mediaEntities.sort(mediaSort);\n    this.setState({ mediaEntities });\n  }\n\n  componentDidUpdate() {}\n\n  domForEntity(el, i) {\n    return (\n      <div\n        key={i}\n        className={styles.rowNoMargin}\n        onMouseDown={() => {\n          this.props.onExpand(false, false);\n          this.props.onInspectObject(el);\n        }}\n        onMouseOut={() => {\n          if (this.props.expanded && !AFRAME.utils.device.isMobileVR()) {\n            AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.uninspect();\n          }\n        }}\n        onMouseOver={() => {\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.uninspect();\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.inspect(el.object3D, 1.5, true);\n        }}\n      >\n        <div title={THUMBNAIL_TITLE.get(mediaSortOrder(el))} className={styles.icon}>\n          <FontAwesomeIcon icon={DISPLAY_IMAGE.get(mediaSortOrder(el))} />\n        </div>\n        <div className={classNames({ [styles.listItem]: true })}>\n          <div className={styles.presence}>\n            <p>{getDisplayString(el)}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.contents}>\n          <div className={styles.rows}>{this.state.mediaEntities.map(this.domForEntity.bind(this))}</div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div\n          title={\"Media\"}\n          onClick={() => {\n            this.props.onExpand(\n              !this.props.expanded && this.state.mediaEntities.length > 0,\n              !AFRAME.utils.device.isMobileVR()\n            );\n          }}\n          className={classNames({\n            [rootStyles.objectList]: true,\n            [rootStyles.presenceInfoSelected]: this.props.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faCubes} />\n          <span className={rootStyles.occupantCount}>{this.state.mediaEntities.length}</span>\n        </div>\n        {this.props.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faUserAlt } from \"@fortawesome/free-solid-svg-icons/faUserAlt\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons/faCog\";\nimport { faDoorClosed } from \"@fortawesome/free-solid-svg-icons/faDoorClosed\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons/faInfoCircle\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons/faBars\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport StateLink from \"./state-link.js\";\nimport { resetTips } from \"../systems/tips\";\nimport { showFullScreenIfAvailable } from \"../utils/fullscreen\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\n\nimport styles from \"../assets/stylesheets/settings-menu.scss\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\n\nexport default class SettingsMenu extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    toggleStreamerMode: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    showAsOverlay: PropTypes.bool, // Shows the settings as an overlay menu, instead of a dropdown\n    onCloseOverlay: PropTypes.func,\n    hubScene: PropTypes.object,\n    hubChannel: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func,\n    showPreferencesScreen: PropTypes.func,\n    pushHistoryState: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  unexpand() {\n    if (this.state.expanded && !this.props.showAsOverlay) {\n      this.setState({ expanded: false });\n    }\n  }\n\n  componentDidMount() {\n    this.onMouseUp = () => this.unexpand();\n    this.acanvas = document.querySelector(\".a-canvas\");\n    this.acanvas.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  componentWillUnmount() {\n    this.acanvas.removeEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  renderExpandedMenu() {\n    const rowClasses = classNames([styles.row, styles.settingsRow]);\n    const rowHeader = classNames([styles.row, styles.settingsRow, styles.rowHeader]);\n\n    // When showing as overlay, hide some menu items for now since the overlay mode is intended for immersive\n    // mode browsers which have limited vertical screen real estate.\n    //\n    // The reason I didn't do this with CSS is because this changes available functionality, so being more\n    // explicit in code seems like a wise idea.\n    const hideExtranousItems = this.props.showAsOverlay;\n\n    const showRoomSettings = !!this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n    const showCloseRoom = !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const showRoomInfo = !!this.props.hubScene && !hideExtranousItems;\n    const showRoomSection = showRoomSettings || showRoomInfo || showCloseRoom;\n    const showStreamerMode =\n      this.props.scene.is(\"entered\") && !!this.props.hubChannel.canOrWillIfCreator(\"kick_users\") && !hideExtranousItems;\n\n    // Draw self first\n    return (\n      <div\n        className={classNames({\n          [styles.settingsMenuDrop]: !this.props.showAsOverlay,\n          [styles.settingsMenuOverlay]: this.props.showAsOverlay\n        })}\n      >\n        {!this.props.showAsOverlay && <div className={styles.attachPoint} />}\n        <div className={styles.contents}>\n          {this.props.showAsOverlay && (\n            <button autoFocus className={styles.closeButton} onClick={() => this.props.onCloseOverlay()}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n          )}\n          <div className={styles.rows}>\n            {!hideExtranousItems && (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-profile\" />\n              </div>\n            )}\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faUserAlt} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <StateLink\n                  stateKey=\"overlay\"\n                  stateValue=\"profile\"\n                  history={this.props.history}\n                  onClick={() => this.unexpand()}\n                >\n                  <FormattedMessage id=\"settings.change-avatar\" />\n                </StateLink>\n              </div>\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faStar} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.performConditionalSignIn(\n                      () => this.props.hubChannel.signedIn,\n                      () => {\n                        showFullScreenIfAvailable();\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\", \"use\");\n                      },\n                      \"favorite-rooms\"\n                    );\n                  }}\n                >\n                  <FormattedMessage id=\"settings.favorites\" />\n                </div>\n              </div>\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faCog} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.showPreferencesScreen();\n                  }}\n                >\n                  <FormattedMessage id=\"settings.preferences\" />\n                </div>\n              </div>\n            </div>\n            {showRoomSection &&\n              !hideExtranousItems && (\n                <div className={rowHeader}>\n                  <FormattedMessage id=\"settings.row-room\" />\n                </div>\n              )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faImage} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          showFullScreenIfAvailable();\n                          this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n                          this.unexpand();\n                        },\n                        \"change-scene\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.change-scene\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"room_settings\");\n                          this.unexpand();\n                        },\n                        \"room-settings\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.room-settings\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showCloseRoom && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faDoorClosed} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"close_room\");\n                          this.unexpand();\n                        },\n                        \"close-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.close-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showRoomInfo && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <StateLink\n                    stateKey=\"modal\"\n                    stateValue=\"room_info\"\n                    history={this.props.history}\n                    onClick={() => this.unexpand()}\n                  >\n                    <FormattedMessage id=\"settings.room-info\" />\n                  </StateLink>\n                </div>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPlus} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n                      this.props.showNonHistoriedDialog(LeaveRoomDialog, {\n                        destinationUrl: \"/\",\n                        messageType: \"create-room\"\n                      });\n                      this.unexpand();\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.create-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showStreamerMode && !hideExtranousItems ? (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-tools\" />\n              </div>\n            ) : (\n              <div />\n            )}\n            {showStreamerMode ? (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faVideo} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleStreamerMode(true);\n                      this.unexpand();\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.enable-streamer-mode\" />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div />\n            )}\n            {this.props.showAsOverlay && (\n              <div className={rowClasses}>\n                <div className={classNames([styles.listItem, styles.secondaryLinkItem])}>\n                  <div className={styles.secondaryButton} onClick={() => this.props.onCloseOverlay()}>\n                    <FormattedMessage id=\"settings.return-to-vr\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={classNames([styles.bottomLinksMain])}>\n                <IfFeature name=\"show_whats_new_link\">\n                  <a href=\"/whats-new\" target=\"_blank\" rel=\"noreferrer noopener\">\n                    <FormattedMessage id=\"settings.whats-new\" />\n                  </a>\n                </IfFeature>\n                <button\n                  onClick={e => {\n                    e.preventDefault();\n                    resetTips();\n                    this.setState({ expanded: false });\n                  }}\n                >\n                  <FormattedMessage id=\"settings.tips\" />\n                </button>\n                <IfFeature name=\"show_controls_link\">\n                  <a\n                    href={configs.link(\"controls\", \"https://hubs.mozilla.com/docs/hubs-controls.html\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.controls\" />\n                  </a>\n                </IfFeature>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={classNames([styles.bottomLinks])}>\n                <IfFeature name=\"show_docs_link\">\n                  <a\n                    href={configs.link(\"docs\", \"https://hubs.mozilla.com/docs\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.help\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_community_link\">\n                  <a\n                    href={configs.link(\"community\", \"https://discord.gg/wHmY4nd\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.community\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_feedback_ui\">\n                  <button\n                    onClick={e => {\n                      e.preventDefault();\n                      this.props.pushHistoryState(\"modal\", \"feedback\");\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.send-feedback\" />\n                  </button>\n                </IfFeature>\n                <IfFeature name=\"show_issue_report_link\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"issue_report\", \"/#/report\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.report\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_terms\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.terms\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_privacy\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.privacy\" />\n                  </a>\n                </IfFeature>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {!this.props.showAsOverlay && (\n          <FontAwesomeIcon\n            icon={faBars}\n            onClick={() => this.setState({ expanded: !this.state.expanded })}\n            className={classNames({\n              [rootStyles.cornerButton]: true,\n              [rootStyles.cornerButtonSelected]: this.state.expanded\n            })}\n          />\n        )}\n        {this.props.showAsOverlay ? (\n          <div className={styles.settingsMenuOverlayWrap}>{this.renderExpandedMenu()}</div>\n        ) : (\n          this.state.expanded && this.renderExpandedMenu()\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img src={configs.image(\"logo\")} />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <button className={styles.loadButton} onClick={this.props.onLoadClicked}>\n                <FormattedMessage id=\"embed.load-button\" />\n              </button>\n            ) : (\n              <a href={this.props.baseUrl} target=\"_blank\" className={styles.loadButton} rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"embed.load-button\" />\n              </a>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { micLevelForVolume } from \"../components/audio-feedback\";\nimport SpawnIcon from \"../assets/images/spawn.svgi\";\nimport ShareScreenIconActive from \"../assets/images/share_screen_active.svgi\";\nimport ShareScreenIcon from \"../assets/images/share_screen.svgi\";\nimport ShareCameraIconActive from \"../assets/images/share_camera_active.svgi\";\nimport ShareCameraIcon from \"../assets/images/share_camera.svgi\";\nimport PenIcon from \"../assets/images/pen.svgi\";\nimport PenIconActive from \"../assets/images/pen_active.svgi\";\nimport CameraIcon from \"../assets/images/camera.svgi\";\nimport CameraIconActive from \"../assets/images/camera_active.svgi\";\nimport Mic0 from \"../assets/images/mic-0.svgi\";\nimport Mic1 from \"../assets/images/mic-1.svgi\";\nimport Mic2 from \"../assets/images/mic-2.svgi\";\nimport Mic3 from \"../assets/images/mic-3.svgi\";\nimport Mic4 from \"../assets/images/mic-4.svgi\";\nimport Mic5 from \"../assets/images/mic-5.svgi\";\nimport Mic6 from \"../assets/images/mic-6.svgi\";\nimport Mic7 from \"../assets/images/mic-7.svgi\";\nimport MicOff0 from \"../assets/images/mic-off-0.svgi\";\nimport MicOff1 from \"../assets/images/mic-off-1.svgi\";\nimport MicOff2 from \"../assets/images/mic-off-2.svgi\";\nimport MicOff3 from \"../assets/images/mic-off-3.svgi\";\nimport MicOff4 from \"../assets/images/mic-off-4.svgi\";\nimport MicOff5 from \"../assets/images/mic-off-5.svgi\";\nimport MicOff6 from \"../assets/images/mic-off-6.svgi\";\nimport MicOff7 from \"../assets/images/mic-off-7.svgi\";\n\nimport { InlineSVG } from \"./svgi\";\n\nconst MIC_ICONS = {\n  on: [Mic0, Mic1, Mic2, Mic3, Mic4, Mic5, Mic6, Mic7],\n  off: [MicOff0, MicOff1, MicOff2, MicOff3, MicOff4, MicOff5, MicOff6, MicOff7]\n};\n\nconst noop = () => {};\n\nclass TopHUD extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    muted: PropTypes.bool,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    frozen: PropTypes.bool,\n    watching: PropTypes.bool,\n    onWatchEnded: PropTypes.func,\n    videoShareMediaSource: PropTypes.string,\n    showVideoShareFailed: PropTypes.bool,\n    hideVideoShareFailedTip: PropTypes.func,\n    activeTip: PropTypes.string,\n    history: PropTypes.object,\n    onToggleMute: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    showStreamingTip: PropTypes.bool,\n    hideStreamingTip: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null,\n    micLevel: 0,\n    cameraDisabled: false,\n    penDisabled: false,\n    mediaDisabled: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state.cameraDisabled = !window.APP.hubChannel.can(\"spawn_camera\");\n    this.state.penDisabled = !window.APP.hubChannel.can(\"spawn_drawing\");\n    this.state.mediaDisabled = !window.APP.hubChannel.can(\"spawn_and_move_media\");\n  }\n\n  onPermissionsUpdated = () => {\n    this.setState({\n      cameraDisabled: !window.APP.hubChannel.can(\"spawn_camera\"),\n      penDisabled: !window.APP.hubChannel.can(\"spawn_drawing\"),\n      mediaDisabled: !window.APP.hubChannel.can(\"spawn_and_move_media\")\n    });\n  };\n\n  componentDidMount = () => {\n    let max = 0;\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    this.micUpdateInterval = setInterval(() => {\n      const volume = this.props.scene.systems[\"local-audio-analyser\"].volume;\n      max = Math.max(volume, max);\n      const micLevel = micLevelForVolume(volume, max);\n      if (micLevel !== this.state.micLevel) {\n        this.setState({ micLevel });\n      }\n    }, 50);\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n    this.onPermissionsUpdated();\n  };\n\n  componentWillUnmount = () => {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n  };\n\n  handleVideoShareClicked = source => {\n    if (source === \"screen\" && !navigator.mediaDevices.getDisplayMedia) {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    const maybeHandlePrimaryShare = () => {\n      if (!this.state.showVideoShareOptions) {\n        this.handleVideoShareClicked(primaryVideoShareType);\n      }\n    };\n\n    const capitalize = str => str[0].toUpperCase() + str.slice(1);\n    const iconForType = (type, active) => {\n      if (active) {\n        return type === \"screen\" ? ShareScreenIconActive : ShareCameraIconActive;\n      } else {\n        return type === \"screen\" ? ShareScreenIcon : ShareCameraIcon;\n      }\n    };\n\n    return (\n      <div\n        className={cx(styles.iconButton, {\n          [styles.disabled]: this.state.mediaDisabled,\n          [styles.videoShare]: true\n        })}\n        title={\n          this.props.videoShareMediaSource !== null\n            ? \"Stop sharing\"\n            : `Share ${capitalize(primaryVideoShareType)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n        }\n        onClick={this.state.mediaDisabled ? noop : maybeHandlePrimaryShare}\n        onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n      >\n        <InlineSVG\n          className={cx(styles.iconButtonIcon)}\n          src={iconForType(primaryVideoShareType, this.props.videoShareMediaSource === primaryVideoShareType)}\n        />\n        {videoShareExtraOptionTypes.length > 0 && (\n          <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n            {videoShareExtraOptionTypes.map(type => (\n              <div\n                key={type}\n                className={cx(styles.iconButton, {\n                  [styles.disabled]: this.state.mediaDisabled\n                })}\n                title={\n                  this.props.videoShareMediaSource === type\n                    ? \"Stop sharing\"\n                    : `Share ${capitalize(type)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n                }\n                onClick={this.state.mediaDisabled ? noop : () => this.handleVideoShareClicked(type)}\n                onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n              >\n                <InlineSVG\n                  className={cx(styles.iconButtonIcon)}\n                  src={iconForType(type, this.props.videoShareMediaSource === type)}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n    const isMobile = AFRAME.utils.device.isMobile();\n    const tipDivForType = (type, cancelFunc) => (\n      <div className={cx(styles.topTip)}>\n        {cancelFunc && (\n          <button className={styles.tipCancel} onClick={cancelFunc}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        )}\n        {!this.props.frozen && <div className={cx([styles.attachPoint, styles[`attach_${type.split(\".\")[1]}`]])} />}\n        <FormattedMessage id={`tips.${type}`} />\n      </div>\n    );\n\n    let tip;\n\n    if (this.props.watching) {\n      tip = (\n        <div className={cx([styles.topTip, styles.topTipNoHud])}>\n          <button className={styles.tipCancel} onClick={() => this.props.onWatchEnded()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n          <FormattedMessage id={`tips.${isMobile ? \"mobile\" : \"desktop\"}.watching`} />\n          {!isMobile && (\n            <button className={styles.tipCancelText} onClick={() => this.props.onWatchEnded()}>\n              <FormattedMessage id=\"tips.watching.back\" />\n            </button>\n          )}\n        </div>\n      );\n    } else if (this.props.showVideoShareFailed) {\n      tip = tipDivForType(`${isMobile ? \"mobile\" : \"desktop\"}.video_share_failed`, this.props.hideVideoShareFailedTip);\n    } else if (this.props.activeTip) {\n      tip = tipDivForType(this.props.activeTip);\n    }\n\n    const micLevel = this.state.micLevel;\n    const micIcon = MIC_ICONS[this.props.muted ? \"off\" : \"on\"][micLevel];\n    // Hide buttons when frozen.\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        {this.props.frozen || this.props.watching ? (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>{tip}</div>\n        ) : (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n            {tip}\n            {videoSharingButtons}\n            <div\n              className={cx(styles.iconButton)}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            >\n              <InlineSVG className={cx(styles.iconButtonIcon)} src={micIcon} />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.mediaDisabled\n              })}\n              title={`Create${this.state.mediaDisabled ? \" Disabled\" : \"\"}`}\n              onClick={\n                this.state.mediaDisabled ? noop : () => this.props.mediaSearchStore.sourceNavigateToDefaultSource()\n              }\n            >\n              <InlineSVG className={cx(styles.iconButtonIcon, styles.spawn)} src={SpawnIcon} />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.penDisabled\n              })}\n              title={`Pen${this.state.penDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.penDisabled ? noop : this.props.onSpawnPen}\n            >\n              <InlineSVG\n                className={cx(styles.iconButtonIcon)}\n                src={this.props.isCursorHoldingPen ? PenIconActive : PenIcon}\n              />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.cameraDisabled\n              })}\n              title={`Camera${this.state.cameraDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.cameraDisabled ? noop : this.props.onSpawnCamera}\n            >\n              <InlineSVG\n                className={cx(styles.iconButtonIcon)}\n                src={this.props.hasActiveCamera ? CameraIconActive : CameraIcon}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default { TopHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/spectating-label.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport class SpectatingLabel extends Component {\n  static propTypes = {\n    name: PropTypes.string\n  };\n\n  render() {\n    return (\n      <div className={styles.label}>\n        <FormattedMessage id=\"lobby.watching\" />\n        <b>{this.props.name}</b>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport screenfull from \"screenfull\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport UnlessFeature from \"./unless-feature\";\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { canShare } from \"../utils/share\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport inviteStyles from \"../assets/stylesheets/invite-dialog.scss\";\nimport { ReactAudioContext } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession, discordBridgesForPresences } from \"../utils/phoenix-utils\";\nimport { getClientInfoClientId } from \"./client-info-dialog\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport Loader from \"./loader\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport { TwoDEntryButton, GenericEntryButton, DaydreamEntryButton } from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowser from \"./media-browser\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport ChangeSceneDialog from \"./change-scene-dialog.js\";\nimport AvatarUrlDialog from \"./avatar-url-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport InAppBrowserDialog from \"./in-app-browser-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport RoomSettingsDialog from \"./room-settings-dialog.js\";\nimport CloseRoomDialog from \"./close-room-dialog.js\";\nimport Tip from \"./tip.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebAssemblyUnsupportedDialog from \"./webassembly-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\nimport FeedbackDialog from \"./feedback-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\nimport RoomInfoDialog from \"./room-info-dialog.js\";\nimport ClientInfoDialog from \"./client-info-dialog.js\";\nimport ObjectInfoDialog from \"./object-info-dialog.js\";\nimport OAuthDialog from \"./oauth-dialog.js\";\nimport TweetDialog from \"./tweet-dialog.js\";\nimport LobbyChatBox from \"./lobby-chat-box.js\";\nimport EntryStartPanel from \"./entry-start-panel.js\";\nimport InWorldChatBox from \"./in-world-chat-box.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport MicLevelWidget from \"./mic-level-widget.js\";\nimport PreferencesScreen from \"./preferences-screen.js\";\nimport OutputLevelWidget from \"./output-level-widget.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport ObjectList from \"./object-list.js\";\nimport SettingsMenu from \"./settings-menu.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport { SpectatingLabel } from \"./spectating-label\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { exit2DInterstitialAndEnterVR, isIn2DInterstitial } from \"../utils/vr-interstitial\";\n\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons/faArrowLeft\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\naddLocaleData([...en]);\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isMobilePhoneOrVR = isMobile || isMobileVR;\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnIdle: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hub: PropTypes.object,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    entryDisallowed: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showInAppBrowserDialog: PropTypes.bool,\n    showWebAssemblyDialog: PropTypes.bool,\n    showOAuthDialog: PropTypes.bool,\n    onCloseOAuthDialog: PropTypes.func,\n    oauthInfo: PropTypes.array,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    activeTips: PropTypes.object,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string,\n    onLoaded: PropTypes.func\n  };\n\n  state = {\n    enterInVR: false,\n    entered: false,\n    entering: false,\n    dialog: null,\n    showShareDialog: false,\n    broadcastTipDismissed: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    showPrefs: false,\n    watching: false,\n    isStreaming: false,\n    showStreamingTip: false,\n\n    waitingOnAudio: false,\n    mediaStream: null,\n    audioTrack: null,\n    audioTrackClone: null,\n    micDevices: [],\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    autoExitMessage: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    frozen: false,\n\n    exited: false,\n\n    signedIn: false,\n    videoShareMediaSource: null,\n    showVideoShareFailed: false,\n\n    objectInfo: null,\n    objectSrc: \"\",\n    isObjectListExpanded: false,\n    isPresenceListExpanded: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (props.showInAppBrowserDialog) {\n      this.state.dialog = <InAppBrowserDialog closable={false} />;\n    }\n    if (props.showWebAssemblyDialog) {\n      this.state.dialog = <WebAssemblyUnsupportedDialog closable={false} />;\n    }\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.exit();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            try {\n              this.props.scene.renderer.compileAndUploadMaterials(this.props.scene.object3D, this.props.scene.camera);\n            } catch {\n              this.exit(\"scene_error\"); // https://github.com/mozilla/hubs/issues/1950\n            }\n          }\n\n          if (!this.state.hideLoader) {\n            this.setState({ hideLoader: true });\n          }\n        }, 0);\n      });\n    }\n  }\n\n  onConcurrentLoad = () => {\n    if (qsTruthy(\"allow_multi\") || this.props.store.state.preferences[\"allowMultipleHubsInstances\"]) return;\n    this.startAutoExitTimer(\"autoexit.concurrent_subtitle\");\n  };\n\n  onIdleDetected = () => {\n    if (this.props.disableAutoExitOnIdle || this.state.isStreaming) return;\n    this.startAutoExitTimer(\"autoexit.idle_subtitle\");\n  };\n\n  onActivityDetected = () => {\n    if (this.state.autoExitTimerInterval) {\n      this.endAutoExitTimer();\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.addEventListener(\"idle_detected\", this.onIdleDetected);\n    window.addEventListener(\"activity_detected\", this.onActivityDetected);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showShareDialog) {\n        this.setState({ showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\n      \"didConnectToNetworkedScene\",\n      () => {\n        this.setState({ didConnectToNetworkedScene: true });\n      },\n      { once: true }\n    );\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => {\n      if (this.state.hide) {\n        this.setState({ hide: false });\n      } else {\n        this.setState({ watching: false });\n      }\n    });\n    this.props.scene.addEventListener(\"action_toggle_ui\", () => this.setState({ hide: !this.state.hide }));\n\n    const scene = this.props.scene;\n\n    this.props.store.addEventListener(\"statechanged\", this.onStoreChanged);\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      this.props.scene.addEventListener(\n        \"loading_finished\",\n        () => {\n          setTimeout(() => this.handleForceEntry(), 1000);\n        },\n        { once: true }\n      );\n    }\n\n    this.playerRig = scene.querySelector(\"#avatar-rig\");\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.removeEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true, onClose: onContinueAfterSignIn });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: onContinueAfterSignIn,\n          onContinue: onContinueAfterSignIn\n        });\n      },\n      onClose: onContinueAfterSignIn\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      \"favorite-room\"\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    this.setState({ noMoreLoadingUpdates: true });\n    this.props.scene.emit(\"loading_finished\");\n    this.props.scene.addState(\"loaded\");\n\n    if (this.props.onLoaded) {\n      this.props.onLoaded();\n    }\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  onShareVideoFailed = () => {\n    this.setState({ showVideoShareFailed: true });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  startAutoExitTimer = autoExitMessage => {\n    if (this.state.autoExitTimerInterval) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval, autoExitMessage });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = reason => {\n    window.removeEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.removeEventListener(\"idle_detected\", this.onIdleDetected);\n    window.removeEventListener(\"activity_detected\", this.onActivityDetected);\n\n    if (this.props.exitScene) {\n      this.props.exitScene(reason);\n    }\n\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      autoExitMessage: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = (await grantedMicLabels()).length > 0;\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"mic_grant\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.pushHistoryState(\"modal\", \"webvr\");\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n    if (this.state.audioTrackClone) {\n      this.state.audioTrackClone.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const audioTrack = mediaStream.getAudioTracks()[0];\n      this.setState({ audioTrack });\n\n      if (/Oculus/.test(navigator.userAgent)) {\n        // HACK Oculus Browser 6 seems to randomly end the microphone audio stream. This re-creates it.\n        // Note the ended event will only fire if some external event ends the stream, not if we call stop().\n        const recreateAudioStream = async () => {\n          console.warn(\n            \"Oculus Browser 6 bug hit: Audio stream track ended without calling stop. Recreating audio stream.\"\n          );\n\n          const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n          const audioTrack = mediaStream.getAudioTracks()[0];\n          const audioTrackClone = audioTrack.clone();\n\n          await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n\n          if (this.props.scene.is(\"muted\")) {\n            console.warn(\"re-muting microphone\");\n            NAF.connection.adapter.enableMicrophone(false);\n            audioTrack.enabled = false;\n          }\n\n          this.setState({ mediaStream, audioTrack, audioTrackClone });\n\n          const mediaStreamForMicAnalysis = new MediaStream();\n          mediaStreamForMicAnalysis.addTrack(audioTrackClone);\n          this.props.scene.emit(\"local-media-stream-created\", { mediaStream: mediaStreamForMicAnalysis });\n          audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n        };\n\n        audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n      }\n\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n      const mediaStreamForMicAnalysis = new MediaStream();\n      const audioTrackClone = this.state.audioTrack.clone();\n      this.setState({ audioTrackClone });\n      mediaStreamForMicAnalysis.addTrack(audioTrackClone);\n      this.props.scene.emit(\"local-media-stream-created\", { mediaStream: mediaStreamForMicAnalysis });\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.props.location.state && this.props.location.state.entry_step === \"mic_grant\") {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.pushHistoryState(\"entry_step\", \"mic_granted\");\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n\n    if (skipAudioSetup) {\n      this.onAudioReadyButton();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (\n      (isMobile || AFRAME.utils.device.isMobileVR()) &&\n      !AFRAME.utils.device.isIOS() &&\n      !this.state.enterInVR &&\n      screenfull.enabled\n    );\n  };\n\n  onAudioReadyButton = async () => {\n    if (!this.state.enterInVR) {\n      await showFullScreenIfAvailable();\n    }\n\n    // Push the new history state before going into VR, otherwise menu button will take us back\n    clearHistoryState(this.props.history);\n\n    const muteOnEntry = this.props.store.state.preferences[\"muteMicOnEntry\"] || false;\n    await this.props.enterScene(this.state.mediaStream, this.state.enterInVR, muteOnEntry);\n\n    this.setState({ entered: true, entering: false, showShareDialog: false });\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"overlay\", \"link\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.exit();\n    });\n  };\n\n  showShareDialog = () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: true });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  changeScene = url => {\n    this.props.hubChannel.updateScene(url);\n  };\n\n  setAvatarUrl = url => {\n    this.props.store.update({ profile: { ...this.props.store.state.profile, ...{ avatarId: url } } });\n    this.props.scene.emit(\"avatar_updated\");\n  };\n\n  closeDialog = () => {\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    } else {\n      this.props.history.goBack();\n    }\n\n    if (isIn2DInterstitial()) {\n      exit2DInterstitialAndEnterVR();\n    } else {\n      showFullScreenIfWasFullScreen();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = enable => {\n    this.props.scene.systems[\"hubs-systems\"].characterController.fly = enable;\n\n    if (enable) {\n      this.props.hubChannel.beginStreaming();\n      this.setState({ isStreaming: true, showStreamingTip: true });\n    } else {\n      this.props.hubChannel.endStreaming();\n      this.setState({ isStreaming: false });\n    }\n  };\n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  showSignInDialog = () => {\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.pushHistoryState(\"modal\", \"webrtc-screenshare\");\n  };\n\n  onMiniInviteClicked = () => {\n    const link = `https://${configs.SHORTLINK_DOMAIN}/${this.props.hub.hub_id}`;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (canShare()) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  onStoreChanged = () => {\n    const broadcastedRoomConfirmed = this.props.store.state.confirmedBroadcastedRooms.includes(this.props.hub.hub_id);\n    if (broadcastedRoomConfirmed !== this.state.broadcastTipDismissed) {\n      this.setState({ broadcastTipDismissed: broadcastedRoomConfirmed });\n    }\n  };\n\n  confirmBroadcastedRoom = () => {\n    this.props.store.update({ confirmedBroadcastedRooms: [this.props.hub.hub_id] });\n  };\n\n  discordBridges = () => {\n    if (!this.props.presences) {\n      return [];\n    } else {\n      return discordBridgesForPresences(this.props.presences);\n    }\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  renderInterstitialPrompt = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n          <div>\n            <FormattedMessage id=\"interstitial.prompt\" />\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />\n          <IfFeature name=\"show_terms\">\n            A room may be closed if we receive reports that it violates our{\" \"}\n            <a\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n              href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n            >\n              Terms of Use\n            </a>\n            .<br />\n          </IfFeature>\n          If you have questions, contact us at{\" \"}\n          <a href={`mailto:${messages[\"contact-email\"]}`}>\n            <FormattedMessage id=\"contact-email\" />\n          </a>\n          .<p />\n          <IfFeature name=\"show_source_link\">\n            If you&apos;d like to run your own server, Hubs&apos;s source code is available on{\" \"}\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n            .\n          </IfFeature>\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <a\n            href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n            rel=\"noreferrer noopener\"\n          >\n            WebRTC Data Channels\n          </a>\n          , which is required to use {messages[\"app-name\"]}.\n          <br />\n          If you&quot;d like to use {messages[\"app-name\"]} with Oculus or SteamVR, you can{\" \"}\n          <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n            Download Firefox\n          </a>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${reason || \"exited\"}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {![\"left\", \"disconnected\", \"scene_error\"].includes(this.props.roomUnavailableReason) && (\n            <div>\n              You can also <a href=\"/\">create a new room</a>\n              .\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src={configs.image(\"logo\")} />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src={configs.image(\"logo\")} />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  onEnteringCanceled = () => {\n    this.props.hubChannel.sendEnteringCancelledEvent();\n    this.setState({ entering: false });\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>\n          {this.props.hubChannel.canOrWillIfCreator(\"update_hub\") ? (\n            <button\n              className={entryStyles.renameButton}\n              onClick={() =>\n                this.props.performConditionalSignIn(\n                  () => this.props.hubChannel.can(\"update_hub\"),\n                  () => this.pushHistoryState(\"modal\", \"room_settings\"),\n                  \"room-settings\"\n                )\n              }\n            >\n              {this.props.hub.name}\n            </button>\n          ) : (\n            <span>{this.props.hub.name}</span>\n          )}\n          <button onClick={() => this.setState({ watching: true })} className={entryStyles.collapseButton}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n\n          <button\n            onClick={() => this.toggleFavorited()}\n            className={classNames({\n              [entryStyles.entryFavoriteButton]: true,\n              [entryStyles.favoriteButton]: true,\n              [entryStyles.favorited]: this.isFavorited()\n            })}\n          >\n            <i title=\"Favorite\">\n              <FontAwesomeIcon icon={faStar} />\n            </i>\n          </button>\n        </div>\n\n        <div className={entryStyles.roomSubtitle}>\n          <FormattedMessage id=\"entry.lobby\" />\n        </div>\n\n        <div className={entryStyles.center}>\n          <LobbyChatBox\n            occupantCount={this.occupantCount()}\n            discordBridges={this.discordBridges()}\n            onSendMessage={this.sendMessage}\n          />\n        </div>\n\n        {!this.state.waitingOnAudio &&\n          !this.props.entryDisallowed && (\n            <div className={entryStyles.buttonContainer}>\n              {!isMobileVR && (\n                <button\n                  onClick={e => {\n                    e.preventDefault();\n                    this.attemptLink();\n                  }}\n                  className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n                >\n                  <FormattedMessage id=\"entry.device-medium\" />\n                  <div className={entryStyles.buttonSubtitle}>\n                    <FormattedMessage\n                      id={isMobile ? \"entry.device-subtitle-mobile\" : \"entry.device-subtitle-desktop\"}\n                    />\n                  </div>\n                </button>\n              )}\n              <button\n                autoFocus\n                onClick={e => {\n                  e.preventDefault();\n\n                  if (promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType) {\n                    this.setState({ entering: true });\n                    this.props.hubChannel.sendEnteringEvent();\n\n                    const stateValue = promptForNameAndAvatarBeforeEntry ? \"profile\" : \"device\";\n                    this.pushHistoryState(\"entry_step\", stateValue);\n                  } else {\n                    this.handleForceEntry();\n                  }\n                }}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </button>\n\n              {configs.feature(\"enable_lobby_ghosts\") ? (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    this.setState({ watching: true });\n                  }}\n                  className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n                >\n                  <FormattedMessage id=\"entry.watch-from-lobby\" />\n                  <div className={entryStyles.buttonSubtitle}>\n                    <FormattedMessage id=\"entry.watch-from-lobby-subtitle\" />\n                  </div>\n                </a>\n              ) : (\n                <div />\n              )}\n            </div>\n          )}\n        {this.props.entryDisallowed &&\n          !this.state.waitingOnAudio && (\n            <div className={entryStyles.buttonContainer}>\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ watching: true });\n                }}\n                className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.entry-disallowed\" />\n                <div className={entryStyles.buttonSubtitle}>\n                  <FormattedMessage id=\"entry.entry-disallowed-subtitle\" />\n                </div>\n              </a>\n            </div>\n          )}\n        {this.state.waitingOnAudio && (\n          <div>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {!this.state.waitingOnAudio && (\n          <EntryStartPanel\n            hubChannel={this.props.hubChannel}\n            entering={this.state.entering}\n            onEnteringCanceled={this.onEnteringCanceled}\n          />\n        )}\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div\n          onClick={() => {\n            this.props.history.goBack();\n          }}\n          className={entryStyles.back}\n        >\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n              <div className={entryStyles.secondary} onClick={this.enterVR}>\n                <FormattedMessage id=\"entry.cardboard\" />\n              </div>\n            )}\n            {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n              <GenericEntryButton secondary={true} onClick={this.enterVR} />\n            )}\n            {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n              <DaydreamEntryButton secondary={true} onClick={this.enterDaydream} subtitle={null} />\n            )}\n            {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n              <TwoDEntryButton autoFocus={true} onClick={this.enter2D} />\n            )}\n          </div>\n        ) : (\n          <div className={entryStyles.audioLoader}>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderMicPanel = granted => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage id={granted ? \"audio.granted-title\" : \"audio.grant-title\"} />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage id={granted ? \"audio.granted-subtitle\" : \"audio.grant-subtitle\"} />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {granted ? (\n              <button autoFocus className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n              </button>\n            ) : (\n              <button autoFocus className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n              </button>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <button autoFocus className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n              <FormattedMessage id=\"audio.granted-next\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const subtitleId = isMobilePhoneOrVR ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    const muteOnEntry = this.props.store.state.preferences[\"muteMicOnEntry\"] || false;\n    return (\n      <div className=\"audio-setup-panel\">\n        <div\n          onClick={() => {\n            this.props.history.goBack();\n          }}\n          className={entryStyles.back}\n        >\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(isMobilePhoneOrVR || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <MicLevelWidget\n              scene={this.props.scene}\n              hasAudioTrack={!!this.state.audioTrack}\n              muteOnEntry={muteOnEntry}\n            />\n            <OutputLevelWidget />\n          </div>\n          {this.state.audioTrack && this.state.micDevices.length > 1 ? (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <select\n                className=\"audio-setup-panel__device-chooser__dropdown\"\n                value={this.selectedMicDeviceId()}\n                onChange={this.micDeviceChanged}\n              >\n                {this.state.micDevices.map(d => (\n                  <option key={d.deviceId} value={d.deviceId}>\n                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                    {d.label}\n                  </option>\n                ))}\n              </select>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__mute-container\">\n          <input\n            id=\"mute-on-entry\"\n            type=\"checkbox\"\n            onChange={() =>\n              this.props.store.update({\n                preferences: { muteMicOnEntry: !this.props.store.state.preferences[\"muteMicOnEntry\"] }\n              })\n            }\n            checked={this.props.store.state.preferences[\"muteMicOnEntry\"] || false}\n          />\n          <label htmlFor=\"mute-on-entry\">\n            <FormattedMessage id=\"entry.mute-on-entry\" />\n          </label>\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <button autoFocus className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n            <FormattedMessage id=\"audio.enter-now\" />\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    if (this.state.objectInfo && this.state.objectInfo.object3D) {\n      return true; // TODO: Get object info dialog to use history\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  render() {\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay(),\n      isGhost: configs.feature(\"enable_lobby_ghosts\") && (this.state.watching || (this.state.hide || this.props.hide)),\n      hide: this.state.hide || this.props.hide\n    };\n    if (this.props.hide || this.state.hide) return <div className={classNames(rootStyles)} />;\n\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const preload = this.props.showPreload;\n\n    const isLoading =\n      !preload &&\n      (!this.state.hideLoader || !this.state.didConnectToNetworkedScene) &&\n      !(this.props.showInAppBrowserDialog || this.props.showWebAssemblyDialog);\n\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    if (this.props.showOAuthDialog && !this.props.showInterstitialPrompt)\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            <OAuthDialog onClose={this.props.onCloseOAuthDialog} oauthInfo={this.props.oauthInfo} />\n          </div>\n        </IntlProvider>\n      );\n    if (isExited) return this.renderExitedPane();\n    if (isLoading && this.state.showPrefs) {\n      return (\n        <div>\n          <Loader\n            scene={this.props.scene}\n            finished={this.state.noMoreLoadingUpdates}\n            onLoaded={this.onLoadingFinished}\n          />\n          <PreferencesScreen\n            onClose={() => {\n              this.setState({ showPrefs: false });\n            }}\n            store={this.props.store}\n          />\n        </div>\n      );\n    }\n    if (isLoading) {\n      return (\n        <Loader scene={this.props.scene} finished={this.state.noMoreLoadingUpdates} onLoaded={this.onLoadingFinished} />\n      );\n    }\n    if (this.state.showPrefs) {\n      return (\n        <PreferencesScreen\n          onClose={() => {\n            this.setState({ showPrefs: false });\n          }}\n          store={this.props.store}\n        />\n      );\n    }\n\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const embed = this.props.embed;\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const enteredOrWatchingOrPreload = entered || watching || preload;\n    const baseUrl = `${location.protocol}//${location.host}${location.pathname}`;\n    const inEntryFlow = !!(\n      this.props.history &&\n      this.props.history.location.state &&\n      this.props.history.location.state.entry_step\n    );\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          message={this.state.autoExitMessage}\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_grant\" history={this.props.history}>\n            {this.renderMicPanel(false)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_granted\" history={this.props.history}>\n            {this.renderMicPanel(true)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </div>\n      ));\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.isInModalOrOverlay(),\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.isInModalOrOverlay()\n    });\n\n    // MobileVR browsers always show settings panel as an overlay when exiting immersive mode.\n    const showSettingsAsOverlay = entered && isMobileVR;\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const switchToInspectingObject = el => {\n      const src = el.components[\"media-loader\"].data.src;\n      this.setState({ objectInfo: el, objectSrc: src });\n      const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n      cameraSystem.uninspect();\n      cameraSystem.inspect(el.object3D, 1.5, true);\n    };\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n    const hasTopTip = (this.props.activeTips && this.props.activeTips.top) || this.state.showVideoShareFailed;\n\n    const clientInfoClientId = getClientInfoClientId(this.props.history.location);\n    const showClientInfo = !!clientInfoClientId;\n    const showObjectInfo = !!(this.state.objectInfo && this.state.objectInfo.object3D);\n\n    const discordBridges = this.discordBridges();\n    const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const hasEmbedPresence = this.hasEmbedPresence();\n    const hasDiscordBridges = discordBridges.length > 0;\n    const showBroadcastTip =\n      (hasDiscordBridges || (hasEmbedPresence && !this.props.embed)) && !this.state.broadcastTipDismissed;\n\n    const showInviteTip =\n      !hasTopTip &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !hasTopTip &&\n      !inEntryFlow &&\n      !this.props.store.state.activity.hasOpenedShare &&\n      this.occupantCount() <= 1;\n\n    const showChooseSceneButton =\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !showInviteTip &&\n      !this.state.showShareDialog &&\n      this.props.hubChannel &&\n      this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const streaming = this.state.isStreaming;\n    const streamingTip = streaming &&\n      this.state.showStreamingTip && (\n        <div className={classNames([styles.streamingTip])}>\n          <div className={classNames([styles.streamingTipAttachPoint])} />\n          <button\n            title=\"Dismiss\"\n            className={styles.streamingTipClose}\n            onClick={() => this.setState({ showStreamingTip: false })}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n\n          <div className={styles.streamingTipMessage}>\n            <FormattedMessage id=\"tips.streaming\" />\n          </div>\n        </div>\n      );\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            {this.state.dialog}\n            {preload &&\n              this.props.hub && (\n                <PreloadOverlay\n                  hubName={this.props.hub.name}\n                  hubScene={this.props.hub.scene}\n                  baseUrl={baseUrl}\n                  onLoadClicked={this.props.onPreloadLoadClicked}\n                />\n              )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => this.pushHistoryState()}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              history={this.props.history}\n              render={props => (\n                <AvatarEditor\n                  className={styles.avatarEditor}\n                  signedIn={this.state.signedIn}\n                  onSignIn={this.showSignInDialog}\n                  onSave={() => {\n                    if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                      this.props.history.goBack();\n                    } else {\n                      this.props.history.goBack();\n                      // We are returning to the media browser. Trigger an update so that the filter switches to\n                      // my-avatars, now that we've saved an avatar.\n                      this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\");\n                    }\n                    this.props.onAvatarSaved();\n                  }}\n                  onClose={() => this.props.history.goBack()}\n                  store={this.props.store}\n                  debug={avatarEditorDebug}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                />\n              )}\n            />\n            {showMediaBrowser && (\n              <MediaBrowser\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hubChannel={this.props.hubChannel}\n                onMediaSearchResultEntrySelected={(entry, selectAction) => {\n                  if (entry.type === \"room\") {\n                    this.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: entry.url,\n                      messageType: \"join-room\"\n                    });\n                  } else {\n                    this.props.onMediaSearchResultEntrySelected(entry, selectAction);\n                  }\n                }}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            <StateRoute\n              stateKey=\"entry_step\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => {\n                    if (this.props.forcedVREntryType) {\n                      this.pushHistoryState();\n                      this.handleForceEntry();\n                    } else {\n                      this.pushHistoryState(\"entry_step\", \"device\");\n                    }\n                  }}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_settings\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomSettingsDialog, {\n                  showRoomAccessSettings: this.props.hubChannel.can(\"update_hub_promotion\"),\n                  initialSettings: {\n                    name: this.props.hub.name,\n                    description: this.props.hub.description,\n                    member_permissions: this.props.hub.member_permissions,\n                    room_size: this.props.hub.room_size,\n                    allow_promotion: this.props.hub.allow_promotion\n                  },\n                  onChange: settings => this.props.hubChannel.updateHub(settings)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"close_room\"\n              history={this.props.history}\n              render={() => this.renderDialog(CloseRoomDialog, { onConfirm: () => this.props.hubChannel.closeHub() })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"support\"\n              history={this.props.history}\n              render={() => this.renderDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"create\"\n              history={this.props.history}\n              render={() => this.renderDialog(CreateObjectDialog, { onCreate: this.createObject })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"change_scene\"\n              history={this.props.history}\n              render={() => this.renderDialog(ChangeSceneDialog, { onChange: this.changeScene })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"avatar_url\"\n              history={this.props.history}\n              render={() => this.renderDialog(AvatarUrlDialog, { onChange: this.setAvatarUrl })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webvr\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebVRRecommendDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webrtc-screenshare\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebRTCScreenshareUnsupportedDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_info\"\n              history={this.props.history}\n              render={() => {\n                return this.renderDialog(RoomInfoDialog, {\n                  store: this.props.store,\n                  scene: this.props.hub.scene,\n                  hubName: this.props.hub.name,\n                  hubDescription: this.props.hub.description\n                });\n              }}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"feedback\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(FeedbackDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"help\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(HelpDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"tweet\"\n              history={this.props.history}\n              render={() => this.renderDialog(TweetDialog, { history: this.props.history, onClose: this.closeDialog })}\n            />\n            {showClientInfo && (\n              <ClientInfoDialog\n                clientId={clientInfoClientId}\n                onClose={this.closeDialog}\n                history={this.props.history}\n                presences={this.props.presences}\n                hubChannel={this.props.hubChannel}\n                showNonHistoriedDialog={this.showNonHistoriedDialog}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            {showObjectInfo && (\n              <ObjectInfoDialog\n                scene={this.props.scene}\n                el={this.state.objectInfo}\n                src={this.state.objectSrc}\n                pinned={this.state.objectInfo && this.state.objectInfo.components[\"networked\"].data.persistent}\n                hubChannel={this.props.hubChannel}\n                onPinChanged={() => switchToInspectingObject(this.state.objectInfo)}\n                onNavigated={el => switchToInspectingObject(el)}\n                onClose={() => {\n                  if (this.props.scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n                    this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n                  }\n                  this.setState({ isObjectListExpanded: false, objectInfo: null });\n                }}\n              />\n            )}\n            {((!enteredOrWatching && !this.state.isObjectListExpanded && !showObjectInfo && this.props.hub) ||\n              this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog\n                  entries={presenceLogEntries}\n                  presences={this.props.presences}\n                  hubId={this.props.hub.hub_id}\n                  history={this.props.history}\n                />\n                <div className={dialogBoxContentsClassNames}>{entryDialog}</div>\n              </div>\n            )}\n            {enteredOrWatchingOrPreload &&\n              this.props.hub && (\n                <PresenceLog\n                  inRoom={true}\n                  presences={this.props.presences}\n                  entries={presenceLogEntries}\n                  hubId={this.props.hub.hub_id}\n                  history={this.props.history}\n                />\n              )}\n            {entered &&\n              this.props.activeTips &&\n              this.props.activeTips.bottom &&\n              (!presenceLogEntries || presenceLogEntries.length === 0) &&\n              !showBroadcastTip && (\n                <Tip tip={this.props.activeTips.bottom} tipRegion=\"bottom\" pushHistoryState={this.pushHistoryState} />\n              )}\n            {enteredOrWatchingOrPreload &&\n              showBroadcastTip && (\n                <Tip\n                  tip={hasDiscordBridges ? \"discord\" : \"embed\"}\n                  broadcastTarget={discordSnippet}\n                  onClose={() => this.confirmBroadcastedRoom()}\n                />\n              )}\n            {enteredOrWatchingOrPreload &&\n              !this.state.objectInfo &&\n              !this.state.frozen && (\n                <InWorldChatBox\n                  discordBridges={discordBridges}\n                  onSendMessage={this.sendMessage}\n                  onObjectCreated={this.createObject}\n                  enableSpawning={entered}\n                  history={this.props.history}\n                />\n              )}\n            {this.state.frozen && (\n              <button className={styles.leaveButton} onClick={() => this.exit(\"left\")}>\n                <FormattedMessage id=\"entry.leave-room\" />\n              </button>\n            )}\n            {!this.state.frozen &&\n              !watching &&\n              !preload && (\n                <div\n                  className={classNames({\n                    [inviteStyles.inviteContainer]: true,\n                    [inviteStyles.inviteContainerBelowHud]: entered,\n                    [inviteStyles.inviteContainerInverted]: this.state.showShareDialog\n                  })}\n                >\n                  {!embed &&\n                    !streaming && (\n                      <button\n                        className={classNames({\n                          [inviteStyles.inviteButton]: true,\n                          [inviteStyles.hideSmallScreens]: this.occupantCount() > 1 && entered,\n                          [inviteStyles.inviteButtonLowered]: hasTopTip\n                        })}\n                        onClick={() => this.toggleShareDialog()}\n                      >\n                        <FormattedMessage id=\"entry.share-button\" />\n                      </button>\n                    )}\n                  {showChooseSceneButton && (\n                    <button\n                      className={classNames([styles.chooseSceneButton])}\n                      onClick={() => {\n                        this.props.performConditionalSignIn(\n                          () => this.props.hubChannel.can(\"update_hub\"),\n                          () => {\n                            showFullScreenIfAvailable();\n                            this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n                          },\n                          \"change-scene\"\n                        );\n                      }}\n                    >\n                      <FormattedMessage id=\"entry.change-scene\" />\n                    </button>\n                  )}\n\n                  {showInviteTip && (\n                    <div className={styles.inviteTip}>\n                      <div className={styles.inviteTipAttachPoint} />\n                      <FormattedMessage id={`entry.${isMobile ? \"mobile\" : \"desktop\"}.invite-tip`} />\n                    </div>\n                  )}\n                  {!embed &&\n                    this.occupantCount() > 1 &&\n                    !hasTopTip &&\n                    entered &&\n                    !streaming && (\n                      <button onClick={this.onMiniInviteClicked} className={inviteStyles.inviteMiniButton}>\n                        <span>\n                          {this.state.miniInviteActivated\n                            ? navigator.share\n                              ? \"sharing...\"\n                              : \"copied!\"\n                            : `${configs.SHORTLINK_DOMAIN}/` + this.props.hub.hub_id}\n                        </span>\n                      </button>\n                    )}\n                  {embed && (\n                    <a href={baseUrl} className={inviteStyles.enterButton} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"entry.open-in-window\" />\n                    </a>\n                  )}\n                  {this.state.showShareDialog && (\n                    <InviteDialog\n                      allowShare={!isMobileVR}\n                      entryCode={this.props.hub.entry_code}\n                      embedUrl={\n                        this.props.embedToken && !isMobilePhoneOrVR\n                          ? `${baseUrl}?embed_token=${this.props.embedToken}`\n                          : null\n                      }\n                      hasPush={hasPush}\n                      isSubscribed={\n                        this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed\n                      }\n                      onSubscribeChanged={() => this.onSubscribeChanged()}\n                      hubId={this.props.hub.hub_id}\n                      onClose={() => this.setState({ showShareDialog: false })}\n                    />\n                  )}\n                </div>\n              )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"invite\"\n              history={this.props.history}\n              render={() => (\n                <InviteDialog\n                  allowShare={!!navigator.share}\n                  entryCode={this.props.hub.entry_code}\n                  hubId={this.props.hub.hub_id}\n                  isModal={true}\n                  onClose={() => {\n                    this.props.history.goBack();\n                    exit2DInterstitialAndEnterVR();\n                  }}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"link\"\n              history={this.props.history}\n              render={() => (\n                <LinkDialog\n                  linkCode={this.state.linkCode}\n                  onClose={() => {\n                    this.state.linkCodeCancel();\n                    this.setState({ linkCode: null, linkCodeCancel: null });\n                    this.props.history.goBack();\n                  }}\n                />\n              )}\n            />\n            {streaming && (\n              <button\n                title=\"Exit Camera Mode\"\n                onClick={() => this.toggleStreamerMode(false)}\n                className={classNames([styles.cornerButton, styles.cameraModeExitButton])}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            )}\n            {streamingTip}\n\n            <ObjectList\n              scene={this.props.scene}\n              onExpand={(expand, uninspect) => {\n                if (expand) {\n                  this.setState({ isPresenceListExpanded: false, isObjectListExpanded: expand });\n                } else {\n                  this.setState({ isObjectListExpanded: expand });\n                }\n\n                if (uninspect) {\n                  this.setState({ objectInfo: null });\n                  if (this.props.scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n                    this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n                  }\n                }\n              }}\n              expanded={this.state.isObjectListExpanded && !this.state.isPresenceListExpanded}\n              onInspectObject={el => switchToInspectingObject(el)}\n            />\n\n            <PresenceList\n              history={this.props.history}\n              presences={this.props.presences}\n              sessionId={this.props.sessionId}\n              signedIn={this.state.signedIn}\n              email={this.props.store.state.credentials.email}\n              onSignIn={this.showSignInDialog}\n              onSignOut={this.signOut}\n              expanded={!this.state.isObjectListExpanded && this.state.isPresenceListExpanded}\n              onExpand={expand => {\n                if (expand) {\n                  this.setState({ isPresenceListExpanded: expand, isObjectListExpanded: false });\n                } else {\n                  this.setState({ isPresenceListExpanded: expand });\n                }\n              }}\n            />\n\n            {!streaming &&\n              !preload && (\n                <SettingsMenu\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  isStreaming={streaming}\n                  toggleStreamerMode={this.toggleStreamerMode}\n                  hubChannel={this.props.hubChannel}\n                  hubScene={this.props.hub && this.props.hub.scene}\n                  scene={this.props.scene}\n                  showAsOverlay={showSettingsAsOverlay}\n                  onCloseOverlay={() => exit2DInterstitialAndEnterVR(true)}\n                  performConditionalSignIn={this.props.performConditionalSignIn}\n                  showNonHistoriedDialog={this.showNonHistoriedDialog}\n                  showPreferencesScreen={() => {\n                    this.setState({ showPrefs: true });\n                  }}\n                  pushHistoryState={this.pushHistoryState}\n                />\n              )}\n            {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n            {enteredOrWatching && (\n              <div className={styles.topHud}>\n                <TwoDHUD.TopHUD\n                  scene={this.props.scene}\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  watching={this.state.watching}\n                  onWatchEnded={() => this.setState({ watching: false })}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  showVideoShareFailed={this.state.showVideoShareFailed}\n                  hideVideoShareFailedTip={() => this.setState({ showVideoShareFailed: false })}\n                  activeTip={this.props.activeTips && this.props.activeTips.top}\n                  isCursorHoldingPen={this.props.isCursorHoldingPen}\n                  hasActiveCamera={this.props.hasActiveCamera}\n                  onToggleMute={this.toggleMute}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_toggle_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                  isStreaming={streaming}\n                  showStreamingTip={this.state.showStreamingTip}\n                  hideStreamingTip={() => {\n                    this.setState({ showStreamingTip: false });\n                  }}\n                />\n                {!watching && !streaming ? (\n                  <UnlessFeature name=\"show_feedback_ui\">\n                    <div className={styles.nagCornerButton}>\n                      <button onClick={() => this.pushHistoryState(\"modal\", \"help\")} className={styles.helpButton}>\n                        <i>\n                          <FontAwesomeIcon icon={faQuestion} />\n                        </i>\n                      </button>\n                    </div>\n                  </UnlessFeature>\n                ) : (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.setState({ hide: true })}>\n                      <FormattedMessage id=\"hide-ui.prompt\" />\n                    </button>\n                  </div>\n                )}\n                {!watching &&\n                  !streaming && (\n                    <IfFeature name=\"show_feedback_ui\">\n                      <div className={styles.nagCornerButton}>\n                        <button onClick={() => this.pushHistoryState(\"modal\", \"feedback\")}>\n                          <FormattedMessage id=\"feedback.prompt\" />\n                        </button>\n                      </div>\n                    </IfFeature>\n                  )}\n\n                {!streaming && (\n                  <button\n                    onClick={() => this.toggleFavorited()}\n                    className={classNames({\n                      [entryStyles.favorited]: this.isFavorited(),\n                      [styles.inRoomFavoriteButton]: true\n                    })}\n                  >\n                    <i title=\"Favorite\">\n                      <FontAwesomeIcon icon={faStar} />\n                    </i>\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket, discordBridgesForPresences } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\n  \"update_hub\",\n  \"update_hub_promotion\",\n  \"update_roles\",\n  \"close_hub\",\n  \"mute_users\",\n  \"kick_users\"\n];\nconst VALID_PERMISSIONS =\n  HUB_CREATOR_PERMISSIONS +\n  [\"tweet\", \"spawn_camera\", \"spawn_drawing\", \"spawn_and_move_media\", \"pin_objects\", \"spawn_emoji\", \"fly\"];\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    if (!VALID_PERMISSIONS.includes(permission)) throw new Error(`Invalid permission name: ${permission}`);\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  canEnterRoom(hub) {\n    if (!hub) return false;\n    if (this.canOrWillIfCreator(\"update_hub\")) return true;\n\n    const roomEntrySlotCount = Object.values(this.presence.state).reduce((acc, { metas }) => {\n      const meta = metas[metas.length - 1];\n      const usingSlot = meta.presence === \"room\" || (meta.context && meta.context.entering);\n      return acc + (usingSlot ? 1 : 0);\n    }, 0);\n\n    // This now exists in room settings but a default is left here to support old reticulum servers\n    const DEFAULT_ROOM_SIZE = 24;\n    return roomEntrySlotCount < (hub.room_size !== undefined ? hub.room_size : DEFAULT_ROOM_SIZE);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n    this.presence = new Presence(channel);\n  };\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this._permissions = jwtDecode(token);\n    configs.setIsAdmin(this._permissions.postgrest_role === \"ret_admin\");\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    setTimeout(async () => {\n      const result = await this.fetchPermissions();\n      this.dispatchEvent(new CustomEvent(\"permissions-refreshed\", { detail: result }));\n    }, nextRefresh);\n  };\n\n  sendEnteringEvent = async () => {\n    this.channel.push(\"events:entering\", {});\n  };\n\n  sendEnteringCancelledEvent = async () => {\n    this.channel.push(\"events:entering_cancelled\", {});\n  };\n\n  sendEnteredEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  beginRecording() {\n    this.channel.push(\"events:begin_recording\", {});\n  }\n\n  endRecording() {\n    this.channel.push(\"events:end_recording\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  updateHub = settings => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", settings);\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", async () => {\n          this._signedIn = false;\n          const params = this.channel.params();\n          delete params.auth_token;\n          delete params.perms_token;\n          await this.fetchPermissions();\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getTwitterOAuthURL = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"oauth\", { type: \"twitter\" })\n        .receive(\"ok\", res => {\n          resolve(res.oauth_url);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  discordBridges = () => {\n    if (!this.presence || !this.presence.state) return [];\n    return discordBridgesForPresences(this.presence.state);\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => this.channel.push(\"mute\", { session_id: sessionId });\n  addOwner = sessionId => this.channel.push(\"add_owner\", { session_id: sessionId });\n  removeOwner = sessionId => this.channel.push(\"remove_owner\", { session_id: sessionId });\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    this.channel.push(\"block\", { session_id: sessionId });\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this.channel.push(\"unblock\", { session_id: sessionId });\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    const permsToken = await this.fetchPermissions();\n    NAF.connection.adapter.kick(sessionId, permsToken);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","import { SHAPE, FIT } from \"three-ammo/constants\";\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"shape-helper__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[shape-helper__trimesh]\", \"[shape-helper__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import \"./utils/configs\";\nimport { getAbsoluteHref } from \"./utils/media-url-utils\";\nimport { isValidSceneUrl } from \"./utils/scene-url-utils\";\nimport { messages } from \"./utils/i18n\";\nimport { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\nimport ducky from \"./assets/models/DuckyMesh.glb\";\n\nlet uiRoot;\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI, mediaSearchStore) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n  }\n\n  log = body => {\n    this.addToPresenceLog({ type: \"log\", body });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(/\\s+/);\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = async (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n\n    if (!entered && (!isGhost || command === \"duck\")) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const avatarRig = document.querySelector(\"#avatar-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = avatarRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (this.scene.systems[\"hubs-systems\"].characterController.fly) {\n          this.scene.systems[\"hubs-systems\"].characterController.enableFly(false);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        } else {\n          if (this.scene.systems[\"hubs-systems\"].characterController.enableFly(true)) {\n            this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n          }\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            avatarRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(getAbsoluteHref(location.href, ducky));\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems[\"hubs-systems\"].physicsSystem;\n        physicsSystem.setDebug(!physicsSystem.debugEnabled);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          if (await isValidSceneUrl(args[0])) {\n            err = this.hubChannel.updateScene(args[0]);\n            if (err === \"unauthorized\") {\n              this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to change the scene.\" });\n            }\n          } else {\n            this.addToPresenceLog({ type: \"log\", body: messages[\"invalid-scene-url\"] });\n          }\n        } else if (this.hubChannel.canOrWillIfCreator(\"update_hub\")) {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to rename this room.\" });\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(\"Capture unavailable.\");\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(\"Capture stopped.\");\n          } else {\n            this.log(\"Capture already stopped.\");\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(\"Capture already running.\");\n          } else {\n            captureSystem.start();\n            this.log(\"Capture started.\");\n          }\n        }\n        break;\n      case \"audiomode\":\n        if (window.APP.store.state.preferences.audioOutputMode !== \"audio\") {\n          window.APP.store.state.preferences.audioOutputMode = \"audio\";\n          this.log(\"Positional Audio disabled.\");\n        } else {\n          window.APP.store.state.preferences.audioOutputMode = \"panner\";\n          this.log(\"Positional Audio enabled.\");\n        }\n        break;\n      case \"monitoring\":\n        if (window.APP.store.state.preferences.enableMonitoring) {\n          window.APP.store.state.preferences.enableMonitoring = false;\n          this.log(\"Monitoring disabled.\");\n        } else {\n          window.APP.store.state.preferences.enableMonitoring = true;\n          this.log(\"Monitoring enabled.\");\n        }\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\nimport { hackyMobileSafariTest } from \"./utils/detect-touchscreen\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst forceEnableTouchscreen = hackyMobileSafariTest();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  exit2DInterstitialAndEnterVR,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { pushHistoryState } from \"./utils/history\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, availableVREntryTypes, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.availableVREntryTypes = availableVREntryTypes;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n    this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n    this.avatarRig = document.getElementById(\"avatar-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.rightCursorController.components[\"cursor-controller\"].enabled = false;\n      this.leftCursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR, muteOnEntry) => {\n    document.getElementById(\"viewing-camera\").removeAttribute(\"scene-preview-camera\");\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      await exit2DInterstitialAndEnterVR(true);\n    }\n\n    const waypointSystem = this.scene.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.moveToSpawnPoint();\n\n    if (isMobile || forceEnableTouchscreen || qsTruthy(\"mobile\")) {\n      this.avatarRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupKicking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      this.scene.addState(\"entered\");\n      return;\n    }\n\n    if (mediaStream) {\n      await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.rightCursorController.components[\"cursor-controller\"].enabled = true;\n    this.leftCursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEnteredEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    // Bump stored entry count after 30s\n    setTimeout(() => this.store.bumpEntryCount(), 30000);\n\n    this.scene.addState(\"entered\");\n\n    if (muteOnEntry) {\n      this.scene.emit(\"action_mute\");\n    }\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    this.scene.exitVR();\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    this.scene.parentNode.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n\n    // Explict user action changed avatar or updated existing avatar.\n    this.scene.addEventListener(\"avatar_updated\", () => this._setPlayerInfoFromProfile(true));\n\n    // Store updates can occur to avatar id in cases like error, auth reset, etc.\n    this.store.addEventListener(\"statechanged\", () => this._setPlayerInfoFromProfile());\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.avatarRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async (force = false) => {\n    const avatarId = this.store.state.profile.avatarId;\n    if (!force && this._lastFetchedAvatarId === avatarId) return; // Avoid continually refetching based upon state changing\n\n    this._lastFetchedAvatarId = avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.avatarRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          this._unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _pinElement = async el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"Pin failed for unknown reason\", e);\n      }\n    }\n  };\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin\n      ? () => this._pinElement(el)\n      : async () => {\n          await this._unpinElement(el);\n        };\n\n    this.performConditionalSignIn(() => this.hubChannel.signedIn, action, pin ? \"pin\" : \"unpin\", () => {\n      // UI pins/un-pins the entity optimistically, so we undo that here.\n      // Note we have to disable the sign in flow here otherwise this will recurse.\n      this._disableSignInOnPinAction = true;\n      el.setAttribute(\"pinnable\", \"pinned\", !pin);\n      this._disableSignInOnPinAction = false;\n    });\n  };\n\n  _unpinElement = el => {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      if (!this.hubChannel.can(\"spawn_and_move_media\")) return;\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        null,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    const handlePinEvent = (e, pinned) => {\n      if (this._disableSignInOnPinAction) return;\n      const el = e.detail.el;\n\n      if (NAF.utils.isMine(el)) {\n        this._signInAndPinOrUnpinElement(e.detail.el, pinned);\n      }\n    };\n\n    this.scene.addEventListener(\"pinned\", e => handlePinEvent(e, true));\n    this.scene.addEventListener(\"unpinned\", e => handlePinEvent(e, false));\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_invite\", () => {\n      handleExitTo2DInterstitial(false, () => this.history.goBack());\n      pushHistoryState(this.history, \"overlay\", \"invite\");\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        \"kick-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        \"mute-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (\n        (e.target.matches(\"input, textarea\") || e.target.contentEditable === \"true\") &&\n        document.activeElement === e.target\n      )\n        return;\n\n      // Never paste into scene if dialog is open\n      const uiRoot = document.querySelector(\".ui-root\");\n      if (uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\")) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n\n      let url = e.dataTransfer.getData(\"url\");\n\n      if (!url) {\n        // Sometimes dataTransfer text contains a valid URL, so try for that.\n        try {\n          url = new URL(e.dataTransfer.getData(\"text\")).href;\n        } catch (e) {\n          // Nope, not this time.\n        }\n      }\n\n      const files = e.dataTransfer.files;\n\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async (constraints, isDisplayMedia) => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      let newStream;\n\n      try {\n        if (isDisplayMedia) {\n          newStream = await navigator.mediaDevices.getDisplayMedia(constraints);\n        } else {\n          newStream = await navigator.mediaDevices.getUserMedia(constraints);\n        }\n      } catch (e) {\n        isHandlingVideoShare = false;\n        this.scene.emit(\"share_video_failed\");\n        return;\n      }\n\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: isDisplayMedia ? \"screen\" : \"camera\" });\n      this.scene.addState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream(\n        {\n          video: {\n            // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n            // other than your current monitor that has a different aspect ratio.\n            width: 720 * (screen.width / screen.height),\n            height: 720,\n            frameRate: 30\n          },\n          audio: true\n        },\n        true\n      );\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", async () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", async e => {\n      // TODO spawn in space when no rights\n      const { entry, selectAction } = e.detail;\n      if (selectAction !== \"spawn\") return;\n\n      const delaySpawn = isIn2DInterstitial() && !isMobileVR;\n      await exit2DInterstitialAndEnterVR();\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      if (delaySpawn) {\n        setTimeout(() => {\n          spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n        }, 3000);\n      } else {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      exit2DInterstitialAndEnterVR();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      if (!this.hubChannel.can(\"spawn_camera\")) return;\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n        this.scene.removeState(\"camera\");\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n        this.scene.addState(\"camera\");\n      }\n\n      // Need to wait a frame so camera is registered with system.\n      setTimeout(() => this.scene.emit(\"camera_toggled\"));\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"photo\"));\n    this.scene.addEventListener(\"video_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"video\"));\n  };\n\n  _spawnAvatar = () => {\n    this.avatarRig.setAttribute(\"networked\", \"template: #remote-avatar; attachTemplateToLocal: false;\");\n    this.avatarRig.setAttribute(\"networked-avatar\", \"\");\n    this.avatarRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#avatar-pov-node\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(\n      audioEl.captureStream\n        ? audioEl.captureStream().getAudioTracks()[0]\n        : audioEl.mozCaptureStream\n          ? audioEl.mozCaptureStream().getAudioTracks()[0]\n          : null\n    );\n    await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n    const mediaVersion = components[\"media-loader\"].data.version;\n    const mediaContentSubtype = components[\"media-loader\"].data.contentSubtype;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, version: mediaVersion, contentSubtype: mediaContentSubtype, id: networkId };\n\n    if (components[\"media-pdf\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pdf\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n    this._updateInvaders = this._updateInvaders.bind(this);\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n    this.alwaysHidden = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  // Allow external callers to tell this invader to always hide this element, regardless of invasion state\n  setAlwaysHidden(alwaysHidden) {\n    this.alwaysHidden = alwaysHidden;\n    this.applyInvasionToMesh(this.invading);\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    this.applyInvasionToMesh(invading);\n    this.invading = invading;\n  },\n\n  disable() {\n    if (this.invading) {\n      this.applyInvasionToMesh(false);\n    }\n\n    this.disabled = true;\n    this.updateBoneVisibility();\n  },\n\n  enable() {\n    this.disabled = false;\n    this.applyInvasionToMesh(this.invading);\n    this.updateBoneVisibility();\n  },\n\n  updateBoneVisibility() {\n    // HACK, bone visibility typically takes a tick to update, but since we want to be able\n    // to have enable() and disable() be reflected this frame, we need to do it immediately.\n    this.el.components[\"bone-visibility\"] && this.el.components[\"bone-visibility\"].tick();\n  },\n\n  applyInvasionToMesh(invading) {\n    if (this.disabled) return;\n\n    if (this.targetMesh && this.targetMesh.material && !this.alwaysHidden) {\n      forEachMaterial(this.targetMesh, material => {\n        material.opacity = invading ? this.data.invadingOpacity : 1;\n        material.transparent = invading;\n      });\n    } else {\n      this.el.object3D.visible = !invading && !this.alwaysHidden;\n    }\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","import { paths } from \"./userinput/paths\";\nconst qs = new URLSearchParams(location.search);\nconst IDLE_TIMEOUT_MS = (parseInt(qs.get(\"idle_timeout\"), 10) || 2 * 60 * 60) * 1000;\nconst INPUT_CHECK_INTERVAL_MS = 1000;\n\nconst CHARACTER_ACCELERATION_PATH = paths.actions.characterAcceleration;\nconst BASIC_ACTIVITY_PATHS = [\n  paths.actions.startGazeTeleport,\n  paths.actions.rightHand.startTeleport,\n  paths.actions.leftHand.startTeleport,\n  paths.actions.snapRotateRight,\n  paths.actions.snapRotateLeft,\n  paths.actions.cursor.right.grab,\n  paths.actions.cursor.left.grab,\n  paths.actions.rightHand.grab,\n  paths.actions.leftHand.grab,\n  paths.actions.angularVelocity\n];\n\nAFRAME.registerSystem(\"idle-detector\", {\n  init() {\n    this.resetTimeout = this.resetTimeout.bind(this);\n    this.idleTimeout = null;\n    this.lastInputCheck = 0;\n\n    const events = [\"click\", \"pointerdown\", \"touchstart\", \"keyup\"];\n\n    for (const event of events) {\n      window.addEventListener(event, this.resetTimeout);\n    }\n\n    this.resetTimeout();\n  },\n  resetTimeout() {\n    if (this.idleTimeout) clearTimeout(this.idleTimeout);\n    this.idleTimeout = setTimeout(this.onIdleTimeout, IDLE_TIMEOUT_MS);\n    window.dispatchEvent(new CustomEvent(\"activity_detected\"));\n  },\n  onIdleTimeout() {\n    window.dispatchEvent(new CustomEvent(\"idle_detected\"));\n  },\n  tick(time) {\n    if (time - this.lastInputCheck < INPUT_CHECK_INTERVAL_MS) return;\n\n    const userinput = this.el.systems.userinput;\n\n    let basicActivity = false;\n    for (const activityPath of BASIC_ACTIVITY_PATHS) {\n      basicActivity = basicActivity || !!userinput.get(activityPath);\n    }\n\n    const characterAcceleration = userinput.get(CHARACTER_ACCELERATION_PATH);\n\n    const active =\n      basicActivity ||\n      !!(characterAcceleration && characterAcceleration[0]) ||\n      !!(characterAcceleration && characterAcceleration[1]);\n\n    if (active) {\n      this.resetTimeout();\n    }\n  },\n  remove() {}\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst CAMERA_UPDATE_FRAME_DELAY = 10; // Update one camera every N'th frame\n\n// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n    this.cameraUpdateCount = 0;\n    this.ticks = 0;\n    this.updateMyCamera = this.updateMyCamera.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      const playerModelEl = document.querySelector(\"#avatar-rig .model\");\n      playerModelEl.addEventListener(\"model-loading\", () => (this.playerHead = null));\n      playerModelEl.addEventListener(\"model-loaded\", this.updatePlayerHead.bind(this));\n      this.updatePlayerHead();\n      this.updateMyCamera();\n    });\n  },\n\n  updatePlayerHead() {\n    const headEl = document.getElementById(\"avatar-head\");\n    this.playerHead = headEl && headEl.object3D;\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  getMyCamera() {\n    return this.myCamera;\n  },\n\n  ifMyCameraRenderingViewfinder(f) {\n    if (!this.myCamera) return;\n\n    const myCameraTool = this.myCamera.components[\"camera-tool\"];\n\n    if (myCameraTool && myCameraTool.showCameraViewfinder && myCameraTool.camera) {\n      f(myCameraTool);\n    }\n  },\n\n  updateMyCamera() {\n    if (!this.cameraEls) {\n      this.myCamera = null;\n    } else {\n      this.myCamera = this.cameraEls.find(NAF.utils.isMine);\n    }\n  },\n\n  tick() {\n    this.ticks++;\n\n    // We update at most one camera viewfinder per frame.\n    if (this.ticks % CAMERA_UPDATE_FRAME_DELAY === 0) {\n      if (this.cameraEls.length == 0) return;\n\n      this.cameraUpdateCount++;\n      this.cameraEls[this.cameraUpdateCount % this.cameraEls.length].components[\"camera-tool\"].updateViewfinder();\n    }\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (() => {\n  let uiRoot = null;\n\n  return function() {\n    if (!uiRoot) {\n      uiRoot = document.querySelector(\".ui-root\");\n    }\n\n    return uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\");\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.buttonMiddle = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    canvas.addEventListener(\"contextmenu\", e => {\n      if (e.button === 2) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    });\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent, { passive: false }));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent, { passive: false }));\n\n    document.addEventListener(\n      \"wheel\",\n      e => {\n        // Do not capture wheel events if they are being sent to an modal/overlay\n        if (!isInModal() && !window.APP.preferenceScreenIsVisible) {\n          e.preventDefault();\n        }\n      },\n      { passive: false }\n    );\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const middle = event.button === 1;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mousedown\" && middle) {\n      this.mouseDownMiddleThisFrame = true;\n      this.buttonMiddle = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    } else if (event.type === \"mouseup\" && middle) {\n      if (this.mouseDownMiddleThisFrame) {\n        return false;\n      }\n      this.buttonMiddle = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n    this.mouseDownMiddleThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.buttonMiddle, this.buttonMiddle);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName) &&\n            !(document.activeElement && document.activeElement.contentEditable === \"true\")) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          (e.key === \"Tab\" && !(window.APP && window.APP.preferenceScreenIsVisible))\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        const key = event.key.toLowerCase();\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      } else {\n        setTimeout(() => {\n          copySittingToStandingTransform(matrix);\n        }, 1000); // Try again when the display is ready\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nimport { waitForDOMContentLoaded } from \"../../../utils/async-utils\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    waitForDOMContentLoaded().then(() => {\n      this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n      this.headObject3D = document.querySelector(\"#avatar-pov-node\").object3D;\n    });\n\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    if (!this.rayObject || !this.headObject3D) return;\n\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nconst m = new THREE.Matrix4();\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nconst m = new THREE.Matrix4();\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.orientation.copy(this.rayObjectRotation);\n\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion();\nconst m = new THREE.Matrix4();\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"OpenVR Cosmos\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"trigger\", buttonId: 0 },\n        { name: \"grip\", buttonId: 1 },\n        { name: \"primary\", buttonId: 2 },\n        { name: \"secondary\", buttonId: 3 },\n        { name: \"joystick\", buttonId: 4 },\n        { name: \"bumper\", buttonId: 5 }\n      ];\n      this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    } else if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 15);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    } else if (this.gamepad.axes.length === 4) {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 },\n        { name: \"secondary\", buttonId: 4 },\n        { name: \"joystick\", buttonId: 5 },\n        { name: \"index\", buttonId: 6 },\n        { name: \"middle\", buttonId: 7 },\n        { name: \"ring\", buttonId: 8 },\n        { name: \"pinky\", buttonId: 9 }\n      ];\n      this.axisMap = [\n        { name: \"touchX\", axisId: 0 },\n        { name: \"touchY\", axisId: 1 },\n        { name: \"joyX\", axisId: 2 },\n        { name: \"joyY\", axisId: 3 }\n      ];\n    } else {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    }\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    const gamepads = navigator.getGamepads();\n    if (gamepads.length < this.gamepad.index + 1) {\n      //workaround for: https://bugzilla.mozilla.org/show_bug.cgi?id=1568076\n      return;\n    }\n    this.gamepad = gamepads[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst m = new THREE.Matrix4();\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n  }\n\n  write(frame) {\n    if (!this.hasPolyfill || !this.vrDisplay || !this.frameData) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = difference(hmdEuler.x, this.prevX);\n    const dY = difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME NAF */\nimport { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { canMove } from \"../utils/permissions-utils\";\nimport { isTagged } from \"../components/tags\";\n\nfunction findHandCollisionTargetForHand(bodyHelper) {\n  const physicsSystem = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n\n  const handCollisions = physicsSystem.getCollisions(bodyHelper.uuid);\n  if (handCollisions) {\n    for (let i = 0; i < handCollisions.length; i++) {\n      const bodyData = physicsSystem.bodyUuidToData.get(handCollisions[i]);\n      const object3D = bodyData && bodyData.object3D;\n      if (object3D && isTagged(object3D.el, \"isHandCollisionTarget\")) {\n        return object3D.el;\n      }\n    }\n  }\n\n  return null;\n}\n\nconst notRemoteHoverTargets = new Map();\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  if (notRemoteHoverTargets.get(object3D)) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\nAFRAME.registerComponent(\"is-not-remote-hover-target\", {\n  init: function() {\n    notRemoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    notRemoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nexport function isUI(el) {\n  return isTagged(el, \"singleActionButton\") || isTagged(el, \"holdableButton\");\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection, left) {\n    if (!left) {\n      this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      return this.rightRemoteHoverTarget;\n    }\n\n    this.leftRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n    return this.leftRemoteHoverTarget;\n  },\n\n  isHeld(el) {\n    return (\n      this.state.leftHand.held === el ||\n      this.state.rightHand.held === el ||\n      this.state.rightRemote.held === el ||\n      this.state.leftRemote.held === el\n    );\n  },\n\n  release(el) {\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.leftHand.hovered === el) {\n      this.state.leftHand.hovered = null;\n    }\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.rightHand.hovered === el) {\n      this.state.rightHand.hovered = null;\n    }\n    if (this.state.rightRemote.held === el) {\n      this.state.rightRemote.held = null;\n    }\n    if (this.state.rightRemote.hovered === el) {\n      this.state.rightRemote.hovered = null;\n    }\n    if (this.state.leftRemote.held === el) {\n      this.state.leftRemote.held = null;\n    }\n    if (this.state.leftRemote.hovered === el) {\n      this.state.leftRemote.hovered = null;\n    }\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  getLeftRemoteHoverTarget() {\n    return this.leftRemoteHoverTarget;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.right.grab,\n        dropPath: paths.actions.cursor.right.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      },\n      leftRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.left.grab,\n        dropPath: paths.actions.cursor.left.drop,\n        hoverFn: this.getLeftRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    waitForDOMContentLoaded().then(() => {\n      this.options.leftHand.entity = document.getElementById(\"player-left-controller\");\n      this.options.rightHand.entity = document.getElementById(\"player-right-controller\");\n      this.options.rightRemote.entity = document.getElementById(\"right-cursor\");\n      this.options.leftRemote.entity = document.getElementById(\"left-cursor\");\n      this.ready = true;\n    });\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(\n        this,\n        options.entity.components[\"body-helper\"] && options.entity.components[\"body-helper\"]\n          ? options.entity.components[\"body-helper\"]\n          : null\n      );\n      if (state.hovered) {\n        const entity = state.hovered;\n        const isFrozen = this.el.is(\"frozen\");\n        const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n        if (\n          isTagged(entity, \"isHoldable\") &&\n          userinput.get(options.grabPath) &&\n          (isFrozen || !isPinned) &&\n          canMove(entity)\n        ) {\n          state.held = entity;\n        }\n      }\n    }\n  },\n\n  tick2() {\n    if (!this.el.is(\"entered\")) {\n      return;\n    }\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n    Object.assign(this.previousState.leftRemote, this.state.leftRemote);\n\n    if (this.options.leftHand.entity.object3D.visible && !this.state.leftRemote.held) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n    if (!this.state.leftHand.held && !this.state.leftHand.hovered) {\n      this.tickInteractor(this.options.leftRemote, this.state.leftRemote);\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      const rightCursorController = document.getElementById(\"right-cursor-controller\");\n\n      if (rightCursorController && rightCursorController.components) {\n        this.cursorController = rightCursorController.components[\"cursor-controller\"];\n      }\n    }\n\n    if (!this.camera) {\n      const viewingCamera = document.getElementById(\"viewing-camera\");\n\n      if (viewingCamera && viewingCamera.components) {\n        this.camera = viewingCamera.components.camera.camera;\n      }\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft && this.cursorController) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const isInteractable =\n        intersection &&\n        intersection.object.el.matches(\n          \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n        );\n      const isPinned =\n        remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n      const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n      const template =\n        remoteHoverTarget &&\n        remoteHoverTarget.components.networked &&\n        remoteHoverTarget.components.networked.data.template;\n      const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n      const isStaticMedia = template && template === \"#static-media\";\n      this.clickedOnAnything =\n        (isInteractable &&\n          (isFrozen || !isPinned) &&\n          (remoteHoverTarget && canMove(remoteHoverTarget)) &&\n          !isStaticControlledMedia &&\n          !isStaticMedia) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n      frame.setValueType(paths.device.smartMouse.shouldMoveCamera, true);\n    }\n\n    if (this.camera) {\n      const coords = frame.get(paths.device.mouse.coords);\n      frame.setPose(\n        paths.device.smartMouse.cursorPose,\n        calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n      );\n    }\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = (() => {\n  let playerCamera;\n\n  return function() {\n    if (!playerCamera) {\n      playerCamera = document.getElementById(\"viewing-camera\").components.camera.camera;\n    }\n\n    return playerCamera;\n  };\n})();\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const isInteractable =\n    intersection &&\n    intersection.object.el.matches(\n      \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n    );\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  const isPinned =\n    remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n  const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n\n  const template =\n    remoteHoverTarget && remoteHoverTarget.components.networked && remoteHoverTarget.components.networked.data.template;\n  const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n  const isStaticMedia = template && template === \"#static-media\";\n  return (\n    isInteractable &&\n    (isFrozen || !isPinned) &&\n    !isStaticControlledMedia &&\n    !isStaticMedia &&\n    (remoteHoverTarget && canMove(remoteHoverTarget))\n  );\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 100);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          getPlayerCamera(),\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 2;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0] / window.innerWidth, delta[1] / window.innerHeight);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n\n    frame.setValueType(path.anything, this.assignments.length !== 0);\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  copyVec2IfTrue: function(frame, src, dest) {\n    if (frame.get(src.bool)) {\n      const v2 = frame.get(src.value);\n      frame.setVector2(dest.value, v2[0], v2[1]);\n    }\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.getElementById(\"viewing-camera\").components.camera.camera;\n      }\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  },\n  diff_vec2: function diff_vec2(frame, src, dest, state = [0, 0]) {\n    const v2 = frame.get(src.value);\n    if (v2) {\n      frame.setVector2(dest.value, v2[0] - state[0], v2[1] - state[1]);\n      state[0] = v2[0];\n      state[1] = v2[1];\n    }\n    return state;\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\nconst startInspectingViaMouse = \"/vars/mouse-and-keyboard/startInspectingViaMouse\";\nconst startInspectingViaKeyboard = \"/vars/mouse-and-keyboard/startInspectingViaKeyboard\";\nconst stopInspectingViaMouse = \"/vars/mouse-and-keyboard/stopInspectingViaMouse\";\nconst stopInspectingViaKeyboardEscape = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboardEscape\";\nconst stopInspectingViaKeyboardFocusRelease = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboardFocusRelease\";\n\nconst qs = new URLSearchParams(location.search);\nconst inspectZoomSpeed = parseFloat(qs.get(\"izs\")) || -10.0;\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.always(false)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.dCharSpeed },\n      xform: xforms.scale(-0.3)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"g\") },\n      dest: { value: paths.actions.toggleFly },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"`\") },\n      dest: { value: paths.actions.toggleUI },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.coords },\n      dest: { value: \"/var/mouseCoordsDelta\" },\n      xform: xforms.diff_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsDelta\" },\n      dest: { x: \"/var/mouseCoordsX\", y: \"/var/mouseCoordsY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsX\" },\n      dest: { value: \"/var/mouseCoordsXScaled\" },\n      xform: xforms.scale(-Math.PI)\n    },\n    {\n      src: { value: \"/var/mouseCoordsY\" },\n      dest: { value: \"/var/mouseCoordsYScaled\" },\n      xform: xforms.scale((2 * Math.PI) / 3)\n    },\n    {\n      src: { x: \"/var/mouseCoordsXScaled\", y: \"/var/mouseCoordsYScaled\" },\n      dest: { value: \"/var/actions/cameraDelta\" },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: \"/var/actions/cameraDelta\",\n        bool: paths.device.smartMouse.shouldMoveCamera\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.copyVec2IfTrue\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/control+1\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/control+2\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/control+3\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/control+4\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/control+5\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/control+6\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/control+7\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/control+8\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"o\") },\n      dest: { value: paths.actions.nextCameraMode },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/notcontrol+1\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+1\" },\n      dest: { value: paths.actions.spawnEmoji0 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/notcontrol+2\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+2\" },\n      dest: { value: paths.actions.spawnEmoji1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/notcontrol+3\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+3\" },\n      dest: { value: paths.actions.spawnEmoji2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/notcontrol+4\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+4\" },\n      dest: { value: paths.actions.spawnEmoji3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/notcontrol+5\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+5\" },\n      dest: { value: paths.actions.spawnEmoji4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/notcontrol+6\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+6\" },\n      dest: { value: paths.actions.spawnEmoji5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/notcontrol+7\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notcontrol+7\" },\n      dest: { value: paths.actions.spawnEmoji6 },\n      xform: xforms.rising\n    }\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.noop,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy,\n      priority: 1\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: startInspectingViaMouse },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: startInspectingViaKeyboard },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: [startInspectingViaMouse, startInspectingViaKeyboard],\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.any,\n      priority: 201\n    }\n  ],\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.3),\n      priority: 1\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/control+1\" },\n      xform: xforms.copyIfTrue,\n      priority: 1001\n    },\n    {\n      src: { value: \"/var/control+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/control+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/control+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/control+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/control+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/control+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/control+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/control+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/control+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.keyboard.key(\"space\") },\n      dest: { value: k(\"space-rising\") },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        paths.device.keyboard.key(\"w\"),\n        paths.device.keyboard.key(\"a\"),\n        paths.device.keyboard.key(\"s\"),\n        paths.device.keyboard.key(\"d\"),\n        paths.device.keyboard.key(\"q\"),\n        paths.device.keyboard.key(\"e\"),\n        k(\"space-rising\")\n      ],\n      dest: { value: stopInspectingViaKeyboardEscape },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(inspectZoomSpeed),\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.movementXY },\n      dest: { x: \"/var/movementX\", y: \"/var/movementY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { bool: paths.device.mouse.buttonMiddle, value: \"/var/movementY\" },\n      dest: { value: \"/var/middle-mouse-move-y\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/middle-mouse-move-y\" },\n      dest: { value: paths.actions.inspectPanY },\n      xform: xforms.scale(0.001)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: stopInspectingViaKeyboardFocusRelease },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: stopInspectingViaMouse },\n      xform: xforms.falling,\n      priority: 101\n    },\n    {\n      src: [stopInspectingViaMouse, stopInspectingViaKeyboardEscape, stopInspectingViaKeyboardFocusRelease],\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.any\n    }\n  ],\n  [sets.debugUserInput]: [\n    {\n      src: { value: paths.device.keyboard.key(\"m\") },\n      dest: { value: paths.actions.debugUserInput.describeCurrentMasks },\n      xform: xforms.rising,\n      priority: 10\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(Math.PI)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(Math.PI / 2)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.touchscreen.anything },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(0.025),\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst leftCursorDrop2 = `${name}left/cursorDrop2`;\nconst leftCursorDrop1 = `${name}left/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\nconst upperButtons = `${name}buttons/upper`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: [leftButton(\"y\").pressed, rightButton(\"b\").pressed],\n      dest: { value: upperButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.nextCameraMode\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rightButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.toggleFly\n      },\n      xform: xforms.rising\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [\n        leftButton(\"y\").pressed,\n        leftButton(\"x\").pressed,\n        leftButton(\"trigger\").pressed,\n        leftButton(\"grip\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rightButton(\"b\").pressed,\n        rightButton(\"a\").pressed,\n        rightButton(\"trigger\").pressed,\n        rightButton(\"grip\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftCursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lJoyYDeadzoned = v(\"left/joyY/deadzoned\");\nconst lTouch = v(\"left/touch\");\nconst lTouchScaled = v(\"left/touch/scaled\");\nconst lTouchXScaled = v(\"left/touchX/scaled\");\nconst lTouchY = v(\"left/touchY\");\nconst lTouchYScaled = v(\"left/touchY/scaled\");\nconst lDpadNorth1 = v(\"left/dpad/north1\");\nconst lDpadSouth1 = v(\"left/dpad/south1\");\nconst lDpadEast1 = v(\"left/dpad/east1\");\nconst lDpadWest1 = v(\"left/dpad/west1\");\nconst lDpadCenter1 = v(\"left/dpad/center1\");\nconst lDpadNorth2 = v(\"left/dpad/north2\");\nconst lDpadSouth2 = v(\"left/dpad/south2\");\nconst lDpadEast2 = v(\"left/dpad/east2\");\nconst lDpadWest2 = v(\"left/dpad/west2\");\nconst lDpadCenter2 = v(\"left/dpad/center2\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst touchCharacterAcceleration = v(\"left/touch/characterAcceleration\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\nconst leftUndoDrawing = v(\"left/drawing/undo\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rTouch = v(\"right/touch\");\nconst rJoy = v(\"right/joy\");\nconst rJoyYDeadzoned = v(\"right/joyY/deadzoned\");\nconst rDpadNorth1 = v(\"right/dpad/north1\");\nconst rDpadSouth1 = v(\"right/dpad/south1\");\nconst rDpadEast1 = v(\"right/dpad/east1\");\nconst rDpadWest1 = v(\"right/dpad/west1\");\nconst rDpadCenter1 = v(\"right/dpad/center\");\nconst rDpadNorth2 = v(\"right/dpad/north2\");\nconst rDpadSouth2 = v(\"right/dpad/south2\");\nconst rDpadEast2 = v(\"right/dpad/east2\");\nconst rDpadWest2 = v(\"right/dpad/west2\");\nconst rDpadCenter2 = v(\"right/dpad/center2\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst rightCursorDrop1 = v(\"right/cursorDrop1\");\nconst rightCursorDrop2 = v(\"right/cursorDrop2\");\nconst leftCursorDrop1 = v(\"left/cursorDrop1\");\nconst leftCursorDrop2 = v(\"left/cursorDrop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\nconst rightUndoDrawing = v(\"right/drawing/undo\");\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\nconst ensureFrozenViaButtons = v(\"buttons/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\nconst thawViaButtons = v(\"buttons/thaw\");\n\nconst freezeButtons = v(\"buttons/freeze\");\nconst inspectButtons = v(\"buttons/inspect\");\n\nconst rSnapRight1 = v(\"right/snap-right\");\nconst rSnapLeft1 = v(\"right/snap-left\");\nconst rSnapRight2 = v(\"right/snap-right2\");\nconst rSnapLeft2 = v(\"right/snap-left2\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard, ensureFrozenViaButtons],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard, thawViaButtons],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"touchX\"),\n        y: lAxis(\"touchY\")\n      },\n      dest: {\n        value: lTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lTouch\n      },\n      dest: {\n        north: lDpadNorth1,\n        south: lDpadSouth1,\n        east: lDpadEast1,\n        west: lDpadWest1,\n        center: lDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"touchX\"),\n        y: rAxis(\"touchY\")\n      },\n      dest: {\n        value: rTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rTouch\n      },\n      dest: {\n        north: rDpadNorth1,\n        south: rDpadSouth1,\n        east: rDpadEast1,\n        west: rDpadWest1,\n        center: rDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth2,\n        south: rDpadSouth2,\n        east: rDpadEast2,\n        west: rDpadWest2,\n        center: rDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth1, rDpadSouth1, rDpadCenter1],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast1\n      },\n      dest: {\n        value: rSnapRight1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadEast2\n      },\n      dest: {\n        value: rSnapRight2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight1, rSnapRight2, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest1\n      },\n      dest: {\n        value: rSnapLeft1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadWest2\n      },\n      dest: {\n        value: rSnapLeft2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft1, rSnapLeft2, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\")\n      },\n      dest: {\n        value: lTouchXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lTouchY\n      },\n      dest: { value: lTouchYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lTouchXScaled,\n        y: lTouchYScaled\n      },\n      dest: { value: lTouchScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lTouchScaled\n      },\n      dest: { value: touchCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lJoyScaled,\n        second: touchCharacterAcceleration\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"primary\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"primary\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: [\n        lButton(\"primary\").pressed,\n        lButton(\"trigger\").pressed,\n        lButton(\"grip\").pressed,\n        lButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"primary\").pressed,\n        rButton(\"trigger\").pressed,\n        rButton(\"grip\").pressed,\n        rButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"secondary\").pressed,\n        lButton(\"secondary\").pressed,\n        rButton(\"bumper\").pressed,\n        lButton(\"bumper\").pressed\n      ],\n      dest: { value: freezeButtons },\n      xform: xforms.any\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"primary\").pressed],\n      dest: { value: inspectButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [],\n\n  [sets.leftCursorHoveringOnNothing]: [],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter1\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"secondary\").pressed],\n      dest: { value: leftUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: leftUndoDrawing },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rightCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: {\n        value: leftCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(-0.02)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop1, rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(-0.02),\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.leftCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: [rightCursorDrop1],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: [leftCursorDrop1],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [lButton(\"primary\").pressed, rButton(\"secondary\").pressed],\n      dest: { value: rightUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: rightUndoDrawing },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.leftCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ]\n});\n\nexport const viveWandUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const indexUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ]\n});\n\nexport const viveFocusPlusUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.negate\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const viveCosmosUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2,\n      priority: 1\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth2,\n        south: lDpadSouth2,\n        east: lDpadEast2,\n        west: lDpadWest2,\n        center: lDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadEast2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadWest2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1),\n      priority: 1\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadEast2 },\n      dest: { value: paths.actions.rightHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadWest2 },\n      dest: { value: paths.actions.rightHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor[hand].mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.rightCursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.rightCursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.rightCursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: paths.actions.angularVelocity },\n      xform: xforms.scale(0.6) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-0.125) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: zero,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.rightCursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: grabBinding,\n  [sets.rightCursorHoveringOnUI]: grabBinding,\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.right.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.rightCursorHoveringOnInteractable]: [grabBinding],\n    [sets.rightCursorHoveringOnUI]: [grabBinding],\n    [sets.rightCursorHoldingUI]: [dropBinding],\n    [sets.rightCursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.rightCursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.rightCursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.rightCursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\nimport { isUI } from \"./../interactions\";\nimport { CAMERA_MODE_INSPECT } from \"../camera-system\";\nimport qsTruthy from \"../../utils/qs_truthy\";\nconst debugUserInput = qsTruthy(\"dui\");\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter =\n    leftTeleporter ||\n    (document.getElementById(\"player-left-controller\") &&\n      document.getElementById(\"player-left-controller\").components.teleporter);\n  rightTeleporter =\n    rightTeleporter ||\n    (document.getElementById(\"player-right-controller\") &&\n      document.getElementById(\"player-right-controller\").components.teleporter);\n  if (!leftTeleporter || !rightTeleporter) return;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote, leftRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n  userinput.toggleSet(sets.leftCursorHoldingInteractable, leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnNothing,\n    !leftRemote.held && !leftRemote.hovered && !leftHand.held && !leftHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnNothing,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && !leftRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components.tags &&\n      leftRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnCamera,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnCamera,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      leftHand.hovered &&\n      ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersHandConstraint) ||\n        leftHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      rightHand.hovered &&\n      ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersHandConstraint) ||\n        rightHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnInteractable,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      ((leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        leftRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnVideo,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoldingPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(\n    sets.leftCursorHoldingCamera,\n    !leftHand.held && !leftHand.hovered && leftRemote.held && leftRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnUI,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && isUI(leftRemote.hovered)\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnUI,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && isUI(rightRemote.hovered)\n  );\n\n  userinput.toggleSet(sets.leftCursorHoldingNothing, !leftHand.held && !leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingNothing, !rightHand.held && !rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftCursorHoldingUI,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" ||\n      document.activeElement.nodeName === \"TEXTAREA\" ||\n      document.activeElement.contentEditable === \"true\"\n  );\n\n  userinput.toggleSet(sets.debugUserInput, debugUserInput);\n\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems[\"hubs-systems\"]) {\n    userinput.toggleSet(\n      sets.inspecting,\n      AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT\n    );\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport {\n  viveUserBindings,\n  viveWandUserBindings,\n  indexUserBindings,\n  viveFocusPlusUserBindings,\n  viveCosmosUserBindings\n} from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { hackyMobileSafariTest } from \"../../utils/detect-touchscreen\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction notEmpty(s) {\n  return s !== \"\";\n}\n\nfunction isSubpath(subpath, path) {\n  const a = subpath.split(\"/\").filter(notEmpty);\n  const b = path.split(\"/\").filter(notEmpty);\n  if (a.length > b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1 && isSubpath(maskerPath, maskedPath)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    const forceEnableTouchscreen = hackyMobileSafariTest();\n\n    if (!(isMobile || isMobileVR || forceEnableTouchscreen)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR || forceEnableTouchscreen) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const addExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        if (activeDevice.gamepad.id === \"OpenVR Cosmos\") {\n          //HTC Vive Cosmos Controller\n          this.registeredMappings.add(viveCosmosUserBindings);\n        } else if (activeDevice.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n          //HTC Vive Focus Plus Controller\n          this.registeredMappings.add(viveFocusPlusUserBindings);\n        } else if (activeDevice.gamepad.axes.length === 4) {\n          //Valve Index Controller\n          this.registeredMappings.add(indexUserBindings);\n        } else {\n          //HTC Vive Controller (wands)\n          this.registeredMappings.add(viveWandUserBindings);\n        }\n      }\n    };\n\n    const deleteExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        this.registeredMappings.delete(viveCosmosUserBindings);\n        this.registeredMappings.delete(viveFocusPlusUserBindings);\n        this.registeredMappings.delete(indexUserBindings);\n        this.registeredMappings.delete(viveWandUserBindings);\n      }\n    };\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n      const forceEnableTouchscreen = hackyMobileSafariTest();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n          addExtraMappings(activeDevice);\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          deleteExtraMappings(activeDevice);\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n      if (\n        e.gamepad.id.startsWith(\"OpenVR Gamepad\") ||\n        e.gamepad.id === \"HTC Vive Focus Plus Controller\" ||\n        e.gamepad.id === \"OpenVR Cosmos\"\n      ) {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\") || e.gamepad.id.startsWith(\"Pico Neo 2\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\" || e.gamepad.id === \"Pico G2 Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.mapping === \"standard\") {\n        // Our XboxController device and bindings should be generic enough for most gamepads.\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        // This device doesn't actually have any bindings, but we need to fallback to something.\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (hackyMobileSafariTest() || this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement && (mouseMovement[0] || mouseMovement[1])) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\", \"/var/\"];\nconst DELIMITER = \"-----------------------------------\";\n\nconst replacer = (k, v) => {\n  if (typeof v === \"number\") {\n    return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n  }\n  return v;\n};\nfunction describeCurrentMasks(userinput) {\n  const strings = [];\n  userinput.masked.forEach((maskers, i) => {\n    let val;\n    if (!userinput.actives[i]) return;\n    if (maskers.length) {\n      val = JSON.stringify(userinput.sortedBindings[i], replacer);\n      strings.push(DELIMITER);\n      strings.push(`Binding #${i}:`);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`${val}\\n`);\n    }\n    maskers.forEach(masker => {\n      val = JSON.stringify(userinput.sortedBindings[masker], replacer);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`- Masked by #${masker}:\\n${val}`);\n    });\n    if (maskers.length) {\n      strings.push(`\\n`);\n    }\n  });\n  return strings.join(\"\\n\");\n}\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.debugUserInput.describeCurrentMasks)) {\n      console.log(describeCurrentMasks(userinput));\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", JSON.parse(JSON.stringify(userinput.sortedBindings)));\n      console.log(\"actives\", JSON.parse(JSON.stringify(userinput.actives)));\n      console.log(\"masks\", JSON.parse(JSON.stringify(userinput.masks)));\n      console.log(\"masked\", JSON.parse(JSON.stringify(userinput.masked)));\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", JSON.parse(JSON.stringify(userinput.activeSets)));\n      console.log(\"frame\", JSON.parse(JSON.stringify(userinput.frame)));\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const strings = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            strings.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            JSON.parse(JSON.stringify(sortedBindings[i])),\n            \"\\n\",\n            \"dest: \",\n            JSON.parse(JSON.stringify(sortedBindings[i].dest && Object.values(sortedBindings[i].dest))),\n            \"\\n\",\n            \"active: \",\n            JSON.parse(JSON.stringify(actives[i])),\n            \"\\n\",\n            \"maskedBy: \",\n            JSON.parse(JSON.stringify(masked[i])),\n            \"\\n\",\n            strings.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      this.focusChat();\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      this.focusChat(\"/\");\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      if (\n        window.APP.history.location.state &&\n        window.APP.history.location.state.value !== \"avatar-editor\" &&\n        window.APP.history.location.state.value !== \"link\"\n      ) {\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i]) && window.APP.hubChannel.can(\"spawn_and_move_media\")) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n\n    if (this.userinput.get(paths.actions.toggleUI)) {\n      if (this.el.sceneEl.is(\"entered\")) {\n        this.el.emit(\"action_toggle_ui\");\n      }\n    }\n  },\n\n  focusChat: function(prefix) {\n    const target = document.querySelector(\".chat-focus-target\");\n    if (!target) return;\n\n    target.focus();\n\n    if (prefix) {\n      target.value = prefix;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst noop = function() {};\nAFRAME.registerComponent(\"overwrite-raycast-as-noop\", {\n  init() {\n    this.el.object3D.raycast = noop;\n    this.mesh = this.el.getObject3D(\"mesh\");\n    if (this.mesh) {\n      this.mesh.raycast = noop;\n    } else {\n      this.el.addEventListener(\"model-loaded\", () => {\n        this.mesh = this.el.getObject3D(\"mesh\");\n        if (this.mesh) {\n          this.mesh.raycast = noop;\n        }\n      });\n    }\n  }\n});\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.getElementById(\"right-cursor-controller\");\n      this.leftRemote = document.getElementById(\"left-cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    if (this.rightRemote) {\n      this.rightRemote.components[\"cursor-controller\"].tick2(t);\n    }\n\n    if (this.leftRemote) {\n      this.leftRemote.components[\"cursor-controller\"].tick2(t, true);\n    }\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\n      \".collidable, .interactable, .ui, .drawing, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n    );\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { hackyMobileSafariTest } from \"../utils/detect-touchscreen\";\n\nfunction shouldEnableRemote(scene, hand, remote, teleporting, woke) {\n  const vrRemotePenIntersection =\n    scene.is(\"vr-mode\") && isTagged(remote.held, \"isPen\") && remote.held.children[0].components.pen.intersection;\n  return scene.is(\"entered\") && !hand.hovered && !hand.held && !teleporting && !vrRemotePenIntersection && woke;\n}\n\nexport class CursorTogglingSystem {\n  constructor() {\n    this.wakeLeft = false;\n    this.wakeRight = false;\n\n    waitForDOMContentLoaded().then(() => {\n      this.domContentLoadedButComponentsMayNotHave = true;\n    });\n  }\n\n  tick(interaction, userinput, scene) {\n    if (!this.domContentLoadedButComponentsMayNotHave) return;\n    if (!this.gotComponentReferences) {\n      this.gotComponentReferences = true;\n      this.rightCursorController = document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"];\n      this.leftCursorController = document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"];\n      this.rightHandTeleporter = document.getElementById(\"player-right-controller\").components[\"teleporter\"];\n      this.leftHandTeleporter = document.getElementById(\"player-left-controller\").components[\"teleporter\"];\n      this.gazeTeleporter = document.getElementById(\"gaze-teleport\").components[\"teleporter\"];\n    }\n\n    const rightRemote = interaction.state.rightRemote;\n    const leftRemote = interaction.state.leftRemote;\n    const leftHand = interaction.state.leftHand;\n    const rightHand = interaction.state.rightHand;\n\n    if (userinput.get(paths.actions.cursor.right.wake)) {\n      this.wakeRight = true;\n      if (!leftRemote.held) {\n        this.wakeLeft = false;\n      }\n    }\n\n    if (userinput.get(paths.actions.cursor.left.wake)) {\n      this.wakeLeft = true;\n      if (!rightRemote.held) {\n        this.wakeRight = false;\n      }\n    }\n\n    const inspectingInVR = interaction.el.systems[\"hubs-systems\"].cameraSystem.inspected; // && this.el.sceneEl.is(\"vr-mode\");\n    const shouldEnableLeftRemote =\n      !inspectingInVR &&\n      shouldEnableRemote(\n        scene,\n        leftHand,\n        leftRemote,\n        this.leftHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n        this.wakeLeft\n      );\n    const isMobile = AFRAME.utils.device.isMobile();\n    const shouldEnableRightRemote =\n      isMobile ||\n      hackyMobileSafariTest() ||\n      (!inspectingInVR &&\n        shouldEnableRemote(\n          scene,\n          rightHand,\n          rightRemote,\n          this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n          this.wakeRight\n        ));\n\n    if (!shouldEnableLeftRemote) {\n      leftRemote.hovered = null;\n    }\n    if (!shouldEnableRightRemote) {\n      rightRemote.hovered = null;\n    }\n    this.leftCursorController.enabled = shouldEnableLeftRemote;\n    this.rightCursorController.enabled = shouldEnableRightRemote;\n  }\n}\n","import { AmmoWorker, WorkerHelpers, CONSTANTS } from \"three-ammo\";\nimport { AmmoDebugConstants, DefaultBufferSize } from \"ammo-debug-drawer\";\nimport configs from \"../utils/configs\";\nimport * as ammoWasmUrl from \"ammo.js/builds/ammo.wasm.wasm\";\n\nconst MESSAGE_TYPES = CONSTANTS.MESSAGE_TYPES,\n  TYPE = CONSTANTS.TYPE,\n  BUFFER_CONFIG = CONSTANTS.BUFFER_CONFIG;\n\nconst WORLD_CONFIG = {\n  debugDrawMode: AmmoDebugConstants.DrawWireframe,\n  gravity: { x: 0, y: -9.8, z: 0 }\n};\n\nexport class PhysicsSystem {\n  constructor(scene) {\n    this.ammoWorker = new AmmoWorker();\n    this.workerHelpers = new WorkerHelpers(this.ammoWorker);\n\n    this.bodyHelpers = [];\n    this.shapeHelpers = [];\n    this.bodyUuids = [];\n    this.indexToUuid = {};\n    this.bodyUuidToData = new Map();\n\n    this.debugRequested = false;\n    this.debugEnabled = false;\n    this.scene = scene;\n    this.stepDuration = 0;\n\n    this.ready = false;\n    this.nextBodyUuid = 0;\n    this.nextShapeUuid = 0;\n\n    const arrayBuffer = new ArrayBuffer(4 * BUFFER_CONFIG.BODY_DATA_SIZE * BUFFER_CONFIG.MAX_BODIES);\n    this.objectMatricesFloatArray = new Float32Array(arrayBuffer);\n    this.objectMatricesIntArray = new Int32Array(arrayBuffer);\n\n    this.ammoWorker.postMessage(\n      {\n        type: MESSAGE_TYPES.INIT,\n        worldConfig: WORLD_CONFIG,\n        arrayBuffer,\n        wasmUrl: new URL(ammoWasmUrl, configs.BASE_ASSETS_PATH || window.location).href\n      },\n      [arrayBuffer]\n    );\n\n    this.ammoWorker.onmessage = async event => {\n      if (event.data.type === MESSAGE_TYPES.READY) {\n        this.ready = true;\n        for (const bodyHelper of this.bodyHelpers) {\n          if (bodyHelper.alive) bodyHelper.init2();\n        }\n        for (const shapeHelper of this.shapeHelpers) {\n          if (shapeHelper.alive) shapeHelper.init2();\n        }\n        this.shapeHelpers.length = 0;\n        this.bodyHelpers.length = 0;\n      } else if (event.data.type === MESSAGE_TYPES.BODY_READY) {\n        const uuid = event.data.uuid;\n        const index = event.data.index;\n        if (this.bodyUuidToData.has(uuid)) {\n          this.bodyUuids.push(uuid);\n          this.bodyUuidToData.get(uuid).index = index;\n          this.indexToUuid[index] = uuid;\n        } else {\n          console.warn(`Body initialized for uuid: ${uuid} but body missing.`);\n        }\n      } else if (event.data.type === MESSAGE_TYPES.SHAPES_READY) {\n        const bodyUuid = event.data.bodyUuid;\n        const shapesUuid = event.data.shapesUuid;\n        if (this.bodyUuidToData.has(bodyUuid)) {\n          this.bodyUuidToData.get(bodyUuid).shapes.push(shapesUuid);\n        } else {\n          console.warn(`Shape initialized but body with uuid: ${bodyUuid} missing.`);\n        }\n      } else if (event.data.type === MESSAGE_TYPES.TRANSFER_DATA) {\n        this.objectMatricesFloatArray = event.data.objectMatricesFloatArray;\n        this.objectMatricesIntArray = new Int32Array(this.objectMatricesFloatArray.buffer);\n        this.stepDuration = event.data.stepDuration;\n      }\n    };\n  }\n\n  setDebug(debug) {\n    this.debugRequested = debug;\n  }\n\n  enableDebug() {\n    if (!window.SharedArrayBuffer) {\n      console.warn(\"Physics debug rendering only available in browsers that support SharedArrayBuffers.\");\n      this.debugRequested = false;\n      return;\n    }\n\n    this.debugEnabled = true;\n\n    if (!this.debugMesh) {\n      this.debugSharedArrayBuffer = new window.SharedArrayBuffer(4 + 2 * DefaultBufferSize * 4);\n      this.debugIndex = new Uint32Array(this.debugSharedArrayBuffer, 0, 4);\n      const debugVertices = new Float32Array(this.debugSharedArrayBuffer, 4, DefaultBufferSize);\n      const debugColors = new Float32Array(this.debugSharedArrayBuffer, 4 + DefaultBufferSize, DefaultBufferSize);\n      this.debugGeometry = new THREE.BufferGeometry();\n      this.debugGeometry.addAttribute(\"position\", new THREE.BufferAttribute(debugVertices, 3));\n      this.debugGeometry.addAttribute(\"color\", new THREE.BufferAttribute(debugColors, 3));\n      const debugMaterial = new THREE.LineBasicMaterial({\n        vertexColors: THREE.VertexColors,\n        depthTest: true\n      });\n      this.debugMesh = new THREE.LineSegments(this.debugGeometry, debugMaterial);\n      this.debugMesh.frustumCulled = false;\n      this.debugMesh.renderOrder = 999;\n    }\n\n    if (!this.debugMesh.parent) {\n      this.scene.add(this.debugMesh);\n      this.workerHelpers.enableDebug(true, this.debugSharedArrayBuffer);\n    }\n  }\n\n  disableDebug() {\n    this.debugEnabled = false;\n    if (this.debugMesh) {\n      this.scene.remove(this.debugMesh);\n      this.workerHelpers.enableDebug(false);\n    }\n  }\n\n  tick = (() => {\n    const transform = new THREE.Matrix4();\n    const inverse = new THREE.Matrix4();\n    const matrix = new THREE.Matrix4();\n    const scale = new THREE.Vector3();\n    return function() {\n      if (this.ready) {\n        if (this.debugRequested !== this.debugEnabled) {\n          if (this.debugRequested) {\n            this.enableDebug();\n          } else {\n            this.disableDebug();\n          }\n        }\n\n        /** Buffer Schema\n         * Every physics body has 26 * 4 bytes (64bit float/int) assigned in the buffer\n         * 0-15   Matrix4 elements (floats)\n         * 16     Linear Velocity (float)\n         * 17     Angular Velocity (float)\n         * 18-25  first 8 Collisions (ints)\n         */\n\n        if (this.objectMatricesFloatArray.buffer.byteLength !== 0) {\n          for (let i = 0; i < this.bodyUuids.length; i++) {\n            const uuid = this.bodyUuids[i];\n            const body = this.bodyUuidToData.get(uuid);\n            const index = body.index;\n            const type = body.options.type ? body.options.type : TYPE.DYNAMIC;\n            const object3D = body.object3D;\n            if (type === TYPE.DYNAMIC) {\n              matrix.fromArray(\n                this.objectMatricesFloatArray,\n                index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.MATRIX_OFFSET\n              );\n              inverse.getInverse(object3D.parent.matrixWorld);\n              transform.multiplyMatrices(inverse, matrix);\n              transform.decompose(object3D.position, object3D.quaternion, scale);\n            }\n\n            object3D.updateMatrices();\n            this.objectMatricesFloatArray.set(\n              object3D.matrixWorld.elements,\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.MATRIX_OFFSET\n            );\n\n            body.linearVelocity = this.objectMatricesFloatArray[\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.LINEAR_VELOCITY_OFFSET\n            ];\n\n            body.angularVelocity = this.objectMatricesFloatArray[\n              index * BUFFER_CONFIG.BODY_DATA_SIZE + BUFFER_CONFIG.ANGULAR_VELOCITY_OFFSET\n            ];\n\n            body.collisions.length = 0;\n\n            for (let j = BUFFER_CONFIG.COLLISIONS_OFFSET; j < BUFFER_CONFIG.BODY_DATA_SIZE; j++) {\n              const collidingIndex = this.objectMatricesIntArray[index * BUFFER_CONFIG.BODY_DATA_SIZE + j];\n              if (collidingIndex !== -1) {\n                body.collisions.push(this.indexToUuid[collidingIndex]);\n              }\n            }\n          }\n\n          this.ammoWorker.postMessage(\n            { type: MESSAGE_TYPES.TRANSFER_DATA, objectMatricesFloatArray: this.objectMatricesFloatArray },\n            [this.objectMatricesFloatArray.buffer]\n          );\n        }\n\n        /* DEBUG RENDERING */\n        if (this.debugEnabled) {\n          const index = window.Atomics.load(this.debugIndex, 0);\n          if (index !== 0) {\n            this.debugGeometry.attributes.position.needsUpdate = true;\n            this.debugGeometry.attributes.color.needsUpdate = true;\n          }\n          this.debugGeometry.setDrawRange(0, index);\n          window.Atomics.store(this.debugIndex, 0, 0);\n        }\n      }\n    };\n  })();\n\n  addBody(object3D, options) {\n    this.workerHelpers.addBody(this.nextBodyUuid, object3D, options);\n\n    this.bodyUuidToData.set(this.nextBodyUuid, {\n      object3D: object3D,\n      options: options,\n      collisions: [],\n      linearVelocity: 0,\n      angularVelocity: 0,\n      index: -1,\n      shapes: []\n    });\n\n    return this.nextBodyUuid++;\n  }\n\n  updateBody(uuid, options) {\n    if (this.bodyUuidToData.has(uuid)) {\n      this.bodyUuidToData.get(uuid).options = options;\n      this.workerHelpers.updateBody(uuid, options);\n    } else {\n      console.warn(`updateBody called for uuid: ${uuid} but body missing.`);\n    }\n  }\n\n  removeBody(uuid) {\n    const idx = this.bodyUuids.indexOf(uuid);\n    if (this.bodyUuidToData.has(uuid) && idx !== -1) {\n      delete this.indexToUuid[this.bodyUuidToData.get(uuid).index];\n      this.bodyUuidToData.delete(uuid);\n      this.bodyUuids.splice(idx, 1);\n      this.workerHelpers.removeBody(uuid);\n    } else {\n      console.warn(`removeBody called for uuid: ${uuid} but body missing.`);\n    }\n  }\n\n  addShapes(bodyUuid, mesh, options) {\n    if (mesh) {\n      const scale = new THREE.Vector3();\n      scale.setFromMatrixScale(mesh.matrixWorld);\n    }\n    this.workerHelpers.addShapes(bodyUuid, this.nextShapeUuid, mesh, options);\n    this.bodyUuidToData.get(bodyUuid).shapes.push(this.nextShapeUuid);\n    return this.nextShapeUuid++;\n  }\n\n  removeShapes(bodyUuid, shapesUuid) {\n    if (this.bodyUuidToData.has(bodyUuid)) {\n      this.workerHelpers.removeShapes(bodyUuid, shapesUuid);\n      const idx = this.bodyUuidToData.get(bodyUuid).shapes.indexOf(shapesUuid);\n      if (idx !== -1) {\n        this.bodyUuidToData.get(bodyUuid).shapes.splice(idx, 1);\n      } else {\n        console.warn(`removeShapes called for shapesUuid: ${shapesUuid} on bodyUuid: ${bodyUuid} but shapes missing.`);\n      }\n    }\n  }\n\n  addConstraint(constraintId, bodyUuid, targetUuid, options) {\n    this.workerHelpers.addConstraint(constraintId, bodyUuid, targetUuid, options);\n  }\n\n  removeConstraint(constraintId) {\n    this.workerHelpers.removeConstraint(constraintId);\n  }\n\n  registerBodyHelper(bodyHelper) {\n    if (this.ready) {\n      bodyHelper.init2();\n    } else {\n      this.bodyHelpers.push(bodyHelper);\n    }\n  }\n\n  registerShapeHelper(shapeHelper) {\n    if (this.ready) {\n      shapeHelper.init2();\n    } else {\n      this.shapeHelpers.push(shapeHelper);\n    }\n  }\n\n  bodyInitialized(uuid) {\n    return this.bodyUuidToData.has(uuid) && this.bodyUuidToData.get(uuid).index !== -1;\n  }\n\n  getLinearVelocity(uuid) {\n    return this.bodyUuidToData.get(uuid).linearVelocity;\n  }\n\n  getAngularVelocity(uuid) {\n    return this.bodyUuidToData.get(uuid).angularVelocity;\n  }\n\n  getCollisions(uuid) {\n    return this.bodyUuidToData.get(uuid).collisions;\n  }\n\n  resetDynamicBody(uuid) {\n    this.workerHelpers.resetDynamicBody(uuid);\n  }\n\n  activateBody(uuid) {\n    this.workerHelpers.activateBody(uuid);\n  }\n}\n","/* global NAF AFRAME */\nimport { CONSTANTS } from \"three-ammo\";\nconst ACTIVATION_STATE = CONSTANTS.ACTIVATION_STATE;\n\nexport class ConstraintsSystem {\n  constructor(physicsSystem) {\n    this.prevLeftHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightRemote = {\n      held: null,\n      spawning: false\n    };\n    this.prevLeftRemote = {\n      held: null,\n      spawning: false\n    };\n\n    this.physicsSystem = physicsSystem;\n    this.constraintPairs = {};\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (!this.physicsSystem) return;\n\n    if (prevState.held === state.held) {\n      if (\n        !state.spawning &&\n        prevState.spawning &&\n        state.held &&\n        state.held.components.tags &&\n        state.held.components.tags.data[constraintTag]\n      ) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const bodyUuid = state.held.components[\"body-helper\"].uuid;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetUuid = targetEl.components[\"body-helper\"].uuid;\n        if (bodyUuid !== -1 && targetUuid !== -1) {\n          this.physicsSystem.addConstraint(entityId, bodyUuid, targetUuid, {});\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags && prevState.held.components.tags.data[constraintTag]) {\n      const heldEntityId = prevState.held.id;\n      if (this.constraintPairs[heldEntityId] && this.constraintPairs[heldEntityId].indexOf(entityId) !== -1) {\n        this.constraintPairs[heldEntityId].splice(this.constraintPairs[heldEntityId].indexOf(entityId), 1);\n        if (this.constraintPairs[heldEntityId].length === 0) {\n          delete this.constraintPairs[heldEntityId];\n        }\n        this.physicsSystem.removeConstraint(entityId);\n      }\n\n      if (!this.constraintPairs[heldEntityId] || this.constraintPairs[heldEntityId].length < 1) {\n        prevState.held.setAttribute(\"body-helper\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const bodyUuid = state.held.components[\"body-helper\"].uuid;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetUuid = targetEl.components[\"body-helper\"].uuid;\n        if (bodyUuid !== -1 && targetUuid !== -1) {\n          this.physicsSystem.addConstraint(entityId, bodyUuid, targetUuid, {});\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.leftRemote.entity.id,\n      interaction.state.leftRemote,\n      this.prevLeftRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n    Object.assign(this.prevLeftRemote, interaction.state.leftRemote);\n  }\n\n  // for held objects deleted during the component tick\n  release(el) {\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevRightRemote.held === el) {\n      this.prevRightRemote.held = null;\n      this.prevRightRemote.spawning = false;\n    }\n    if (this.prevLeftRemote.held === el) {\n      this.prevLeftRemote.held = null;\n      this.prevLeftRemote.spawning = false;\n    }\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nfunction existsAndHeldInEither(object, holderA, holderB) {\n  return object && (object === holderA.held || object === holderB.held);\n}\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n\n    const stretching =\n      existsAndHeldInEither(leftHand.held, rightHand, rightRemote) ||\n      existsAndHeldInEither(leftRemote.held, rightHand, rightRemote);\n    const stretched = leftHand.held || leftRemote.held;\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = leftHand.held\n        ? interaction.options.leftHand.entity.object3D\n        : interaction.options.leftRemote.entity.object3D;\n      rightStretcher = rightHand.held\n        ? interaction.options.rightHand.entity.object3D\n        : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        stretched !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = stretched;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","import { CAMERA_MODE_INSPECT } from \"./camera-system\";\n\nexport class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n      // TODO: Fix issue where button objects are \"visible\" but not on the inspect layer,\n      // which makes it so we can interact with them but cannot see them.\n      return;\n    }\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    const hovered2 = interaction.state.leftRemote.hovered;\n    if (\n      hovered2 &&\n      userinput.get(interaction.options.leftRemote.grabPath) &&\n      hovered2.components.tags &&\n      hovered2.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered2.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n\n    const heldLeft = interaction.state.leftRemote.held;\n\n    if (this.prevHeldLeft && this.prevHeldLeft !== heldLeft) {\n      this.prevHeldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n    if (heldLeft && this.prevHeldLeft !== heldLeft) {\n      heldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n\n    this.prevHeldLeft = heldLeft;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\n    \"icon-button\",\n    \"text-button\",\n    \"pin-networked-object-button\",\n    \"mic-button\",\n    \"inspect-button\"\n  ];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (\n    hasButtonComponent(hovered.components) ||\n    hovered.classList.contains(\"teleport-waypoint-icon\") ||\n    hovered.classList.contains(\"occupiable-waypoint-icon\")\n  ) {\n    return hovered;\n  }\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (\n        hasButtonComponent(hovered.children[i].components) ||\n        hovered.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        hovered.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (\n        hasButtonComponent(el.children[i].components) ||\n        el.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        el.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n    const button2 = getHoverableButton(interaction.state.leftRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n\n    // TODO: hover should respect both remotes\n    if (this.prevButtonLeft && this.prevButtonLeft !== button2) {\n      dispatch(this.prevButtonLeft, UNHOVERED);\n    }\n\n    if (button2 && this.prevButtonLeft !== button2) {\n      dispatch(button2, HOVERED);\n    }\n\n    this.prevButtonLeft = button2;\n  }\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { SOUND_PEN_UNDO_DRAW } from \"./sound-effects-system\";\n\n/**\n * Drawing Menu System\n * A system for showing menus for drawings.\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nexport class DrawingMenuSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n\n    this.sceneEl.addEventListener(\"stateremoved\", this.hideMenus.bind(this));\n\n    this.lastIntersection = new THREE.Vector3();\n\n    this.drawingMenus = [];\n    this.buttonMap = {};\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorControllers = document.querySelectorAll(\"[cursor-controller]\");\n      this.camera = this.sceneEl.querySelector(\"#avatar-pov-node\");\n    });\n  }\n\n  tick() {\n    if (!this.cursorControllers || this.cursorControllers.length === 0 || !this.camera) return;\n\n    if (this.sceneEl.is(\"frozen\") && window.APP.hubChannel.can(\"spawn_drawing\")) {\n      const hovered = this.getHovered();\n      if (hovered) {\n        for (let i = 0; i < this.cursorControllers.length; i++) {\n          if (this.cursorControllers[i].components[\"cursor-controller\"].intersection) {\n            const intersectionPoint = this.cursorControllers[i].components[\"cursor-controller\"].intersection.point;\n            this.showMenu(hovered, intersectionPoint);\n          }\n        }\n      }\n      this.handleButtons();\n      this.scaleMenus();\n    }\n  }\n\n  getMenuScale(distance) {\n    if (distance <= 1.5) {\n      return 0.5;\n    }\n    return Math.min(3, distance - 1);\n  }\n\n  scaleMenus = (() => {\n    const cameraWorldPos = new THREE.Vector3();\n    return function() {\n      if (!this.drawingMenus || this.drawingMenus.length === 0) return;\n\n      this.camera.object3D.getWorldPosition(cameraWorldPos);\n\n      for (let i = 0; i < this.drawingMenus.length; i++) {\n        const menu = this.drawingMenus[i];\n        if (menu.object3D.visible && !menu.getAttribute(\"animation__show\")) {\n          const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n          menu.object3D.scale.setScalar(this.getMenuScale(dist));\n          menu.object3D.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })();\n\n  handleButtons = (() => {\n    const remotes = [\"rightRemote\", \"leftRemote\"];\n    return function() {\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const userinput = AFRAME.scenes[0].systems.userinput;\n\n      for (let i = 0; i < remotes.length; i++) {\n        const remote = remotes[i];\n        if (interaction.state[remote]) {\n          const hovered = interaction.state[remote].hovered;\n          if (\n            hovered &&\n            userinput.get(interaction.options[remote].grabPath) &&\n            hovered.components.tags &&\n            hovered.components.tags.data.singleActionButton\n          ) {\n            if (this.buttonMap[hovered.object3D.uuid]) {\n              const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n              if (hovered.classList.contains(\"undo-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].undoDraw();\n                this.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n              } else if (hovered.classList.contains(\"delete-drawing\")) {\n                NAF.utils.takeOwnership(networkedEntity);\n                this.sceneEl.removeChild(networkedEntity);\n              } else if (hovered.classList.contains(\"serialize-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].serializeDrawing().then(() => {\n                  const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n                  NAF.utils.takeOwnership(networkedEntity);\n                  this.sceneEl.removeChild(networkedEntity);\n                });\n              }\n            }\n          }\n        }\n      }\n    };\n  })();\n\n  getHovered() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let hovered = null;\n    if (\n      interaction.state.leftRemote &&\n      interaction.state.leftRemote.hovered &&\n      interaction.state.leftRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.leftRemote.hovered;\n    } else if (\n      interaction.state.rightRemote &&\n      interaction.state.rightRemote.hovered &&\n      interaction.state.rightRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.rightRemote.hovered;\n    }\n    return hovered;\n  }\n\n  showMenu = (() => {\n    const position = new THREE.Vector3();\n    const cameraWorldPos = new THREE.Vector3();\n    return function(hovered, intersectionPoint) {\n      const menu = hovered.children[0];\n\n      if (!menu.object3D.visible || !almostEquals(0.25, intersectionPoint, this.lastIntersection)) {\n        this.camera.object3D.getWorldPosition(cameraWorldPos);\n        position\n          .subVectors(cameraWorldPos, intersectionPoint)\n          .normalize()\n          .multiplyScalar(0.1);\n        menu.object3D.position.copy(intersectionPoint).add(position);\n        menu.object3D.lookAt(cameraWorldPos);\n        menu.object3D.matrixNeedsUpdate = true;\n        menu.object3D.visible = true;\n        this.lastIntersection.copy(intersectionPoint);\n\n        const isMine = hovered.components.networked.isMine();\n        menu.querySelector(\".undo-drawing\").object3D.visible = isMine;\n        menu.querySelector(\".serialize-drawing\").object3D.visible =\n          isMine && window.APP.hubChannel.can(\"spawn_and_move_media\");\n\n        const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n        const finalScale = this.getMenuScale(dist);\n\n        menu.removeAttribute(\"animation__show\");\n\n        menu.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n\n        menu.addEventListener(\n          \"animationcomplete\",\n          () => {\n            menu.removeAttribute(\"animation__show\");\n          },\n          { once: true }\n        );\n      }\n    };\n  })();\n\n  hideMenus() {\n    if (!this.drawingMenus) return;\n\n    for (let i = 0; i < this.drawingMenus.length; i++) {\n      this.drawingMenus[i].object3D.visible = false;\n    }\n  }\n\n  registerDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    this.drawingMenus.push(menuEl);\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    this.buttonMap[undoButton.object3D.uuid] = networkedDrawingEl;\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    this.buttonMap[deleteButton.object3D.uuid] = networkedDrawingEl;\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    this.buttonMap[serializeButton.object3D.uuid] = networkedDrawingEl;\n  }\n\n  unregisterDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    const idx = this.drawingMenus.indexOf(menuEl);\n    if (idx !== -1) {\n      this.drawingMenus.splice(idx, 1);\n    }\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    delete this.buttonMap[undoButton.object3D.uuid];\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    delete this.buttonMap[deleteButton.object3D.uuid];\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    delete this.buttonMap[serializeButton.object3D.uuid];\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el &&\n    (el.components[\"hover-menu\"] ||\n      el.components[\"hover-menu__video\"] ||\n      el.components[\"hover-menu__pager\"] ||\n      el.components[\"hover-menu__hubs-item\"] ||\n      el.components[\"hover-menu__link\"] ||\n      el.components[\"hover-menu__photo\"])\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (!getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n\n    //TODO: Menu be visible if either remote is hovering.\n    const hoverMenu2 = findHoverMenu(interaction.state.leftRemote.hovered);\n\n    if (this.prevHoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      this.prevHoverMenu2.hovering = false;\n      this.prevHoverMenu2.applyHoverState();\n    }\n\n    if (hoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      hoverMenu2.hovering = true;\n      hoverMenu2.applyHoverState();\n    }\n\n    this.prevHoverMenu2 = hoverMenu2;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n\n    const isPermitted =\n      window.APP.hubChannel &&\n      (superSpawner && superSpawner.data.template === \"#interactable-emoji\"\n        ? window.APP.hubChannel.can(\"spawn_emoji\")\n        : window.APP.hubChannel.can(\"spawn_and_move_media\"));\n\n    if (\n      superSpawner &&\n      superSpawner.spawnedMediaScale &&\n      !superSpawner.cooldownTimeout &&\n      userinput.get(grabPath) &&\n      isPermitted\n    ) {\n      this.performSpawn(state, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, grabPath, userinput, superSpawner) {\n    const data = superSpawner.data;\n\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      data.resolve,\n      true,\n      false,\n      data.mediaOptions\n    ).entity;\n\n    superSpawner.el.object3D.getWorldPosition(spawnedEntity.object3D.position);\n    superSpawner.el.object3D.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    superSpawner.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        spawnedEntity.object3D.scale.copy(superSpawner.spawnedMediaScale);\n        spawnedEntity.object3D.matrixNeedsUpdate = true;\n        state.spawning = false;\n        superSpawner.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    this.maybeSpawn(interaction.state.leftHand, interaction.options.leftHand.grabPath);\n    this.maybeSpawn(interaction.state.rightHand, interaction.options.rightHand.grabPath);\n    this.maybeSpawn(interaction.state.rightRemote, interaction.options.rightRemote.grabPath);\n    this.maybeSpawn(interaction.state.leftRemote, interaction.options.leftRemote.grabPath);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, interactLeft, interactRight) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const leftRemoteStrength = determineStrength(this.state.leftRemote, leftRemote, false);\n    const buttonLeftStrength = interactLeft ? STRENGTH.BUTTON_PRESSED : 0;\n    const buttonRightStrength = interactRight ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, leftRemoteStrength, stretchingStrength, buttonLeftStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonRightStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n    copyState(this.state.leftRemote, leftRemote, false);\n  }\n}\n","import { BatchRawUniformGroup } from \"@mozillareality/three-batch-manager\";\nimport { CAMERA_MODE_INSPECT, CAMERA_LAYER_BATCH_INSPECT } from \"../camera-system\";\n\nconst tempVec3 = new Array(3);\nconst tempVec4 = new Array(4);\n\nexport const INSTANCE_DATA_BYTE_LENGTH = 112;\nconst DEFAULT_COLOR = new THREE.Color(1, 1, 1);\nconst HIDE_MATRIX = new THREE.Matrix4().makeScale(0, 0, 0);\n\nexport function sizeofInstances(instanceCount) {\n  const hubsDataSize =\n    instanceCount * 4 * 4 + // sweepParams\n    4 *\n      (3 + // interactorOnePos\n      1 + // isFrozen\n      3 + // interactorTwoPos\n        1); // time\n  return instanceCount * INSTANCE_DATA_BYTE_LENGTH + hubsDataSize;\n}\n\nconst inspectLayer = new THREE.Layers();\ninspectLayer.set(CAMERA_LAYER_BATCH_INSPECT);\n\nexport default class HubsBatchRawUniformGroup extends BatchRawUniformGroup {\n  constructor(maxInstances, meshToEl) {\n    const data = new ArrayBuffer(sizeofInstances(maxInstances));\n    super(maxInstances, \"InstanceData\", data);\n\n    let offset = this.offset;\n    this.hubs_sweepParams = new Float32Array(this.data, offset, 4 * maxInstances);\n    offset += this.hubs_sweepParams.byteLength;\n\n    this.hubs_interactorOnePos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorOnePos.byteLength;\n\n    this.hubs_isFrozen = new Uint32Array(this.data, offset, 1);\n    offset += this.hubs_isFrozen.byteLength;\n\n    this.hubs_interactorTwoPos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorTwoPos.byteLength;\n\n    this.hubs_time = new Float32Array(this.data, offset, 1);\n    offset += this.hubs_time.byteLength;\n\n    this.offset = offset;\n\n    this.meshToEl = meshToEl;\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  }\n\n  update(time) {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cameraSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem;\n    const inspecting = cameraSystem.mode === CAMERA_MODE_INSPECT && !cameraSystem.enableLights;\n    let interactorOne, interactorTwo;\n\n    for (let instanceId = 0; instanceId < this.meshes.length; instanceId++) {\n      const mesh = this.meshes[instanceId];\n      if (!mesh) continue;\n\n      mesh.updateMatrices();\n\n      // TODO need to account for nested visibility deeper than 1 level\n      const isVisible =\n        mesh.visible &&\n        (mesh.parent && mesh.parent.visible) &&\n        mesh.el.object3D.visible &&\n        (mesh.el.object3D.parent && mesh.el.object3D.parent.visible);\n      this.setInstanceTransform(\n        instanceId,\n        isVisible && (!inspecting || mesh.layers.test(inspectLayer)) ? mesh.matrixWorld : HIDE_MATRIX\n      );\n      this.setInstanceColor(instanceId, mesh.material.color || DEFAULT_COLOR, mesh.material.opacity || 1);\n\n      const el = this.meshToEl.get(mesh);\n      if (el) {\n        const obj = el.object3D;\n        const hoverableVisuals = el.components[\"hoverable-visuals\"];\n        if (hoverableVisuals) {\n          const worldY = obj.matrixWorld.elements[13];\n          const ms1 = obj.matrixWorld.elements[4];\n          const ms2 = obj.matrixWorld.elements[5];\n          const ms3 = obj.matrixWorld.elements[6];\n          const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n          const scaledRadius = worldScale * hoverableVisuals.geometryRadius;\n\n          const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n          const isSpawner = !!el.components[\"super-spawner\"];\n          const isFrozen = el.sceneEl.is(\"frozen\");\n          const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n          let highlightInteractorOne, highlightInteractorTwo;\n          if (interaction.state.leftRemote.hovered === el && !interaction.state.leftRemote.held) {\n            interactorOne = interaction.options.leftRemote.entity.object3D;\n            highlightInteractorOne = true;\n          } else if (interaction.state.leftHand.hovered === el && !interaction.state.leftHand.held) {\n            interactorOne = interaction.options.leftHand.entity.object3D;\n            highlightInteractorOne = true;\n          }\n\n          if (interaction.state.rightRemote.hovered === el && !interaction.state.rightRemote.held) {\n            interactorTwo = interaction.options.rightRemote.entity.object3D;\n            highlightInteractorTwo = true;\n          } else if (interaction.state.rightHand.hovered === el && !interaction.state.rightHand.held) {\n            interactorTwo = interaction.options.rightHand.entity.object3D;\n            highlightInteractorTwo = true;\n          }\n\n          tempVec4[0] = worldY - scaledRadius;\n          tempVec4[1] = worldY + scaledRadius;\n          tempVec4[2] = !!highlightInteractorOne && !hideDueToPinning && !this.isTouchscreen;\n          tempVec4[3] = !!highlightInteractorTwo && !hideDueToPinning && !this.isTouchscreen;\n          this.hubs_sweepParams.set(tempVec4, instanceId * 4);\n        }\n      }\n    }\n\n    if (interactorOne) {\n      tempVec3[0] = interactorOne.matrixWorld.elements[12];\n      tempVec3[1] = interactorOne.matrixWorld.elements[13];\n      tempVec3[2] = interactorOne.matrixWorld.elements[14];\n      this.hubs_interactorOnePos.set(tempVec3);\n    }\n\n    if (interactorTwo) {\n      tempVec3[0] = interactorTwo.matrixWorld.elements[12];\n      tempVec3[1] = interactorTwo.matrixWorld.elements[13];\n      tempVec3[2] = interactorTwo.matrixWorld.elements[14];\n      this.hubs_interactorTwoPos.set(tempVec3);\n    }\n\n    this.hubs_time[0] = time;\n    this.hubs_isFrozen[0] = AFRAME.scenes[0].is(\"frozen\") ? 1 : 0;\n  }\n}\n","import { BatchManager } from \"@mozillareality/three-batch-manager\";\n\nimport HubsBatchRawUniformGroup from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport { sizeofInstances } from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport unlitBatchVert from \"./render-manager/unlit-batch.vert\";\nimport unlitBatchFrag from \"./render-manager/unlit-batch.frag\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst MAX_INSTANCES = 500;\nconst UBO_BYTE_LENGTH = sizeofInstances(MAX_INSTANCES);\n\nexport class BatchManagerSystem {\n  constructor(scene, renderer) {\n    this.meshToEl = new WeakMap();\n    const gl = renderer.context;\n\n    if (qsTruthy(\"disableBatching\")) {\n      console.warn(\"Batching disabled by user via disableBatching. Disabling batching.\");\n      return;\n    }\n\n    if (!(window.WebGL2RenderingContext && gl instanceof WebGL2RenderingContext)) {\n      console.warn(\"Batching requires WebGL 2. Disabling batching.\");\n      return;\n    }\n\n    if (UBO_BYTE_LENGTH > gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE)) {\n      console.warn(\"Insufficient MAX_UNIFORM_BLOCK_SIZE, Disabling batching.\");\n      return;\n    }\n\n    this.batchingEnabled = qsTruthy(\"forceMeshBatching\") || qsTruthy(\"forceImageBatching\");\n\n    if (!this.batchingEnabled) {\n      console.warn(\"Batching must be forced on with forceMeshBatching or forceImageBatching. Disabling batching.\");\n      return;\n    }\n\n    this.ubo = new HubsBatchRawUniformGroup(MAX_INSTANCES, this.meshToEl);\n    this.batchManager = new BatchManager(scene, renderer, {\n      maxInstances: MAX_INSTANCES,\n      ubo: this.ubo,\n      shaders: {\n        unlit: {\n          vertexShader: unlitBatchVert,\n          fragmentShader: unlitBatchFrag\n        }\n      }\n    });\n  }\n\n  addObject(rootObject) {\n    if (!this.batchingEnabled) return 0;\n\n    let batchedCount = 0;\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        if (this.batchManager.addMesh(object)) batchedCount++;\n      }\n    });\n    return batchedCount;\n  }\n\n  removeObject(rootObject) {\n    if (!this.batchingEnabled) return;\n\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        this.batchManager.removeMesh(object);\n      }\n    });\n  }\n\n  tick(time) {\n    if (!this.batchingEnabled) return;\n\n    this.batchManager.update(time);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { isUI } from \"./interactions\";\n\nexport class InteractionSfxSystem {\n  constructor() {}\n\n  tick(interaction, userinput, sfx) {\n    const state = interaction.state;\n    const previousState = interaction.previousState;\n\n    if (\n      state.leftHand.held !== previousState.leftHand.held ||\n      state.rightHand.held !== previousState.rightHand.held ||\n      state.rightRemote.held !== previousState.rightRemote.held ||\n      (isUI(state.rightRemote.hovered) && state.rightRemote.hovered !== previousState.rightRemote.hovered) ||\n      state.leftRemote.held !== previousState.leftRemote.held ||\n      (isUI(state.leftRemote.hovered) && state.leftRemote.hovered !== previousState.leftRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        state.leftHand.held,\n        \"\\nleftHand hovered\",\n        state.leftHand.hovered,\n        \"\\nrightHand held\",\n        state.rightHand.held,\n        \"\\nrightHand hovered\",\n        state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        state.rightRemote.hovered,\n        \"\\nleftRemote held\",\n        state.leftRemote.held,\n        \"\\nleftRemote hovered\",\n        state.leftRemote.hovered\n      );\n    }\n  }\n}\n","import \"./configs\";\nimport { getThemeColor } from \"./theme\";\nimport ColorShiftWorker from \"../workers/color-shift.worker.js\";\nimport { promisifyWorker } from \"./promisify-worker.js\";\nconst colorShift = promisifyWorker(new ColorShiftWorker());\n\nfunction getThemeColorShifter(type) {\n  // Goal of this algorithm is to take a ctx pointing to a spritesheet\n  // that has a single saturated color, and convert it to another.\n  return async (ctx, w, h) => {\n    const data = ctx.getImageData(0, 0, w, h);\n    const color = type === \"action\" ? getThemeColor(\"action-color\") : getThemeColor(\"notice-background-color\");\n    const res = await colorShift(data.data.buffer, [data.data.buffer], { type, color });\n    ctx.putImageData(new ImageData(res, w, h), 0, 0);\n  };\n}\n\nexport { getThemeColorShifter };\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheetAction from \"../assets/images/spritesheets/sprite-system-action-spritesheet.json\";\nimport spritesheetNotice from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetActionPng from \"../assets/images/spritesheets/sprite-system-action-spritesheet.png\";\nimport spritesheetNoticePng from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vert from \"./sprites/sprite.vert\";\nimport frag from \"./sprites/sprite.frag\";\nimport { getThemeColorShifter } from \"../utils/theme-sprites\";\n\nconst multiviewVertPrefix = [\n  // GLSL 3.0 conversion\n  \"#version 300 es\",\n  \"#define attribute in\",\n  \"#define varying out\",\n  \"#define texture2D texture\",\n  \"#extension GL_OVR_multiview : require\",\n  \"layout(num_views = 2) in;\",\n  \"uniform mat4 modelViewMatrix;\",\n  \"uniform mat4 modelViewMatrix2;\",\n  \"#define modelViewMatrix (gl_ViewID_OVR==0u?modelViewMatrix:modelViewMatrix2)\",\n  \"uniform mat4 projectionMatrix;\",\n  \"uniform mat4 projectionMatrix2;\",\n  \"#define projectionMatrix (gl_ViewID_OVR==0u?projectionMatrix:projectionMatrix2)\",\n  \"\"\n].join(\"\\n\");\nconst nonmultiviewVertPrefix = [\"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"\"].join(\"\\n\");\n\nconst multiviewFragPrefix = [\n  \"#version 300 es\",\n  \"#define varying in\",\n  \"out highp vec4 pc_fragColor;\",\n  \"#define gl_FragColor pc_fragColor\",\n  \"#define texture2D texture\",\n  \"\"\n].join(\"\\n\");\n\nconst nonmultiviewFragPrefix = \"\";\n\nfunction isVisible(o) {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n}\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    // TODO when we run out of sprites we currently just stop rendering them. We need to do something better.\n    if (!(this.didRegisterWithSystem || this.didFailToRegister) && this.el.sceneEl.systems[\"hubs-systems\"]) {\n      const registered = this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.add(this);\n      this.didRegisterWithSystem = registered > 0;\n      this.didFailToRegister = registered < 0;\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet, missingSprites) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        if (missingSprites.indexOf(name) === -1) {\n          missingSprites.push(name);\n        }\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst getSheetType = sprite => (spritesheetAction.frames[sprite.data.name] ? \"action\" : \"notice\");\nconst SHEET_TYPES = [\"action\", \"notice\"];\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    this.updateMatrices();\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nfunction getHoverableVisuals(el) {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n}\n\nfunction enableSweepingEffect(comp) {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n}\n\nfunction createGeometry(maxSprites) {\n  const geometry = new THREE.BufferGeometry();\n  geometry.addAttribute(\"a_vertices\", new THREE.BufferAttribute(new Float32Array(maxSprites * 3 * 4), 3, false));\n  geometry.addAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n  geometry.addAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n  geometry.addAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  const mvCols = new THREE.InterleavedBuffer(new Float32Array(maxSprites * 16 * 4), 16);\n  geometry.addAttribute(\"mvCol0\", new THREE.InterleavedBufferAttribute(mvCols, 4, 0, false));\n  geometry.addAttribute(\"mvCol1\", new THREE.InterleavedBufferAttribute(mvCols, 4, 4, false));\n  geometry.addAttribute(\"mvCol2\", new THREE.InterleavedBufferAttribute(mvCols, 4, 8, false));\n  geometry.addAttribute(\"mvCol3\", new THREE.InterleavedBufferAttribute(mvCols, 4, 12, false));\n  const indices = new Array(3 * 2 * maxSprites);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(indices);\n  return geometry;\n}\n\nconst ZEROS = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (let i = 0; i < SHEET_TYPES.length; i++) {\n      const sheetType = SHEET_TYPES[i];\n      const slots = this.slots[sheetType];\n\n      for (let i = 0, l = slots.length; i < l; i++) {\n        if (!slots[i]) continue;\n\n        const o = this.indexWithSprite[sheetType].get(i).el.object3D;\n        if (isVisible(o)) {\n          raycastOnSprite.call(o, raycaster, intersects);\n        }\n      }\n    }\n\n    return intersects;\n  }\n  constructor(scene) {\n    this.missingSprites = [];\n    this.maxSprites = 1024;\n    this.slots = { action: new Array(this.maxSprites), notice: new Array(this.maxSprites) };\n    this.spriteWithIndex = { action: new Map(), notice: new Map() };\n    this.indexWithSprite = { action: new Map(), notice: new Map() };\n    this.stack = { action: new Array(this.maxSprites), notice: new Array(this.maxSprites) };\n    this.meshes = {};\n\n    for (const stack of Object.values(this.stack)) {\n      for (let i = 0; i < this.maxSprites; i++) {\n        stack[i] = this.maxSprites - 1 - i;\n      }\n    }\n\n    const vertexShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewVertPrefix : nonmultiviewVertPrefix,\n      vert\n    );\n    const fragmentShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewFragPrefix : nonmultiviewFragPrefix,\n      frag\n    );\n\n    const domReady = waitForDOMContentLoaded();\n\n    Promise.all([domReady]).then(() => {\n      for (const [spritesheetPng, type] of [[spritesheetActionPng, \"action\"], [spritesheetNoticePng, \"notice\"]]) {\n        Promise.all([createImageTexture(spritesheetPng, getThemeColorShifter(type)), waitForDOMContentLoaded()]).then(\n          ([spritesheetTexture]) => {\n            const material = new THREE.RawShaderMaterial({\n              uniforms: {\n                u_spritesheet: { value: spritesheetTexture },\n                hubs_Time: { value: 0 }\n              },\n              vertexShader,\n              fragmentShader,\n              side: THREE.DoubleSide,\n              transparent: true\n            });\n            const mesh = (this.meshes[type] = new THREE.Mesh(createGeometry(this.maxSprites), material));\n            const el = document.createElement(\"a-entity\");\n            el.classList.add(\"ui\");\n            scene.appendChild(el);\n            el.setObject3D(\"mesh\", mesh);\n            mesh.frustumCulled = false;\n            mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n            mesh.raycast = this.raycast.bind(this);\n          }\n        );\n      }\n    });\n  }\n\n  tick(t) {\n    if (!this.meshes.action || !this.meshes.notice) return;\n\n    for (let i = 0; i < SHEET_TYPES.length; i++) {\n      const sheetType = SHEET_TYPES[i];\n      const mesh = this.meshes[sheetType];\n      mesh.material.uniforms.hubs_Time.value = t;\n      mesh.material.uniformsNeedUpdate = true;\n\n      const mvCols = mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n      const aEnableSweepingEffect = mesh.geometry.attributes[\"a_hubs_EnableSweepingEffect\"];\n      const aSweepParams = mesh.geometry.attributes[\"a_hubs_SweepParams\"];\n      for (let i = 0, l = this.slots[sheetType].length; i < l; i++) {\n        const slots = this.slots[sheetType];\n        if (!slots[i]) continue;\n\n        const indexWithSprite = this.indexWithSprite[sheetType];\n\n        const sprite = indexWithSprite.get(i);\n\n        if (isVisible(sprite.el.object3D)) {\n          const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n          aEnableSweepingEffect.array[i * 4 + 0] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 1] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 2] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 3] = enableSweepingEffectValue;\n          aEnableSweepingEffect.needsUpdate = true;\n          if (enableSweepingEffectValue) {\n            const hoverableVisuals = getHoverableVisuals(sprite.el);\n            const s = hoverableVisuals.sweepParams[0];\n            const t = hoverableVisuals.sweepParams[1];\n            aSweepParams.setXY(4 * i + 0, s, t);\n            aSweepParams.setXY(4 * i + 1, s, t);\n            aSweepParams.setXY(4 * i + 2, s, t);\n            aSweepParams.setXY(4 * i + 3, s, t);\n            aSweepParams.needsUpdate = true;\n          }\n\n          sprite.el.object3D.updateMatrices();\n          const mat4 = sprite.el.object3D.matrixWorld;\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 0);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 1 * 16);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 2 * 16);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 3 * 16);\n          mvCols.needsUpdate = true;\n        } else {\n          mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n          mvCols.needsUpdate = true;\n        }\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const sheetType = getSheetType(sprite);\n    const mesh = this.meshes[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n\n    const flipY = mesh.material.uniforms.u_spritesheet.value.flipY;\n    const i = spriteWithIndex.get(sprite);\n    const frame = normalizedFrame(\n      sprite.data.name,\n      sheetType === \"action\" ? spritesheetAction : spritesheetNotice,\n      this.missingSprites\n    );\n    const aUvs = mesh.geometry.attributes[\"a_uvs\"];\n\n    aUvs.setXY(i * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(i * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n  }\n\n  add(sprite) {\n    if (!this.meshes.action || !this.meshes.notice) {\n      return 0;\n    }\n    const sheetType = getSheetType(sprite);\n    const stack = this.stack[sheetType];\n    const i = stack.pop();\n    if (i === undefined) {\n      console.error(\"Too many sprites\");\n      return -1;\n    }\n    const slots = this.slots[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n    const indexWithSprite = this.indexWithSprite[sheetType];\n    const mesh = this.meshes[sheetType];\n    slots[i] = true;\n    spriteWithIndex.set(sprite, i);\n    indexWithSprite.set(i, sprite);\n\n    this.updateUVs(sprite);\n\n    const aVertices = mesh.geometry.attributes[\"a_vertices\"];\n    aVertices.setXYZ(i * 4 + 0, -0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 1, 0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 2, -0.5, -0.5, 0);\n    aVertices.setXYZ(i * 4 + 3, 0.5, -0.5, 0);\n    aVertices.needsUpdate = true;\n    return 1;\n  }\n\n  remove(sprite) {\n    const sheetType = getSheetType(sprite);\n    const slots = this.slots[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n    const indexWithSprite = this.indexWithSprite[sheetType];\n    const stack = this.stack[sheetType];\n    const mesh = this.meshes[sheetType];\n\n    const i = spriteWithIndex.get(sprite);\n    spriteWithIndex.delete(sprite);\n    indexWithSprite.delete(i);\n    slots[i] = false;\n    stack.push(i);\n\n    const mvCols = mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n    mvCols.needsUpdate = true;\n  }\n}\n","import { setMatrixWorld, affixToWorldUp } from \"../utils/three-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst calculateIconTransform = (function() {\n  const up = new THREE.Vector3();\n  const backward = new THREE.Vector3();\n  const forward = new THREE.Vector3();\n  const camToWaypoint = new THREE.Vector3();\n  const v1 = new THREE.Vector3();\n  const m1 = new THREE.Matrix4();\n  const position = new THREE.Vector3();\n  let scale = 1;\n\n  return function calculateIconTransform(waypoint, viewingCamera, outMat4) {\n    waypoint.updateMatrices();\n    viewingCamera.updateMatrices();\n    affixToWorldUp(m1.copy(waypoint.matrixWorld), m1).extractBasis(v1, up, backward);\n    position\n      .setFromMatrixPosition(waypoint.matrixWorld)\n      .add(v1.addVectors(up.multiplyScalar(1.6), backward.multiplyScalar(0.15)));\n    camToWaypoint.subVectors(position, v1.setFromMatrixPosition(viewingCamera.matrixWorld));\n    const distance = camToWaypoint.length();\n    const minDistance = distance < 0.2 * v1.setFromMatrixColumn(viewingCamera.matrixWorld, 0).length();\n    if (distance < minDistance) {\n      scale = 0.00001;\n      camToWaypoint.set(0, 0, -1);\n    } else {\n      scale = 0.1 + 0.05 * distance;\n    }\n    forward\n      .copy(camToWaypoint)\n      .projectOnPlane(up.set(0, 1, 0))\n      .normalize();\n\n    return outMat4\n      .makeBasis(\n        v1.crossVectors(forward, up).multiplyScalar(scale),\n        up.multiplyScalar(scale),\n        forward.multiplyScalar(scale * -1)\n      )\n      .setPosition(position);\n  };\n})();\nfunction isMineOrTakeOwnership(el) {\n  return NAF.utils.isMine(el) || NAF.utils.takeOwnership(el);\n}\nfunction isOccupiableSpawnPoint(waypointData) {\n  return waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction isUnoccupiableSpawnPoint(waypointData) {\n  return !waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction loadTemplateAndAddToScene(scene, templateId) {\n  return new Promise(resolve => {\n    const content = document.importNode(document.getElementById(templateId).content.children[0]);\n    scene.appendChild(content, true);\n    setTimeout(() => {\n      // Without this timeout, this resolves too early in Firefox for Android\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      resolve(content);\n    }, 0);\n  });\n}\nfunction templatesToLoadForWaypointData(data) {\n  const templateIds = [];\n  if (data.canBeClicked && data.canBeOccupied) {\n    templateIds.push(\"occupiable-waypoint-icon\");\n  } else if (data.canBeClicked && !data.canBeOccupied) {\n    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isUnoccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isOccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"occupiable-waypoint-icon\");\n  } else {\n    //templateIds.push(\"teleport-waypoint-icon\");\n  }\n  return templateIds;\n}\nfunction loadTemplatesForWaypointData(scene, data) {\n  return templatesToLoadForWaypointData(data).map(templateId => loadTemplateAndAddToScene(scene, templateId));\n}\n\nfunction shouldTryToOccupy(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    (NAF.utils.isMine(waypointComponent.el) ||\n      !(\n        waypointComponent.data.isOccupied &&\n        NAF.utils.getNetworkOwner(waypointComponent.el) &&\n        NAF.connection.connectedClients[NAF.utils.getNetworkOwner(waypointComponent.el)]\n      ))\n  );\n}\n\nfunction isOccupiedByMe(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    waypointComponent.data.isOccupied &&\n    waypointComponent.el.components.networked &&\n    NAF.utils.isMine(waypointComponent.el)\n  );\n}\nfunction unoccupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: false });\n}\nfunction unoccupyWaypoints(waypointComponents) {\n  waypointComponents.filter(isOccupiedByMe).forEach(unoccupyWaypoint);\n}\nfunction occupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: true });\n}\n\nfunction uuid(el) {\n  return el.object3D.uuid;\n}\n\nexport class WaypointSystem {\n  constructor(scene, characterController) {\n    this.helperMat4 = new THREE.Matrix4();\n    this.scene = scene;\n    this.loading = [];\n    this.ready = [];\n    this.waypointForTemplateEl = {};\n    this.elementsFromTemplatesFor = {};\n    this.eventHandlers = [];\n    this.lostOwnershipOfWaypoint = this.lostOwnershipOfWaypoint.bind(this);\n    waitForDOMContentLoaded().then(() => {\n      loadTemplateAndAddToScene(scene, \"waypoint-preview-avatar-template\").then(el => {\n        this.waypointPreviewAvatar = el;\n        this.waypointPreviewAvatar.object3D.visible = false;\n      });\n    });\n    this.characterController = characterController;\n  }\n\n  releaseAnyOccupiedWaypoints() {\n    unoccupyWaypoints(this.ready);\n    if (this.currentWaypoint) {\n      this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n    }\n  }\n\n  teleportToWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      this.releaseAnyOccupiedWaypoints();\n      waypointComponent.el.object3D.updateMatrices();\n      this.characterController.shouldLandWhenPossible = true;\n      this.characterController.enqueueWaypointTravelTo(\n        waypointComponent.el.object3D.matrixWorld,\n        false,\n        waypointComponent.data\n      );\n    }.bind(this);\n  }\n  tryTeleportToOccupiableWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupy(waypointComponent).then(didOccupy => {\n        if (didOccupy) {\n          waypointComponent.el.object3D.updateMatrices();\n          this.characterController.shouldLandWhenPossible = true;\n          this.characterController.enqueueWaypointTravelTo(\n            waypointComponent.el.object3D.matrixWorld,\n            false,\n            waypointComponent.data\n          );\n          unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n        }\n      });\n    }.bind(this);\n  }\n  setupEventHandlersFor(component) {\n    return function setupEventHandlers(el) {\n      const id = uuid(el);\n      this.eventHandlers[id] = this.eventHandlers[id] || {};\n      if (\n        component.data.canBeClicked &&\n        (el.classList.contains(\"teleport-waypoint-icon\") || el.classList.contains(\"occupiable-waypoint-icon\"))\n      ) {\n        const onHover = () => {\n          component.el.object3D.updateMatrices();\n          if (this.waypointPreviewAvatar && !this.waypointForTemplateEl[id].data.willMaintainInitialOrientation) {\n            this.waypointPreviewAvatar.object3D.visible = true;\n            component.el.object3D.updateMatrices();\n            setMatrixWorld(this.waypointPreviewAvatar.object3D, component.el.object3D.matrixWorld);\n          }\n        };\n        const onUnhover = () => {\n          if (this.waypointPreviewAvatar) {\n            this.waypointPreviewAvatar.object3D.visible = false;\n          }\n        };\n        el.object3D.addEventListener(\"hovered\", onHover);\n        el.object3D.addEventListener(\"unhovered\", onUnhover);\n        this.eventHandlers[id][\"hovered\"] = onHover;\n        this.eventHandlers[id][\"unhovered\"] = onUnhover;\n      }\n      if (isTagged(el, \"singleActionButton\") && component.data.canBeClicked) {\n        let onInteract = () => {\n          console.log(\"interacted with\", el, \"associated with waypoint\", component);\n        };\n        if (el.classList.contains(\"teleport-waypoint-icon\")) {\n          onInteract = this.teleportToWaypoint(el, component);\n        } else if (el.classList.contains(\"occupiable-waypoint-icon\")) {\n          onInteract = this.tryTeleportToOccupiableWaypoint(el, component);\n        }\n        el.object3D.addEventListener(\"interact\", onInteract);\n        this.eventHandlers[id][\"interact\"] = onInteract;\n      }\n    }.bind(this);\n  }\n  registerComponent(component) {\n    this.loading.push(component);\n    const setupEventHandlers = this.setupEventHandlersFor(component);\n    const waypointId = uuid(component.el);\n    this.elementsFromTemplatesFor[waypointId] = this.elementsFromTemplatesFor[waypointId] || [];\n    Promise.all(loadTemplatesForWaypointData(this.scene, component.data)).then(elementsFromTemplates => {\n      const li = this.loading.indexOf(component);\n      if (li === -1) {\n        return null;\n      }\n      this.loading.splice(li, 1);\n      this.ready.push(component);\n      this.elementsFromTemplatesFor[waypointId].push(...elementsFromTemplates);\n      elementsFromTemplates.forEach(el => {\n        this.waypointForTemplateEl[uuid(el)] = component;\n      });\n      elementsFromTemplates.forEach(setupEventHandlers);\n    });\n  }\n  unregisterComponent(component) {\n    const li = this.loading.indexOf(component);\n    if (li !== -1) {\n      this.loading.splice(li, 1);\n    }\n    const ri = this.ready.indexOf(component);\n    if (ri !== -1) {\n      this.ready.splice(ri, 1);\n      const waypointId = uuid(component.el);\n      const elementsFromTemplates = this.elementsFromTemplatesFor[waypointId];\n      for (let i = 0; i < elementsFromTemplates.length; i++) {\n        const el = elementsFromTemplates[i];\n        const id = uuid(el);\n        if (this.eventHandlers[id]) {\n          const removeEventListener = eventName => {\n            if (this.eventHandlers[id][eventName]) {\n              el.object3D.removeEventListener(eventName, this.eventHandlers[id][eventName]);\n              delete this.eventHandlers[id][eventName];\n            }\n          };\n          [\"interact\", \"hovered\", \"unhovered\"].map(removeEventListener);\n        }\n        el.parentNode.removeChild(el);\n      }\n      this.elementsFromTemplatesFor[waypointId].length = 0;\n    }\n  }\n  getUnoccupiableSpawnPoint() {\n    const candidates = this.ready.filter(component => isUnoccupiableSpawnPoint(component.data));\n    return candidates.length && candidates.splice(Math.floor(Math.random() * candidates.length), 1)[0];\n  }\n  lostOwnershipOfWaypoint(e) {\n    if (this.currentWaypoint && this.currentWaypoint.el === e.detail.el) {\n      this.mightNeedRespawn = true;\n      this.ownershipLostTime = performance.now();\n    }\n  }\n  tryToOccupy(waypointComponent) {\n    return new Promise(resolve => {\n      if (shouldTryToOccupy(waypointComponent) && isMineOrTakeOwnership(waypointComponent.el)) {\n        occupyWaypoint(waypointComponent);\n        if (this.currentWaypoint) {\n          this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        }\n        this.currentWaypoint = waypointComponent;\n        waypointComponent.el.addEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        resolve(true);\n      } else {\n        resolve(false);\n      }\n    });\n  }\n  tryToOccupyAnyOf(waypoints) {\n    if (!waypoints.length) return Promise.resolve(null);\n    const candidate = waypoints.splice(Math.floor(Math.random() * waypoints.length), 1)[0];\n    return this.tryToOccupy(candidate).then(didOccupy => {\n      if (didOccupy) {\n        return Promise.resolve(candidate);\n      } else {\n        return this.tryToOccupyAnyOf(waypoints);\n      }\n    });\n  }\n  moveToSpawnPoint() {\n    if (this.currentMoveToSpawn) {\n      return this.currentMoveToSpawn;\n    }\n    if (!this.nextMoveToSpawn) {\n      this.waitOneTick = true;\n      this.nextMoveToSpawn = new Promise(resolve => {\n        this.nextMoveToSpawnResolve = resolve;\n      });\n    }\n    return this.nextMoveToSpawn;\n  }\n  moveToUnoccupiableSpawnPoint() {\n    const waypointComponent = this.getUnoccupiableSpawnPoint();\n    if (waypointComponent) {\n      this.releaseAnyOccupiedWaypoints();\n      waypointComponent.el.object3D.updateMatrices();\n      this.characterController.shouldLandWhenPossible = true;\n      this.characterController.enqueueWaypointTravelTo(\n        waypointComponent.el.object3D.matrixWorld,\n        true,\n        waypointComponent.data\n      );\n    }\n    return waypointComponent;\n  }\n  tick() {\n    if (this.waitOneTick) {\n      this.waitOneTick = false;\n      return;\n    }\n    if (!this.currentMoveToSpawn && this.nextMoveToSpawn) {\n      this.mightNeedRespawn = false;\n      this.currentMoveToSpawn = this.nextMoveToSpawn;\n      this.currentMoveToSpawnResolve = this.nextMoveToSpawnResolve;\n      this.nextMoveToSpawn = null;\n      this.nextMoveToSpawnResolve = null;\n\n      let resolvedWaypointOrNull;\n\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupyAnyOf(this.ready.filter(component => isOccupiableSpawnPoint(component.data))).then(\n        waypointComponentOrNull => {\n          if (waypointComponentOrNull) {\n            const waypointComponent = waypointComponentOrNull;\n            unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n            waypointComponent.el.object3D.updateMatrices();\n            this.characterController.shouldLandWhenPossible = true;\n            this.characterController.enqueueWaypointTravelTo(\n              waypointComponent.el.object3D.matrixWorld,\n              true,\n              waypointComponent.data\n            );\n            resolvedWaypointOrNull = waypointComponent;\n          } else if (waypointComponentOrNull === null) {\n            resolvedWaypointOrNull = this.moveToUnoccupiableSpawnPoint();\n          }\n          this.currentMoveToSpawnResolve(resolvedWaypointOrNull);\n          this.currentMoveToSpawn = null;\n          this.currentMoveToSpawnResolve = null;\n        }\n      );\n    } else if (this.mightNeedRespawn && performance.now() - this.ownershipLostTime < 8000) {\n      this.mightNeedRespawn = false;\n      this.moveToSpawnPoint();\n    }\n    const tickTemplateEl = (elementFromTemplate, waypointComponent) => {\n      if (\n        elementFromTemplate.classList.contains(\"teleport-waypoint-icon\") ||\n        elementFromTemplate.classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        elementFromTemplate.object3D.visible = this.scene.is(\"frozen\");\n        if (elementFromTemplate.object3D.visible) {\n          this.viewingCamera = this.viewingCamera || document.getElementById(\"viewing-camera\").object3D;\n          setMatrixWorld(\n            elementFromTemplate.object3D,\n            calculateIconTransform(waypointComponent.el.object3D, this.viewingCamera, this.helperMat4)\n          );\n        }\n      }\n    };\n    function tickWaypoint(waypointComponent) {\n      const elementsFromTemplates = this.elementsFromTemplatesFor[uuid(waypointComponent.el)];\n      elementsFromTemplates.forEach(el => tickTemplateEl(el, waypointComponent));\n    }\n    this.ready.forEach(tickWaypoint.bind(this));\n  }\n}\n\nAFRAME.registerComponent(\"waypoint\", {\n  schema: {\n    canBeSpawnPoint: { default: false },\n    canBeOccupied: { default: false },\n    canBeClicked: { default: false },\n    willDisableMotion: { default: false },\n    willDisableTeleporting: { default: false },\n    snapToNavMesh: { default: false },\n    willMaintainInitialOrientation: { default: false },\n    willMaintainWorldUp: { default: true },\n    isOccupied: { default: false }\n  },\n  init() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    this.didRegisterWithSystem = false;\n  },\n  play() {\n    if (!this.didRegisterWithSystem) {\n      if (this.el.components.networked) {\n        applyPersistentSync(this.el.components.networked.data.networkId);\n      }\n      this.system.registerComponent(this, this.el.sceneEl);\n      this.didRegisterWithSystem = true;\n    }\n  },\n  remove() {\n    if (!this.didRegisterWithSystem) {\n      console.warn(\"Waypoint removed without ever having registered with the system.\");\n    } else {\n      this.system.unregisterComponent(this);\n    }\n  }\n});\n","const mat4Pool = [];\nexport function getPooledMatrix4() {\n  return mat4Pool.shift() || new THREE.Matrix4();\n}\nexport function freePooledMatrix4(mat4) {\n  mat4Pool.push(mat4);\n}\n","export const getCurrentPlayerHeight = (function() {\n  let avatarPOV;\n  let avatarRig;\n  return function getCurrentPlayerHeight(world) {\n    avatarPOV = avatarPOV || document.getElementById(\"avatar-pov-node\");\n    avatarRig = avatarRig || document.getElementById(\"avatar-rig\");\n    avatarRig.object3D.updateMatrices();\n    avatarPOV.object3D.updateMatrices();\n    if (world) {\n      return avatarPOV.object3D.matrixWorld.elements[13] - avatarRig.object3D.matrixWorld.elements[13];\n    }\n    return avatarPOV.object3D.matrix.elements[13];\n  };\n})();\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_SNAP_ROTATE, SOUND_WAYPOINT_START, SOUND_WAYPOINT_END } from \"./sound-effects-system\";\nimport { easeOutQuadratic } from \"../utils/easing\";\nimport { getPooledMatrix4, freePooledMatrix4 } from \"../utils/mat4-pool\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport {\n  childMatch,\n  rotateInPlaceAroundWorldUp,\n  calculateCameraTransformForWaypoint,\n  interpolateAffine,\n  affixToWorldUp\n} from \"../utils/three-utils\";\nimport { getCurrentPlayerHeight } from \"../utils/get-current-player-height\";\nimport qsTruthy from \"../utils/qs_truthy\";\n//import { m4String } from \"../utils/pretty-print\";\nconst NAV_ZONE = \"character\";\nconst qsAllowWaypointLerp = qsTruthy(\"waypointLerp\");\n\nconst calculateDisplacementToDesiredPOV = (function() {\n  const translationCoordinateSpace = new THREE.Matrix4();\n  const translated = new THREE.Matrix4();\n  const localTranslation = new THREE.Matrix4();\n  return function calculateDisplacementToDesiredPOV(\n    povMat4,\n    allowVerticalMovement,\n    localDisplacement,\n    displacementToDesiredPOV\n  ) {\n    localTranslation.makeTranslation(localDisplacement.x, localDisplacement.y, localDisplacement.z);\n    translationCoordinateSpace.extractRotation(povMat4);\n    if (!allowVerticalMovement) {\n      affixToWorldUp(translationCoordinateSpace, translationCoordinateSpace);\n    }\n    translated.copy(translationCoordinateSpace).multiply(localTranslation);\n    return displacementToDesiredPOV.setFromMatrixPosition(translated);\n  };\n})();\n\n/**\n * A character controller that moves the avatar.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n */\nconst SNAP_ROTATION_RADIAN = THREE.Math.DEG2RAD * 45;\nconst BASE_SPEED = 3.2; //TODO: in what units?\nexport class CharacterControllerSystem {\n  constructor(scene) {\n    this.scene = scene;\n    this.fly = false;\n    this.shouldLandWhenPossible = false;\n    this.waypoints = [];\n    this.waypointTravelStartTime = 0;\n    this.waypointTravelTime = 0;\n    this.navGroup = null;\n    this.navNode = null;\n    this.relativeMotion = new THREE.Vector3(0, 0, 0);\n    this.nextRelativeMotion = new THREE.Vector3(0, 0, 0);\n    this.dXZ = 0;\n    this.scene.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n    });\n  }\n  // Use this API for waypoint travel so that your matrix doesn't end up in the pool\n  enqueueWaypointTravelTo(inTransform, isInstant, waypointComponentData) {\n    this.waypoints.push({ transform: getPooledMatrix4().copy(inTransform), isInstant, waypointComponentData }); //TODO: don't create new object\n  }\n  enqueueRelativeMotion(motion) {\n    motion.z *= -1;\n    this.relativeMotion.add(motion);\n  }\n  enqueueInPlaceRotationAroundWorldUp(dXZ) {\n    this.dXZ += dXZ;\n  }\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo = (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    //TODO: Use enqueue waypoint\n    return function teleportTo(targetWorldPosition) {\n      this.isMotionDisabled = false;\n      this.avatarRig.object3D.getWorldPosition(rig);\n      this.avatarPOV.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.avatarPOV.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      this.findPositionOnNavMesh(targetForRig, targetForRig, this.avatarRig.object3D.position, navMeshExists);\n      this.avatarRig.object3D.matrixNeedsUpdate = true;\n    };\n  })();\n\n  travelByWaypoint = (function() {\n    const inMat4Copy = new THREE.Matrix4();\n    const inPosition = new THREE.Vector3();\n    const outPosition = new THREE.Vector3();\n    const translation = new THREE.Matrix4();\n    const initialOrientation = new THREE.Matrix4();\n    const finalScale = new THREE.Vector3();\n    const finalPosition = new THREE.Vector3();\n    const finalPOV = new THREE.Matrix4();\n    return function travelByWaypoint(inMat4, snapToNavMesh, willMaintainInitialOrientation) {\n      this.avatarPOV.object3D.updateMatrices();\n      if (!this.fly && !snapToNavMesh) {\n        this.fly = true;\n        this.shouldLandWhenPossible = true;\n        this.shouldUnoccupyWaypointsOnceMoving = true;\n      }\n      inMat4Copy.copy(inMat4);\n      rotateInPlaceAroundWorldUp(inMat4Copy, Math.PI, finalPOV);\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      if (!navMeshExists && snapToNavMesh) {\n        console.warn(\"Tried to travel to a waypoint that wants to snap to the nav mesh, but there is no nav mesh\");\n      }\n      if (navMeshExists && snapToNavMesh) {\n        inPosition.setFromMatrixPosition(inMat4Copy);\n        this.findPositionOnNavMesh(inPosition, inPosition, outPosition, true);\n        finalPOV.setPosition(outPosition);\n      }\n      translation.makeTranslation(0, getCurrentPlayerHeight(), -0.15);\n      finalPOV.multiply(translation);\n      if (willMaintainInitialOrientation) {\n        initialOrientation.extractRotation(this.avatarPOV.object3D.matrixWorld);\n        finalScale.setFromMatrixScale(finalPOV);\n        finalPosition.setFromMatrixPosition(finalPOV);\n        finalPOV\n          .copy(initialOrientation)\n          .scale(finalScale)\n          .setPosition(finalPosition);\n      }\n      calculateCameraTransformForWaypoint(this.avatarPOV.object3D.matrixWorld, finalPOV, finalPOV);\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, finalPOV);\n    };\n  })();\n\n  tick = (function() {\n    const snapRotatedPOV = new THREE.Matrix4();\n    const newPOV = new THREE.Matrix4();\n    const displacementToDesiredPOV = new THREE.Vector3();\n\n    const startPOVPosition = new THREE.Vector3();\n    const desiredPOVPosition = new THREE.Vector3();\n    const navMeshSnappedPOVPosition = new THREE.Vector3();\n    const AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND = 50;\n    const startTransform = new THREE.Matrix4();\n    const interpolatedWaypoint = new THREE.Matrix4();\n    const startTranslation = new THREE.Matrix4();\n    const waypointPosition = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    let uiRoot;\n    return function tick(t, dt) {\n      const entered = this.scene.is(\"entered\");\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      if (!isGhost && !entered) return;\n      const vrMode = this.scene.is(\"vr-mode\");\n      this.sfx = this.sfx || this.scene.systems[\"hubs-systems\"].soundEffectsSystem;\n      this.waypointSystem = this.waypointSystem || this.scene.systems[\"hubs-systems\"].waypointSystem;\n\n      if (!this.activeWaypoint && this.waypoints.length) {\n        this.activeWaypoint = this.waypoints.splice(0, 1)[0];\n        this.isMotionDisabled = this.activeWaypoint.waypointComponentData.willDisableMotion;\n        this.isTeleportingDisabled = this.activeWaypoint.waypointComponentData.willDisableTeleporting;\n        this.avatarPOV.object3D.updateMatrices();\n        this.waypointTravelTime =\n          (vrMode && !qsAllowWaypointLerp) || this.activeWaypoint.isInstant\n            ? 0\n            : 1000 *\n              (new THREE.Vector3()\n                .setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld)\n                .distanceTo(waypointPosition.setFromMatrixPosition(this.activeWaypoint.transform)) /\n                AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND);\n        rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, Math.PI, startTransform);\n        startTransform.multiply(startTranslation.makeTranslation(0, -1 * getCurrentPlayerHeight(), -0.15));\n        this.waypointTravelStartTime = t;\n        if (!vrMode && this.waypointTravelTime > 100) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_START);\n        }\n      }\n\n      const animationIsOver =\n        this.waypointTravelTime === 0 || t >= this.waypointTravelStartTime + this.waypointTravelTime;\n      if (this.activeWaypoint && !animationIsOver) {\n        const progress = THREE.Math.clamp((t - this.waypointTravelStartTime) / this.waypointTravelTime, 0, 1);\n        interpolateAffine(\n          startTransform,\n          this.activeWaypoint.transform,\n          easeOutQuadratic(progress),\n          interpolatedWaypoint\n        );\n        this.travelByWaypoint(\n          interpolatedWaypoint,\n          false,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n      }\n      if (this.activeWaypoint && (this.waypoints.length || animationIsOver)) {\n        this.travelByWaypoint(\n          this.activeWaypoint.transform,\n          this.activeWaypoint.waypointComponentData.snapToNavMesh,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n        freePooledMatrix4(this.activeWaypoint.transform);\n        this.activeWaypoint = null;\n        if (vrMode || this.waypointTravelTime > 0) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_END);\n        }\n      }\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const wasFlying = this.fly;\n      if (userinput.get(paths.actions.toggleFly)) {\n        this.shouldLandWhenPossible = false;\n        this.avatarRig.messageDispatch.dispatch(\"/fly\"); // TODO: Separate the logic about displaying the message from toggling the fly state in such a way that it is clear that this.fly will be toggled here\n      }\n      const didStopFlying = wasFlying && !this.fly;\n      if (!this.fly && this.shouldLandWhenPossible) {\n        this.shouldLandWhenPossible = false;\n      }\n      if (this.fly) {\n        this.navNode = null;\n      }\n      const preferences = window.APP.store.state.preferences;\n      const snapRotateLeft = userinput.get(paths.actions.snapRotateLeft);\n      const snapRotateRight = userinput.get(paths.actions.snapRotateRight);\n      if (snapRotateLeft) {\n        this.dXZ +=\n          preferences.snapRotationDegrees === undefined\n            ? SNAP_ROTATION_RADIAN\n            : (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateRight) {\n        this.dXZ -=\n          preferences.snapRotationDegrees === undefined\n            ? SNAP_ROTATION_RADIAN\n            : (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateLeft || snapRotateRight) {\n        this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n      }\n      const characterAcceleration = userinput.get(paths.actions.characterAcceleration);\n      if (characterAcceleration) {\n        const zCharacterAcceleration = -1 * characterAcceleration[1];\n        this.relativeMotion.set(\n          this.relativeMotion.x +\n            (preferences.disableMovement || preferences.disableStrafing ? 0 : characterAcceleration[0]),\n          this.relativeMotion.y,\n          this.relativeMotion.z +\n            (preferences.disableMovement\n              ? 0\n              : preferences.disableBackwardsMovement\n                ? Math.min(0, zCharacterAcceleration)\n                : zCharacterAcceleration)\n        );\n      }\n      const lerpC = vrMode ? 0 : 0.85; // TODO: To support drifting (\"ice skating\"), motion needs to keep initial direction\n      this.nextRelativeMotion.copy(this.relativeMotion).multiplyScalar(lerpC);\n      this.relativeMotion.multiplyScalar(1 - lerpC);\n\n      this.avatarPOV.object3D.updateMatrices();\n      rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, this.dXZ, snapRotatedPOV);\n\n      newPOV.copy(snapRotatedPOV);\n\n      const navMeshExists = NAV_ZONE in this.scene.systems.nav.pathfinder.zones;\n      if (!this.isMotionDisabled) {\n        const playerScale = v.setFromMatrixColumn(this.avatarPOV.object3D.matrixWorld, 1).length();\n        const triedToMove = this.relativeMotion.lengthSq() > 0.000001;\n\n        if (triedToMove) {\n          calculateDisplacementToDesiredPOV(\n            snapRotatedPOV,\n            this.fly || !navMeshExists,\n            this.relativeMotion.multiplyScalar(\n              ((userinput.get(paths.actions.boost) ? 2 : 1) * BASE_SPEED * Math.sqrt(playerScale) * dt) / 1000\n            ),\n            displacementToDesiredPOV\n          );\n\n          newPOV\n            .makeTranslation(displacementToDesiredPOV.x, displacementToDesiredPOV.y, displacementToDesiredPOV.z)\n            .multiply(snapRotatedPOV);\n        }\n\n        const shouldRecomputeNavGroupAndNavNode = didStopFlying || this.shouldLandWhenPossible;\n        const shouldResnapToNavMesh = navMeshExists && (shouldRecomputeNavGroupAndNavNode || triedToMove);\n\n        let squareDistNavMeshCorrection = 0;\n\n        if (shouldResnapToNavMesh) {\n          this.findPOVPositionAboveNavMesh(\n            startPOVPosition.setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld),\n            desiredPOVPosition.setFromMatrixPosition(newPOV),\n            navMeshSnappedPOVPosition,\n            shouldRecomputeNavGroupAndNavNode\n          );\n\n          squareDistNavMeshCorrection = desiredPOVPosition.distanceToSquared(navMeshSnappedPOVPosition);\n\n          if (this.fly && this.shouldLandWhenPossible && squareDistNavMeshCorrection < 0.5 && !this.activeWaypoint) {\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          } else if (!this.fly) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          }\n        }\n\n        if (!this.activeWaypoint && this.shouldUnoccupyWaypointsOnceMoving && triedToMove) {\n          this.shouldUnoccupyWaypointsOnceMoving = false;\n          this.waypointSystem.releaseAnyOccupiedWaypoints();\n          if (this.fly && this.shouldLandWhenPossible && (shouldResnapToNavMesh && squareDistNavMeshCorrection < 3)) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n          }\n        }\n      }\n\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, newPOV);\n      this.relativeMotion.copy(this.nextRelativeMotion);\n      this.dXZ = 0;\n    };\n  })();\n\n  getClosestNode(pos) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!pathfinder.zones[NAV_ZONE].groups[this.navGroup]) {\n      return null;\n    }\n    return (\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup)\n    );\n  }\n\n  findPOVPositionAboveNavMesh = (function() {\n    const startingFeetPosition = new THREE.Vector3();\n    const desiredFeetPosition = new THREE.Vector3();\n    // TODO: Here we assume the player is standing straight up, but in VR it is often the case\n    // that you want to lean over the edge of a balcony/table that does not have nav mesh below.\n    // We should find way to allow leaning over the edge of a balcony and maybe disallow putting\n    // your head through a wall.\n    return function findPOVPositionAboveNavMesh(\n      startPOVPosition,\n      desiredPOVPosition,\n      outPOVPosition,\n      shouldRecomputeGroupAndNode\n    ) {\n      const playerHeight = getCurrentPlayerHeight(true);\n      startingFeetPosition.copy(startPOVPosition);\n      startingFeetPosition.y -= playerHeight;\n      desiredFeetPosition.copy(desiredPOVPosition);\n      desiredFeetPosition.y -= playerHeight;\n      this.findPositionOnNavMesh(\n        startingFeetPosition,\n        desiredFeetPosition,\n        outPOVPosition,\n        shouldRecomputeGroupAndNode\n      );\n      outPOVPosition.y += playerHeight;\n      return outPOVPosition;\n    };\n  })();\n\n  findPositionOnNavMesh(start, end, outPos, shouldRecomputeGroupAndNode) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(NAV_ZONE, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode || this.navNode === null || this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, outPos);\n    }\n    return outPos;\n  }\n\n  enableFly(enabled) {\n    if (enabled && window.APP.hubChannel && window.APP.hubChannel.can(\"fly\")) {\n      this.fly = true;\n    } else {\n      this.fly = false;\n    }\n    return this.fly;\n  }\n}\n","export class CursorPoseTrackingSystem {\n  constructor() {\n    this.pairs = [];\n  }\n  register(object3D, path) {\n    this.pairs.push({ object3D, path });\n  }\n  unregister(object3D) {\n    this.pairs = this.pairs.filter(p => p.object3D !== object3D);\n  }\n  tick() {\n    for (let i = 0; i < this.pairs.length; i++) {\n      const matrix = AFRAME.scenes[0].systems.userinput.get(this.pairs[i].path);\n      if (matrix) {\n        const o = this.pairs[i].object3D;\n        o.matrix.copy(matrix);\n        o.matrix.decompose(o.position, o.quaternion, o.scale);\n        o.matrixIsModified = true;\n        o.matrixWorldNeedsUpdate = true;\n      }\n    }\n  }\n}\n","import { squareDistanceBetween } from \"../utils/three-utils\";\nconst MIN_DISTANCE = 0.2;\nexport class ScaleInScreenSpaceSystem {\n  constructor() {\n    this.components = [];\n  }\n  register(c) {\n    this.components.push(c);\n  }\n  unregister(c) {\n    this.components = this.components.filter(comp => comp !== c);\n  }\n\n  tick = (function() {\n    const parentScale = new THREE.Vector3();\n    return function tick() {\n      this.viewingCamera = this.viewingCamera || document.getElementById(\"viewing-camera\");\n      for (let i = 0; i < this.components.length; i++) {\n        const component = this.components[i];\n        // TODO: This calculates the distance to the viewing camera, the correct distance might be to the viewing plane.\n        // This seemed accurate enough in my testing.\n        const distance = Math.sqrt(squareDistanceBetween(component.el.object3D, this.viewingCamera.object3D));\n        if (distance < MIN_DISTANCE) {\n          component.el.object3D.scale.set(0.00001, 0.000001, 0.00001);\n        } else {\n          const parent = component.el.object3D.parent;\n          parent.updateMatrices();\n          parentScale.setFromMatrixScale(parent.matrixWorld);\n          component.el.object3D.scale.set(\n            (1 / parentScale.x) * (component.data.baseScale.x + distance * component.data.addedScale.x),\n            (1 / parentScale.y) * (component.data.baseScale.y + distance * component.data.addedScale.y),\n            (1 / parentScale.z) * (component.data.baseScale.z + distance * component.data.addedScale.z)\n          );\n        }\n        component.el.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })();\n}\n","function updateMediaAudioSettings(audio, settings) {\n  audio.setDistanceModel(settings.mediaDistanceModel);\n  audio.setRolloffFactor(settings.mediaRolloffFactor);\n  audio.setRefDistance(settings.mediaRefDistance);\n  audio.setMaxDistance(settings.mediaMaxDistance);\n  audio.panner.coneInnerAngle = settings.mediaConeInnerAngle;\n  audio.panner.coneOuterAngle = settings.mediaConeOuterAngle;\n  audio.panner.coneOuterGain = settings.mediaConeOuterGain;\n}\n\nfunction updateAvatarAudioSettings(audio, settings) {\n  if (audio.setDistanceModel) {\n    audio.setDistanceModel(settings.avatarDistanceModel);\n    audio.setRolloffFactor(settings.avatarRolloffFactor);\n    audio.setRefDistance(settings.avatarRefDistance);\n    audio.setMaxDistance(settings.avatarMaxDistance);\n  }\n}\n\nexport class AudioSettingsSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n    this.defaultSettings = {\n      avatarDistanceModel: \"inverse\",\n      avatarRolloffFactor: 2,\n      avatarRefDistance: 1,\n      avatarMaxDistance: 10000,\n      mediaVolume: 0.5,\n      mediaDistanceModel: \"inverse\",\n      mediaRolloffFactor: 1,\n      mediaRefDistance: 1,\n      mediaMaxDistance: 10000,\n      mediaConeInnerAngle: 360,\n      mediaConeOuterAngle: 0,\n      mediaConeOuterGain: 0\n    };\n    this.audioSettings = this.defaultSettings;\n    this.mediaAudioSources = [];\n    this.avatarAudioSources = [];\n\n    this.sceneEl.addEventListener(\"reset_scene\", this.onSceneReset);\n\n    if (window.APP.store.state.preferences.audioOutputMode === \"audio\") {\n      window.APP.store.state.preferences.audioOutputMode = \"panner\"; //hack to always reset to \"panner\"\n    }\n  }\n\n  registerMediaAudioSource(audioSource) {\n    this.mediaAudioSources.push(audioSource);\n    updateMediaAudioSettings(audioSource, this.audioSettings);\n  }\n\n  unregisterMediaAudioSource(audioSource) {\n    this.mediaAudioSources.splice(this.mediaAudioSources.indexOf(audioSource, 1));\n  }\n\n  registerAvatarAudioSource(audioSource) {\n    this.avatarAudioSources.push(audioSource);\n    updateAvatarAudioSettings(audioSource, this.audioSettings);\n  }\n\n  unregisterAvatarAudioSource(audioSource) {\n    this.avatarAudioSources.splice(this.avatarAudioSources.indexOf(audioSource, 1));\n  }\n\n  updateAudioSettings(settings) {\n    this.audioSettings = Object.assign({}, this.defaultSettings, settings);\n\n    for (const mediaAudioSource of this.mediaAudioSources) {\n      updateMediaAudioSettings(mediaAudioSource, settings);\n    }\n\n    for (const avatarAudioSource of this.avatarAudioSources) {\n      updateAvatarAudioSettings(avatarAudioSource, settings);\n    }\n  }\n\n  onSceneReset = () => {\n    this.updateAudioSettings(this.defaultSettings);\n  };\n}\n\nAFRAME.registerComponent(\"audio-source\", {\n  schema: {\n    type: { type: \"string\" } // avatar, media\n  },\n\n  init() {\n    this.audioSource = null;\n\n    if (this.data.type === \"avatar\") {\n      this.onSoundSourceSet = this.onSoundSourceSet.bind(this);\n      this.el.addEventListener(\"sound-source-set\", this.onSoundSourceSet);\n    } else if (this.data.type === \"media\") {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  tick: function() {\n    const networkedAudioSource = this.el.components[\"networked-audio-source\"];\n    if (networkedAudioSource) {\n      const audioOutputMode = window.APP.store.state.preferences.audioOutputMode === \"audio\" ? \"audio\" : \"panner\";\n      if (\n        (audioOutputMode === \"panner\" && !networkedAudioSource.data.positional) ||\n        (audioOutputMode === \"audio\" && networkedAudioSource.data.positional)\n      ) {\n        networkedAudioSource.data.positional = audioOutputMode === \"panner\" ? true : false;\n        networkedAudioSource.sound.disconnect();\n        networkedAudioSource.setupSound();\n        const soundSource = networkedAudioSource.sound.context.createMediaStreamSource(networkedAudioSource.stream);\n        networkedAudioSource.sound.setNodeSource(soundSource);\n        networkedAudioSource.el.emit(\"sound-source-set\", { soundSource });\n      }\n\n      // Probably not the most robust method of checking if the audio source is\n      // the current player.\n      const isLoopback = networkedAudioSource.el.id === \"avatar-head\";\n\n      // Self-monitoring settings\n      if (isLoopback) {\n        const monitoringEnabled = window.APP.store.state.preferences.enableMonitoring;\n        if (!monitoringEnabled && networkedAudioSource.sound.getVolume()) {\n          networkedAudioSource.sound.setVolume(0);\n        }\n        if (monitoringEnabled && !networkedAudioSource.sound.getVolume()) {\n          networkedAudioSource.sound.setVolume(1);\n        }\n      }\n    }\n  },\n\n  onSoundSourceSet() {\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n    const networkedAudioSource = this.el.components[\"networked-audio-source\"];\n\n    if (this.audioSource) {\n      audioSettingsSystem.unregisterAvatarAudioSource(this.audioSource);\n    }\n\n    if (networkedAudioSource) {\n      this.audioSource = networkedAudioSource.sound;\n      audioSettingsSystem.registerAvatarAudioSource(this.audioSource);\n    }\n  },\n\n  onVideoLoaded() {\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n    const mediaVideo = this.el.components[\"media-video\"];\n\n    if (this.audioSource) {\n      audioSettingsSystem.unregisterMediaAudioSource(this.audioSource);\n    }\n\n    if (mediaVideo && mediaVideo.audio) {\n      this.audioSource = mediaVideo.audio;\n      audioSettingsSystem.registerMediaAudioSource(this.audioSource);\n    }\n  },\n\n  remove() {\n    if (!this.audioSource) {\n      return;\n    }\n\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n\n    if (this.data.type === \"avatar\") {\n      audioSettingsSystem.unregisterAvatarAudioSource(this.audioSource);\n      this.el.removeEventListener(\"sound-source-set\", this.onSoundSourceSet);\n    } else if (this.data.type === \"media\") {\n      audioSettingsSystem.unregisterMediaAudioSource(this.audioSource);\n      this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nlet uiRoot;\nexport class EnterVRButtonSystem {\n  constructor(scene) {\n    this.scene = scene;\n    this.wasGhost = false;\n  }\n  enableButton() {\n    this.scene.setAttribute(\"vr-mode-ui\", \"enabled\", true);\n    this.scene.components[\"vr-mode-ui\"].enterVREl.style.display = \"block\";\n    this.scene.components[\"vr-mode-ui\"].enterVREl.style.bottom = \"80px\";\n  }\n  disableButton() {\n    this.scene.components[\"vr-mode-ui\"].enterVREl.style.display = \"none\";\n  }\n  tick() {\n    if (this.scene.is(\"entered\")) {\n      return;\n    }\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const enable =\n      configs.feature(\"enable_lobby_ghosts\") &&\n      uiRoot &&\n      uiRoot.firstChild &&\n      (uiRoot.firstChild.classList.contains(\"isGhost\") && !uiRoot.firstChild.classList.contains(\"hide\"));\n    if (enable && !this.enabled) {\n      this.enableButton();\n    } else if (this.enabled && !enable) {\n      this.disableButton();\n    }\n    this.enabled = enable;\n  }\n}\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { CursorTogglingSystem } from \"./cursor-toggling-system\";\nimport { PhysicsSystem } from \"./physics-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { DrawingMenuSystem } from \"./drawing-menu-system\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\nimport { BatchManagerSystem } from \"./render-manager-system\";\nimport { ScenePreviewCameraSystem } from \"./scene-preview-camera-system\";\nimport { InteractionSfxSystem } from \"./interaction-sfx-system\";\nimport { SpriteSystem } from \"./sprites\";\nimport { CameraSystem } from \"./camera-system\";\nimport { WaypointSystem } from \"./waypoint-system\";\nimport { CharacterControllerSystem } from \"./character-controller-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { CursorPoseTrackingSystem } from \"./cursor-pose-tracking\";\nimport { ScaleInScreenSpaceSystem } from \"./scale-in-screen-space\";\nimport { AudioSettingsSystem } from \"./audio-settings-system\";\nimport { EnterVRButtonSystem } from \"./enter-vr-button-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    waitForDOMContentLoaded().then(() => {\n      this.DOMContentDidLoad = true;\n    });\n    this.cursorTogglingSystem = new CursorTogglingSystem();\n    this.interactionSfxSystem = new InteractionSfxSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.physicsSystem = new PhysicsSystem(this.el.object3D);\n    this.constraintsSystem = new ConstraintsSystem(this.physicsSystem);\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.soundEffectsSystem = new SoundEffectsSystem(this.el);\n    this.scenePreviewCameraSystem = new ScenePreviewCameraSystem();\n    this.spriteSystem = new SpriteSystem(this.el);\n    this.batchManagerSystem = new BatchManagerSystem(this.el.object3D, this.el.renderer);\n    this.cameraSystem = new CameraSystem(this.el);\n    this.drawingMenuSystem = new DrawingMenuSystem(this.el);\n    this.characterController = new CharacterControllerSystem(this.el);\n    this.waypointSystem = new WaypointSystem(this.el, this.characterController);\n    this.cursorPoseTrackingSystem = new CursorPoseTrackingSystem();\n    this.scaleInScreenSpaceSystem = new ScaleInScreenSpaceSystem();\n    this.audioSettingsSystem = new AudioSettingsSystem(this.el);\n    this.enterVRButtonSystem = new EnterVRButtonSystem(this.el);\n  },\n\n  tick(t, dt) {\n    if (!this.DOMContentDidLoad) return;\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2();\n    this.characterController.tick(t, dt);\n    this.cursorTogglingSystem.tick(systems.interaction, systems.userinput, this.el);\n    this.interactionSfxSystem.tick(systems.interaction, systems.userinput, this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.cursorPoseTrackingSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.scaleInScreenSpaceSystem.tick();\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.drawingMenuSystem.tick();\n    this.hoverMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(\n      this.twoPointStretchingSystem,\n      this.singleActionButtonSystem.didInteractLeftThisFrame,\n      this.singleActionButtonSystem.didInteractRightThisFrame\n    );\n    this.soundEffectsSystem.tick();\n    this.scenePreviewCameraSystem.tick();\n    this.physicsSystem.tick(dt);\n    this.spriteSystem.tick(t, dt);\n    this.batchManagerSystem.tick(t);\n    this.cameraSystem.tick(this.el, dt);\n    this.waypointSystem.tick(t, dt);\n    this.enterVRButtonSystem.tick();\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let deltaScale;\n    if (interaction.state.rightRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.right.scaleGrabbedGrabbable);\n    }\n    if (interaction.state.leftRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.left.scaleGrabbedGrabbable);\n    }\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = false;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    this.intersection = null;\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = new THREE.Color(0, 0, 0);\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    return function(t, left) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(left ? paths.actions.cursor.left.pose : paths.actions.cursor.right.pose);\n      const hideLine = userinput.get(left ? paths.actions.cursor.left.hideLine : paths.actions.cursor.right.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      this.intersection = null;\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.updateMatrices();\n      const playerScale = v\n        .setFromMatrixColumn(\n          this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.matrixWorld,\n          1\n        )\n        .length();\n      this.raycaster.far = this.data.far * playerScale;\n      this.raycaster.near = this.data.near * playerScale;\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const isGrabbing = left ? !!interaction.state.leftRemote.held : !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        this.intersection = rawIntersections[0];\n        this.intersectionIsValid = !!interaction.updateCursorIntersection(this.intersection, left);\n        this.distance = this.intersectionIsValid ? this.intersection.distance : this.data.defaultDistance * playerScale;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta =\n        userinput.get(left ? paths.actions.cursor.left.modDelta : paths.actions.cursor.right.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(left ? sets.leftCursorHoldingUI : sets.rightCursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far * playerScale);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      // TODO : Check if the selected object being transformed is for this cursor!\n      const transformObjectSystem = AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      if (\n        transformObjectSystem.transforming &&\n        ((left && transformObjectSystem.hand.el.id === \"player-left-controller\") ||\n          (!left && transformObjectSystem.hand.el.id === \"player-right-controller\"))\n      ) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (this.intersectionIsValid || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (!this.data.cursor.object3DMap.mesh.material.color.equals(this.color)) {\n        this.data.cursor.object3DMap.mesh.material.color.copy(this.color);\n        this.data.cursor.object3DMap.mesh.material.needsUpdate = true;\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  \"right-cursor\": {\n    pose: paths.actions.cursor.right.pose,\n    startDrawing: paths.actions.cursor.right.startDrawing,\n    stopDrawing: paths.actions.cursor.right.stopDrawing,\n    undoDrawing: paths.actions.cursor.right.undoDrawing,\n    penNextColor: paths.actions.cursor.right.penNextColor,\n    penPrevColor: paths.actions.cursor.right.penPrevColor,\n    scalePenTip: paths.actions.cursor.right.scalePenTip\n  },\n  \"left-cursor\": {\n    pose: paths.actions.cursor.left.pose,\n    startDrawing: paths.actions.cursor.left.startDrawing,\n    stopDrawing: paths.actions.cursor.left.stopDrawing,\n    undoDrawing: paths.actions.cursor.left.undoDrawing,\n    penNextColor: paths.actions.cursor.left.penNextColor,\n    penPrevColor: paths.actions.cursor.left.penPrevColor,\n    scalePenTip: paths.actions.cursor.left.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_3D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    drawMode: { default: DRAW_MODE.DEFAULT_3D, oneOf: [DRAW_MODE.DEFAULT_3D, DRAW_MODE.PROJECTION] },\n    penVisible: { default: true },\n    penTipPosition: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.lastIntersectionDistance = 0;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.el.parentEl.object3D);\n    }\n\n    this.penLaserAttributesUpdated = false;\n    this.penLaserAttributes = {\n      color: \"#FF0033\",\n      laserVisible: false,\n      laserInHand: false,\n      laserOrigin: { x: 0, y: 0, z: 0 },\n      remoteLaserOrigin: { x: 0, y: 0, z: 0 },\n      laserTarget: { x: 0, y: 0, z: 0 }\n    };\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.penLaserAttributes.color = this.data.color;\n      this.el.setAttribute(\"pen-laser\", { color: this.data.color });\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick(t, dt) {\n    const isMine = this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n\n    if (this.penTip.material.visible !== isMine) {\n      this.penTip.material.visible = isMine;\n    }\n\n    if (isMine) {\n      this._handleInput();\n\n      const cursorPose =\n        this.data.drawMode === DRAW_MODE.PROJECTION &&\n        (this.grabberId === \"right-cursor\" || this.grabberId === \"left-cursor\")\n          ? AFRAME.scenes[0].systems.userinput.get(pathsMap[this.grabberId].pose)\n          : null;\n\n      const intersection = this._getIntersection(cursorPose);\n\n      this._updatePenTip(intersection);\n\n      const laserVisible = this.data.drawMode === DRAW_MODE.PROJECTION && !!intersection;\n      const laserInHand = this.el.sceneEl.is(\"vr-mode\") && laserVisible;\n\n      if (this.penLaserAttributes.laserVisible !== laserVisible) {\n        this.penLaserAttributes.laserVisible = laserVisible;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (this.penLaserAttributes.laserInHand !== laserInHand) {\n        this.penLaserAttributes.laserInHand = laserInHand;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (laserVisible) {\n        this._updateLaser(cursorPose, intersection);\n      }\n\n      const penVisible = (this.grabberId !== \"left-cursor\" && this.grabberId !== \"right-cursor\") || !intersection;\n      this._setPenVisible(penVisible);\n      this.el.setAttribute(\"pen\", { penVisible: penVisible });\n\n      this._doDraw(intersection, dt);\n\n      if (this.penLaserAttributesUpdated) {\n        this.penLaserAttributesUpdated = false;\n        this.el.setAttribute(\"pen-laser\", this.penLaserAttributes, true);\n      }\n    } else {\n      this._setPenVisible(this.data.penVisible);\n    }\n  },\n\n  _handleInput() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    if (interaction.state.rightHand.held === this.el.parentNode) {\n      this.grabberId = \"player-right-controller\";\n    } else if (interaction.state.leftHand.held === this.el.parentNode) {\n      this.grabberId = \"player-left-controller\";\n    } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n      this.grabberId = \"right-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else if (interaction.state.leftRemote.held === this.el.parentNode) {\n      this.grabberId = \"left-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else {\n      this.grabberId = null;\n    }\n\n    if (this.grabberId && pathsMap[this.grabberId]) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      const paths = pathsMap[this.grabberId];\n      if (userinput.get(paths.startDrawing)) {\n        this._startDraw();\n        sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n      }\n      if (userinput.get(paths.stopDrawing)) {\n        this._endDraw();\n        sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n      }\n      const penScaleMod = userinput.get(paths.scalePenTip);\n      if (penScaleMod) {\n        this._changeRadius(penScaleMod);\n      }\n      if (userinput.get(paths.penNextColor)) {\n        this._changeColor(1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.penPrevColor)) {\n        this._changeColor(-1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.undoDrawing)) {\n        this._undoDraw();\n        sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n      }\n      if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n        this.data.drawMode = this.data.drawMode === DRAW_MODE.DEFAULT_3D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_3D;\n      }\n    }\n  },\n\n  _getIntersection: (() => {\n    const rawIntersections = [];\n    const worldQuaternion = new THREE.Quaternion();\n    return function(cursorPose) {\n      rawIntersections.length = 0;\n\n      if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n        if (cursorPose) {\n          this.raycaster.ray.origin.copy(cursorPose.position);\n          this.raycaster.ray.direction.copy(cursorPose.direction);\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          return rawIntersections[0];\n        }\n      }\n\n      return null;\n    };\n  })(),\n\n  _updatePenTip(intersection) {\n    if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n      if (intersection) {\n        this.el.object3D.position.copy(intersection.point);\n\n        this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.worldPosition.copy(intersection.point);\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n    } else {\n      this.el.object3D.position.copy(this.originalPosition);\n      this.el.object3D.matrixNeedsUpdate = true;\n      getLastWorldPosition(this.el.object3D, this.worldPosition);\n    }\n  },\n\n  _updateLaser: (() => {\n    const laserStartPosition = new THREE.Vector3();\n    const laserEndPosition = new THREE.Vector3();\n    const camerWorldPosition = new THREE.Vector3();\n    const remoteLaserOrigin = new THREE.Vector3();\n    return function(cursorPose, intersection) {\n      if (cursorPose) {\n        laserStartPosition.copy(cursorPose.position);\n      } else {\n        this.el.parentEl.object3D.getWorldPosition(laserStartPosition);\n      }\n\n      laserEndPosition.copy(intersection.point);\n\n      if (this.el.sceneEl.is(\"vr-mode\")) {\n        remoteLaserOrigin.copy(laserStartPosition);\n      } else {\n        this.data.camera.object3D.getWorldPosition(camerWorldPosition);\n        remoteLaserOrigin\n          .subVectors(laserEndPosition, camerWorldPosition)\n          .normalize()\n          .multiplyScalar(0.5);\n        remoteLaserOrigin.add(camerWorldPosition);\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserOrigin, laserStartPosition)) {\n        this.penLaserAttributes.laserOrigin.x = laserStartPosition.x;\n        this.penLaserAttributes.laserOrigin.y = laserStartPosition.y;\n        this.penLaserAttributes.laserOrigin.z = laserStartPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.remoteLaserOrigin, remoteLaserOrigin)) {\n        this.penLaserAttributes.remoteLaserOrigin.x = remoteLaserOrigin.x;\n        this.penLaserAttributes.remoteLaserOrigin.y = remoteLaserOrigin.y;\n        this.penLaserAttributes.remoteLaserOrigin.z = remoteLaserOrigin.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserTarget, laserEndPosition)) {\n        this.penLaserAttributes.laserTarget.x = laserEndPosition.x;\n        this.penLaserAttributes.laserTarget.y = laserEndPosition.y;\n        this.penLaserAttributes.laserTarget.z = laserEndPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n    };\n  })(),\n\n  _doDraw(intersection, dt) {\n    //Prevent drawings from \"jumping\" large distances\n    if (\n      this.currentDrawing &&\n      (this.lastIntersectedObject !== (intersection ? intersection.object : null) &&\n        (!intersection ||\n          Math.abs(intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n    ) {\n      this.worldPosition.copy(this.lastPosition);\n      this._endDraw();\n    }\n    this.lastIntersectionDistance = intersection ? intersection.distance : 0;\n    this.lastIntersectedObject = intersection ? intersection.object : null;\n\n    if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n      this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n      this.lastPosition.copy(this.worldPosition);\n    }\n\n    if (this.currentDrawing) {\n      const time = this.timeSinceLastDraw + dt;\n      if (\n        time >= this.data.drawFrequency &&\n        this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n      ) {\n        this._getNormal(this.normal, this.worldPosition, this.direction);\n        this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n      }\n\n      this.timeSinceLastDraw = time % this.data.drawFrequency;\n    }\n\n    if (this.currentDrawing && !this.grabberId) {\n      this._endDraw();\n    }\n\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n  },\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      this.currentDrawing = drawing;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    });\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    });\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.penLaserAttributes.color = this.data.color;\n    this.penLaserAttributesUpdated = true;\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n});\n","const InterpolationBuffer = require(\"buffered-interpolation\");\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen-laser\", {\n  schema: {\n    color: { type: \"color\", default: \"#FF0033\" },\n    laserVisible: { default: false },\n    laserInHand: { default: false },\n    laserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    remoteLaserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    laserTarget: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    let material = new THREE.MeshStandardMaterial({ color: \"red\", opacity: 0.5, transparent: true, visible: true });\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    const tipMaterial = material.clone();\n\n    const lineCurve = new THREE.LineCurve3(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 2));\n    const geometry = new THREE.TubeBufferGeometry(lineCurve, 2, 0.003, 8, true);\n    this.laser = new THREE.Mesh(geometry, material);\n\n    this.laserTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 8, 6), tipMaterial);\n    this.laserTip.scale.setScalar(0.01);\n    this.laserTip.matrixNeedsUpdate = true;\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.laser);\n      environmentMapComponent.applyEnvironmentMap(this.laserTip);\n    }\n\n    //prevents the line from being a raycast target for the cursor\n    this.laser.raycast = function() {};\n\n    this.el.sceneEl.setObject3D(`pen-laser-${this.laser.uuid}`, this.laser);\n    this.el.sceneEl.setObject3D(`pen-laser-tip-${this.laser.uuid}`, this.laserTip);\n\n    this.originBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n    this.targetBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n  },\n\n  update: (() => {\n    const originBufferPosition = new THREE.Vector3();\n    const targetBufferPosition = new THREE.Vector3();\n\n    return function(prevData) {\n      if (prevData.color != this.data.color) {\n        this.laser.material.color.set(this.data.color);\n        this.laserTip.material.color.set(this.data.color);\n      }\n\n      if (prevData.remoteLaserOrigin && !almostEquals(0.001, prevData.remoteLaserOrigin, this.data.remoteLaserOrigin)) {\n        this.originBuffer.setPosition(\n          originBufferPosition.set(\n            this.data.remoteLaserOrigin.x,\n            this.data.remoteLaserOrigin.y,\n            this.data.remoteLaserOrigin.z\n          )\n        );\n      }\n\n      if (prevData.laserTarget && !almostEquals(0.001, prevData.laserTarget, this.data.laserTarget)) {\n        this.targetBuffer.setPosition(\n          targetBufferPosition.set(this.data.laserTarget.x, this.data.laserTarget.y, this.data.laserTarget.z)\n        );\n      }\n    };\n  })(),\n\n  tick: (() => {\n    const origin = new THREE.Vector3();\n    const target = new THREE.Vector3();\n    return function(t, dt) {\n      const isMine =\n        this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n      let laserVisible = false;\n\n      if (isMine && this.data.laserVisible) {\n        origin.copy(this.data.laserOrigin);\n\n        if (!this.data.laserInHand) {\n          // On 2d mode, shift downards\n          origin.y = origin.y - 0.4;\n        }\n\n        target.copy(this.data.laserTarget);\n        laserVisible = true;\n      } else if (!isMine && this.data.laserVisible) {\n        this.originBuffer.update(dt);\n        this.targetBuffer.update(dt);\n        origin.copy(this.originBuffer.getPosition());\n        target.copy(this.targetBuffer.getPosition());\n        laserVisible = true;\n      }\n\n      if (laserVisible) {\n        this.laser.position.copy(origin);\n        this.laser.lookAt(target);\n        this.laser.scale.set(1, 1, origin.distanceTo(target));\n        this.laser.matrixNeedsUpdate = true;\n        this.laserTip.position.copy(target);\n        this.laserTip.matrixNeedsUpdate = true;\n      }\n\n      if (this.laser.material.visible !== laserVisible) {\n        this.laser.material.visible = laserVisible;\n      }\n\n      const laserTipVisible = laserVisible ? !(isMine && this.data.laserVisible) : false;\n      if (this.laserTip.material.visible !== laserTipVisible) {\n        this.laserTip.material.visible = laserTipVisible;\n      }\n    };\n  })(),\n\n  remove() {\n    this.el.sceneEl.removeObject3D(`pen-laser-${this.laser.uuid}`);\n    this.el.sceneEl.removeObject3D(`pen-laser-tip-${this.laser.uuid}`);\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n\n  computeBoundingSpheres() {\n    for (let i = 0; i < this.geometries.length; i++) {\n      this.geometries[i].computeBoundingSphere();\n    }\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { addMedia, addMeshScaleAnimation } from \"../../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../../object-types\";\nimport { SOUND_PEN_START_DRAW } from \"../../systems/sound-effects-system\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n\n    this.el.setObject3D(\"mesh\", this.drawing);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.drawing);\n    }\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  play() {\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.registerDrawingMenu(this.el);\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.drawStarted = false;\n\n    this.el.removeObject3D(\"mesh\");\n\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    drawingManager.destroyDrawing(this);\n\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.unregisterDrawingMenu(this.el);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  async serializeDrawing() {\n    const exporter = new GLTFExporter();\n\n    const material = new THREE.MeshStandardMaterial({\n      vertexColors: THREE.VertexColors\n    });\n    const geometry = this.convertToTriangles(this.sharedBuffer.current);\n    const mesh = new THREE.Mesh(geometry, material);\n\n    mesh.userData.gltfExtensions = {\n      MOZ_hubs_components: { \"networked-drawing-buffer\": { buffer: this.networkBuffer } }\n    };\n\n    const chunks = await new Promise(resolve => {\n      exporter.parseChunks(\n        mesh,\n        resolve,\n        e => {\n          new Error(`Error serializing drawing. ${e}`);\n        },\n        {\n          mode: \"glb\",\n          includeCustomExtensions: true\n        }\n      );\n    });\n\n    const json = chunks.json;\n    if (!json.extensions) {\n      json.extensions = {};\n    }\n    json.extensions.MOZ_hubs_components = { version: 4 };\n    json.asset.generator = `Mozilla Hubs Serialize Drawing`;\n\n    const glb = await new Promise((resolve, reject) => {\n      exporter.createGLBBlob(chunks, resolve, e => {\n        reject(new Error(`Error creating glb blob. ${e}`));\n      });\n    });\n\n    const file = new File([glb], \"drawing.glb\", {\n      type: \"model/gltf-binary\"\n    });\n\n    const { entity } = addMedia(file, \"#interactable-media\", ObjectContentOrigins.FILE, \"drawing\", false, false);\n\n    const min = new THREE.Vector3(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n    const max = new THREE.Vector3(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n    const temp = new THREE.Vector3();\n\n    const { start, count } = this.sharedBuffer.current.drawRange;\n    const attribute = this.sharedBuffer.current.attributes.position;\n    for (let i = start; i < count; i++) {\n      temp.set(attribute.getX(i), attribute.getY(i), attribute.getZ(i));\n      min.min(temp);\n      max.max(temp);\n    }\n\n    entity.object3D.position.addVectors(min, max).multiplyScalar(0.5);\n    entity.object3D.matrixNeedsUpdate = true;\n  },\n\n  convertToTriangles(originalGeometry) {\n    const geometry = new THREE.BufferGeometry();\n\n    const { start, count } = originalGeometry.drawRange;\n\n    const originalPositions = originalGeometry.getAttribute(\"position\");\n    const originalColors = originalGeometry.getAttribute(\"color\");\n    const originalNormals = originalGeometry.getAttribute(\"normal\");\n\n    const length = count * 3;\n    const positions = new Float32Array(length);\n    const colors = new Float32Array(length);\n    const normals = new Float32Array(length);\n    const indices = [];\n\n    let index = 0;\n    let order = 0;\n\n    const copy = i => {\n      colors[index] = originalColors.getX(i);\n      normals[index] = originalNormals.getX(i);\n      positions[index] = originalPositions.getX(i);\n      index++;\n      colors[index] = originalColors.getY(i);\n      normals[index] = originalNormals.getY(i);\n      positions[index] = originalPositions.getY(i);\n      index++;\n      colors[index] = originalColors.getZ(i);\n      normals[index] = originalNormals.getZ(i);\n      positions[index] = originalPositions.getZ(i);\n      index++;\n    };\n\n    for (let i = start; i < count - 2; i++) {\n      const i2 = i + 1 + order;\n      const i3 = i + 2 - order;\n\n      if (i === 0) {\n        copy(i);\n        copy(i2);\n        copy(i3);\n      } else if (i2 > i3) {\n        copy(i2);\n      } else {\n        copy(i3);\n      }\n\n      indices.push(i, i2, i3);\n      order = (order + 1) % 2;\n    }\n\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3));\n    geometry.setIndex(indices);\n\n    return geometry;\n  },\n\n  deserializeDrawing: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function(buffer) {\n      let head = buffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        buffer.shift();\n        head = buffer[0];\n      }\n\n      while (head != null && buffer.length >= 11) {\n        position.set(buffer[1], buffer[2], buffer[3]);\n        direction.set(buffer[4], buffer[5], buffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(buffer[7], buffer[8], buffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        buffer.splice(0, 10);\n\n        if (!this.drawStarted) {\n          this.startDraw(position, direction, normal);\n        } else if (buffer[0] !== null) {\n          this.draw(position, direction, normal);\n        }\n\n        if (buffer[0] === null) {\n          this.endDraw(position, direction, normal);\n          buffer.shift();\n        }\n      }\n    };\n  })(),\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n\n    this.sharedBuffer.computeBoundingSpheres();\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n\nAFRAME.registerComponent(\"networked-drawing-buffer\", {\n  schema: {\n    buffer: { default: [] }\n  },\n\n  play() {\n    const button = this._getDeserializeButton(this.el.parentEl);\n    if (button) {\n      button.object3D.visible = true;\n      button.components[\"deserialize-drawing-button\"].networkedDrawingBuffer = this;\n    }\n  },\n\n  _getDeserializeButton(entity) {\n    if (entity.classList.contains(\"interactable\")) {\n      return entity.querySelector(\".deserialize-drawing\");\n    } else if (entity.parentEl) {\n      return this._getDeserializeButton(entity.parentEl);\n    } else {\n      return null;\n    }\n  }\n});\n\nAFRAME.registerComponent(\"deserialize-drawing-button\", {\n  init() {\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    this.networkedDrawingBuffer = null;\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const finishDrawing = () => {\n        drawingManager.drawing.deserializeDrawing(this.networkedDrawingBuffer.data.buffer);\n        addMeshScaleAnimation(drawingManager.drawing.el.object3DMap.mesh, { x: 0.001, y: 0.001, z: 0.001 });\n\n        if (this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned) {\n          this.targetEl.setAttribute(\"pinnable\", \"pinned\", false);\n        }\n        this.targetEl.parentEl.removeChild(this.targetEl);\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_START_DRAW);\n      };\n\n      //serialize any existing drawing and clear the drawing.\n      if (drawingManager.drawing) {\n        drawingManager.drawing.serializeDrawing().then(() => {\n          drawingManager.drawing.el.parentEl.removeChild(drawingManager.drawing.el);\n          drawingManager.destroyDrawing();\n\n          drawingManager.createDrawing().then(finishDrawing);\n        });\n      } else {\n        drawingManager.createDrawing().then(finishDrawing);\n      }\n    };\n\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (this.networkedDrawingBuffer) {\n      const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      const canPin = window.APP.hubChannel.can(\"pin_objects\") && window.APP.hubChannel.signedIn;\n      this.el.object3D.visible = (!isPinned || canPin) && window.APP.hubChannel.can(\"spawn_drawing\");\n    } else {\n      this.el.object3D.visible = false;\n    }\n  }\n});\n","import { CONSTANTS } from \"three-ammo\";\nconst ACTIVATION_STATE = CONSTANTS.ACTIVATION_STATE,\n  TYPE = CONSTANTS.TYPE;\n\nconst ACTIVATION_STATES = [\n  ACTIVATION_STATE.ACTIVE_TAG,\n  ACTIVATION_STATE.ISLAND_SLEEPING,\n  ACTIVATION_STATE.WANTS_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_SIMULATION\n];\n\nAFRAME.registerComponent(\"body-helper\", {\n  schema: {\n    loadedEvent: { default: \"\" },\n    mass: { default: 1 },\n    gravity: { type: \"vec3\", default: { x: 0, y: -9.8, z: 0 } },\n    linearDamping: { default: 0.01 },\n    angularDamping: { default: 0.01 },\n    linearSleepingThreshold: { default: 1.6 },\n    angularSleepingThreshold: { default: 2.5 },\n    angularFactor: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    activationState: {\n      default: ACTIVATION_STATE.ACTIVE_TAG,\n      oneOf: ACTIVATION_STATES\n    },\n    type: { default: \"dynamic\", oneOf: [TYPE.STATIC, TYPE.DYNAMIC, TYPE.KINEMATIC] },\n    emitCollisionEvents: { default: false },\n    disableCollision: { default: false },\n    collisionFilterGroup: { default: 1 }, //32-bit mask,\n    collisionFilterMask: { default: 1 }, //32-bit mask\n    scaleAutoUpdate: { default: true }\n  },\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.uuid = -1;\n    this.system.registerBodyHelper(this);\n  },\n\n  init2: function() {\n    this.el.object3D.updateMatrices();\n    this.uuid = this.system.addBody(this.el.object3D, this.data);\n  },\n\n  update: function(prevData) {\n    if (prevData !== null && this.uuid !== -1) {\n      this.system.updateBody(this.uuid, this.data);\n    }\n  },\n\n  remove: function() {\n    if (this.uuid !== -1) {\n      this.system.removeBody(this.uuid);\n    }\n    this.alive = false;\n  }\n});\n","import { SHAPE, FIT } from \"three-ammo/constants\";\n\nAFRAME.registerComponent(\"shape-helper\", {\n  schema: {\n    type: {\n      default: SHAPE.HULL,\n      oneOf: [\n        SHAPE.BOX,\n        SHAPE.CYLINDER,\n        SHAPE.SPHERE,\n        SHAPE.CAPSULE,\n        SHAPE.CONE,\n        SHAPE.HULL,\n        SHAPE.HACD,\n        SHAPE.VHACD,\n        SHAPE.MESH,\n        SHAPE.HEIGHTFIELD\n      ]\n    },\n    fit: { default: FIT.ALL, oneOf: [FIT.ALL, FIT.MANUAL] },\n    halfExtents: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    minHalfExtent: { default: 0 },\n    maxHalfExtent: { default: Number.POSITIVE_INFINITY },\n    sphereRadius: { default: NaN },\n    cylinderAxis: { default: \"y\", oneOf: [\"x\", \"y\", \"z\"] },\n    margin: { default: 0.01 },\n    offset: { type: \"vec3\", default: { x: 0, y: 0, z: 0 } },\n    orientation: { type: \"vec4\", default: { x: 0, y: 0, z: 0, w: 1 } },\n    heightfieldData: { default: [] },\n    heightfieldDistance: { default: 1 },\n    includeInvisible: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.uuid = -1;\n    this.system.registerShapeHelper(this);\n  },\n\n  init2: function() {\n    this.mesh = null;\n\n    let bodyEl = this.el;\n    this.bodyHelper = bodyEl.components[\"body-helper\"] || null;\n    while (!this.bodyHelper && bodyEl.parentNode != this.el.sceneEl) {\n      bodyEl = bodyEl.parentNode;\n      if (bodyEl.components[\"body-helper\"]) {\n        this.bodyHelper = bodyEl.components[\"body-helper\"];\n      }\n    }\n    if (!this.bodyHelper || this.bodyHelper.uuid === null || this.bodyHelper.uuid === undefined) {\n      console.warn(\"body not found\");\n      return;\n    }\n    if (this.data.fit === FIT.ALL) {\n      if (!this.el.object3DMap.mesh) {\n        console.error(\"Cannot use FIT.ALL without object3DMap.mesh\");\n        return;\n      }\n      this.mesh = this.el.object3DMap.mesh;\n      this.mesh.updateMatrices();\n    }\n\n    this.uuid = this.system.addShapes(this.bodyHelper.uuid, this.mesh, this.data);\n  },\n\n  remove: function() {\n    if (this.uuid !== -1) {\n      this.system.removeShapes(this.bodyHelper.uuid, this.uuid);\n    }\n    this.alive = false;\n  }\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  // Note: networked template ids are semantically important. We use the template suffix as a filter\n  // for allowing and authorizing messages in reticulum.\n  // See `spawn_permitted?` in https://github.com/mozilla/reticulum/blob/master/lib/ret_web/channels/hub_channel.ex\n\n  // NAF schemas have been extended with a custom nonAuthorizedComponents property that is used to skip authorization\n  // on certain components and properties regardless of hub or user permissions. See permissions-utils.js.\n\n  NAF.schemas.add({\n    template: \"#remote-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-emoji\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"emoji\",\n        property: \"emitEndTime\"\n      },\n      {\n        component: \"emoji\",\n        property: \"particleEmitterConfig\"\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"media-loader\",\n      \"pinnable\",\n      {\n        selector: \".particle-emitter\",\n        component: \"particle-emitter\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\n      \"position\",\n      \"rotation\",\n      {\n        component: \"camera-tool\",\n        property: \"isSnapping\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"isRecording\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"label\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#template-waypoint-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-pen\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"drawMode\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"penVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"remoteLaserOrigin\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserTarget\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import \"./webxr-bypass-hacks\";\nimport configs from \"./utils/configs\";\nimport \"./utils/theme\";\nimport \"@babel/polyfill\";\nimport \"./utils/debug-log\";\n\nconsole.log(`App version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\nimport initialBatchImage from \"./assets/images/warning_icon.png\";\nimport loadingEnvironment from \"./assets/models/LoadingEnvironment.glb\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport patchThreeAllocations from \"./utils/threejs-allocation-patches\";\nimport { detectOS } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  invalidateReticulumMeta,\n  migrateChannelToSocket\n} from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport { authorizeOrSanitizeMessage } from \"./utils/permissions-utils\";\nimport Cookies from \"js-cookie\";\n\nimport \"./components/scene-components\";\nimport \"./components/scale-in-screen-space\";\nimport \"./components/mute-mic\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/fader\";\nimport \"./components/in-world-hud\";\nimport \"./components/emoji\";\nimport \"./components/emoji-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-on-content-types\";\nimport \"./components/hide-when-pinned-and-forbidden\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-views\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/mirror-media-button\";\nimport \"./components/close-mirrored-media-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/refresh-media-button\";\nimport \"./components/tweet-media-button\";\nimport \"./components/remix-avatar-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/scale-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/set-active-camera\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/hubs-text\";\nimport \"./components/billboard\";\nimport \"./components/periodic-full-syncs\";\nimport \"./components/inspect-button\";\nimport \"./components/set-max-resolution\";\nimport { sets as userinputSets } from \"./systems/userinput/sets\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory, createMemoryHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/auto-pixel-ratio\";\nimport \"./systems/idle-detector\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport \"./systems/listed-media\";\nimport \"./systems/linked-media\";\nimport { SOUND_CHAT_MESSAGE } from \"./systems/sound-effects-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 12; // Above this # of occupants, we stop posting join/leaves/renames\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality =\n  window.APP.store.state.preferences.materialQualitySetting === \"low\"\n    ? \"low\"\n    : window.APP.store.state.preferences.materialQualitySetting === \"high\"\n      ? \"high\"\n      : isMobile || isMobileVR\n        ? \"low\"\n        : \"high\";\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/owned-object-cleanup-timeout\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/pen-laser\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport \"./components/body-helper\";\nimport \"./components/shape-helper\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"./utils/vr-caps-detect\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\nNAF.options.syncSource = PHOENIX_RELIABLE_NAF;\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\ndetectConcurrentLoad();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.getElementById(\"scene-preview-node\");\n  const previewCamera = document.getElementById(\"environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.removeAttribute(\"scene-preview-camera\");\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"/\";\n}\n\n// when loading the client as a \"default room\" on the homepage, use MemoryHistory since exposing all the client paths at the root is undesirable\nconst history = routerBaseName === \"/\" ? createMemoryHistory() : createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nconst qsVREntryType = qs.get(\"vr_entry_type\");\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnIdle =\n    qsTruthy(\"allow_idle\") || (process.env.NODE_ENV === \"development\" && !qs.get(\"idle_timeout\"));\n  const isCursorHoldingPen =\n    scene &&\n    (scene.systems.userinput.activeSets.includes(userinputSets.rightCursorHoldingPen) ||\n      scene.systems.userinput.activeSets.includes(userinputSets.leftCursorHoldingPen));\n  const hasActiveCamera = scene && !!scene.systems[\"camera-tools\"].getMyCamera();\n  const forcedVREntryType = qsVREntryType;\n\n  ReactDOM.render(\n    <Router history={history}>\n      <Route\n        render={routeProps => (\n          <UIRoot\n            {...{\n              scene,\n              isBotMode,\n              disableAutoExitOnIdle,\n              forcedVREntryType,\n              store,\n              mediaSearchStore,\n              isCursorHoldingPen,\n              hasActiveCamera,\n              ...props,\n              ...routeProps\n            }}\n          />\n        )}\n      />\n    </Router>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function updateEnvironmentForHub(hub, entryManager) {\n  let sceneUrl;\n  let isLegacyBundle; // Deprecated\n\n  const sceneErrorHandler = () => {\n    remountUI({ roomUnavailableReason: \"scene_error\" });\n    entryManager.exitScene();\n  };\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironment;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src || loadingEnvironment;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n\n  console.log(`Scene URL: ${sceneUrl}`);\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        sceneEl.addState(\"visible\");\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n\n    environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n    environmentScene.appendChild(environmentEl);\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n    const waypointSystem = sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.releaseAnyOccupiedWaypoints();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              waypointSystem.moveToSpawnPoint();\n            }\n\n            const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n            // Add a slight delay before de-in to reduce hitching.\n            setTimeout(() => fader.fadeIn(), 2000);\n          },\n          { once: true }\n        );\n\n        sceneEl.emit(\"leaving_loading_environment\");\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    if (!sceneEl.is(\"entered\")) {\n      environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n    }\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironment });\n  }\n}\n\nasync function updateUIForHub(hub, hubChannel) {\n  remountUI({ hub, entryDisallowed: !hubChannel.canEnterRoom(hub) });\n}\n\nfunction handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEnteredEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Janus host: ${hub.host}:${hub.port}`);\n\n  remountUI({\n    onSendMessage: messageDispatch.dispatch,\n    onLoaded: () => store.executeOnLoadActions(scene),\n    onMediaSearchResultEntrySelected: (entry, selectAction) =>\n      scene.emit(\"action_selected_media_result_entry\", { entry, selectAction }),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedToken\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const { entry, selectAction } = e.detail;\n    if ((entry.type !== \"scene_listing\" && entry.type !== \"scene\") || selectAction !== \"use\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n        scene.emit(\"2d-interstitial-gesture-complete\");\n      }\n    });\n  });\n\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n  if (!isBotMode) {\n    objectsScene.appendChild(objectsEl);\n  }\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  const connectToScene = async () => {\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}:${hub.port}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n      let newHostPollInterval = null;\n\n      // When reconnecting, update the server URL if necessary\n      adapter.setReconnectionListeners(\n        () => {\n          if (newHostPollInterval) return;\n\n          newHostPollInterval = setInterval(async () => {\n            const currentServerURL = NAF.connection.adapter.serverUrl;\n            const newHubHost = await hubChannel.getHost();\n            const newServerURL = `wss://${newHubHost}`;\n\n            if (currentServerURL !== newServerURL) {\n              console.log(\"Connecting to new Janus server \" + newServerURL);\n              scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n              adapter.serverUrl = newServerURL;\n            }\n          }, 1000);\n        },\n        () => {\n          clearInterval(newHostPollInterval);\n          newHostPollInterval = null;\n        },\n        null\n      );\n\n      const sendViaPhoenix = reliable => (clientId, dataType, data) => {\n        const payload = { dataType, data };\n\n        if (clientId) {\n          payload.clientId = clientId;\n        }\n\n        const isOpen = hubChannel.channel.socket.connectionState() === \"open\";\n\n        if (isOpen || reliable) {\n          const hasFirstSync =\n            payload.dataType === \"um\" ? payload.data.d.find(r => r.isFirstSync) : payload.data.isFirstSync;\n\n          if (hasFirstSync) {\n            if (isOpen) {\n              hubChannel.channel.push(\"naf\", payload);\n            } else {\n              // Memory is re-used, so make a copy\n              hubChannel.channel.push(\"naf\", AFRAME.utils.clone(payload));\n            }\n          } else {\n            // Optimization: Strip isFirstSync and send payload as a string to reduce server parsing.\n            // The server will not parse messages without isFirstSync keys when sent to the nafr event.\n            //\n            // The client must assume any payload that does not have a isFirstSync key is not a first sync.\n            const nafrPayload = AFRAME.utils.clone(payload);\n            if (nafrPayload.dataType === \"um\") {\n              for (let i = 0; i < nafrPayload.data.d.length; i++) {\n                delete nafrPayload.data.d[i].isFirstSync;\n              }\n            } else {\n              delete nafrPayload.data.isFirstSync;\n            }\n\n            hubChannel.channel.push(\"nafr\", { naf: JSON.stringify(nafrPayload) });\n          }\n        }\n      };\n\n      adapter.reliableTransport = sendViaPhoenix(true);\n      adapter.unreliableTransport = sendViaPhoenix(false);\n    });\n\n    const loadEnvironmentAndConnect = () => {\n      updateEnvironmentForHub(hub, entryManager);\n      function onConnectionError() {\n        console.error(\"Unknown error occurred while attempting to connect to networked scene.\");\n        remountUI({ roomUnavailableReason: \"connect_error\" });\n        entryManager.exitScene();\n      }\n\n      const connectionErrorTimeout = setTimeout(onConnectionError, 90000);\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => {\n          clearTimeout(connectionErrorTimeout);\n          scene.emit(\"didConnectToNetworkedScene\");\n        })\n        .catch(connectError => {\n          clearTimeout(connectionErrorTimeout);\n          // hacky until we get return codes\n          const isFull = connectError.msg && connectError.msg.match(/\\bfull\\b/i);\n          console.error(connectError);\n          remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n          entryManager.exitScene();\n\n          return;\n        });\n    };\n\n    updateUIForHub(hub, hubChannel);\n\n    if (!isEmbed) {\n      loadEnvironmentAndConnect();\n    } else {\n      remountUI({\n        onPreloadLoadClicked: () => {\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  };\n\n  if (!isBotMode) {\n    objectsEl.addEventListener(\"model-loaded\", async el => {\n      if (el.target !== objectsEl) return;\n      connectToScene();\n    });\n  } else {\n    connectToScene();\n  }\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\nfunction checkForAccountRequired() {\n  // If the app requires an account to join a room, redirect to the sign in page.\n  if (!configs.feature(\"require_account_for_join\")) return;\n  if (store.state.credentials && store.state.credentials.token) return;\n  document.location = `/?sign_in&sign_in_destination=hub&sign_in_destination_url=${encodeURIComponent(\n    document.location.toString()\n  )}`;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  await store.initProfile();\n\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  warmSerializeElement();\n\n  if (!window.WebAssembly) {\n    remountUI({ showWebAssemblyDialog: true });\n    return;\n  }\n\n  // Some apps like Twitter, Discord and Facebook on Android and iOS open links in\n  // their own embedded preview browsers.\n  //\n  // On iOS this WebView does not have a mediaDevices API at all, but in Android apps\n  // like Facebook, the browser pretends to have a mediaDevices, but never actually\n  // prompts the user for device access. So, we show a dialog that tells users to open\n  // the room in an actual browser like Safari, Chrome or Firefox.\n  //\n  // Facebook Mobile Browser on Android has a userAgent like this:\n  // Mozilla/5.0 (Linux; Android 9; SM-G950U1 Build/PPR1.180610.011; wv) AppleWebKit/537.36 (KHTML, like Gecko)\n  // Version/4.0 Chrome/80.0.3987.149 Mobile Safari/537.36 [FB_IAB/FB4A;FBAV/262.0.0.34.117;]\n  const detectedOS = detectOS(navigator.userAgent);\n  if ((detectedOS === \"iOS\" && !navigator.mediaDevices) || /\\bfb_iab\\b/i.test(navigator.userAgent)) {\n    remountUI({ showInAppBrowserDialog: true });\n    return;\n  }\n\n  const defaultRoomId = configs.feature(\"default_room_id\");\n\n  const hubId =\n    qs.get(\"hub_id\") ||\n    (document.location.pathname === \"/\" && defaultRoomId\n      ? defaultRoomId\n      : document.location.pathname.substring(1).split(\"/\")[0]);\n  console.log(`Hub ID: ${hubId}`);\n\n  if (!defaultRoomId) {\n    // Default room won't work if account is required to access\n    checkForAccountRequired();\n  }\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  } else {\n    subscriptions.setRegistrationFailed();\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  // HACK - Trigger initial batch preparation with an invisible object\n  scene\n    .querySelector(\"#batch-prep\")\n    .setAttribute(\"media-image\", { batch: true, src: initialBatchImage, contentType: \"image/png\" });\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems[\"hubs-systems\"].physicsSystem;\n    physicsSystem.setDebug(isDebug || physicsSystem.debug);\n    patchThreeAllocations();\n  };\n\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    await store.resetToRandomDefaultAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, availableVREntryTypes, history);\n  const performConditionalSignIn = async (predicate, action, messageId, onFailure) => {\n    if (predicate()) return action();\n\n    const signInContinueTextId = scene.is(\"vr-mode\") ? \"entry.return-to-vr\" : \"dialog.close\";\n\n    await handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId: `sign-in.${messageId}`,\n      signInCompleteMessageId: `sign-in.${messageId}-complete`,\n      signInContinueTextId,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        exit2DInterstitialAndEnterVR();\n      }\n    });\n  };\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      \"create-avatar\"\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      \"change-scene\"\n    );\n  });\n\n  scene.addEventListener(\"action_media_tweet\", async e => {\n    let isInModal = false;\n    let isInOAuth = false;\n\n    const exitOAuth = () => {\n      isInOAuth = false;\n      store.clearOnLoadActions();\n      remountUI({ showOAuthDialog: false, oauthInfo: null });\n    };\n\n    await handleExitTo2DInterstitial(true, () => {\n      if (isInModal) history.goBack();\n      if (isInOAuth) exitOAuth();\n    });\n\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      async () => {\n        // Strip el from stored payload because it won't serialize into the store.\n        const serializableDetail = {};\n        Object.assign(serializableDetail, e.detail);\n        delete serializableDetail.el;\n\n        if (hubChannel.can(\"tweet\")) {\n          isInModal = true;\n          pushHistoryState(history, \"modal\", \"tweet\", serializableDetail);\n        } else {\n          if (e.detail.el) {\n            // Pin the object if we have to go through OAuth, since the page will refresh and\n            // the object will otherwise be removed\n            e.detail.el.setAttribute(\"pinnable\", \"pinned\", true);\n          }\n\n          const url = await hubChannel.getTwitterOAuthURL();\n\n          isInOAuth = true;\n          store.enqueueOnLoadAction(\"emit_scene_event\", { event: \"action_media_tweet\", detail: serializableDetail });\n          remountUI({\n            showOAuthDialog: true,\n            oauthInfo: [{ type: \"twitter\", url: url }],\n            onCloseOAuthDialog: () => exitOAuth()\n          });\n        }\n      },\n      \"tweet\"\n    );\n  });\n\n  remountUI({ performConditionalSignIn, embed: isEmbed, showPreload: isEmbed });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n  window.APP.hubChannel = hubChannel;\n  window.dispatchEvent(new CustomEvent(\"hub_channel_ready\"));\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\") && !isMobileVR) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n    if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n      document.body.classList.add(\"vr-mode-stretch\");\n    }\n  });\n\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const videoComponent = m.components[\"media-video\"];\n\n        if (videoComponent) {\n          videoComponent._ignorePauseStateChanges = true;\n\n          setTimeout(() => {\n            const video = videoComponent.video;\n\n            if (video && video.paused && !videoComponent.data.videoPaused) {\n              video.play();\n            }\n\n            videoComponent._ignorePauseStateChanges = false;\n          }, 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n\n      if (reason) {\n        remountUI({ roomUnavailableReason: reason });\n      }\n    },\n    initialIsSubscribed: subscriptions.isSubscribed(),\n    activeTips: scene.systems.tips.activeTips\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => {\n    const chatFocusTarget = document.querySelector(\".chat-focus-target\");\n    chatFocusTarget && chatFocusTarget.focus();\n  });\n\n  scene.addEventListener(\"tips_changed\", e => {\n    remountUI({ activeTips: e.detail });\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    entryManager.exitScene(\"left\");\n    remountUI({ roomUnavailableReason: \"left\" });\n  });\n\n  scene.addEventListener(\"camera_toggled\", () => remountUI({}));\n\n  scene.addEventListener(\"camera_removed\", () => remountUI({}));\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"closed\");\n    remountUI({ roomUnavailableReason: \"closed\" });\n  });\n\n  scene.addEventListener(\"action_camera_recording_started\", () => hubChannel.beginRecording());\n  scene.addEventListener(\"action_camera_recording_ended\", () => hubChannel.endRecording());\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  if (isMobileVR) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of\n      // Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    const hasVREntryDevice =\n      availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n    remountUI({ availableVREntryTypes, forcedVREntryType: qsVREntryType || (!hasVREntryDevice ? \"2d\" : null) });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  const onFirstEnvironmentLoad = () => {\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n\n    environmentScene.removeEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n  };\n\n  environmentScene.addEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n\n  environmentScene.addEventListener(\"model-loaded\", () => {\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\");\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  // Socket disconnects on refresh but we don't want to show exit scene in that scenario.\n  let isReloading = false;\n  window.addEventListener(\"beforeunload\", () => (isReloading = true));\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // We don't currently have an easy way to distinguish between being kicked (server closes socket)\n    // and a variety of other network issues that seem to produce the 1000 closure code, but the\n    // latter are probably more common. Either way, we just tell the user they got disconnected.\n    const NORMAL_CLOSURE = 1000;\n\n    if (e.code === NORMAL_CLOSURE && !isReloading) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: \"disconnected\" });\n    }\n  });\n\n  let retDeployReconnectInterval;\n  const retReconnectMaxDelayMs = 15000;\n\n  // Reticulum global channel\n  let retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n\n  const createHubChannelParams = permsToken => {\n    const params = {\n      profile: store.state.profile,\n      push_subscription_endpoint: pushSubscriptionEndpoint,\n      auth_token: null,\n      perms_token: null,\n      context: {\n        mobile: isMobile || isMobileVR,\n        embed: isEmbed\n      }\n    };\n\n    if (isMobileVR) {\n      params.context.hmd = true;\n    }\n\n    if (permsToken) {\n      params.perms_token = permsToken;\n    }\n\n    const { token } = store.state.credentials;\n    if (token) {\n      console.log(`Logged into account ${store.credentialsAccountId}`);\n      params.auth_token = token;\n    }\n\n    return params;\n  };\n\n  const migrateToNewReticulumServer = async deployNotification => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    console.log(`Reticulum deploy detected v${deployNotification.ret_version} on ${deployNotification.ret_pool}`);\n    clearInterval(retDeployReconnectInterval);\n\n    setTimeout(() => {\n      const tryReconnect = async () => {\n        invalidateReticulumMeta();\n        const reticulumMeta = await getReticulumMeta();\n\n        if (\n          reticulumMeta.pool === deployNotification.ret_pool &&\n          reticulumMeta.version === deployNotification.ret_version\n        ) {\n          console.log(\"Reticulum reconnecting.\");\n          clearInterval(retDeployReconnectInterval);\n          const oldSocket = retPhxChannel.socket;\n          const socket = await connectToReticulum(isDebug, oldSocket.params());\n          retPhxChannel = await migrateChannelToSocket(retPhxChannel, socket);\n          await hubChannel.migrateToSocket(socket, createHubChannelParams());\n          authChannel.setSocket(socket);\n          linkChannel.setSocket(socket);\n\n          // Disconnect old socket after a delay to ensure this user is always registered in presence.\n          setTimeout(() => {\n            console.log(\"Reconnection complete. Disconnecting old reticulum socket.\");\n            oldSocket.teardown();\n          }, 10000);\n        }\n      };\n\n      retDeployReconnectInterval = setInterval(tryReconnect, 5000);\n      tryReconnect();\n    }, Math.floor(Math.random() * retReconnectMaxDelayMs));\n  };\n\n  retPhxChannel.on(\"notice\", async data => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    if (data.event === \"ret-deploy\") {\n      await migrateToNewReticulumServer(data);\n    }\n  });\n\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, createHubChannelParams(oauthFlowPermsToken));\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    if (entry.type === \"chat\" && scene.is(\"loaded\")) {\n      scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(\n    scene,\n    entryManager,\n    hubChannel,\n    addToPresenceLog,\n    remountUI,\n    mediaSearchStore\n  );\n  document.getElementById(\"avatar-rig\").messageDispatch = messageDispatch;\n\n  let isInitialJoin = true;\n\n  // We need to be able to wait for initial presence syncs across reconnects and socket migrations,\n  // so we create this object in the outer scope and assign it a new promise on channel join.\n  const presenceSync = {\n    promise: null,\n    resolve: null\n  };\n\n  hubChannel.setPhoenixChannel(hubPhxChannel);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n      presenceSync.promise = new Promise(resolve => {\n        presenceSync.resolve = resolve;\n      });\n\n      if (isInitialJoin) {\n        store.addEventListener(\"profilechanged\", hubChannel.sendProfileUpdate.bind(hubChannel));\n\n        hubChannel.presence.onSync(() => {\n          const presence = hubChannel.presence;\n\n          remountUI({\n            sessionId: socket.params().session_id,\n            presences: presence.state,\n            entryDisallowed: !hubChannel.canEnterRoom(uiProps.hub)\n          });\n\n          const occupantCount = Object.entries(presence.state).length;\n          vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n          if (occupantCount > 1) {\n            scene.addState(\"copresent\");\n          } else {\n            scene.removeState(\"copresent\");\n          }\n\n          // HACK - Set a flag on the presence object indicating if the initial sync has completed,\n          // which is used to determine if we should fire join/leave messages into the presence log.\n          // This flag is required since we reuse these onJoin and onLeave handler functions on\n          // socket migrations.\n          presence.__hadInitialSync = true;\n\n          presenceSync.resolve();\n\n          presence.onJoin((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync (o/w the user\n            // will see join messages for every user.)\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            const meta = info.metas[info.metas.length - 1];\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n\n            if (occupantCount <= NOISY_OCCUPANT_COUNT) {\n              if (current) {\n                // Change to existing presence\n                const isSelf = sessionId === socket.params().session_id;\n                const currentMeta = current.metas[0];\n\n                if (\n                  !isSelf &&\n                  currentMeta.presence !== meta.presence &&\n                  meta.presence === \"room\" &&\n                  meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"entered\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n\n                if (\n                  currentMeta.profile &&\n                  meta.profile &&\n                  currentMeta.profile.displayName !== meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"display_name_changed\",\n                    oldName: currentMeta.profile.displayName,\n                    newName: meta.profile.displayName\n                  });\n                }\n              } else if (info.metas.length === 1) {\n                // New presence\n                const meta = info.metas[0];\n\n                if (meta.presence && meta.profile.displayName) {\n                  addToPresenceLog({\n                    type: \"join\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n              }\n            }\n\n            scene.emit(\"presence_updated\", {\n              sessionId,\n              profile: meta.profile,\n              roles: meta.roles,\n              permissions: meta.permissions,\n              streaming: meta.streaming,\n              recording: meta.recording\n            });\n          });\n\n          presence.onLeave((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            if (current && current.metas.length > 0) return;\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n            if (occupantCount > NOISY_OCCUPANT_COUNT) return;\n\n            const meta = info.metas[0];\n\n            if (meta.profile.displayName) {\n              addToPresenceLog({\n                type: \"leave\",\n                name: meta.profile.displayName\n              });\n            }\n          });\n        });\n      }\n\n      isInitialJoin = false;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      scene.addEventListener(\"adapter-ready\", async ({ detail: adapter }) => {\n        // HUGE HACK Safari does not like it if the first peer seen does not immediately\n        // send audio over its media stream. Otherwise, the stream doesn't work and stays\n        // silent. (Though subsequent peers work fine.)\n        //\n        // This hooks up a simple audio pipeline to push a short tone over the WebRTC\n        // media stream as its created to mitigate this Safari bug.\n        //\n        // Users will never hear this tone -- the outgoing media track is overwritten\n        // before we spawn our avatar, which is when other users will begin hearing\n        // the audio.\n        //\n        // This only covers the case where a Safari user is in the room and the first\n        // other user joins. If a user is in the room and Safari user joins,\n        // then Safari can fail to receive audio from a single peer (it does not seem\n        // to be related to silence, but may be a factor.)\n        const ctx = THREE.AudioContext.getContext();\n        const oscillator = ctx.createOscillator();\n        const gain = ctx.createGain();\n        gain.gain.setValueAtTime(0.01, ctx.currentTime);\n        const dest = ctx.createMediaStreamDestination();\n        oscillator.connect(gain);\n        gain.connect(dest);\n        oscillator.start();\n        const stream = dest.stream;\n        const track = stream.getAudioTracks()[0];\n        adapter.setClientId(socket.params().session_id);\n        adapter.setJoinToken(data.perms_token);\n        hubChannel.addEventListener(\"permissions-refreshed\", e => adapter.setJoinToken(e.detail.permsToken));\n\n        // Stop the tone after we've connected, which seems to mitigate the issue without actually\n        // having to keep this playing and using bandwidth.\n        scene.addEventListener(\n          \"didConnectToNetworkedScene\",\n          () => {\n            oscillator.stop();\n            track.enabled = false;\n          },\n          { once: true }\n        );\n\n        await adapter.setLocalMediaStream(stream);\n      });\n      subscriptions.setHubChannel(hubChannel);\n\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites,\n        initialIsSubscribed: subscriptions.isSubscribed()\n      });\n\n      await presenceSync.promise;\n\n      handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthDialog: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"denied\" });\n      }\n\n      console.error(res);\n    });\n\n  const handleIncomingNAF = data => {\n    if (!NAF.connection.adapter) return;\n\n    NAF.connection.adapter.onData(authorizeOrSanitizeMessage(data), PHOENIX_RELIABLE_NAF);\n  };\n\n  hubPhxChannel.on(\"naf\", data => handleIncomingNAF(data));\n  hubPhxChannel.on(\"nafr\", ({ from_session_id, naf: unparsedData }) => {\n    // Server optimization: server passes through unparsed NAF message, we must now parse it.\n    const data = JSON.parse(unparsedData);\n    data.from_session_id = from_session_id;\n    handleIncomingNAF(data);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name, type, body, maySpawn, sessionId: session_id };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n\n    updateUIForHub(hub, hubChannel);\n\n    if (stale_fields.includes(\"scene\")) {\n      const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n      fader.fadeOut().then(() => {\n        scene.emit(\"reset_scene\");\n        updateEnvironmentForHub(hub, entryManager);\n      });\n\n      addToPresenceLog({\n        type: \"scene_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"member_permissions\")) {\n      hubChannel.fetchPermissions();\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      addToPresenceLog({\n        type: \"hub_name_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n  });\n\n  hubPhxChannel.on(\"permissions_updated\", () => hubChannel.fetchPermissions());\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId && !scene.is(\"muted\")) {\n      scene.emit(\"action_mute\");\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export default function patchThreeAllocations() {\n  const renderer = AFRAME.scenes[0].renderer;\n  const gl = renderer.context;\n\n  // These functions in three.js uses the arguments object, which allocates.\n  renderer.state.texImage2D = function(a, b, c, d, e, f, g, h, i) {\n    try {\n      if (g === undefined) {\n        gl.texImage2D(a, b, c, d, e, f);\n      } else {\n        gl.texImage2D(a, b, c, d, e, f, g, h, i);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n\n  renderer.state.compressedTexImage2D = function(a, b, c, d, e, f, g, h, i, j) {\n    try {\n      if (h === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g);\n      } else if (i === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h);\n      } else if (j === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i);\n      } else {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i, j);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n}\n"],"sourceRoot":""}